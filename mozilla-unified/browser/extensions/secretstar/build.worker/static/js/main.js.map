{"version":3,"file":"static/js/main.js","mappings":"iHAEA,MAAMA,EAAMC,EAAQ,KACdC,EAAkBD,EAAQ,KAEhCE,EAAQH,IAAMA,EACdG,EAAQD,gBAAkBA,C,4BCL1B,MAAME,EAAMH,EAAQ,KACdI,EAAaJ,EAAQ,KACrBC,EAAkBD,EAAQ,KAEhCE,EAAQG,eAAiB,MAAMC,EAG7BC,WAAAA,CAAYC,GAAeC,EAAKC,IAC9B,IAAIC,EAAa,KACjB,QAAaC,IAATF,IACFC,EAAaR,EAAIU,cAAcH,GACZ,OAAfC,GACF,MAAM,IAAIG,UAAU,qBAAqBJ,KAI7C,MAAMK,EAAYZ,EAAIU,cAAcJ,EAAK,CAAEO,QAASL,IACpD,GAAkB,OAAdI,EACF,MAAM,IAAID,UAAU,gBAAgBL,KAGtC,MAAMQ,EAA4B,OAApBF,EAAUE,MAAiBF,EAAUE,MAAQ,GAE3DC,KAAKC,KAAOJ,EAIZG,KAAKE,OAASnB,EAAgBoB,WAAWb,EAAc,CAACS,GAAQ,CAAEK,iBAAiB,IACnFJ,KAAKE,OAAOD,KAAOD,IACrB,CAEA,YAAOK,CAAMf,EAAcgB,EAAOd,GAChC,IACE,OAAO,IAAIJ,EAAQE,EAAc,CAACgB,EAAOd,GAC3C,CAAE,MACA,OAAO,IACT,CACF,CAEA,eAAOe,CAAShB,EAAKC,GACnB,IAAIC,EAAa,KACjB,YAAaC,IAATF,IACFC,EAAaR,EAAIU,cAAcH,GACZ,OAAfC,KAMY,OADAR,EAAIU,cAAcJ,EAAK,CAAEO,QAASL,GAMtD,CAEA,QAAIe,GACF,OAAOvB,EAAIwB,aAAaT,KAAKC,KAC/B,CAEA,QAAIO,CAAKE,GACP,MAAMb,EAAYZ,EAAIU,cAAce,GACpC,GAAkB,OAAdb,EACF,MAAM,IAAID,UAAU,gBAAgBc,KAGtCV,KAAKC,KAAOJ,EAEZG,KAAKE,OAAOS,MAAMC,OAAO,GACzB,MAAM,MAAEb,GAAUF,EACJ,OAAVE,IACFC,KAAKE,OAAOS,MAAQzB,EAAW2B,sBAAsBd,GAEzD,CAEA,UAAIe,GACF,OAAO7B,EAAI8B,mBAAmBf,KAAKC,KACrC,CAEA,YAAIe,GACF,MAAO,GAAGhB,KAAKC,KAAKgB,SACtB,CAEA,YAAID,CAASN,GACXzB,EAAIU,cAAc,GAAGe,KAAM,CAAEnB,IAAKS,KAAKC,KAAMiB,cAAe,gBAC9D,CAEA,YAAIC,GACF,OAAOnB,KAAKC,KAAKkB,QACnB,CAEA,YAAIA,CAAST,GACPzB,EAAImC,gCAAgCpB,KAAKC,OAI7ChB,EAAIoC,eAAerB,KAAKC,KAAMS,EAChC,CAEA,YAAIY,GACF,OAAOtB,KAAKC,KAAKqB,QACnB,CAEA,YAAIA,CAASZ,GACPzB,EAAImC,gCAAgCpB,KAAKC,OAI7ChB,EAAIsC,eAAevB,KAAKC,KAAMS,EAChC,CAEA,QAAIc,GACF,MAAMjC,EAAMS,KAAKC,KAEjB,OAAiB,OAAbV,EAAIiC,KACC,GAGQ,OAAbjC,EAAIkC,KACCxC,EAAIyC,cAAcnC,EAAIiC,MAGxB,GAAGvC,EAAIyC,cAAcnC,EAAIiC,SAASvC,EAAI0C,iBAAiBpC,EAAIkC,OACpE,CAEA,QAAID,CAAKd,GACHzB,EAAI2C,gBAAgB5B,KAAKC,OAI7BhB,EAAIU,cAAce,EAAG,CAAEnB,IAAKS,KAAKC,KAAMiB,cAAe,QACxD,CAEA,YAAIW,GACF,OAAuB,OAAnB7B,KAAKC,KAAKuB,KACL,GAGFvC,EAAIyC,cAAc1B,KAAKC,KAAKuB,KACrC,CAEA,YAAIK,CAASnB,GACPzB,EAAI2C,gBAAgB5B,KAAKC,OAI7BhB,EAAIU,cAAce,EAAG,CAAEnB,IAAKS,KAAKC,KAAMiB,cAAe,YACxD,CAEA,QAAIO,GACF,OAAuB,OAAnBzB,KAAKC,KAAKwB,KACL,GAGFxC,EAAI0C,iBAAiB3B,KAAKC,KAAKwB,KACxC,CAEA,QAAIA,CAAKf,GACHzB,EAAImC,gCAAgCpB,KAAKC,QAInC,KAANS,EACFV,KAAKC,KAAKwB,KAAO,KAEjBxC,EAAIU,cAAce,EAAG,CAAEnB,IAAKS,KAAKC,KAAMiB,cAAe,SAE1D,CAEA,YAAIY,GACF,OAAO7C,EAAI8C,cAAc/B,KAAKC,KAChC,CAEA,YAAI6B,CAASpB,GACPzB,EAAI2C,gBAAgB5B,KAAKC,QAI7BD,KAAKC,KAAK+B,KAAO,GACjB/C,EAAIU,cAAce,EAAG,CAAEnB,IAAKS,KAAKC,KAAMiB,cAAe,eACxD,CAEA,UAAIe,GACF,OAAwB,OAApBjC,KAAKC,KAAKF,OAAsC,KAApBC,KAAKC,KAAKF,MACjC,GAGF,IAAIC,KAAKC,KAAKF,OACvB,CAEA,UAAIkC,CAAOvB,GACT,MAAMnB,EAAMS,KAAKC,KAEjB,GAAU,KAANS,EAGF,OAFAnB,EAAIQ,MAAQ,UACZC,KAAKE,OAAOS,MAAQ,IAItB,MAAML,EAAiB,MAATI,EAAE,GAAaA,EAAEwB,UAAU,GAAKxB,EAC9CnB,EAAIQ,MAAQ,GACZd,EAAIU,cAAcW,EAAO,CAAEf,MAAK2B,cAAe,UAC/ClB,KAAKE,OAAOS,MAAQzB,EAAW2B,sBAAsBP,EACvD,CAEA,gBAAI6B,GACF,OAAOnC,KAAKE,MACd,CAEA,QAAIkC,GACF,OAA2B,OAAvBpC,KAAKC,KAAKoC,UAA4C,KAAvBrC,KAAKC,KAAKoC,SACpC,GAGF,IAAIrC,KAAKC,KAAKoC,UACvB,CAEA,QAAID,CAAK1B,GACP,GAAU,KAANA,EAEF,YADAV,KAAKC,KAAKoC,SAAW,MAIvB,MAAM/B,EAAiB,MAATI,EAAE,GAAaA,EAAEwB,UAAU,GAAKxB,EAC9CV,KAAKC,KAAKoC,SAAW,GACrBpD,EAAIU,cAAcW,EAAO,CAAEf,IAAKS,KAAKC,KAAMiB,cAAe,YAC5D,CAEAoB,MAAAA,GACE,OAAOtC,KAAKQ,IACd,E,uBCtOF,MAAM+B,EAAc,IAAIC,YAClBC,EAAc,IAAIC,YAAY,QAAS,CAAEC,WAAW,IAU1DC,EAAO5D,QAAU,CACf6D,WATF,SAAoBC,GAClB,OAAOP,EAAYQ,OAAOD,EAC5B,EAQEE,qBANF,SAA8BC,GAC5B,OAAOR,EAAYS,OAAOD,EAC5B,E,6BCTA,MAAM,eACJE,EAAc,kCACdC,EAAiC,6CACjCC,GACEvE,EAAQ,KAEZ8D,EAAO5D,QAAU,MACfK,WAAAA,CAAYiE,GACVtD,KAAKuD,KAAOD,CACd,CAEA,QAAIE,GACF,OAAOxD,KAAKuD,KAAKC,IACnB,CAEAC,GAAAA,CAAIC,GAEF,OADAA,EAAOP,EAAeQ,OAAOD,IACtB1D,KAAKuD,KAAKE,IAAIC,EACvB,CAEAE,GAAAA,CAAIF,GAEF,OADAA,EAAOP,EAAeQ,OAAOD,IACtB1D,KAAKuD,KAAKK,IAAIF,EACvB,CAEAG,GAAAA,CAAIH,EAAMI,GAIR,GAHAJ,EAAOP,EAAeQ,OAAOD,IAC7BI,EAAQH,OAAOG,IAEVV,EAAkCM,GACrC,MAAM,IAAIK,MAAM,qCAAqCL,8CAEvD,IAAKL,EAA6CS,GAChD,MAAM,IAAIC,MAAM,sCAAsCD,4DAIxD,OAAO9D,KAAKuD,KAAKM,IAAIH,EAAMI,EAC7B,CAEAE,KAAAA,GACEhE,KAAKuD,KAAKS,OACZ,CAEAC,OAAOP,GAEL,OADAA,EAAOP,EAAeQ,OAAOD,IACtB1D,KAAKuD,KAAKU,OAAOP,EAC1B,CAEAQ,OAAAA,CAAQC,EAAYC,GAClBpE,KAAKuD,KAAKW,QAAQC,EAAYC,EAChC,CAEAC,IAAAA,GACE,OAAOrE,KAAKuD,KAAKc,MACnB,CAEAC,MAAAA,GACE,OAAOtE,KAAKuD,KAAKe,QACnB,CAEAC,OAAAA,GACE,OAAOvE,KAAKuD,KAAKgB,SACnB,CAEA,CAACC,OAAOC,YACN,OAAOzE,KAAKuD,KAAKiB,OAAOC,WAC1B,E,2BC7DF,MAAMC,EAASC,SAASC,UAAUC,KAAKC,KAAKC,OAAOH,UAAUI,gBAqBvDC,EAAgBT,OAAO,WACvBU,EAAaV,OAAO,QACpBW,EAAmBX,OAAO,qBAC1BY,EAAqBZ,OAAOa,IAAI,oCAEhCC,EAAyBP,OAAOQ,eAAeR,OAAOQ,gBAAeC,kBAAoB,IAAGZ,WAElG,SAASa,EAAiBnG,GACxB,GAAIoF,EAAOpF,EAAc8F,GACvB,OAAO9F,EAAa8F,GAGtB,MAAMM,EAAeX,OAAOY,OAAO,MAKnCD,EAAa,sBAAwBpG,EAAayF,OAAOH,UACzDc,EAAa,uBAAyBX,OAAOQ,eAC3CR,OAAOQ,gBAAe,IAAIjG,EAAasG,OAAQpB,OAAOC,cAGxD,IACEiB,EAAa,4BAA8BX,OAAOQ,eAChDR,OAAOQ,eACLjG,EAAauG,KAAK,2BAA2BjB,WAGnD,CAAE,MACAc,EAAa,4BAA8BJ,CAC7C,CAGA,OADAhG,EAAa8F,GAAsBM,EAC5BA,CACT,CAeA,SAASI,EAAeC,GACtB,OAAOA,EAAOA,EAAKd,GAAiB,IACtC,CAEA,SAASe,EAAeC,GACtB,OAAOA,EAAUA,EAAQf,GAAc,IACzC,CAYA,MAAMgB,EAAqB1B,OAAO,YAiB5B2B,EACFpB,OAAOqB,yBAAyBC,YAAYzB,UAAW,cAAcnB,IA0BnE6C,EAAwB9B,OAAO,2BAC/B+B,EAA2B/B,OAAO,8BAClCgC,EAAuBhC,OAAO,0BAC9BiC,EAAyBjC,OAAO,4BAChCkC,EAAalC,OAAO,wBACpBmC,EAAgBnC,OAAO,4BACvBoC,EAAqBpC,OAAO,iCAC5BqC,EAAWrC,OAAO,sBAClBsC,EAActC,OAAO,0BACrBuC,EAAmBvC,OAAO,+BAC1BwC,EAAcxC,OAAO,yBAErByC,EAAoBzC,OAAO,gDAC3B0C,EAAsB1C,OAAO,+BAC7B2C,EAAoB3C,OAAO,uCAC3B4C,EAAmB5C,OAAO,mCAEhC5B,EAAO5D,QAAoB,CACzBqI,SA1JF,SAAkBvD,GAChB,MAAyB,iBAAVA,GAAgC,OAAVA,GAAoC,mBAAVA,CACjE,EAyJEY,SACA4C,OApJF,SAAgBC,EAAQC,GACtB,IAAK,MAAMC,KAAOC,QAAQC,QAAQH,GAAS,CACzC,MAAMI,EAAaF,QAAQtB,yBAAyBoB,EAAQC,GAC5D,GAAIG,IAAeF,QAAQG,eAAeN,EAAQE,EAAKG,GACrD,MAAM,IAAIhI,UAAU,6BAA6B+D,OAAO8D,KAE5D,CACF,EA8IEK,iBA5IF,SAA0BxI,EAAcyI,GACtC,MAAMrC,EAAeD,EAAiBnG,GACtC,OAAOyF,OAAOiD,iBACZjD,OAAOY,OAAOD,EAAa,uBAC3BX,OAAOkD,0BAA0BF,GAErC,EAuIE9C,gBACAC,aACAgD,cAnGF,SAAuBjC,EAASkC,EAAMC,GAKpC,OAJKnC,EAAQd,KACXc,EAAQd,GAAoBJ,OAAOY,OAAO,OAGxCwC,KAAQlC,EAAQd,KAIpBc,EAAQd,GAAkBgD,GAAQC,KAHzBnC,EAAQd,GAAkBgD,EAKrC,EAyFE/C,qBACAK,mBACAK,iBACAE,iBACAqC,kBAnFF,SAA2BtC,GAEzB,OADgBD,EAAeC,IACJA,CAC7B,EAiFEuC,kBA/EF,SAA2BrC,GAEzB,OADaD,EAAeC,IACPA,CACvB,EA6EEC,qBACAqC,cAzDF,SAAuBzE,GACrB,IAEE,OADAqC,EAAiBtB,KAAKf,IACf,CACT,CAAE,MAAO0E,GACP,OAAO,CACT,CACF,EAmDEC,qBA3EF,SAA8BC,GAC5B,GAAiB,iBAANA,EACT,OAAO,EAET,MAAMC,EAAID,IAAM,EAChB,OAAIC,IAAM,GAAK,GAAK,GAIhBD,IADM,GAAGC,GAKf,EA+DErC,wBACAC,2BACAC,uBACAC,yBACAC,aACAC,gBACAC,qBACAC,WACAC,cACAC,mBACAC,cACAC,oBACAC,sBACAC,oBACAC,mBACAwB,eAjEF,UAAyBnB,EAAK3D,GAAQ+E,GACpC,IAAIC,EACJ,OAAQD,GACN,IAAK,MACHC,EAASrB,EACT,MACF,IAAK,QACHqB,EAAShF,EACT,MACF,IAAK,YACHgF,EAAS,CAACrB,EAAK3D,GAGnB,MAAO,CAAEA,MAAOgF,EAAQC,MAAM,EAChC,E,6BCxIA,MAAM7J,EAAaJ,EAAQ,KAE3BE,EAAQG,eAAiB,MACvBE,WAAAA,CAAYC,EAAc0J,GAAiB,gBAAE5I,GAAkB,IAC7D,IAAI6I,EAAOD,EAAgB,GAQ3B,GAPAhJ,KAAKW,MAAQ,GACbX,KAAKC,KAAO,KAEPG,GAAmC,iBAAT6I,GAAiC,MAAZA,EAAK,KACvDA,EAAOA,EAAKC,MAAM,IAGhBtD,MAAMuD,QAAQF,GAChB,IAAK,MAAMG,KAAQH,EAAM,CACvB,GAAoB,IAAhBG,EAAKC,OACP,MAAM,IAAIzJ,UAAU,gHAGtBI,KAAKW,MAAM2I,KAAK,CAACF,EAAK,GAAIA,EAAK,IACjC,MACK,GAAoB,iBAATH,GAAqD,OAAhClE,OAAOQ,eAAe0D,GAC3D,IAAK,MAAMvF,KAAQqB,OAAOV,KAAK4E,GAAO,CACpC,MAAMnF,EAAQmF,EAAKvF,GACnB1D,KAAKW,MAAM2I,KAAK,CAAC5F,EAAMI,GACzB,MAEA9D,KAAKW,MAAQzB,EAAW2B,sBAAsBoI,EAElD,CAEAM,YAAAA,GACE,GAAkB,OAAdvJ,KAAKC,KAAe,CACtB,IAAIuJ,EAAkBtK,EAAWuK,oBAAoBzJ,KAAKW,OAClC,KAApB6I,IACFA,EAAkB,MAGpBxJ,KAAKC,KAAKA,KAAKF,MAAQyJ,CACzB,CACF,CAEA,QAAIhG,GACF,OAAOxD,KAAKW,MAAM0I,MACpB,CAEAK,MAAAA,CAAOhG,EAAMI,GACX9D,KAAKW,MAAM2I,KAAK,CAAC5F,EAAMI,IACvB9D,KAAKuJ,cACP,CAEAtF,OAAOP,EAAMI,GACX,IAAI6E,EAAI,EACR,KAAOA,EAAI3I,KAAKW,MAAM0I,QAChBrJ,KAAKW,MAAMgI,GAAG,KAAOjF,QAAmBhE,IAAVoE,GAAuB9D,KAAKW,MAAMgI,GAAG,KAAO7E,EAG5E6E,IAFA3I,KAAKW,MAAMC,OAAO+H,EAAG,GAKzB3I,KAAKuJ,cACP,CAEA9F,GAAAA,CAAIC,GACF,IAAK,MAAMiG,KAAS3J,KAAKW,MACvB,GAAIgJ,EAAM,KAAOjG,EACf,OAAOiG,EAAM,GAGjB,OAAO,IACT,CAEAC,MAAAA,CAAOlG,GACL,MAAMmG,EAAS,GACf,IAAK,MAAMF,KAAS3J,KAAKW,MACnBgJ,EAAM,KAAOjG,GACfmG,EAAOP,KAAKK,EAAM,IAGtB,OAAOE,CACT,CAEAjG,GAAAA,CAAIF,EAAMI,GACR,IAAK,MAAM6F,KAAS3J,KAAKW,MACvB,GAAIgJ,EAAM,KAAOjG,SAAmBhE,IAAVoE,GAAuB6F,EAAM,KAAO7F,GAC5D,OAAO,EAGX,OAAO,CACT,CAEAD,GAAAA,CAAIH,EAAMI,GACR,IAAIgG,GAAQ,EACRnB,EAAI,EACR,KAAOA,EAAI3I,KAAKW,MAAM0I,QAChBrJ,KAAKW,MAAMgI,GAAG,KAAOjF,EACnBoG,EACF9J,KAAKW,MAAMC,OAAO+H,EAAG,IAErBmB,GAAQ,EACR9J,KAAKW,MAAMgI,GAAG,GAAK7E,EACnB6E,KAGFA,IAGCmB,GACH9J,KAAKW,MAAM2I,KAAK,CAAC5F,EAAMI,IAEzB9D,KAAKuJ,cACP,CAEAQ,IAAAA,GACE/J,KAAKW,MAAMoJ,MAAK,CAACC,EAAGC,IACdD,EAAE,GAAKC,EAAE,IACH,EAEND,EAAE,GAAKC,EAAE,GACJ,EAEF,IAGTjK,KAAKuJ,cACP,CAEA,CAAC/E,OAAOC,YACN,OAAOzE,KAAKW,MAAM6D,OAAOC,WAC3B,CAEAyF,QAAAA,GACE,OAAOhL,EAAWuK,oBAAoBzJ,KAAKW,MAC7C,E,2BCnIF3B,EAAQmL,uCAAyCrH,GACxCA,EAAOsH,QAAQ,iBAAkB,IAAIA,QAAQ,iBAAkB,IAGxEpL,EAAQqL,iBAAmB/J,GAClBsF,MAAM0E,KAAKhK,GAAOiK,GAAQ5G,OAAO6G,cAAcD,KAAOE,KAAK,IAGpEzL,EAAQ0L,sBAAwBC,IAC9B,IAAIC,EACJ,IACEA,EAAWC,KAAKF,EAClB,CAAE,MACA,OAAO,IACT,CAEA,OAAOG,WAAWR,KAAKM,GAAUG,GAAKA,EAAEC,YAAY,IAAG,C,6BCjBzD,MAAM,uCACJC,EAAsC,6BACtCC,EAA4B,qBAC5BC,EAAoB,kCACpB/H,EAAiC,6CACjCC,EAA4C,eAC5CF,EAAc,0BACdiI,GACEtM,EAAQ,KAEZ8D,EAAO5D,QAAUsB,IACfA,EAAQ2K,EAAuC3K,GAE/C,IAAI+K,EAAW,EACXC,EAAO,GACX,KAAOD,EAAW/K,EAAM+I,QAA8B,MAApB/I,EAAM+K,IACtCC,GAAQhL,EAAM+K,KACZA,EAGJ,GAAoB,IAAhBC,EAAKjC,SAAiBjG,EAAkCkI,GAC1D,OAAO,KAGT,GAAID,GAAY/K,EAAM+I,OACpB,OAAO,OAIPgC,EAEF,IAAIE,EAAU,GACd,KAAOF,EAAW/K,EAAM+I,QAA8B,MAApB/I,EAAM+K,IACtCE,GAAWjL,EAAM+K,KACfA,EAKJ,GAFAE,EAAUL,EAA6BK,GAEhB,IAAnBA,EAAQlC,SAAiBjG,EAAkCmI,GAC7D,OAAO,KAGT,MAAMC,EAAW,CACfF,KAAMnI,EAAemI,GACrBC,QAASpI,EAAeoI,GACxBE,WAAY,IAAIC,KAGlB,KAAOL,EAAW/K,EAAM+I,QAAQ,CAI9B,MAFEgC,EAEKF,EAAqB7K,EAAM+K,OAC9BA,EAGJ,IAAIM,EAAgB,GACpB,KAAON,EAAW/K,EAAM+I,QAA8B,MAApB/I,EAAM+K,IAAyC,MAApB/K,EAAM+K,IACjEM,GAAiBrL,EAAM+K,KACrBA,EAIJ,GAFAM,EAAgBxI,EAAewI,GAE3BN,EAAW/K,EAAM+I,OAAQ,CAC3B,GAAwB,MAApB/I,EAAM+K,GACR,WAIAA,CACJ,CAEA,IAAIO,EAAiB,KACrB,GAAwB,MAApBtL,EAAM+K,GAGR,KAFCO,EAAgBP,GAAYD,EAA0B9K,EAAO+K,GAEvDA,EAAW/K,EAAM+I,QAA8B,MAApB/I,EAAM+K,MACpCA,MAEC,CAEL,IADAO,EAAiB,GACVP,EAAW/K,EAAM+I,QAA8B,MAApB/I,EAAM+K,IACtCO,GAAkBtL,EAAM+K,KACtBA,EAKJ,GAFAO,EAAiBV,EAA6BU,GAEvB,KAAnBA,EACF,QAEJ,CAEID,EAActC,OAAS,GACvBjG,EAAkCuI,IAClCtI,EAA6CuI,KAC5CJ,EAASC,WAAW7H,IAAI+H,IAC3BH,EAASC,WAAW5H,IAAI8H,EAAeC,EAE3C,CAEA,OAAOJ,CAAQ,C,uBCrGjB5I,EAAO5D,QAAQ6M,eAAiB,CAC9BC,OAAQ,EACRC,MAAO,EACPC,WAAY,EACZC,UAAW,EACXC,QAAS,E,6BCLX,MAAMC,EAAWrN,EAAQ,KACnBsN,EAAUtN,EAAQ,KAClBuN,EAAevN,EAAQ,MACvB,eAAE+M,GAAmB/M,EAAQ,KAEnC,SAASwN,EAAiBC,GACxB,MAAO,gBAAgBC,KAAKD,EAC9B,CAEA,SAASE,EAAWC,GAClB,IAAIC,EAAQ,EACRC,EAAMP,EAAahD,OAAS,EAEhC,KAAOsD,GAASC,GAAK,CACnB,MAAMC,EAAMC,KAAKC,OAAOJ,EAAQC,GAAO,GAEjCrF,EAAS8E,EAAaQ,GACtBG,EAAMpH,MAAMuD,QAAQ5B,EAAO,IAAMA,EAAO,GAAG,GAAKA,EAAO,GACvD0F,EAAMrH,MAAMuD,QAAQ5B,EAAO,IAAMA,EAAO,GAAG,GAAKA,EAAO,GAE7D,GAAIyF,GAAON,GAAOO,GAAOP,EACvB,OAAOnF,EAAO2B,MAAM,GACX8D,EAAMN,EACfE,EAAMC,EAAM,EAEZF,EAAQE,EAAM,CAElB,CAEA,OAAO,IACT,CAqCA,SAASK,EAAcC,GAAO,aAC5BC,EAAY,UACZC,EAAS,aACTC,EAAY,uBACZC,EAAsB,kBACtBC,EAAiB,OACjBC,IAGA,GAAqB,IAAjBN,EAAM9D,OACR,OAAO,EAIT,GAAI8D,EAAMO,UAAU,SAAWP,EAC7B,OAAO,EAGT,MAAMQ,EAAa/H,MAAM0E,KAAK6C,GAM9B,GAAIC,IACqB,MAAlBO,EAAW,IAAgC,MAAlBA,EAAW,IACpCR,EAAMS,WAAW,MAAQT,EAAMU,SAAS,MAC3C,OAAO,EAKX,IAAKT,GACCD,EAAMS,WAAW,QACnB,OAAO,EAKX,GAAIT,EAAMW,SAAS,KACjB,OAAO,EAIT,GAAI1B,EAAQ2B,eAAevB,KAAKmB,EAAW,IACzC,OAAO,EAIT,IAAK,MAAMK,KAAML,EAAY,CAC3B,MAAMM,EAAYD,EAAGhD,YAAY,IAC1BkD,GAAUzB,EAAWwB,GAC5B,GAAIV,GAEF,GAAIW,IAAWrC,EAAeE,MAC5B,OAAO,OAEJ,GAAImC,IAAWrC,EAAeE,OAASmC,IAAWrC,EAAeI,UAEtE,OAAO,EAKT,GAAIuB,GAAqBS,GAAa,MAC/B,uBAAuBzB,KAAKwB,GAC/B,OAAO,CAGb,CAIA,GAAIV,EAAc,CAChB,IAAIa,EAAO,EACX,IAAK,MAAOxF,EAAGqF,KAAOL,EAAWpJ,UAC/B,GAAW,MAAPyJ,GAA0B,MAAPA,EAAiB,CACtC,GAAIrF,EAAI,EAAG,CACT,GAAIyD,EAAQgC,qBAAqB5B,KAAKmB,EAAWhF,EAAI,IACnD,SAEF,GAAW,MAAPqF,EAAiB,CAEnB,MAAMK,EAAOV,EAAWW,QAAQ,IAAU3F,EAAI,GACxC6D,EAAO6B,EAAO,EAAIV,EAAWzE,MAAMiF,GAAQR,EAAWzE,MAAMiF,EAAME,GACxE,GAAIjC,EAAQmC,UAAU/B,KAAKA,EAAK/B,KAAK,KAAM,CACzC0D,EAAOxF,EAAI,EACX,QACF,CACF,CACF,CACA,OAAO,CACT,CAEJ,CAIA,GAAI0E,GAAaI,EAAQ,CACvB,IAAIe,EAGJ,GAAIpC,EAAQqC,UAAUjC,KAAKmB,EAAW,IACpCa,GAAM,MACD,KAAIpC,EAAQsC,UAAUlC,KAAKmB,EAAW,IAG3C,OAAO,EAFPa,GAAM,CAGR,CAEA,GAAIA,GAEF,IAAKpC,EAAQuC,OAAOnC,KAAKW,KACpBf,EAAQwC,OAAOpC,KAAKW,IACpBf,EAAQyC,SAASrC,KAAKW,IAAUf,EAAQ0C,SAAStC,KAAKW,GACzD,OAAO,OAEJ,IAAKf,EAAQ2C,OAAOvC,KAAKW,KACpBf,EAAQ4C,OAAOxC,KAAKW,GAC9B,OAAO,CAEX,CAEA,OAAO,CACT,CAgBA,SAAS8B,EAAWC,EAAYC,GAE9B,IAAIrM,EAjLN,SAAkBoM,GAAY,uBAAE3B,IAC9B,IAAI6B,EAAY,GAEhB,IAAK,MAAMpB,KAAMkB,EAAY,CAC3B,MAAOhB,EAAQmB,GAAW5C,EAAWuB,EAAGhD,YAAY,IAEpD,OAAQkD,GACN,KAAKrC,EAAeG,WAClBoD,GAAapB,EACb,MACF,KAAKnC,EAAeK,QAClB,MACF,KAAKL,EAAeC,OAEhBsD,GADE7B,GAAiC,MAAPS,EACf,KAEAqB,EAEf,MACF,KAAKxD,EAAeI,UAEhBmD,GADE7B,EACW8B,EAEArB,EAEf,MACF,KAAKnC,EAAeE,MAClBqD,GAAapB,EAGnB,CAEA,OAAOoB,CACT,CAgJeE,CAASJ,EAAYC,GAGlCrM,EAASA,EAAO4K,UAAU,OAG1B,MAAM6B,EAASzM,EAAO0M,MAAM,KACtB/B,EAvBR,SAAsB8B,GACpB,MAAME,EAASF,EAAOjM,KAAI6J,IACxB,GAAIA,EAAMS,WAAW,QACnB,IACE,OAAOzB,EAASjJ,OAAOiK,EAAMjL,UAAU,GACzC,CAAE,MACA,MAAO,EACT,CAEF,OAAOiL,CAAK,IACX1C,KAAK,KACR,OAAO2B,EAAQsD,WAAWlD,KAAKiD,EACjC,CAWiBE,CAAaJ,GAG5B,IAAIK,GAAQ,EACZ,IAAK,MAAOjH,EAAGkH,KAAcN,EAAOhL,UAAW,CAC7C,IAAI4I,EAAQ0C,EACRC,EAAqCX,EAAQ5B,uBACjD,GAAIJ,EAAMS,WAAW,QAAS,CAC5B,GAAItB,EAAiBa,GAAQ,CAC3ByC,GAAQ,EACR,QACF,CAEA,IACEzC,EAAQhB,EAASjJ,OAAOiK,EAAMjL,UAAU,GAC1C,CAAE,MACA,IAAKiN,EAAQY,sBAAuB,CAClCH,GAAQ,EACR,QACF,CACF,CACAL,EAAO5G,GAAKwE,EAEE,KAAVA,GAAiBb,EAAiBa,KACpCyC,GAAQ,GAGVE,GAAqC,CACvC,CAGIF,IAGe1C,EAAcC,EAAO,IACnCgC,EACH5B,uBAAwBuC,EACxBrC,aAGAmC,GAAQ,GAEZ,CAEA,MAAO,CACL9M,OAAQyM,EAAO9E,KAAK,KACpBmF,QAEJ,CA0EAhN,EAAO5D,QAAU,CACfgR,QAzEF,SAAiBd,GAAY,aAC3B9B,GAAe,EAAK,UACpBC,GAAY,EAAK,aACjBC,GAAe,EAAK,kBACpBE,GAAoB,EAAK,gBACzByC,GAAkB,EAAK,uBACvB1C,GAAyB,EAAK,sBAC9BwC,GAAwB,GACtB,CAAC,GACH,MAAMjH,EAASmG,EAAWC,EAAY,CACpC9B,eACAC,YACAC,eACAE,oBACAD,yBACAwC,0BAEF,IAAIR,EAASzG,EAAOhG,OAAO0M,MAAM,KAYjC,GAXAD,EAASA,EAAOjM,KAAI4M,IAClB,GAAI5D,EAAiB4D,GACnB,IACE,MAAO,OAAO/D,EAASpJ,OAAOmN,IAChC,CAAE,MACApH,EAAO8G,OAAQ,CACjB,CAEF,OAAOM,CAAC,IAGND,EAAiB,CACnB,MAAME,EAAQZ,EAAO9E,KAAK,KAAKpB,QAC3B8G,EAAQ,KAAiB,IAAVA,KACjBrH,EAAO8G,OAAQ,GAGjB,IAAK,IAAIjH,EAAI,EAAGA,EAAI4G,EAAOlG,SAAUV,EACnC,GAAI4G,EAAO5G,GAAGU,OAAS,IAA2B,IAArBkG,EAAO5G,GAAGU,OAAc,CACnDP,EAAO8G,OAAQ,EACf,KACF,CAEJ,CAEA,OAAI9G,EAAO8G,MACF,KAEFL,EAAO9E,KAAK,IACrB,EA2BE2F,UAzBF,SAAmBlB,GAAY,aAC7B9B,GAAe,EAAK,UACpBC,GAAY,EAAK,aACjBC,GAAe,EAAK,kBACpBE,GAAoB,EAAK,uBACzBD,GAAyB,EAAK,sBAC9BwC,GAAwB,GACtB,CAAC,GACH,MAAMjH,EAASmG,EAAWC,EAAY,CACpC9B,eACAC,YACAC,eACAE,oBACAD,yBACAwC,0BAGF,MAAO,CACLN,OAAQ3G,EAAOhG,OACf8M,MAAO9G,EAAO8G,MAElB,E,wljICjVA,MAAM,WAAES,GAAevR,EAAQ,MACzB,WAAE+D,GAAe/D,EAAQ,KAE/B,SAASwR,EAAEC,GACT,OAAOA,EAAKvF,YAAY,EAC1B,CAGA,SAASwF,EAAczF,GACrB,IAAI0F,EAAM1F,EAAEb,SAAS,IAAIwG,cAKzB,OAJmB,IAAfD,EAAIpH,SACNoH,EAAM,IAAIA,KAGL,IAAIA,GACb,CAGA,SAASE,EAAmBrQ,GAC1B,MAAMuJ,EAAS,IAAIiB,WAAWxK,EAAMsQ,YACpC,IAAIC,EAAc,EAClB,IAAK,IAAIlI,EAAI,EAAGA,EAAIrI,EAAMsQ,aAAcjI,EAAG,CACzC,MAAM4B,EAAOjK,EAAMqI,GACnB,GAAa,KAAT4B,EACFV,EAAOgH,KAAiBtG,OACnB,GAAa,KAATA,GAAmB8F,EAAW/P,EAAMqI,EAAI,KAAQ0H,EAAW/P,EAAMqI,EAAI,IAEzE,CACL,MAAMmI,EAAYC,SAASpN,OAAO6G,cAAclK,EAAMqI,EAAI,GAAIrI,EAAMqI,EAAI,IAAK,IAC7EkB,EAAOgH,KAAiBC,EACxBnI,GAAK,CACP,MALEkB,EAAOgH,KAAiBtG,CAM5B,CAEA,OAAOV,EAAOX,MAAM,EAAG2H,EACzB,CASA,SAASG,EAAyBjG,GAChC,OAAOA,GAAK,IAAQA,EAAI,GAC1B,CAGA,MAAMkG,EAAgC,IAAIC,IAAI,CAACZ,EAAE,KAAMA,EAAE,KAAOA,EAAE,KAAMA,EAAE,KAAMA,EAAE,OAM5Ea,EAA6B,IAAID,IAAI,CAACZ,EAAE,KAAMA,EAAE,KAAOA,EAAE,KAAMA,EAAE,KAAMA,EAAE,OAC/E,SAASc,EAAqBrG,GAC5B,OAAOiG,EAAyBjG,IAAMoG,EAA2BvN,IAAImH,EACvE,CAQA,MAAMsG,EAA4B,IAAIH,IAAI,CAACZ,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,OAC7E,SAASgB,EAAoBvG,GAC3B,OAAOqG,EAAqBrG,IAAMsG,EAA0BzN,IAAImH,EAClE,CAGA,MAAMwG,EACJ,IAAIL,IAAI,CAACZ,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,MAAOA,EAAE,KAAMA,EAAE,OAC9E,SAASkB,EAAwBzG,GAC/B,OAAOuG,EAAoBvG,IAAMwG,EAA8B3N,IAAImH,EACrE,CAGA,MAAM0G,EAAiC,IAAIP,IAAI,CAACZ,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,OAM5EoB,EAAkC,IAAIR,IAAI,CAACZ,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,KAAMA,EAAE,OAUnF,SAASqB,EAAmC1D,EAAW2D,GACrD,MAAM3O,EAAQJ,EAAWoL,GACzB,IAAIpE,EAAS,GACb,IAAK,MAAMU,KAAQtH,EAEZ2O,EAAuBrH,GAG1BV,GAAU2G,EAAcjG,GAFxBV,GAAUlG,OAAOkO,aAAatH,GAMlC,OAAOV,CACT,CAoBAjH,EAAO5D,QAAU,CACfgS,2BACAc,wBAhFF,SAAiC/G,GAC/B,OAAOiG,EAAyBjG,IAAMkG,EAA8BrN,IAAImH,EAC1E,EA+EEqG,uBACAW,4BAvEF,SAAqChH,GACnC,OAAOqG,EAAqBrG,IAAMA,IAAMuF,EAAE,IAC5C,EAsEEgB,sBACAE,0BACAQ,0BAjDF,SAAmCjH,GACjC,OAPF,SAAkCA,GAChC,OAAOyG,EAAwBzG,IAAM0G,EAA+B7N,IAAImH,EAC1E,CAKSkH,CAAyBlH,IAAM2G,EAAgC9N,IAAImH,EAC5E,EAgDEmH,oBAlGF,SAA6B5R,GAE3B,OAAOqQ,EADO9N,EAAWvC,GAE3B,EAgGEqQ,qBACAwB,wBAtBF,SAAiC7R,EAAOsR,EAAwBQ,GAAc,GAC5E,IAAIvI,EAAS,GACb,IAAK,MAAMoE,KAAa3N,EAEpBuJ,GADEuI,GAA6B,MAAdnE,EACP,IAEA0D,EAAmC1D,EAAW2D,GAG5D,OAAO/H,CACT,EAaEwI,2BA7BF,SAAoCpE,EAAW2D,GAC7C,OAAOD,EAAmChO,OAAO6G,cAAcyD,GAAY2D,EAC7E,E,gBCjHA,MAAM,SAAEU,EAAQ,cAAEC,EAAa,YAAEC,EAAW,OAAEC,EAAM,qBAAEC,GAAyB5T,EAAQ,KAEjF6T,EAAUC,GAAUA,EAAM9F,KAAK6F,SAAWC,EAAMvJ,OAAS,GAE/DzG,EAAO5D,QAAQ6T,WAAa,IAAMF,EAAOL,GAEzC1P,EAAO5D,QAAQ8T,iBAAoBC,GAC1BR,EAAczE,SAASiF,GAErBJ,EAAOH,EAAYQ,OAAON,IAFSC,EAAOH,GAKrD5P,EAAO5D,QAAQiU,OAAUnQ,GAAWA,EAAO,GAAG4N,cAAgB5N,EAAOoG,MAAM,GAE3EtG,EAAO5D,QAAQkU,YAAc,IAAMP,EAAOF,GAE1C7P,EAAO5D,QAAQmU,gBAAkB,CAACC,EAASxL,EAAYyL,EAAON,KACrDnL,EAAayL,EAAQN,GAAM1J,QAAU+J,EAC/BxL,EAAayL,EAAQN,GACtBnL,EAAamL,GAAM1J,QAAU+J,EAC5BxL,EAAamL,GACdM,EAAQN,GAAM1J,QAAU+J,EACvBC,EAAQN,EAERA,EAAK7J,MAAM,EAAGkK,E,uBCpB7B,SAASE,EAAavI,GACpB,OAAOA,GAAK,IAAQA,GAAK,EAC3B,CAEA,SAASwI,EAAaxI,GACpB,OAAQA,GAAK,IAAQA,GAAK,IAAUA,GAAK,IAAQA,GAAK,GACxD,CAUAnI,EAAO5D,QAAU,CACfsU,eACAC,eACAC,oBAXF,SAA6BzI,GAC3B,OAAOwI,EAAaxI,IAAMuI,EAAavI,EACzC,EAUEsF,WARF,SAAoBtF,GAClB,OAAOuI,EAAavI,IAAOA,GAAK,IAAQA,GAAK,IAAUA,GAAK,IAAQA,GAAK,GAC3E,E,0CCOO,MAAM0I,EAAsB,UCwGtBC,EAAsB,UAQ5B,MAAMC,UAAoBC,EAAAA,GAa/BvU,WAAAA,GACEwU,MAAM,WAZR,KACAC,cAAQ,OACRC,cAAQ,OACRC,cAAQ,OACRC,aAAO,OACPC,aAAO,OACPC,iBAAW,OACXC,YAAM,OACNC,qBAAe,OACLC,cAAQ,EAIhBtU,KAAKuU,QAAQ,GAAGC,OAAO,CACrBV,SAAU,KACVC,SAAU,KACVC,SAAU,KACVM,SAAU,KACVL,QAAS,WACTC,QAAS,KACTO,UAAW,mBACXJ,gBAAiB,KACjBF,YAAa,oBAEfnU,KAAK0U,GAAG,SAASlP,UACf,MAAMmP,EAAKC,EACyB,UAAzBD,EAAGL,SAASO,SACrBF,EAAGL,SAASQ,IAAI,CACdC,GAAIrB,EACJsB,SAAU,CAAEC,QAAQ,EAAOC,OAAO,KAGF,UAAzBP,EAAGX,SAASa,SACrBF,EAAGX,SAASc,IAAI,CAAEC,GAAItB,GACxB,GAEJ,CAEA,iBAAM0B,GACJ,MAAMb,QAAiBtU,KAAKsU,SAAS7Q,IAAIiQ,GACzC,IAAMY,EACJ,MAAM,IAAIvQ,MAAM,SAElB,OAAOuQ,CACT,CAEA,oBAAMc,CAAeC,GACnB,OAAOrV,KAAKsU,SAASgB,OAAO5B,EAAqB,IAC5C2B,GAEP,CAEA,iBAAME,GACJ,MAAMvB,QAAiBhU,KAAKgU,SAASvQ,IAAIgQ,GACzC,IAAMO,EACJ,MAAM,IAAIjQ,MAAM,iCAElB,OAAOiQ,CACT,CAEA,iBAAMwB,CAAYC,GAChB,MAAM9K,EAAO+K,KAAK/R,OAAOkO,aAAa8D,MAAM,KAAM,IAAI7K,iBAAiB2K,EAAEG,iBAMzE,aALsB5V,KAAKiU,QAAQ4B,IAAI,CACrCC,SAAUL,EAAE/R,KACZ4H,KAAMmK,EAAEnK,KACRX,QAGJ,CAEAoL,yBAAAA,CACEC,EACAC,EACA1B,GAcA,OAAOvU,KAAK8T,SAASoC,QACnB,EAAGC,cAAaC,eACd,OAdsCC,EAcRF,KAb5B,eADeG,EAcCN,KAZZ,eAAgBK,IAGfC,EAAOC,aAAeF,EAAOE,WAElC,eAAgBF,GAGbA,EAAOG,YAAY3U,WAAayU,EAAOE,YAAY3U,gBAQzCnC,IAAbuW,GACAA,IAAaG,EAASH,eAKVvW,IAAZ6U,GACAA,IAAY6B,EAAS7B,SAzBPkC,IAACH,EAAqBD,CA6B3B,GAGjB,CAEAK,gBAAAA,CAAiBzC,GACf,MAAO,QAAQA,EAAQ3I,eAAe2I,EAAQtJ,MAChD,EAGK,MAAMgK,EAAK,IAAIhB,EC5PTgD,EAAoB,Q,QCC1B,MAAMC,EACF,QAAPC,EAAAC,eAAO,IAAAD,GAAS,QAATE,EAAPF,EAASG,eAAO,IAAAD,GAAhBA,EAAkBE,OACZH,QAAQE,QAAQC,OAAO,oBAAsB,IAC7C,wBAIG1X,EAAMA,CAAC2X,EAAsBC,IAClCD,EAAatJ,WAAW,KACjB,GAAGgJ,KAAYO,IAAiBD,IAEpC,GAAGN,KAAYO,KAAkBD,ICV/BE,EAAmB5R,UAC5B,MAAM6R,QAAe1C,EAAGZ,SAAStQ,IAAI6T,GACrC,IAAMD,EACF,MAAM,IAAItT,MAAM,uCAAyCuT,GAE7D,OAAOD,CAAM,E,OCoDV,IAOKE,EAAc,SAAdA,GAAc,OAAdA,EAAc,wCAAdA,EAAc,4BAAdA,EAAc,gCAAdA,CAAc,MA0LdC,EAAc,SAAdA,GAAc,OAAdA,EAAAA,EAAc,iCAAdA,EAAAA,EAAc,+BAAdA,EAAAA,EAAc,+BAAdA,EAAAA,EAAc,yBAAdA,EAAAA,EAAc,uCAAdA,EAAAA,EAAc,iDAAdA,EAAAA,EAAc,2DAAdA,EAAAA,EAAc,qDAAdA,CAAc,MAoBdC,EAAe,SAAfA,GAAe,OAAfA,EAAe,kBAAfA,EAAe,kBAAfA,EAAe,kBAAfA,CAAe,MCvNpB,SAASC,EAAUC,GACtB,OAAOjC,KATJ,SAAgBiC,GACnB,OAAOhU,OAAOkO,aAAa8D,MAAM,KAAM,IAAI7K,WAAW6M,GAC1D,CAOgBC,CAAOD,GACvB,CC1DO,MAAME,EAET,CACA,KAAQ,YACR,UAAa,aACb,WAAc,cACd,WAAc,cACd,SAAY,WACZ,OAAU,SACV,UAAa,YACb,OAAU,SACV,QAAW,UACX,QAAW,cACX,QAAW,UACX,QAAW,cACX,SAAY,YCjBhB,SAASC,EAAuBtP,EAAGuP,GACjC,IAAK,CAAC,EAAE/S,eAAeH,KAAK2D,EAAGuP,GAAI,MAAM,IAAInY,UAAU,kDACvD,OAAO4I,CACT,CCHA,IAAIuM,EAAK,EACT,SAASiD,EAAsBxP,GAC7B,MAAO,aAAeuM,IAAO,IAAMvM,CACrC,C,qECiCO,MAAeyP,EAElB5Y,WAAAA,CAAY6Y,GAAkDnT,OAAA8C,eAAA,KAAAsQ,EAAA,CAAArU,MAAAsU,IAAArT,OAAA8C,eAAA,KAAAwQ,EAAA,CAAAvU,MAAAwU,IAAAvT,OAAA8C,eAAA,KAAA0Q,EAAA,CAAAC,UAAA,EAAA1U,WAAA,IAC1D2U,EAAAzY,KAAIuY,GAAAA,GAAYL,CACpB,CAEA,WAAI/I,GACA,OAAAsJ,EAAOzY,KAAIuY,GAAAA,EACf,CAmHA,uBAAaG,CACTC,GAEA,MAAM9O,EAAS,CAAC,EAKhB,aAJA4O,EAAMzY,KAAIqY,GAAAA,GACNM,EACA9O,GAEGA,CACX,CAEA,uBAAa+O,CACTD,GAEA,MAAM9O,EAAS,CAAC,EAKhB,aAJA4O,EAAMzY,KAAImY,GAAAA,GACNQ,EACA9O,GAEGA,CACX,CAEA,aAAagP,CACTC,EACA9W,GAEA,GAAIyW,EAAAzY,KAAIuY,GAAAA,GAAUQ,aAAeN,EAAAzY,KAAIuY,GAAAA,GAAUQ,YAAYD,GACvD,OAAO,KAEX,IAAM9Y,KAAKgZ,iBAAiBF,GACxB,MAAM,IAAI/U,MAAM,oCAAoC+U,cAAkB9W,MAE1E,GACqB,iBAAV8W,GACPA,aAAiBzS,aACjBA,YAAY4S,OAAOH,GAEnB,OAAOL,EAAAzY,KAAIuY,GAAAA,GAAUM,QAAQC,EAAO9W,GAExC,MAAM,IAAI+B,MAAM,yCACpB,CAEA,aAAMmV,CACFJ,EACA9W,GAEA,GAAIyW,EAAAzY,KAAIuY,GAAAA,GAAUQ,aAAeN,EAAAzY,KAAIuY,GAAAA,GAAUQ,YAAYD,GACvD,OAAO,KAEX,GAAIA,QAEA,OADAK,QAAQC,KAAK,6CACN,KAEX,cAAeN,GACX,IAAK,SACD,OAAOL,EAAAzY,KAAIuY,GAAAA,GAAUW,QAAQJ,EAAO9W,GACxC,IAAK,SACD,OAAOyW,EAAAzY,KAAIuY,GAAAA,GAAUW,QAAQJ,EAAM5O,SAAS,IAAKlI,GACrD,IAAK,UACD,OAAOyW,EAAAzY,KAAIuY,GAAAA,GAAUW,QAAQJ,EAAQ,IAAM,IAAK9W,GACpD,IAAK,SACD,GAAI8W,aAAiBzS,YACjB,OAAOoS,EAAAzY,KAAIuY,GAAAA,GAAUW,QAAQJ,EAAO9W,GAExC,GAAIqE,YAAY4S,OAAOH,GACnB,OAAOL,EAAAzY,KAAIuY,GAAAA,GAAUW,QAAQJ,EAAMnB,OAAQ3V,GAIvD,MAAM,IAAI+B,MAAM,oCAAoC+U,cAAkB9W,KAC1E,EACH,eAAAsW,EArLOhY,EACAuJ,EACA7H,EAAe,SAEf,GAAc,OAAV1B,EACA,MAAM,IAAIyD,MAAM,8BAEpB,GAAqB,iBAAVzD,EACP,MAAM,IAAIyD,MAAM,uCAEpB,GAAIzD,aAAiB+F,aAAeA,YAAY4S,OAAO3Y,GACnD,MAAM,IAAIyD,MAAM,uFAEpB,MAAMsV,EAA4B,GAClC,IAAK,MAAM5R,KAAOnH,EACVmY,EAAAzY,KAAIuY,GAAAA,GAAUe,YAAcb,EAAAzY,KAAIuY,GAAAA,GAAUe,WAAW7R,IAGrDgR,EAAAzY,KAAIuY,GAAAA,GAAUQ,aAAeN,EAAAzY,KAAIuY,GAAAA,GAAUQ,YAAYzY,EAAMmH,MAIvC,iBAAfnH,EAAMmH,IACE,OAAfnH,EAAMmH,IACHnH,EAAMmH,aAAgBpB,aACvBA,YAAY4S,OAAO3Y,EAAMmH,IAgB/B4R,EAAS/P,KACLtJ,KAAKkZ,QAAQ5Y,EAAMmH,GAAMA,GACpB8R,MAAKC,IAKF3P,EAAOpC,GAJW,OAAd+R,EAIUA,EAHIlZ,EAAMmH,EAGD,MArB3B7B,MAAMuD,QAAQ7I,EAAMmH,IACpBoC,EAAOpC,GAAO,GAEdoC,EAAOpC,GAAO,CAAC,EAEnB4R,EAAS/P,KAAImP,EACTzY,KAAIqY,GAAAA,GACA/X,EAAMmH,GACNoC,EAAOpC,GACP,GAAGzF,KAAQyF,QAgB3B,OAAOgS,QAAQC,IAAIL,GACdE,MAAKI,GAAKF,QAAQG,WAC3B,CAAC,eAAAxB,EAGG9X,EACAuJ,EACA7H,EAAe,SAEf,GAAc,OAAV1B,EACA,MAAM,IAAIyD,MAAM,8BAEpB,GAAqB,iBAAVzD,EACP,MAAM,IAAIyD,MAAM,uCAEpB,GAAIzD,aAAiB+F,aAAeA,YAAY4S,OAAO3Y,GACnD,MAAM,IAAIyD,MAAM,uFAEpB,MAAMsV,EAA4B,GAClC,IAAK,MAAM5R,KAAOnH,EACVmY,EAAAzY,KAAIuY,GAAAA,GAAUe,YAAcb,EAAAzY,KAAIuY,GAAAA,GAAUe,WAAW7R,KAI/B,iBAAfnH,EAAMmH,IACE,OAAfnH,EAAMmH,IACHnH,EAAMmH,aAAgBpB,aACvBA,YAAY4S,OAAO3Y,EAAMmH,IAgB/B4R,EAAS/P,KACLtJ,KAAK6Y,QAAQvY,EAAMmH,GAAaA,GAC3B8R,MAAKM,IAKFhQ,EAAOpC,GAJW,OAAdoS,EAIUA,EAHIvZ,EAAMmH,EAGD,MArB3B7B,MAAMuD,QAAQ7I,EAAMmH,IACpBoC,EAAOpC,GAAO,GAEdoC,EAAOpC,GAAO,CAAC,EAEnB4R,EAAS/P,KAAImP,EACTzY,KAAImY,GAAAA,GACA7X,EAAMmH,GACNoC,EAAOpC,GACP,GAAGzF,KAAQyF,QAgB3B,OAAOgS,QAAQC,IAAIL,GACdE,MAAKI,GAAKF,QAAQG,WAC3B,CC7JG,MAAME,EAAU,IAAItX,YACduX,EAAU,IAAIrX,YACrBsX,EAAY,GAAK,GAChB,SAAShH,KAAUiH,GACtB,MAAMzW,EAAOyW,EAAQC,QAAO,CAACC,GAAO9Q,YAAa8Q,EAAM9Q,GAAQ,GACzD+Q,EAAM,IAAItP,WAAWtH,GAC3B,IAAImF,EAAI,EACR,IAAK,MAAMgP,KAAUsC,EACjBG,EAAIvW,IAAI8T,EAAQhP,GAChBA,GAAKgP,EAAOtO,OAEhB,OAAO+Q,CACX,CACA,SAASC,EAAcD,EAAKtW,EAAOwW,GAC/B,GAAIxW,EAAQ,GAAKA,GAASkW,EACtB,MAAM,IAAIO,WAAW,kDAAwDzW,KAEjFsW,EAAIvW,IAAI,CAACC,IAAU,GAAIA,IAAU,GAAIA,IAAU,EAAW,IAARA,GAAewW,EACrE,CACO,SAASE,EAAS1W,GACrB,MAAM2W,EAAO3N,KAAKC,MAAMjJ,EAAQkW,GAC1BU,EAAM5W,EAAQkW,EACdI,EAAM,IAAItP,WAAW,GAG3B,OAFAuP,EAAcD,EAAKK,EAAM,GACzBJ,EAAcD,EAAKM,EAAK,GACjBN,CACX,CACO,SAASO,EAAS7W,GACrB,MAAMsW,EAAM,IAAItP,WAAW,GAE3B,OADAuP,EAAcD,EAAKtW,GACZsW,CACX,CC7BO,SAASlX,EAAO5C,GACnB,GAAIwK,WAAW8P,WACX,OAAO9P,WAAW8P,WAA4B,iBAAVta,EAAqBA,EAAQyZ,EAAQ7W,OAAO5C,GAAQ,CACpFua,SAAU,cAGlB,IAAIC,EAAUxa,EACVwa,aAAmBhQ,aACnBgQ,EAAUf,EAAQ7W,OAAO4X,IAE7BA,EAAUA,EAAQ1Q,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KAAKA,QAAQ,MAAO,IACvE,IACI,OCHD,SAAsB0Q,GACzB,GAAIhQ,WAAW8P,WACX,OAAO9P,WAAW8P,WAAWE,GAEjC,MAAMC,EAASlQ,KAAKiQ,GACd7X,EAAQ,IAAI6H,WAAWiQ,EAAO1R,QACpC,IAAK,IAAIV,EAAI,EAAGA,EAAIoS,EAAO1R,OAAQV,IAC/B1F,EAAM0F,GAAKoS,EAAOC,WAAWrS,GAEjC,OAAO1F,CACX,CDPegY,CAAaH,EACxB,CACA,MACI,MAAM,IAAIlb,UAAU,oDACxB,CACJ,CACO,SAASmD,EAAOzC,GACnB,IAAI4a,EAAY5a,EAIhB,MAHyB,iBAAd4a,IACPA,EAAYpB,EAAQ/W,OAAOmY,IAE3BpQ,WAAWlG,UAAUuW,SACdD,EAAUC,SAAS,CAAEN,SAAU,YAAaO,aAAa,IC1BjE,SAAsB9a,GACzB,GAAIwK,WAAWlG,UAAUuW,SACrB,OAAO7a,EAAM6a,WAEjB,MACME,EAAM,GACZ,IAAK,IAAI1S,EAAI,EAAGA,EAAIrI,EAAM+I,OAAQV,GAFf,MAGf0S,EAAI/R,KAAK3F,OAAOkO,aAAa8D,MAAM,KAAMrV,EAAMgb,SAAS3S,EAAGA,EAH5C,SAKnB,OAAO+M,KAAK2F,EAAI5Q,KAAK,IACzB,CDkBW8Q,CAAaL,GAAW9Q,QAAQ,KAAM,IAAIA,QAAQ,MAAO,KAAKA,QAAQ,MAAO,IACxF,CE7BO,MAAMoR,EAAchX,SCApB,MAAMiX,UAAkB1X,MAC3B2X,YAAc,mBACdC,KAAO,mBACPtc,WAAAA,CAAYuc,EAASzM,GACjB0E,MAAM+H,EAASzM,GACfnP,KAAK0D,KAAO1D,KAAKX,YAAYqE,KAC7BK,MAAM8X,oBAAoB7b,KAAMA,KAAKX,YACzC,EA4BG,MAAMyc,UAA0BL,EACnCC,YAAc,2BACdC,KAAO,2BAEJ,MAAMI,UAAyBN,EAClCC,YAAc,yBACdC,KAAO,yBAEJ,MAAMK,UAA4BP,EACrCC,YAAc,4BACdC,KAAO,4BACPtc,WAAAA,CAAYuc,EAAU,8BAA+BzM,GACjD0E,MAAM+H,EAASzM,EACnB,EAEG,MAAM8M,UAAmBR,EAC5BC,YAAc,kBACdC,KAAO,kBCnDJ,SAASO,EAAUC,GACtB,OAAQA,GACJ,IAAK,UACL,IAAK,YACL,IAAK,UACL,IAAK,YACL,IAAK,UACL,IAAK,YACD,OAAO,GACX,IAAK,gBACL,IAAK,gBACL,IAAK,gBACD,OAAO,IACX,QACI,MAAM,IAAIJ,EAAiB,8BAA8BI,KAErE,CD6DK3X,OAAO4X,cC5DZ,MChBA,GAAgBC,EAAKC,KACjB,GAAIA,EAAGjT,QAAU,IAAM6S,EAAUG,GAC7B,MAAM,IAAIJ,EAAW,uCAE5B,ECLD,GAAgBM,EAAKC,KACjB,MAAMC,EAASF,EAAI3L,YAAc,EACjC,GAAI6L,IAAWD,EACX,MAAM,IAAIP,EAAW,mDAAmDO,eAAsBC,SAErG,ECND,SAASC,EAAShZ,EAAMyE,EAAO,kBAC3B,OAAO,IAAIvI,UAAU,kDAAkDuI,aAAgBzE,IAC3F,CACA,SAASiZ,EAAYC,EAAWlZ,GAC5B,OAAOkZ,EAAUlZ,OAASA,CAC9B,CA8EO,SAASmZ,EAAkBpV,EAAK0U,EAAKW,GACxC,OAAQX,GACJ,IAAK,UACL,IAAK,UACL,IAAK,UAAW,CACZ,IAAKQ,EAAYlV,EAAImV,UAAW,WAC5B,MAAMF,EAAS,WACnB,MAAMF,EAAWzL,SAASoL,EAAIjT,MAAM,EAAG,GAAI,IAE3C,GADezB,EAAImV,UAAUvT,SACdmT,EACX,MAAME,EAASF,EAAU,oBAC7B,KACJ,CACA,IAAK,SACL,IAAK,SACL,IAAK,SAAU,CACX,IAAKG,EAAYlV,EAAImV,UAAW,UAC5B,MAAMF,EAAS,UACnB,MAAMF,EAAWzL,SAASoL,EAAIjT,MAAM,EAAG,GAAI,IAE3C,GADezB,EAAImV,UAAUvT,SACdmT,EACX,MAAME,EAASF,EAAU,oBAC7B,KACJ,CACA,IAAK,OACD,OAAQ/U,EAAImV,UAAUlZ,MAClB,IAAK,OACL,IAAK,SACD,MACJ,QACI,MAAMgZ,EAAS,kBAEvB,MAEJ,IAAK,qBACL,IAAK,qBACL,IAAK,qBACD,IAAKC,EAAYlV,EAAImV,UAAW,UAC5B,MAAMF,EAAS,UACnB,MACJ,IAAK,WACL,IAAK,eACL,IAAK,eACL,IAAK,eAAgB,CACjB,IAAKC,EAAYlV,EAAImV,UAAW,YAC5B,MAAMF,EAAS,YACnB,MAAMF,EAAWzL,SAASoL,EAAIjT,MAAM,GAAI,KAAO,EAE/C,GA7HW9G,EA4HkBqF,EAAImV,UAAUxa,KA3H5C2O,SAAS3O,EAAKsB,KAAKwF,MAAM,GAAI,MA4HbsT,EACX,MAAME,EAAS,OAAOF,IAAY,kBACtC,KACJ,CACA,QACI,MAAM,IAAI5c,UAAU,6CAlIhC,IAAuBwC,GAevB,SAAoBqF,EAAKqV,GACrB,GAAIA,IAAUrV,EAAIsV,OAAOjP,SAASgP,GAC9B,MAAM,IAAIld,UAAU,sEAAsEkd,KAElG,CAiHIE,CAAWvV,EAAKqV,EACpB,CC3IA,SAASlB,EAAQqB,EAAKR,KAAWS,GAE7B,IADAA,EAAQA,EAAMhH,OAAOiH,UACX9T,OAAS,EAAG,CAClB,MAAM8E,EAAO+O,EAAME,MACnBH,GAAO,eAAeC,EAAMzS,KAAK,aAAa0D,IAClD,MAC0B,IAAjB+O,EAAM7T,OACX4T,GAAO,eAAeC,EAAM,SAASA,EAAM,MAG3CD,GAAO,WAAWC,EAAM,MAa5B,OAXc,MAAVT,EACAQ,GAAO,aAAaR,IAEG,mBAAXA,GAAyBA,EAAO/Y,KAC5CuZ,GAAO,sBAAsBR,EAAO/Y,OAEb,iBAAX+Y,GAAiC,MAAVA,GAC/BA,EAAOpd,aAAaqE,OACpBuZ,GAAO,4BAA4BR,EAAOpd,YAAYqE,QAGvDuZ,CACX,CACA,SAAgBR,KAAWS,IAChBtB,EAAQ,eAAgBa,KAAWS,GAEvC,SAASG,EAAQlB,EAAKM,KAAWS,GACpC,OAAOtB,EAAQ,eAAeO,uBAA0BM,KAAWS,EACvE,CC9BO,SAASI,EAAgB7V,GAC5B,IAAK8V,EAAY9V,GACb,MAAM,IAAI1D,MAAM,8BAExB,CACO,SAASwZ,EAAY9V,GACxB,MAAqC,cAA9BA,IAAMjD,OAAOgZ,YACxB,CACO,SAASC,GAAYhW,GACxB,MAAqC,cAA9BA,IAAMjD,OAAOgZ,YACxB,CACA,SAAgB/V,GACL8V,EAAY9V,IAAQgW,GAAYhW,GCiC3C,SAAsB4U,EAAKqB,EAAWnB,EAAKD,EAAIqB,KAC3C,KAAKJ,EAAYhB,IAAUA,aAAezR,YACtC,MAAM,IAAIlL,UAAUge,EAAgBrB,EAAK,YAAa,YAAa,aAAc,iBN7BzF,IAAgBJ,EMqCZ,OANIG,EACAuB,EAAcxB,EAAKC,INhCXH,EMmCQE,EAAhBC,ENnCgBwB,OAAOC,gBAAgB,IAAIjT,WAAWoR,EAAUC,IAAQ,KMqCpEE,GACJ,IAAK,gBACL,IAAK,gBACL,IAAK,gBAID,OAHIE,aAAezR,YACfkT,EAAezB,EAAKxL,SAASsL,EAAInT,OAAO,GAAI,KApD5D1D,eAA0B6W,EAAKqB,EAAWnB,EAAKD,EAAIqB,GAC/C,KAAMpB,aAAezR,YACjB,MAAM,IAAIlL,UAAUge,EAAgBrB,EAAK,eAE7C,MAAM0B,EAAUlN,SAASsL,EAAInT,MAAM,EAAG,GAAI,IACpCgV,QAAeJ,OAAOK,OAAOC,UAAU,MAAO7B,EAAIjB,SAAS2C,GAAW,GAAI,WAAW,EAAO,CAAC,YAC7FI,QAAeP,OAAOK,OAAOC,UAAU,MAAO7B,EAAIjB,SAAS,EAAG2C,GAAW,GAAI,CAC/E7b,KAAM,QAAO6b,GAAW,GACxBva,KAAM,SACP,EAAO,CAAC,SACL4a,EAAa,IAAIxT,iBAAiBgT,OAAOK,OAAOjF,QAAQ,CAC1DoD,KACA5Y,KAAM,WACPwa,EAAQR,IACLa,EAAUvL,EAAO2K,EAAKrB,EAAIgC,EAAY9D,EAASmD,EAAItU,QAAU,IAEnE,MAAO,CAAEiV,aAAYE,IADT,IAAI1T,kBAAkBgT,OAAOK,OAAOM,KAAK,OAAQJ,EAAQE,IAAUrV,MAAM,EAAG+U,GAAW,IACzE3B,KAC9B,CAqCmBoC,CAAWrC,EAAKqB,EAAWnB,EAAKD,EAAIqB,GAC/C,IAAK,UACL,IAAK,UACL,IAAK,UAID,OAHIpB,aAAezR,YACfkT,EAAezB,EAAKxL,SAASsL,EAAInT,MAAM,EAAG,GAAI,KAzC9D1D,eAA0B6W,EAAKqB,EAAWnB,EAAKD,EAAIqB,GAC/C,IAAIO,EACA3B,aAAezR,WACfoT,QAAeJ,OAAOK,OAAOC,UAAU,MAAO7B,EAAK,WAAW,EAAO,CAAC,aAGtEM,EAAkBN,EAAKF,EAAK,WAC5B6B,EAAS3B,GAEb,MAAM/C,EAAY,IAAI1O,iBAAiBgT,OAAOK,OAAOjF,QAAQ,CACzDyF,eAAgBhB,EAChBrB,KACA5Y,KAAM,UACNkb,UAAW,KACZV,EAAQR,IACLc,EAAMhF,EAAUtQ,OAAO,IAE7B,MAAO,CAAEoV,WADU9E,EAAUtQ,MAAM,GAAI,IAClBsV,MAAKlC,KAC9B,CAyBmBuC,CAAWxC,EAAKqB,EAAWnB,EAAKD,EAAIqB,GAC/C,QACI,MAAM,IAAI5B,EAAiB,gDAEtC,ECxED,SAAS+C,GAAarX,EAAK0U,GACvB,GAAI1U,EAAImV,UAAUvT,SAAW0H,SAASoL,EAAIjT,MAAM,EAAG,GAAI,IACnD,MAAM,IAAItJ,UAAU,6BAA6Buc,IAEzD,CACA,SAAS4C,GAAatX,EAAK0U,EAAKW,GAC5B,OAAIrV,aAAeqD,WACRgT,OAAOK,OAAOC,UAAU,MAAO3W,EAAK,UAAU,EAAM,CAACqV,KAEhED,EAAkBpV,EAAK0U,EAAKW,GACrBrV,EACX,CACOjC,eAAewZ,GAAK7C,EAAK1U,EAAK8U,GACjC,MAAM0C,QAAkBF,GAAatX,EAAK0U,EAAK,WAC/C2C,GAAaG,EAAW9C,GACxB,MAAM+C,QAAqBpB,OAAOK,OAAOC,UAAU,MAAO7B,EAAK,CAAEna,KAAM,UAAWsB,KAAM,SAAU,EAAM,CAAC,SACzG,OAAO,IAAIoH,iBAAiBgT,OAAOK,OAAOgB,QAAQ,MAAOD,EAAcD,EAAW,UACtF,CACOzZ,eAAe4Z,GAAOjD,EAAK1U,EAAK4X,GACnC,MAAMJ,QAAkBF,GAAatX,EAAK0U,EAAK,aAC/C2C,GAAaG,EAAW9C,GACxB,MAAM+C,QAAqBpB,OAAOK,OAAOmB,UAAU,MAAOD,EAAcJ,EAAW,SAAU,CAAE7c,KAAM,UAAWsB,KAAM,SAAU,EAAM,CAAC,SACvI,OAAO,IAAIoH,iBAAiBgT,OAAOK,OAAOoB,UAAU,MAAOL,GAC/D,CCxBA,eAAsBtC,EAAWjS,KAC7B,MAAM6U,EAAe,OAAO5C,EAAU1T,OAAO,KAC7C,OAAO,IAAI4B,iBAAiBgT,OAAOK,OAAOsB,OAAOD,EAAc7U,GAClE,ECAD,SAAS+U,GAAepf,GACpB,OAAO0S,EAAO2H,EAASra,EAAM+I,QAAS/I,EAC1C,CAaOkF,eAAema,GAAUC,EAAWC,EAAYjD,EAAWkD,EAAWC,EAAM,IAAIjV,WAAW,GAAIkV,EAAM,IAAIlV,WAAW,IACvH+R,EAAkB+C,EAAW,QAC7B/C,EAAkBgD,EAAY,OAAQ,cACtC,MAAM/b,EAAQkP,EAAO0M,GAAe5F,EAAQ/W,OAAO6Z,IAAa8C,GAAeK,GAAML,GAAeM,GAAMrF,EAASmF,IACnH,IAAIzW,EAYJ,OAVIA,EAD6B,WAA7BuW,EAAUhD,UAAUlZ,KACX,IAILoJ,KAAKmT,KAAKlP,SAAS6O,EAAUhD,UAAUsD,WAAWhX,OAAO,GAAI,IAAM,IAAM,EAtBrF1D,eAAyB2a,EAAQC,EAAMtc,GACnC,MAAMuc,EAAavT,KAAKmT,MAAMG,GAAQ,GAAK,IACrCE,EAAM,IAAIxV,WAAwB,GAAbuV,GAC3B,IAAK,IAAIE,EAAO,EAAGA,EAAOF,EAAYE,IAAQ,CAC1C,MAAMnG,EAAM,IAAItP,WAAW,EAAIqV,EAAO9W,OAASvF,EAAMuF,QACrD+Q,EAAIvW,IAAI8W,EAAS4F,EAAO,IACxBnG,EAAIvW,IAAIsc,EAAQ,GAChB/F,EAAIvW,IAAIC,EAAO,EAAIqc,EAAO9W,QAC1BiX,EAAIzc,UAAU4b,GAAO,SAAUrF,GAAa,GAAPmG,EACzC,CACA,OAAOD,EAAIpX,MAAM,EAAGkX,GAAQ,EAChC,CAiBWI,CAJc,IAAI1V,iBAAiBgT,OAAOK,OAAOsC,WAAW,CAC/D/c,KAAMkc,EAAUhD,UAAUlZ,KAC1Bgd,OAAQd,GACTC,EAAYxW,IACgByW,EAAWhc,EAC9C,CACO,SAAS6c,GAAQlZ,GACpB,OAAQA,EAAImV,UAAUsD,YAClB,IAAK,QACL,IAAK,QACL,IAAK,QACD,OAAO,EACX,QACI,MAA8B,WAAvBzY,EAAImV,UAAUlZ,KAEjC,CChCA8B,eAAema,GAAUiB,EAAKzE,EAAK0E,EAAKpZ,GACpC,KAAMmZ,aAAe9V,aAAe8V,EAAIvX,OAAS,EAC7C,MAAM,IAAI4S,EAAW,6CAEzB,MAAM6E,EALSC,EAAC5E,EAAK6E,IAAahO,EAAO8G,EAAQ/W,OAAOoZ,GAAM,IAAIrR,WAAW,CAAC,IAAKkW,GAKtED,CAAW5E,EAAKyE,GACvBK,EAASlQ,SAASoL,EAAIjT,MAAM,GAAI,IAAK,IACrCgY,EAAY,CACd9e,KAAM,OAAO+Z,EAAIjT,MAAM,EAAG,MAC1BmX,WAAYQ,EACZnd,KAAM,SACNod,QAEE7B,QApBV,SAAsBxX,EAAK0U,GACvB,OAAI1U,aAAeqD,WACRgT,OAAOK,OAAOC,UAAU,MAAO3W,EAAK,UAAU,EAAO,CAAC,gBAEjEoV,EAAkBpV,EAAK0U,EAAK,cACrB1U,EACX,CAc4BsX,CAAatX,EAAK0U,GAC1C,OAAO,IAAIrR,iBAAiBgT,OAAOK,OAAOsC,WAAWS,EAAWjC,EAAWgC,GAC/E,CC3BA,UAAgB9E,EAAK1U,KACjB,GAAI0U,EAAIvO,WAAW,OAASuO,EAAIvO,WAAW,MAAO,CAC9C,MAAM,cAAEuT,GAAkB1Z,EAAImV,UAC9B,GAA6B,iBAAlBuE,GAA8BA,EAAgB,KACrD,MAAM,IAAIvhB,UAAU,GAAGuc,yDAE/B,CACH,ECJKiF,GAAmBjF,IACrB,OAAQA,GACJ,IAAK,WACL,IAAK,eACL,IAAK,eACL,IAAK,eACD,MAAO,WACX,QACI,MAAM,IAAIJ,EAAiB,OAAOI,gEAC1C,ECTJ,GAAgB7b,IACZ,GAHwB,iBADNwD,EAIAxD,IAH4B,OAAVwD,GAGkC,oBAA1CiB,OAAOH,UAAUsF,SAASrF,KAAKvE,GACvD,OAAO,EALf,IAAsBwD,EAOlB,GAAqC,OAAjCiB,OAAOQ,eAAejF,GACtB,OAAO,EAEX,IAAI+gB,EAAQ/gB,EACZ,KAAwC,OAAjCyE,OAAOQ,eAAe8b,IACzBA,EAAQtc,OAAOQ,eAAe8b,GAElC,OAAOtc,OAAOQ,eAAejF,KAAW+gB,CAC3C,ECdM,SAASC,GAAM7Z,GAClB,OAAOJ,GAASI,IAA2B,iBAAZA,EAAI8Z,GACvC,CCiFA,eAAe/b,IACX,IAAKgc,EAAIrF,IACL,MAAM,IAAIvc,UAAU,4DAExB,MAAM,UAAEgd,EAAS,UAAE6E,GAvFvB,SAAuBD,GACnB,IAAI5E,EACA6E,EACJ,OAAQD,EAAID,KACR,IAAK,MACD,OAAQC,EAAIrF,KACR,IAAK,QACL,IAAK,QACL,IAAK,QACDS,EAAY,CAAElZ,KAAM,UAAWtB,KAAM,OAAOof,EAAIrF,IAAIjT,OAAO,MAC3DuY,EAAYD,EAAIE,EAAI,CAAC,QAAU,CAAC,UAChC,MACJ,IAAK,QACL,IAAK,QACL,IAAK,QACD9E,EAAY,CAAElZ,KAAM,oBAAqBtB,KAAM,OAAOof,EAAIrF,IAAIjT,OAAO,MACrEuY,EAAYD,EAAIE,EAAI,CAAC,QAAU,CAAC,UAChC,MACJ,IAAK,WACL,IAAK,eACL,IAAK,eACL,IAAK,eACD9E,EAAY,CACRlZ,KAAM,WACNtB,KAAM,OAAO2O,SAASyQ,EAAIrF,IAAIjT,OAAO,GAAI,KAAO,KAEpDuY,EAAYD,EAAIE,EAAI,CAAC,UAAW,aAAe,CAAC,UAAW,WAC3D,MACJ,QACI,MAAM,IAAI3F,EAAiB,gEAEnC,MAEJ,IAAK,KACD,OAAQyF,EAAIrF,KACR,IAAK,QACDS,EAAY,CAAElZ,KAAM,QAASwc,WAAY,SACzCuB,EAAYD,EAAIE,EAAI,CAAC,QAAU,CAAC,UAChC,MACJ,IAAK,QACD9E,EAAY,CAAElZ,KAAM,QAASwc,WAAY,SACzCuB,EAAYD,EAAIE,EAAI,CAAC,QAAU,CAAC,UAChC,MACJ,IAAK,QACD9E,EAAY,CAAElZ,KAAM,QAASwc,WAAY,SACzCuB,EAAYD,EAAIE,EAAI,CAAC,QAAU,CAAC,UAChC,MACJ,IAAK,UACL,IAAK,iBACL,IAAK,iBACL,IAAK,iBACD9E,EAAY,CAAElZ,KAAM,OAAQwc,WAAYsB,EAAIG,KAC5CF,EAAYD,EAAIE,EAAI,CAAC,cAAgB,GACrC,MACJ,QACI,MAAM,IAAI3F,EAAiB,gEAEnC,MAEJ,IAAK,MACD,OAAQyF,EAAIrF,KACR,IAAK,UACL,IAAK,QACDS,EAAY,CAAElZ,KAAM,WACpB+d,EAAYD,EAAIE,EAAI,CAAC,QAAU,CAAC,UAChC,MACJ,IAAK,UACL,IAAK,iBACL,IAAK,iBACL,IAAK,iBACD9E,EAAY,CAAElZ,KAAM8d,EAAIG,KACxBF,EAAYD,EAAIE,EAAI,CAAC,cAAgB,GACrC,MACJ,QACI,MAAM,IAAI3F,EAAiB,gEAEnC,MAEJ,QACI,MAAM,IAAIA,EAAiB,+DAEnC,MAAO,CAAEa,YAAW6E,YACxB,CAKqCG,CAAcJ,GACzCK,EAAU,IAAKL,GAGrB,cAFOK,EAAQ1F,WACR0F,EAAQC,IACRhE,OAAOK,OAAOC,UAAU,MAAOyD,EAASjF,EAAW4E,EAAIO,MAAQP,EAAIE,EAAmBF,EAAIQ,SAAWP,EAC/G,ECzFD,IAAIQ,GACJ,MAAMC,GAAY1c,MAAOiC,EAAK+Z,EAAKrF,EAAKgG,GAAS,KAC7CF,KAAU,IAAIG,QACd,IAAIC,EAASJ,GAAMxe,IAAIgE,GACvB,GAAI4a,IAASlG,GACT,OAAOkG,EAAOlG,GAElB,MAAM8C,QAAkBqD,GAAU,IAAKd,EAAKrF,QAS5C,OARIgG,GACApd,OAAOod,OAAO1a,GACb4a,EAIDA,EAAOlG,GAAO8C,EAHdgD,GAAMpe,IAAI4D,EAAK,CAAE,CAAC0U,GAAM8C,IAKrBA,CAAS,EAgHpB,SAAsBxX,EAAK0U,KACvB,GAAI1U,aAAeqD,WACf,OAAOrD,EAEX,GAAI8V,EAAY9V,GACZ,OAAOA,EAEX,GAAIgW,GAAYhW,GAAM,CAClB,GAAiB,WAAbA,EAAI6D,KACJ,OAAO7D,EAAI8a,SAEf,GAAI,gBAAiB9a,GAAkC,mBAApBA,EAAI+a,YACnC,IACI,MA3HQC,EAACC,EAAWvG,KAChC8F,KAAU,IAAIG,QACd,IAAIC,EAASJ,GAAMxe,IAAIif,GACvB,GAAIL,IAASlG,GACT,OAAOkG,EAAOlG,GAElB,MAAMwG,EAA8B,WAAnBD,EAAUpX,KACrBsX,IAAcD,EACpB,IAAI1D,EACJ,GAAoC,WAAhCyD,EAAUG,kBAAgC,CAC1C,OAAQ1G,GACJ,IAAK,UACL,IAAK,iBACL,IAAK,iBACL,IAAK,iBACD,MACJ,QACI,MAAM,IAAIvc,UAAU,8DAE5Bqf,EAAYyD,EAAUF,YAAYE,EAAUG,kBAAmBD,EAAaD,EAAW,GAAK,CAAC,cACjG,CACA,GAAoC,YAAhCD,EAAUG,kBAAiC,CAC3C,GAAY,UAAR1G,GAA2B,YAARA,EACnB,MAAM,IAAIvc,UAAU,8DAExBqf,EAAYyD,EAAUF,YAAYE,EAAUG,kBAAmBD,EAAa,CACxED,EAAW,SAAW,QAE9B,CACA,GAAoC,QAAhCD,EAAUG,kBAA6B,CACvC,IAAIzgB,EACJ,OAAQ+Z,GACJ,IAAK,WACD/Z,EAAO,QACP,MACJ,IAAK,QACL,IAAK,QACL,IAAK,eACDA,EAAO,UACP,MACJ,IAAK,QACL,IAAK,QACL,IAAK,eACDA,EAAO,UACP,MACJ,IAAK,QACL,IAAK,QACL,IAAK,eACDA,EAAO,UACP,MACJ,QACI,MAAM,IAAIxC,UAAU,8DAE5B,GAAIuc,EAAIvO,WAAW,YACf,OAAO8U,EAAUF,YAAY,CACzB9e,KAAM,WACNtB,QACDwgB,EAAaD,EAAW,CAAC,WAAa,CAAC,YAE9C1D,EAAYyD,EAAUF,YAAY,CAC9B9e,KAAMyY,EAAIvO,WAAW,MAAQ,UAAY,oBACzCxL,QACDwgB,EAAa,CAACD,EAAW,SAAW,QAC3C,CACA,GAAoC,OAAhCD,EAAUG,kBAA4B,CACtC,MAKM3C,EALO,IAAIxU,IAAI,CACjB,CAAC,aAAc,SACf,CAAC,YAAa,SACd,CAAC,YAAa,WAEMjI,IAAIif,EAAUI,sBAAsB5C,YAC5D,IAAKA,EACD,MAAM,IAAItgB,UAAU,8DAEZ,UAARuc,GAAkC,UAAf+D,IACnBjB,EAAYyD,EAAUF,YAAY,CAC9B9e,KAAM,QACNwc,cACD0C,EAAa,CAACD,EAAW,SAAW,UAE/B,UAARxG,GAAkC,UAAf+D,IACnBjB,EAAYyD,EAAUF,YAAY,CAC9B9e,KAAM,QACNwc,cACD0C,EAAa,CAACD,EAAW,SAAW,UAE/B,UAARxG,GAAkC,UAAf+D,IACnBjB,EAAYyD,EAAUF,YAAY,CAC9B9e,KAAM,QACNwc,cACD0C,EAAa,CAACD,EAAW,SAAW,UAEvCxG,EAAIvO,WAAW,aACfqR,EAAYyD,EAAUF,YAAY,CAC9B9e,KAAM,OACNwc,cACD0C,EAAaD,EAAW,GAAK,CAAC,eAEzC,CACA,IAAK1D,EACD,MAAM,IAAIrf,UAAU,8DAQxB,OANKyiB,EAIDA,EAAOlG,GAAO8C,EAHdgD,GAAMpe,IAAI6e,EAAW,CAAE,CAACvG,GAAM8C,IAK3BA,CAAS,EAeGwD,CAAgBhb,EAAK0U,EAChC,CACA,MAAO4G,GACH,GAAIA,aAAenjB,UACf,MAAMmjB,CAEd,CAEJ,IAAIvB,EAAM/Z,EAAI8a,OAAO,CAAEtP,OAAQ,QAC/B,OAAOiP,GAAUza,EAAK+Z,EAAKrF,EAC/B,CACA,GAAImF,GAAM7Z,GACN,OAAIA,EAAIub,EACG9f,EAAOuE,EAAIub,GAEfd,GAAUza,EAAKA,EAAK0U,GAAK,GAEpC,MAAM,IAAIpY,MAAM,cACnB,EClKM,SAASmY,GAAUC,GACtB,OAAQA,GACJ,IAAK,UACD,OAAO,IACX,IAAK,UACD,OAAO,IACX,IAAK,UACL,IAAK,gBACD,OAAO,IACX,IAAK,gBACD,OAAO,IACX,IAAK,gBACD,OAAO,IACX,QACI,MAAM,IAAIJ,EAAiB,8BAA8BI,KAErE,CACA,SAAgBA,GAAQ2B,OAAOC,gBAAgB,IAAIjT,WAAWoR,GAAUC,IAAQ,IC4DhF,eAAsBE,EAAKE,EAAK+B,EAAYhC,EAAIkC,EAAKb,KACjD,KAAKJ,EAAYhB,IAAUA,aAAezR,YACtC,MAAM,IAAIlL,UAAUge,EAAgBrB,EAAK,YAAa,YAAa,aAAc,iBAErF,IAAKD,EACD,MAAM,IAAIL,EAAW,qCAEzB,IAAKuC,EACD,MAAM,IAAIvC,EAAW,kCAGzB,OADA4B,EAAcxB,EAAKC,GACXD,GACJ,IAAK,gBACL,IAAK,gBACL,IAAK,gBAGD,OAFIE,aAAezR,YACfkT,EAAezB,EAAKxL,SAASsL,EAAInT,OAAO,GAAI,KArE5D1D,eAA0B6W,EAAKE,EAAK+B,EAAYhC,EAAIkC,EAAKb,GACrD,KAAMpB,aAAezR,YACjB,MAAM,IAAIlL,UAAUge,EAAgBrB,EAAK,eAE7C,MAAM0B,EAAUlN,SAASsL,EAAInT,MAAM,EAAG,GAAI,IACpCgV,QAAeJ,OAAOK,OAAOC,UAAU,MAAO7B,EAAIjB,SAAS2C,GAAW,GAAI,WAAW,EAAO,CAAC,YAC7FI,QAAeP,OAAOK,OAAOC,UAAU,MAAO7B,EAAIjB,SAAS,EAAG2C,GAAW,GAAI,CAC/E7b,KAAM,QAAO6b,GAAW,GACxBva,KAAM,SACP,EAAO,CAAC,SACL6a,EAAUvL,EAAO2K,EAAKrB,EAAIgC,EAAY9D,EAASmD,EAAItU,QAAU,IAC7D4Z,EAAc,IAAInY,kBAAkBgT,OAAOK,OAAOM,KAAK,OAAQJ,EAAQE,IAAUrV,MAAM,EAAG+U,GAAW,IAC3G,IAAIiF,EASAxF,EARJ,IACIwF,QAhCR1d,eAA+BwE,EAAGC,GAC9B,KAAMD,aAAac,YACf,MAAM,IAAIlL,UAAU,mCAExB,KAAMqK,aAAaa,YACf,MAAM,IAAIlL,UAAU,oCAExB,MAAMgd,EAAY,CAAElZ,KAAM,OAAQtB,KAAM,WAClCqF,QAAaqW,OAAOK,OAAOgF,YAAYvG,GAAW,EAAO,CAAC,SAC1DwG,EAAQ,IAAItY,iBAAiBgT,OAAOK,OAAOM,KAAK7B,EAAWnV,EAAKuC,IAChEqZ,EAAQ,IAAIvY,iBAAiBgT,OAAOK,OAAOM,KAAK7B,EAAWnV,EAAKwC,IACtE,IAAIqZ,EAAM,EACN3a,GAAK,EACT,OAASA,EAAI,IACT2a,GAAOF,EAAMza,GAAK0a,EAAM1a,GAE5B,OAAe,IAAR2a,CACX,CAe+BC,CAAgB/E,EAAKyE,EAChD,CACA,MACA,CACA,IAAKC,EACD,MAAM,IAAIlH,EAGd,IACI0B,EAAY,IAAI5S,iBAAiBgT,OAAOK,OAAOtF,QAAQ,CAAEyD,KAAI5Y,KAAM,WAAawa,EAAQI,GAC5F,CACA,MACA,CACA,IAAKZ,EACD,MAAM,IAAI1B,EAEd,OAAO0B,CACX,CAuCmB8F,CAAWnH,EAAKE,EAAK+B,EAAYhC,EAAIkC,EAAKb,GACrD,IAAK,UACL,IAAK,UACL,IAAK,UAGD,OAFIpB,aAAezR,YACfkT,EAAezB,EAAKxL,SAASsL,EAAInT,MAAM,EAAG,GAAI,KA3C9D1D,eAA0B6W,EAAKE,EAAK+B,EAAYhC,EAAIkC,EAAKb,GACrD,IAAIO,EACA3B,aAAezR,WACfoT,QAAeJ,OAAOK,OAAOC,UAAU,MAAO7B,EAAK,WAAW,EAAO,CAAC,aAGtEM,EAAkBN,EAAKF,EAAK,WAC5B6B,EAAS3B,GAEb,IACI,OAAO,IAAIzR,iBAAiBgT,OAAOK,OAAOtF,QAAQ,CAC9C8F,eAAgBhB,EAChBrB,KACA5Y,KAAM,UACNkb,UAAW,KACZV,EAAQlL,EAAOsL,EAAYE,IAClC,CACA,MACI,MAAM,IAAIxC,CACd,CACJ,CAwBmByH,CAAWpH,EAAKE,EAAK+B,EAAYhC,EAAIkC,EAAKb,GACrD,QACI,MAAM,IAAI5B,EAAiB,gDAEtC,EC9FD,SAAsBI,EAAKE,EAAK5U,EAAKic,EAAaC,EAAqB,CAAC,KACpE,IAAItE,EACA5T,EACA8Q,EACJ,OAAQJ,GACJ,IAAK,MACDI,EAAM9U,EACN,MAEJ,IAAK,UACL,IAAK,iBACL,IAAK,iBACL,IAAK,iBAAkB,CAEnB,GADA6V,EAAgB7V,IACXmc,GAAenc,GAChB,MAAM,IAAIsU,EAAiB,yFAE/B,MAAM,IAAEgE,EAAG,IAAEC,GAAQ2D,EACrB,IAAIE,EAEAA,EADAF,EAAmBG,UACGC,GAAaJ,EAAmBG,IAAK3H,UAGrC2B,OAAOK,OAAOgF,YAAY1b,EAAImV,WAAW,EAAM,CAAC,gBAAgBiD,WAE1F,MAAM,EAAEmE,EAAC,EAAEC,EAAC,IAAEtC,EAAG,IAAEJ,SC5BxB/b,eAAyBiC,GAC5B,OCNWjC,eAAwBiC,GACnC,GAAIgW,GAAYhW,GAAM,CAClB,GAAiB,WAAbA,EAAI6D,KAIJ,OAAO7D,EAAI8a,OAAO,CAAEtP,OAAQ,QAH5BxL,EAAMA,EAAI8a,QAKlB,CACA,GAAI9a,aAAeqD,WACf,MAAO,CACHyW,IAAK,MACLyB,EAAGkB,EAAKzc,IAGhB,IAAK8V,EAAY9V,GACb,MAAM,IAAI7H,UAAUge,EAAgBnW,EAAK,YAAa,YAAa,eAEvE,IAAKA,EAAImb,YACL,MAAM,IAAIhjB,UAAU,yDAExB,MAAM,IAAEmiB,EAAG,QAAEC,EAAO,IAAE7F,EAAG,IAAE2F,KAAQN,SAAc1D,OAAOK,OAAOoB,UAAU,MAAO9X,GAChF,OAAO+Z,CACX,CDjBW2C,CAAS1c,EACpB,CD0B6C2c,CAAUP,GACrCQ,QAAqBT,GAAiBnc,EAAKoc,EAAsB,YAAR1H,EAAoBE,EAAMF,EAAa,YAARA,EAAoBmI,GAAUjI,GAAOtL,SAASoL,EAAIjT,OAAO,GAAI,GAAI,IAAK6W,EAAKC,GAQzK,GAPAvU,EAAa,CAAEqY,IAAK,CAAEE,IAAGrC,MAAKJ,QAClB,OAARA,IACA9V,EAAWqY,IAAIG,EAAIA,GACnBlE,IACAtU,EAAWsU,IAAMmE,EAAKnE,IACtBC,IACAvU,EAAWuU,IAAMkE,EAAKlE,IACd,YAAR7D,EAAmB,CACnBI,EAAM8H,EACN,KACJ,CACA9H,EAAMmH,GAAea,GAAYlI,GACjC,MAAMmI,EAAQrI,EAAIjT,OAAO,GACzBmW,QAAqBoF,GAAWD,EAAOH,EAAc9H,GACrD,KACJ,CACA,IAAK,WACL,IAAK,eACL,IAAK,eACL,IAAK,eACDA,EAAMmH,GAAea,GAAYlI,GACjCiB,EAAgB7V,GAChB4X,QP9CL7Z,eAAuB2W,EAAK1U,EAAK8U,GAGpC,OAFAM,EAAkBpV,EAAK0U,EAAK,WAC5BuI,GAAevI,EAAK1U,GACb,IAAIqD,iBAAiBgT,OAAOK,OAAOjF,QAAQkI,GAAgBjF,GAAM1U,EAAK8U,GACjF,CO0CiCoI,CAAcxI,EAAK1U,EAAK8U,GAC7C,MAEJ,IAAK,qBACL,IAAK,qBACL,IAAK,qBAAsB,CACvBA,EAAMmH,GAAea,GAAYlI,GACjC,MAAM,IAAEwE,EAAG,IAAED,GAAQ+C,IAClBtE,kBAAiB5T,STxCzBjG,eAAoB2W,EAAK1U,EAAK8U,EAAKsE,EAAM,KAAMD,EAAM9C,OAAOC,gBAAgB,IAAIjT,WAAW,MAC9F,MAAM8Z,QAAgBjF,GAAUiB,EAAKzE,EAAK0E,EAAKpZ,GAE/C,MAAO,CAAE4X,mBADkBoF,GAAWtI,EAAIjT,OAAO,GAAI0b,EAASrI,GACvCsE,MAAKD,IAAKsD,EAAKtD,GAC1C,CSoCqDiE,CAAa1I,EAAK1U,EAAK8U,EAAKsE,EAAKD,IAC1E,KACJ,CACA,IAAK,SACL,IAAK,SACL,IAAK,SACDrE,EAAMmH,GAAea,GAAYlI,GACjCgD,QAAqBoF,GAAWtI,EAAK1U,EAAK8U,GAC1C,MAEJ,IAAK,YACL,IAAK,YACL,IAAK,YAAa,CACdA,EAAMmH,GAAea,GAAYlI,GACjC,MAAM,GAAEC,GAAOqH,IACZtE,kBAAiB5T,SGhFzBjG,eAAoB2W,EAAK1U,EAAK8U,EAAKD,GACtC,MAAMwI,EAAe3I,EAAIjT,MAAM,EAAG,GAC5B6b,QAAgB7L,GAAQ4L,EAAcvI,EAAK9U,EAAK6U,EAAI,IAAIxR,WAAW,IACzE,MAAO,CACHuU,aAAc0F,EAAQzG,WACtBhC,GAAI4H,EAAKa,EAAQzI,IACjBkC,IAAK0F,EAAKa,EAAQvG,KAE1B,CHwEqDwG,CAAS7I,EAAK1U,EAAK8U,EAAKD,IACjE,KACJ,CACA,QACI,MAAM,IAAIP,EAAiB,6DAGnC,MAAO,CAAEQ,MAAK8C,eAAc5T,aAC/B,EI3FD,OAAmBwZ,KACf,MAAMC,EAAUD,EAAQ/O,OAAOiH,SAC/B,GAAuB,IAAnB+H,EAAQ7b,QAAmC,IAAnB6b,EAAQ7b,OAChC,OAAO,EAEX,IAAI8Q,EACJ,IAAK,MAAMgL,KAAUD,EAAS,CAC1B,MAAMzZ,EAAa1G,OAAOV,KAAK8gB,GAC/B,GAAKhL,GAAoB,IAAbA,EAAI3W,KAIhB,IAAK,MAAM4hB,KAAa3Z,EAAY,CAChC,GAAI0O,EAAIvW,IAAIwhB,GACR,OAAO,EAEXjL,EAAIrF,IAAIsQ,EACZ,MARIjL,EAAM,IAAIjJ,IAAIzF,EAStB,CACA,OAAO,CACV,ECnBD,IAAgB4Z,EAAKC,EAAmBC,EAAkBC,EAAiBC,KACvE,QAAwB/lB,IAApB+lB,EAAWC,WAAgDhmB,IAA1B8lB,GAAiBE,KAClD,MAAM,IAAIL,EAAI,kEAElB,IAAKG,QAA4C9lB,IAAzB8lB,EAAgBE,KACpC,OAAO,IAAIxU,IAEf,IAAKtL,MAAMuD,QAAQqc,EAAgBE,OACC,IAAhCF,EAAgBE,KAAKrc,QACrBmc,EAAgBE,KAAKC,MAAMrlB,GAA2B,iBAAVA,GAAuC,IAAjBA,EAAM+I,SACxE,MAAM,IAAIgc,EAAI,yFAElB,IAAIO,EAEAA,OADqBlmB,IAArB6lB,EACa,IAAI7Z,IAAI,IAAI3G,OAAOR,QAAQghB,MAAsBD,EAAkB/gB,YAGnE+gB,EAEjB,IAAK,MAAMF,KAAaI,EAAgBE,KAAM,CAC1C,IAAKE,EAAWhiB,IAAIwhB,GAChB,MAAM,IAAIrJ,EAAiB,+BAA+BqJ,wBAE9D,QAA8B1lB,IAA1B+lB,EAAWL,GACX,MAAM,IAAIC,EAAI,+BAA+BD,iBAEjD,GAAIQ,EAAWniB,IAAI2hB,SAA6C1lB,IAA/B8lB,EAAgBJ,GAC7C,MAAM,IAAIC,EAAI,+BAA+BD,iCAErD,CACA,OAAO,IAAIlU,IAAIsU,EAAgBE,KAClC,EC7BKlH,GAAO/W,GAAQA,IAAMjD,OAAOgZ,aAC5BqI,GAAeA,CAAC1J,EAAK1U,EAAKqV,KAC5B,QAAgBpd,IAAZ+H,EAAIqa,IAAmB,CACvB,IAAItF,EACJ,OAAQM,GACJ,IAAK,OACL,IAAK,SACDN,EAAW,MACX,MACJ,IAAK,UACL,IAAK,UACDA,EAAW,MAGnB,GAAI/U,EAAIqa,MAAQtF,EACZ,MAAM,IAAI5c,UAAU,sDAAsD4c,kBAElF,CACA,QAAgB9c,IAAZ+H,EAAI0U,KAAqB1U,EAAI0U,MAAQA,EACrC,MAAM,IAAIvc,UAAU,sDAAsDuc,mBAE9E,GAAIvW,MAAMuD,QAAQ1B,EAAIua,SAAU,CAC5B,IAAI8D,EACJ,QAAQ,GACJ,IAAe,SAAVhJ,GAA8B,WAAVA,EACzB,IAAa,QAARX,EACL,KAAKA,EAAIrO,SAAS,UACdgY,EAAgBhJ,EAChB,MACJ,KAAKX,EAAIvO,WAAW,SAChBkY,EAAgB,aAChB,MACJ,IAAK,0BAA0BtZ,KAAK2P,GAE5B2J,GADC3J,EAAIrO,SAAS,QAAUqO,EAAItO,SAAS,MACX,YAAViP,EAAsB,UAAY,YAGlCA,EAEpB,MACJ,IAAe,YAAVA,GAAuBX,EAAIvO,WAAW,OACvCkY,EAAgB,UAChB,MACJ,IAAe,YAAVhJ,EACDgJ,EAAgB3J,EAAIvO,WAAW,OAAS,YAAc,aAG9D,GAAIkY,IAA4D,IAA3Cre,EAAIua,SAASlU,WAAWgY,GACzC,MAAM,IAAIlmB,UAAU,+DAA+DkmB,kBAE3F,CACA,OAAO,CAAI,EA2Df,IAAgB3J,EAAK1U,EAAKqV,KACJX,EAAIvO,WAAW,OACrB,QAARuO,GACAA,EAAIvO,WAAW,UACf,oCAAoCpB,KAAK2P,IACzC,0CAA0C3P,KAAK2P,GA9D5B4J,EAAC5J,EAAK1U,EAAKqV,KAClC,KAAIrV,aAAeqD,YAAnB,CAEA,GAAI0W,GAAU/Z,GAAM,CAChB,GXlDD,SAAqBA,GACxB,MAAmB,QAAZA,EAAI8Z,KAAkC,iBAAV9Z,EAAIub,CAC3C,CWgDYxB,CAAgB/Z,IAAQoe,GAAa1J,EAAK1U,EAAKqV,GAC/C,OACJ,MAAM,IAAIld,UAAU,0HACxB,CACA,IAAKomB,GAAUve,GACX,MAAM,IAAI7H,UAAUge,EAAgBzB,EAAK1U,EAAK,YAAa,YAAa,eAAgB,eAE5F,GAAiB,WAAbA,EAAI6D,KACJ,MAAM,IAAI1L,UAAU,GAAG4e,GAAI/W,iEAVrB,CAWV,EAmDIse,CAAmB5J,EAAK1U,EAAKqV,GAjDTmJ,EAAC9J,EAAK1U,EAAKqV,KACnC,GAAI0E,GAAU/Z,GACV,OAAQqV,GACJ,IAAK,UACL,IAAK,OACD,GXxET,SAAsBrV,GACzB,MAAmB,QAAZA,EAAI8Z,KAAkC,iBAAV9Z,EAAIia,CAC3C,CWsEoBF,CAAiB/Z,IAAQoe,GAAa1J,EAAK1U,EAAKqV,GAChD,OACJ,MAAM,IAAIld,UAAU,oDACxB,IAAK,UACL,IAAK,SACD,GX1ET,SAAqB6H,GACxB,MAAmB,QAAZA,EAAI8Z,UAAkC,IAAV9Z,EAAIia,CAC3C,CWwEoBF,CAAgB/Z,IAAQoe,GAAa1J,EAAK1U,EAAKqV,GAC/C,OACJ,MAAM,IAAIld,UAAU,mDAGhC,IAAKomB,GAAUve,GACX,MAAM,IAAI7H,UAAUge,EAAgBzB,EAAK1U,EAAK,YAAa,YAAa,iBAE5E,GAAiB,WAAbA,EAAI6D,KACJ,MAAM,IAAI1L,UAAU,GAAG4e,GAAI/W,uEAE/B,GAAiB,WAAbA,EAAI6D,KACJ,OAAQwR,GACJ,IAAK,OACD,MAAM,IAAIld,UAAU,GAAG4e,GAAI/W,2EAC/B,IAAK,UACD,MAAM,IAAI7H,UAAU,GAAG4e,GAAI/W,8EAKvC,GAAiB,YAAbA,EAAI6D,KACJ,OAAQwR,GACJ,IAAK,SACD,MAAM,IAAIld,UAAU,GAAG4e,GAAI/W,4EAC/B,IAAK,UACD,MAAM,IAAI7H,UAAU,GAAG4e,GAAI/W,6EAIvC,EAYIwe,CAAoB9J,EAAK1U,EAAKqV,EAErC,ECnHM,MAAMoJ,GACT,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA7mB,WAAAA,CAAYqe,GACR,KAAMA,aAAqB5S,YACvB,MAAM,IAAIlL,UAAU,+CAExBI,MAAK,EAAa0d,CACtB,CACAyI,0BAAAA,CAA2B1a,GACvB,GAAIzL,MAAK,EACL,MAAM,IAAIJ,UAAU,sDAGxB,OADAI,MAAK,EAA2ByL,EACzBzL,IACX,CACAomB,kBAAAA,CAAmBZ,GACf,GAAIxlB,MAAK,EACL,MAAM,IAAIJ,UAAU,8CAGxB,OADAI,MAAK,EAAmBwlB,EACjBxlB,IACX,CACAqmB,0BAAAA,CAA2BC,GACvB,GAAItmB,MAAK,EACL,MAAM,IAAIJ,UAAU,sDAGxB,OADAI,MAAK,EAA2BsmB,EACzBtmB,IACX,CACAumB,oBAAAA,CAAqBC,GACjB,GAAIxmB,MAAK,EACL,MAAM,IAAIJ,UAAU,gDAGxB,OADAI,MAAK,EAAqBwmB,EACnBxmB,IACX,CACAymB,8BAAAA,CAA+B9I,GAE3B,OADA3d,MAAK,EAAO2d,EACL3d,IACX,CACA0mB,uBAAAA,CAAwBnK,GACpB,GAAIvc,MAAK,EACL,MAAM,IAAIJ,UAAU,mDAGxB,OADAI,MAAK,EAAOuc,EACLvc,IACX,CACA2mB,uBAAAA,CAAwBrK,GACpB,GAAItc,MAAK,EACL,MAAM,IAAIJ,UAAU,mDAGxB,OADAI,MAAK,EAAMsc,EACJtc,IACX,CACA,aAAMkZ,CAAQzR,EAAK0H,GACf,IAAKnP,MAAK,IAAqBA,MAAK,IAAuBA,MAAK,EAC5D,MAAM,IAAIic,EAAW,gHAEzB,IAAK2K,GAAW5mB,MAAK,EAAkBA,MAAK,EAAoBA,MAAK,GACjE,MAAM,IAAIic,EAAW,uGAEzB,MAAMwJ,EAAa,IACZzlB,MAAK,KACLA,MAAK,KACLA,MAAK,GAGZ,GADA6mB,GAAa5K,EAAY,IAAIvQ,IAAOyD,GAASuW,KAAM1lB,MAAK,EAAkBylB,QACnD/lB,IAAnB+lB,EAAWqB,IACX,MAAM,IAAI/K,EAAiB,wEAE/B,MAAM,IAAEI,EAAG,IAAEE,GAAQoJ,EACrB,GAAmB,iBAARtJ,IAAqBA,EAC5B,MAAM,IAAIF,EAAW,6DAEzB,GAAmB,iBAARI,IAAqBA,EAC5B,MAAM,IAAIJ,EAAW,wEAEzB,IAAIoD,EAKA9C,EAsBAoC,EACA6G,EACAuB,EA5BJ,GAAI/mB,MAAK,IAAiB,QAARmc,GAAyB,YAARA,GAC/B,MAAM,IAAIvc,UAAU,8EAA8Euc,KAEtG6K,GAAqB,QAAR7K,EAAgBE,EAAMF,EAAK1U,EAAK,WAE7C,CACI,IAAIgE,EACJ,MAAMuX,QAAUe,GAAatc,EAAK0U,KAC/BI,MAAK8C,eAAc5T,oBAAqBwb,GAAqB9K,EAAKE,EAAK2G,EAAGhjB,MAAK,EAAMA,MAAK,IACzFyL,IACI0D,GAAWqM,KAAerM,EACrBnP,MAAK,EAINA,MAAK,EAAqB,IAAKA,MAAK,KAAuByL,GAH3DzL,KAAKumB,qBAAqB9a,GAMxBzL,MAAK,EAIXA,MAAK,EAAmB,IAAKA,MAAK,KAAqByL,GAHvDzL,KAAKomB,mBAAmB3a,GAMpC,CAKI+Z,EADAxlB,MAAK,EACa8Z,EAAQ/W,OAAOmhB,EAAKgD,KAAKC,UAAUnnB,MAAK,KAGxC8Z,EAAQ/W,OAAO,IAEjC/C,MAAK,GACL+mB,EAAY7C,EAAKlkB,MAAK,GACtB2e,EAAiB3L,EAAOwS,EAAiB1L,EAAQ/W,OAAO,KAAM+W,EAAQ/W,OAAOgkB,KAG7EpI,EAAiB6G,EAErB,MAAM,WAAElH,EAAU,IAAEE,EAAG,GAAElC,SAAapD,GAAQmD,EAAKrc,MAAK,EAAYuc,EAAKvc,MAAK,EAAK2e,GAC7EyI,EAAM,CACR9I,WAAY4F,EAAK5F,IAuBrB,OArBIhC,IACA8K,EAAI9K,GAAK4H,EAAK5H,IAEdkC,IACA4I,EAAI5I,IAAM0F,EAAK1F,IAEfa,IACA+H,EAAIC,cAAgBnD,EAAK7E,IAEzB0H,IACAK,EAAIzJ,IAAMoJ,GAEV/mB,MAAK,IACLonB,EAAIE,UAAYvN,EAAQ7W,OAAOsiB,IAE/BxlB,MAAK,IACLonB,EAAI5L,YAAcxb,MAAK,GAEvBA,MAAK,IACLonB,EAAIjC,OAASnlB,MAAK,GAEfonB,CACX,EClKG,MAAMG,GACT,GACAloB,WAAAA,CAAYqe,GACR1d,MAAK,EAAa,IAAIkmB,GAAiBxI,EAC3C,CACAgJ,uBAAAA,CAAwBnK,GAEpB,OADAvc,MAAK,EAAW0mB,wBAAwBnK,GACjCvc,IACX,CACA2mB,uBAAAA,CAAwBrK,GAEpB,OADAtc,MAAK,EAAW2mB,wBAAwBrK,GACjCtc,IACX,CACAomB,kBAAAA,CAAmBZ,GAEf,OADAxlB,MAAK,EAAWomB,mBAAmBZ,GAC5BxlB,IACX,CACAmmB,0BAAAA,CAA2B1a,GAEvB,OADAzL,MAAK,EAAWmmB,2BAA2B1a,GACpCzL,IACX,CACA,aAAMkZ,CAAQzR,EAAK0H,GACf,MAAMiY,QAAYpnB,MAAK,EAAWkZ,QAAQzR,EAAK0H,GAC/C,MAAO,CAACiY,EAAIE,UAAWF,EAAIC,cAAeD,EAAI9K,GAAI8K,EAAI9I,WAAY8I,EAAI5I,KAAK/T,KAAK,IACpF,ECdJ,MCXA,IAAgB+c,EAAQC,KACpB,QAAmB/nB,IAAf+nB,KACE7hB,MAAMuD,QAAQse,IAAeA,EAAW9B,MAAM+B,GAAmB,iBAANA,KAC7D,MAAM,IAAI9nB,UAAU,IAAI4nB,yCAE5B,GAAKC,EAGL,OAAO,IAAIvW,IAAIuW,EAClB,ECNMjiB,eAAemiB,GAAeP,EAAK3f,EAAK0H,GAI3C,GAHIiY,aAAetc,aACfsc,EAAMrN,EAAQ7W,OAAOkkB,IAEN,iBAARA,EACP,MAAM,IAAInL,EAAW,8CAEzB,MAAQ,EAAGuJ,EAAiB,EAAGnG,EAAc,EAAG/C,EAAI,EAAGgC,EAAY,EAAGE,EAAG,OAAEnV,GAAY+d,EAAI5X,MAAM,KACjG,GAAe,IAAXnG,EACA,MAAM,IAAI4S,EAAW,uBAEzB,MAAMpC,QCFHrU,eAAgC4hB,EAAK3f,EAAK0H,GAC7C,IAAK9H,GAAS+f,GACV,MAAM,IAAInL,EAAW,mCAEzB,QAAsBvc,IAAlB0nB,EAAIE,gBAA0C5nB,IAAf0nB,EAAIjC,aAA4CzlB,IAApB0nB,EAAI5L,YAC/D,MAAM,IAAIS,EAAW,uBAEzB,QAAevc,IAAX0nB,EAAI9K,IAAsC,iBAAX8K,EAAI9K,GACnC,MAAM,IAAIL,EAAW,4CAEzB,GAA8B,iBAAnBmL,EAAI9I,WACX,MAAM,IAAIrC,EAAW,4CAEzB,QAAgBvc,IAAZ0nB,EAAI5I,KAAwC,iBAAZ4I,EAAI5I,IACpC,MAAM,IAAIvC,EAAW,yCAEzB,QAAsBvc,IAAlB0nB,EAAIE,WAAoD,iBAAlBF,EAAIE,UAC1C,MAAM,IAAIrL,EAAW,uCAEzB,QAA0Bvc,IAAtB0nB,EAAIC,eAA4D,iBAAtBD,EAAIC,cAC9C,MAAM,IAAIpL,EAAW,oCAEzB,QAAgBvc,IAAZ0nB,EAAIzJ,KAAwC,iBAAZyJ,EAAIzJ,IACpC,MAAM,IAAI1B,EAAW,0BAEzB,QAAmBvc,IAAf0nB,EAAIjC,SAAyB9d,GAAS+f,EAAIjC,QAC1C,MAAM,IAAIlJ,EAAW,gDAEzB,QAAwBvc,IAApB0nB,EAAI5L,cAA8BnU,GAAS+f,EAAI5L,aAC/C,MAAM,IAAIS,EAAW,uDAEzB,IAAI2L,EACJ,GAAIR,EAAIE,UACJ,IACI,MAAM9B,EAAkBtB,EAAKkD,EAAIE,WACjCM,EAAaV,KAAK7mB,MAAM0Z,EAAQ7W,OAAOsiB,GAC3C,CACA,MACI,MAAM,IAAIvJ,EAAW,kCACzB,CAEJ,IAAK2K,GAAWgB,EAAYR,EAAIjC,OAAQiC,EAAI5L,aACxC,MAAM,IAAIS,EAAW,oHAEzB,MAAMwJ,EAAa,IACZmC,KACAR,EAAIjC,UACJiC,EAAI5L,aAGX,GADAqL,GAAa5K,EAAY,IAAIvQ,IAAOyD,GAASuW,KAAMkC,EAAYnC,QACxC/lB,IAAnB+lB,EAAWqB,IACX,MAAM,IAAI/K,EAAiB,wEAE/B,MAAM,IAAEI,EAAG,IAAEE,GAAQoJ,EACrB,GAAmB,iBAARtJ,IAAqBA,EAC5B,MAAM,IAAIF,EAAW,6CAEzB,GAAmB,iBAARI,IAAqBA,EAC5B,MAAM,IAAIJ,EAAW,wDAEzB,MAAM4L,EAA0B1Y,GAAW2Y,GAAmB,0BAA2B3Y,EAAQ0Y,yBAC3FE,EAA8B5Y,GAChC2Y,GAAmB,8BAA+B3Y,EAAQ4Y,6BAC9D,GAAKF,IAA4BA,EAAwBjkB,IAAIuY,KACvD0L,GAA2B1L,EAAIvO,WAAW,SAC5C,MAAM,IAAIkO,EAAkB,wDAEhC,GAAIiM,IAAgCA,EAA4BnkB,IAAIyY,GAChE,MAAM,IAAIP,EAAkB,mEAEhC,IAAIuD,EACJ,QAA0B3f,IAAtB0nB,EAAIC,cACJ,IACIhI,EAAe6E,EAAKkD,EAAIC,cAC5B,CACA,MACI,MAAM,IAAIpL,EAAW,+CACzB,CAEJ,IAAI+L,GAAc,EACC,mBAARvgB,IACPA,QAAYA,EAAImgB,EAAYR,GAC5BY,GAAc,GAElBhB,GAAqB,QAAR7K,EAAgBE,EAAMF,EAAK1U,EAAK,WAC7C,MAAMub,QAAUe,GAAatc,EAAK0U,GAClC,IAAII,EAUAD,EACAkC,EAVJ,IACIjC,OHzFR,OAAsBJ,EAAK1U,EAAK4X,EAAcoG,EAAYtW,KACtD,OAAQgN,GACJ,IAAK,MACD,QAAqBzc,IAAjB2f,EACA,MAAM,IAAIpD,EAAW,4CACzB,OAAOxU,EAEX,IAAK,UACD,QAAqB/H,IAAjB2f,EACA,MAAM,IAAIpD,EAAW,4CAC7B,IAAK,iBACL,IAAK,iBACL,IAAK,iBAAkB,CACnB,IAAK5U,GAASoe,EAAW3B,KACrB,MAAM,IAAI7H,EAAW,+DAEzB,GADAqB,EAAgB7V,IACXmc,GAAenc,GAChB,MAAM,IAAIsU,EAAiB,yFAC/B,MAAM+H,QINXte,eAAyBgc,EAAKrF,GACjC,IAAK9U,GAASma,GACV,MAAM,IAAI5hB,UAAU,yBAExB,IAAImiB,EAGJ,OAFA5F,IAAQqF,EAAIrF,IACZ4F,IAAgCP,EAAIO,IAC5BP,EAAID,KACR,IAAK,MACD,GAAqB,iBAAVC,EAAIwB,IAAmBxB,EAAIwB,EAClC,MAAM,IAAIpjB,UAAU,2CAExB,OAAOqoB,EAAgBzG,EAAIwB,GAC/B,IAAK,MACD,GAAI,QAASxB,QAAmB9hB,IAAZ8hB,EAAI0G,IACpB,MAAM,IAAInM,EAAiB,sEAEnC,IAAK,KACL,IAAK,MACD,OAAOyG,GAAY,IAAKhB,EAAKrF,MAAK4F,QACtC,QACI,MAAM,IAAIhG,EAAiB,gDAEvC,CJjB8BuG,CAAUmD,EAAW3B,IAAK3H,GAE5C,IAAIgM,EACAC,EACJ,GAHA9K,EAAgBwG,QAGOpkB,IAAnB+lB,EAAW1F,IAAmB,CAC9B,GAA8B,iBAAnB0F,EAAW1F,IAClB,MAAM,IAAI9D,EAAW,oDACzB,IACIkM,EAAajE,EAAKuB,EAAW1F,IACjC,CACA,MACI,MAAM,IAAI9D,EAAW,qCACzB,CACJ,CACA,QAAuBvc,IAAnB+lB,EAAWzF,IAAmB,CAC9B,GAA8B,iBAAnByF,EAAWzF,IAClB,MAAM,IAAI/D,EAAW,oDACzB,IACImM,EAAalE,EAAKuB,EAAWzF,IACjC,CACA,MACI,MAAM,IAAI/D,EAAW,qCACzB,CACJ,CACA,MAAMoI,QAAqBT,GAAiBE,EAAKrc,EAAa,YAAR0U,EAAoBsJ,EAAWpJ,IAAMF,EAAa,YAARA,EAAoBmI,GAAUmB,EAAWpJ,KAAOtL,SAASoL,EAAIjT,OAAO,GAAI,GAAI,IAAKif,EAAYC,GAC7L,GAAY,YAARjM,EACA,OAAOkI,EACX,QAAqB3kB,IAAjB2f,EACA,MAAM,IAAIpD,EAAW,6BACzB,OAAOwI,GAAatI,EAAIjT,OAAO,GAAImb,EAAchF,EACrD,CACA,IAAK,WACL,IAAK,eACL,IAAK,eACL,IAAK,eACD,QAAqB3f,IAAjB2f,EACA,MAAM,IAAIpD,EAAW,6BAEzB,OADAqB,EAAgB7V,GhB/CrBjC,eAAuB2W,EAAK1U,EAAK4X,GAGpC,OAFAxC,EAAkBpV,EAAK0U,EAAK,WAC5BuI,GAAevI,EAAK1U,GACb,IAAIqD,iBAAiBgT,OAAOK,OAAOtF,QAAQuI,GAAgBjF,GAAM1U,EAAK4X,GACjF,CgB4CmBsF,CAAcxI,EAAK1U,EAAK4X,GAEnC,IAAK,qBACL,IAAK,qBACL,IAAK,qBAAsB,CACvB,QAAqB3f,IAAjB2f,EACA,MAAM,IAAIpD,EAAW,6BACzB,GAA8B,iBAAnBwJ,EAAW5E,IAClB,MAAM,IAAI5E,EAAW,sDACzB,MAAMoM,EAAWlZ,GAASmZ,eAAiB,IAC3C,GAAI7C,EAAW5E,IAAMwH,EACjB,MAAM,IAAIpM,EAAW,+DACzB,GAA8B,iBAAnBwJ,EAAW7E,IAClB,MAAM,IAAI3E,EAAW,qDACzB,IAAI2E,EACJ,IACIA,EAAMsD,EAAKuB,EAAW7E,IAC1B,CACA,MACI,MAAM,IAAI3E,EAAW,qCACzB,CACA,OlBvDLzW,eAAsB2W,EAAK1U,EAAK4X,EAAcwB,EAAKD,GACtD,MAAMgE,QAAgBjF,GAAUiB,EAAKzE,EAAK0E,EAAKpZ,GAC/C,OAAOgd,GAAatI,EAAIjT,OAAO,GAAI0b,EAASvF,EAChD,CkBoDmBwF,CAAe1I,EAAK1U,EAAK4X,EAAcoG,EAAW5E,IAAKD,EAClE,CACA,IAAK,SACL,IAAK,SACL,IAAK,SACD,QAAqBlhB,IAAjB2f,EACA,MAAM,IAAIpD,EAAW,6BACzB,OAAOwI,GAAatI,EAAK1U,EAAK4X,GAElC,IAAK,YACL,IAAK,YACL,IAAK,YAAa,CACd,QAAqB3f,IAAjB2f,EACA,MAAM,IAAIpD,EAAW,6BACzB,GAA6B,iBAAlBwJ,EAAWnJ,GAClB,MAAM,IAAIL,EAAW,+DACzB,GAA8B,iBAAnBwJ,EAAWjH,IAClB,MAAM,IAAIvC,EAAW,6DACzB,IAAIK,EAOAkC,EANJ,IACIlC,EAAK4H,EAAKuB,EAAWnJ,GACzB,CACA,MACI,MAAM,IAAIL,EAAW,oCACzB,CAEA,IACIuC,EAAM0F,EAAKuB,EAAWjH,IAC1B,CACA,MACI,MAAM,IAAIvC,EAAW,qCACzB,CACA,ON5GLzW,eAAsB2W,EAAK1U,EAAK4X,EAAc/C,EAAIkC,GACrD,MAAMsG,EAAe3I,EAAIjT,MAAM,EAAG,GAClC,OAAO2P,GAAQiM,EAAcrd,EAAK4X,EAAc/C,EAAIkC,EAAK,IAAI1T,WAAW,GAC5E,CMyGmBka,CAAS7I,EAAK1U,EAAK4X,EAAc/C,EAAIkC,EAChD,CACA,QACI,MAAM,IAAIzC,EAAiB,6DAGtC,EG1BmBwM,CAAqBpM,EAAK6G,EAAG3D,EAAcoG,EAAYtW,EACvE,CACA,MAAO4T,GACH,GAAIA,aAAenjB,WAAamjB,aAAe9G,GAAc8G,aAAehH,EACxE,MAAMgH,EAEVxG,EAAMgI,GAAYlI,EACtB,CAGA,QAAe3c,IAAX0nB,EAAI9K,GACJ,IACIA,EAAK4H,EAAKkD,EAAI9K,GAClB,CACA,MACI,MAAM,IAAIL,EAAW,oCACzB,CAEJ,QAAgBvc,IAAZ0nB,EAAI5I,IACJ,IACIA,EAAM0F,EAAKkD,EAAI5I,IACnB,CACA,MACI,MAAM,IAAIvC,EAAW,qCACzB,CAEJ,MAAMuJ,EAAkB1L,EAAQ/W,OAAOqkB,EAAIE,WAAa,IACxD,IAAI3I,EAOAL,EALAK,OADYjf,IAAZ0nB,EAAIzJ,IACa3K,EAAOwS,EAAiB1L,EAAQ/W,OAAO,KAAM+W,EAAQ/W,OAAOqkB,EAAIzJ,MAGhE6H,EAGrB,IACIlH,EAAa4F,EAAKkD,EAAI9I,WAC1B,CACA,MACI,MAAM,IAAIrC,EAAW,4CACzB,CACA,MACMnT,EAAS,CAAE4U,gBADO7E,GAAQwD,EAAKE,EAAK+B,EAAYhC,EAAIkC,EAAKG,IAK/D,QAHsBjf,IAAlB0nB,EAAIE,YACJxe,EAAO0c,gBAAkBoC,QAEbloB,IAAZ0nB,EAAIzJ,IACJ,IACI7U,EAAO0f,4BAA8BtE,EAAKkD,EAAIzJ,IAClD,CACA,MACI,MAAM,IAAI1B,EAAW,qCACzB,CAQJ,YANwBvc,IAApB0nB,EAAI5L,cACJ1S,EAAOwd,wBAA0Bc,EAAI5L,kBAEtB9b,IAAf0nB,EAAIjC,SACJrc,EAAO0d,kBAAoBY,EAAIjC,QAE/B6C,EACO,IAAKlf,EAAQrB,IAAKub,GAEtBla,CACX,CDtJ4B2f,CAAiB,CACrCnK,aACAhC,GAAIA,QAAM5c,EACV4nB,UAAW9B,EACXhH,IAAKA,QAAO9e,EACZ2nB,cAAehI,QAAgB3f,GAChC+H,EAAK0H,GACFrG,EAAS,CAAE4U,UAAW7D,EAAU6D,UAAW8H,gBAAiB3L,EAAU2L,iBAC5E,MAAmB,mBAAR/d,EACA,IAAKqB,EAAQrB,IAAKoS,EAAUpS,KAEhCqB,CACX,C,yBGvBqC4f,GAAAC,EAAA,QAAAC,GAAAD,EAAA,WAAAE,GAAAF,EAAA,WAUtB,MAAMG,WAA2B7Q,EAG5C5Y,WAAAA,CAAY6Y,GACRrE,MAAM,CACFyF,WAAYpB,EAAKoB,WACjBP,YAAab,EAAKa,YAClBG,QAASA,CAACwI,EAAGpR,IACTmI,EAAOzY,KAAI4oB,IAAAA,IAAUlH,GAEzB7I,QAASA,CAAC6I,EAAGpR,IACTmI,EAAOzY,KAAI6oB,IAAAA,IAAUnH,EAAGpR,KAE7BvL,OAAA8C,eAAA,KAAAghB,GAAA,CAAA/kB,MAAAilB,KAAAhkB,OAAA8C,eAAA,KAAA+gB,GAAA,CAAA9kB,MAAAklB,KAAAjkB,OAAA8C,eAAA,KAAA6gB,GAAA,CAAAlQ,UAAA,EAAA1U,WAAA,IACH2U,EAAAzY,KAAI0oB,IAAAA,IAAS,CACTjhB,IAAKyQ,EAAKzQ,IACVwhB,uBAA8CvpB,IAA3BwY,EAAK+Q,mBAClB/Q,EAAK+Q,kBAGnB,CAEAjQ,gBAAAA,CAAiBkQ,GACb,MAAuB,iBAATA,GACD,OAATA,GACG,SAAUA,GACI,QAAdA,EAAK5d,MACL,UAAW4d,GACW,iBAAfA,EAAKplB,KACvB,EAqEH,eAAAklB,GAnEkBlQ,GACX,GAAIL,EAAAzY,KAAI0oB,IAAAA,IAAOO,mBAAqBjpB,KAAKgZ,iBAAiBF,GAEtD,OADAK,QAAQC,KAAK,kDACNN,EAEX,IAAIqQ,EACJ,GAAqB,iBAAVrQ,EAAoB,CAC3B,MAAMsQ,EAAUC,KAAavQ,GAC7B,GAAIsQ,EAAS,CACT,MAAME,EAAUF,EAAQ5d,SAASC,WAAWhI,IAAI,WAChD,GAAI6lB,GAAuB,UAAZA,EACX,MAAM,IAAIvlB,MAAM,gEAEpBolB,EAAU,CACN3d,SAAU4d,EAAQ5d,SAAStB,WAC3BwT,UAAW0L,EAAQG,KAE3B,MACIJ,EAAU,CACNzL,WAAW,IAAIlb,aAAcO,OAAO+V,GACpCtN,SAAU,2BAGtB,MACIsN,aAAiBzS,aACjByS,aAAiB0Q,kBAEjBL,EAAU,CACNzL,UAAW,IAAI5S,WAAWgO,GAC1BtN,SAAU,4BAEPnF,YAAY4S,OAAOH,KAC1BqQ,EAAU,CACNzL,UAAW,IAAI5S,WAAWgO,EAAMnB,QAChCnM,SAAU,6BAGlB,IAAM2d,EACF,MAAM,IAAIplB,MAAM,+CAA+C+U,YAEnE,MAAM2Q,EAAK,IAAIlC,GACX4B,EAAQzL,WAWZ,MAAO,CACHpS,KAAM,MACNxH,YAXqB2lB,EACpBrD,mBAAmB,CAEhBjK,IAAK,MACLE,IAAK,UACLqN,IAAKP,EAAQ3d,SACbme,IAAK,SAERzQ,QAAQT,EAAAzY,KAAI0oB,IAAAA,IAAOjhB,KAK5B,CAAC,eAAAshB,GAEcjQ,EAA+B9W,GAC1C,MAAM,UAAE0b,SAAoBiK,GAAe7O,EAAMhV,MAAO2U,EAAAzY,KAAI0oB,IAAAA,IAAOjhB,KACnE,GAAIiW,EAAU/F,kBAAkBtR,YAC5B,OAAOqX,EAAU/F,OAErB,MAAM,IAAI5T,MACN,+EAER,CCzGJ,MAAM6lB,GAA2BpkB,UAC7B,IAAI0O,EACJ,GAA2B,iBAAhB2V,GAEP,GADA3V,QAAgBS,EAAGT,QAAQzQ,IAAIomB,IACzB3V,EACF,MAAM,IAAInQ,MAAM,gCAAkC8lB,QAGtD3V,EAAU2V,EAEd,IAAK3V,EAAQ4V,QACT,MAAM,IAAI/lB,MAAM,2DAGpB,OADY,IAAI+kB,GAAmB,CAAErhB,IAAKyM,EAAQ4V,SACxC,EAkBDC,GAAoBvkB,MAC7BqkB,EACAG,KAEA,GAA0B,iBAAfA,EACP,OAAOA,EAEX,GAC0B,iBAAfA,GACQ,OAAfA,GACA,SAAUA,GACV,UAAWA,GACS,QAApBA,EAAW1e,MACiB,iBAArB0e,EAAWlmB,MACpB,CACE,MAAM+V,OA9BQrU,OAClBqkB,EACAI,KAEA,GAAoB,QAAhBA,EAAO3e,KACP,MAAM,IAAIvH,MAAM,6BAEpB,MAAMmmB,QAAYN,GAAyBC,GACrCM,QAAaD,EAAIrR,QAAQoR,GAC/B,GAAa,OAATE,EACA,MAAM,IAAIpmB,MAAM,iCAEpB,OAAOomB,CAAI,EAkBiBC,CACpBP,EACAG,GAOJ,OAAO,IAAItnB,aAAcQ,OAAO,IAAI4H,WAAW+O,GACnD,CACA,MAAMqQ,QAAYN,GAAyBC,GAI3C,aADkBK,EAAItR,kBAAkBoR,EAC9B,EChCP,MAAMK,GAAiC7kB,OAAS8kB,YAAWC,SAAsBC,KACpF1T,QAAQ2T,WAAWC,KAAKH,GACxB,MAAMI,EAAQC,GAA0BN,EAAWC,GAC7CM,ECnCH,SACHC,EACA9oB,EACA+oB,GAAW,GAEX,OAAOjU,QAAQ2T,WAAWO,SAAS,CAC/BT,MAAOO,EACPG,MAAOF,EACDxrB,EAAIyC,EAAM2U,GACV3U,GAEd,CDwBkBkpB,CAAsBX,EAAOC,GAAc,GACnDW,EAASrU,QAAQ2T,WAAmBW,kBACpCT,QACAE,QACAM,CAAK,EAGTE,GAAcf,GAAsB,WAAWA,IAE/CM,GAA4BplB,MAAO8kB,EAAmBC,WAClDzT,QAAQwU,QAAQC,QAAQ1nB,IAAI,CAC9B,CAACwnB,GAAWf,IAAaC,GAC3B,EAqBNzT,QAAQE,QAAQwU,UAAUC,aACtB,SAASC,EAA0BC,EAAQC,GAEvC,GADAzS,QAAQ0S,IAAI,aAAcH,EAASC,GACjB,uBAAdA,EAAO5W,GACP,OAEJ,MAAM+W,EAAOtmB,UACT,MAAM+kB,OAzBS/kB,WACvB,MAAMiC,EAAM4jB,GAAWf,GAEvB,aADkBxT,QAAQwU,QAAQC,QAAQ9nB,IAAIgE,IACnCA,EAAI,EAsBaskB,CAAmBL,EAAQ/gB,KAAK2f,WACpD,GAAMC,EAIN,UACU9Q,QAAQG,QAAQ9C,QAAQ2T,WAAWqB,KAAKvB,GAClD,CAAE,MAAO/hB,GACL2Q,QAAQC,KAAK,mCACbD,QAAQvJ,MAAMpH,EAClB,CAAC,aA7BkBhD,iBACrBsR,QAAQwU,QAAQC,QAAQS,OAAOX,GAAWf,GAAW,EA6BzC2B,CAAuBP,EAAQ/gB,KAAK2f,UAC9C,MAVInR,QAAQC,KAAK,iDAUjB,EAEE8S,EAAO1mB,UACT,UAEiB,YAAT8F,EACMwL,QAAQqV,QAAQC,eAAeV,EAAQ/gB,KAAK2f,UAAWoB,EAAQ/gB,KAAK7G,OACpEgT,QAAQqV,QAAQE,cAAcX,EAAQ/gB,KAAK2f,UAAWoB,EAAQ/gB,KAAK7G,QAE7EqV,QAAQmT,MAAM,sCAAuCZ,EAAQ/gB,KAAK2f,UACtE,CAAE,MAAO9hB,GACL2Q,QAAQC,KAAK,wCACbD,QAAQvJ,MAAMpH,EAClB,GAEJ,MAAqB,mBAAjBkjB,EAAQpgB,MACRwgB,IAAOvS,MAAK,IAAM2S,EAAK,kBACvBN,KAGiB,kBAAjBF,EAAQpgB,MACRwgB,IAAOvS,MAAK,IAAM2S,EAAK,iBACvBN,UAFJ,CAKJ,IEpGJzS,QAAQmT,MAAM,0BAEd,MAAMC,GAAgBC,IACX,IACAA,EACHC,cAAU/sB,IAIlB8F,eAAeknB,GACXC,EACArV,GAKA,CAkBJ9R,eAAeonB,GACXJ,EACAlV,EACAJ,EACA2V,GAYAxC,GACI,CAAEC,UAAWkC,EAAQd,QAAQ3W,GAAIwV,MAAOiC,EAAQM,SAAS/X,IACzDxV,EAAI2X,EAAcP,GAE1B,CAEAG,QAAQqV,QAAQY,uBAAuB,CACnCC,QAAS,CACL,mBAAMC,CAAcT,EAASU,GACzB,MAAM7oB,QAAasQ,EAAGR,YAAYgZ,UAClC,GAAI9oB,EAAKgF,OAAS,EAEd,YADAmjB,EAAQC,SAAS7S,QAAQvV,EAAK,GAAGqc,QAGrC,MAAM0M,QAAgBC,OAAOvP,OAAOK,OAAOgF,YACvC,WACA,EACA,CAAC,OAAQ,WAEPvD,EAAYlI,QACR2V,OAAOvP,OAAOK,OAAOoB,UAAU,OAAQ6N,EAAQxN,kBAEnDjL,EAAGR,YAAYW,IAAI,CACrB4L,OAAQd,EACR0N,cAAeD,OAAOvP,OAAOK,OAAOoB,UAAU,QAAS6N,EAAQvN,cAEnE2M,EAAQC,SAAS7S,QAAQgG,EAC7B,EACA,4BAAM2N,CAAuBf,EAASU,GAClC,MAAMpZ,EAAWa,EAAGoB,0BAChBmX,EAAK/W,YACL+W,EAAKM,mBAAmBvX,SACxBiX,EAAKM,mBAAmBC,eAE5BjB,EAAQC,SAAS7S,cAAc9F,EAASe,QAC5C,GAEJX,QAAS,CACL,mBAAMwZ,CAAclB,EAASU,GACzB,MAAMzlB,QAAYkN,EAAGR,YAAY1Q,IAAIypB,EAAKhZ,QAAQyZ,SAASpX,YAC3D,IAAM9O,EACF,MAAM,IAAI1D,MACN,8BACEmpB,EAAKhZ,QAAQyZ,SAASpX,kBAG1B5B,EAAGT,QAAQY,IAAI,CACjBC,GAAImY,EAAKhZ,QAAQa,GACjB6Y,WAAYnmB,EACZomB,iBAAkB,eAAgBX,EAAKhZ,QAAQiC,YACzC+W,EAAKhZ,QAAQiC,YAAYI,gBACzB7W,EACNouB,YAAY,IAEhBtB,EAAQC,SAAS7S,SACrB,EACA,uBAAMmU,CAAkBvB,GACpB,MAAMtY,QAAgBS,EAAGT,QAAQzQ,IAAI+oB,EAAQtY,QAAQa,IACrD,IAAMb,EACF,MAAM,IAAInQ,MAAM,gCAAkCyoB,EAAQtY,QAAQa,IAEtE,GAAIb,EAAQ8Z,UACR,MAAM,IAAIjqB,MAAM,4DAEpB,MAAMkqB,QAAqBZ,OAAOvP,OAAOK,OAAOgF,YAC5C,UACA,EACA,CAAC,cAEC+K,EAAUxW,QACN2V,OAAOvP,OAAOK,OAAOoB,UAAU,OAAQ0O,EAAarO,YAExDvK,EAAqC,CACvC2Y,UAAW,CACPV,cAAeD,OAAOvP,OAAOK,OAAOoB,UAAU,QAAS0O,EAAapO,YACpEa,OAAQwN,UAGVvZ,EAAGT,QAAQoB,OAAOpB,EAASmB,GACjCmX,EAAQC,SAAS7S,QAAQ,CACrB8G,OAAQwN,GAEhB,EACA,uCAAMC,CAAkC3B,EAASU,GAC7C,MAAMhZ,QAAgBS,EAAGT,QAAQzQ,IAAI+oB,EAAQtY,QAAQa,IACrD,IAAMb,EACF,MAAM,IAAInQ,MAAM,gCAAkCyoB,EAAQtY,QAAQa,IAEtE,IAAMb,EAAQ0Z,WACV,MAAM,IAAI7pB,MAAM,uDAEpB,IAAMmQ,EAAQ8Z,UACV,MAAM,IAAIjqB,MAAM,sDAEpB,GAAImQ,EAAQka,aACR,MAAM,IAAIrqB,MAAM,kEAEpB,IAAMmQ,EAAQ2Z,iBACV,MAAM,IAAI9pB,MAAM,wEAEpB,MAAM0H,EAAqC,MACvC,MAAMkN,EAAMuO,KAAK7mB,MAAM6sB,EAAKmB,eAS5B,OARA1V,EAAI4S,QAAQ+C,YAAYxN,KACpB,IAAIhW,WAAW6N,EAAI4S,QAAQ+C,YAAYxN,MAAMnJ,OACjDgB,EAAI4S,QAAQ+C,YAAYxqB,MACpB,IAAIgH,WAAW6N,EAAI4S,QAAQ+C,YAAYxqB,OAAO6T,OAClDgB,EAAI4V,WAAWzN,KACX,IAAIhW,WAAW6N,EAAI4V,WAAWzN,MAAMnJ,OACxCgB,EAAI4V,WAAWC,KACX,IAAI1jB,WAAW6N,EAAI4V,WAAWC,MAAM7W,OACjCgB,CACV,EAX0C,GAY3C,GAAIlN,EAAWgjB,eAAe/N,OAAOgO,MAAQxa,EAAQ0Z,WAAWlN,OAC5D,MAAM,IAAI3c,MAAM,6BAEpB,GAAI0H,EAAWgjB,eAAe/N,OAAOtM,SAAWF,EAAQ2Z,iBACpD,MAAM,IAAI9pB,MAAM,iCAEpB,GAAI0H,EAAWkjB,SAASjO,OAAOgO,MAAQxa,EAAQ8Z,UAAUtN,OAErD,MAAM,IAAI3c,MAAM,uBAEpB,MAAM0Q,QAAkBqJ,OAAOK,OAAOC,UAClC,O/ChFT,SAA6BwQ,GAChC,MAAMC,EAAehkB,KAAK+jB,GACpB3rB,EAAQ,IAAI6H,WAAW+jB,EAAaxlB,QAC1C,IAAK,IAAIV,EAAI,EAAGA,EAAIkmB,EAAaxlB,OAAQV,IACrC1F,EAAM0F,GAAKkmB,EAAa7T,WAAWrS,GAEvC,OAAO1F,EAAM0U,MACjB,C+C0EgBmX,CAAoBrjB,EAAWgjB,eAAe/N,OAAOtM,QACrD,WACA,EACA,CAAC,WAECzJ,GAAO,IAAInI,aAAcO,OAAOmqB,EAAKmB,eAO3C,UANoBvQ,OAAOK,OAAO4Q,OAC9B,UACAta,EACAyY,EAAK8B,gBACLrkB,GAIA,YADA6hB,EAAQC,SAASwC,OAAOzX,EAAe0X,cAG3C,MAAM7Z,EAAwC,CAC1C+Y,aAAc,CACV3iB,aACA0jB,WAAY,CACRd,cAAenB,EAAKmB,cACpBW,gBAAiB9B,EAAK8B,yBAI5Bra,EAAGT,QAAQoB,OAAOpB,EAASmB,GACjCmX,EAAQC,SAAS7S,SACrB,EACA,+BAAMwV,CAA0B5C,EAASU,GACrC,MAAMhZ,QAAgBS,EAAGT,QAAQzQ,IAAI+oB,EAAQtY,QAAQa,IACrD,IAAMb,EACF,MAAM,IAAInQ,MAAM,gCAAkCyoB,EAAQtY,QAAQa,IAEtE,IAAMb,EAAQ0Z,WACV,MAAM,IAAI7pB,MAAM,wDAEpB,IAAMmQ,EAAQ8Z,UACV,MAAM,IAAIjqB,MAAM,uDAEpB,IAAMmQ,EAAQ2Z,iBACV,MAAM,IAAI9pB,MAAM,2DAEpB,IAAMmQ,EAAQka,aACV,MAAM,IAAIrqB,MAAM,gEAEpB,GAAImQ,EAAQka,aAAae,WAAWE,aAChC,MAAM,IAAItrB,MAAM,2DAEpB,GAAImQ,EAAQka,aAAae,WAAWd,gBAAkBnB,EAAKmB,cACvD,MAAM,IAAItqB,MAAM,sFAEpB,MAAMwS,QAAmB8W,OAAOvP,OAAOK,OAAOC,UAC1C,QACAlK,EAAQ0Z,WAAWN,QACnB,WACA,EACA,CAAC,SAEC+B,QAAqBhC,OAAOvP,OAAOK,OAAOM,KAC5C,UACAlI,GACA,IAAI/T,aAAcO,OAAOmqB,EAAKmB,sBAE5B1Z,EAAGT,QAAQoB,OAAOpB,EAAS,CAC7B,uCAAwCmb,IAE5C7C,EAAQC,SAAS7S,QAAQ,CACrByV,gBAER,EACA,8BAAMC,CAAyB9C,GAe3B,MAAMtY,QAAgBS,EAAGT,QAAQzQ,IAAI+oB,EAAQtY,QAAQa,IACrD,IAAMb,EACF,MAAM,IAAInQ,MAAM,mDAEpB,ICjPL,SAA2BmQ,GAC9B,SAAUA,EAAQ0Z,YACd1Z,EAAQ8Z,WACR9Z,EAAQ2Z,kBACR3Z,EAAQka,cACRla,EAAQka,aAAae,WAAWH,iBAChC9a,EAAQka,aAAae,WAAWE,aACxC,CD0OkBE,CAAkBrb,GACpB,MAAM,IAAInQ,MAAM,qDAEpB,MAAM0Q,QAAkBqJ,OAAOK,OAAOC,UAClC,OAEAtT,WAAW8P,WAAW1G,EAAQka,aAAa3iB,WAAWkjB,SAASjO,OAAOtM,QACtE,UACA,EACA,IAEEob,QAAenC,OAAOvP,OAAOK,OAAOC,UACtC,QACAlK,EAAQ8Z,UAAUV,QAClB,UACA,EACA,CAAC,cAECmC,QAAkB3R,OAAOK,OAAOwB,UAClC,CACIjc,KAAM,SACNgd,OAAQjM,GAEZ+a,EACA,QACA,EACA,CAAC,cASCna,EAAkD,CACpDyY,YAAY,EACZhE,cATwBhM,OAAOK,OAAOwB,UACtCzL,EAAQka,aAAa3iB,WAAW8iB,WAChCkB,EACAvb,EAAQka,aAAa3iB,WAAWikB,YAChC,EACA,CAAC,UAAW,mBAMV/a,EAAGT,QAAQoB,OAAOpB,EAAQa,GAAIM,GACpCmX,EAAQC,SAAS7S,SACrB,EACA+V,aAAc,SAAUnD,GACpBA,EAAQC,SAAS7S,SACrB,GAEJ1E,MAAO,CACH,sBAAM0a,CAAiBpD,EAASU,GAAsB,IAAD2C,EAAAC,EACjD,IAAIzC,EACJ,MAAMnW,EAAe,UAAUgW,EAAK6C,UAAUhb,OAI1CsV,GACI,CAAEC,UAAWkC,EAAQd,QAAQ3W,GAAIwV,MAAOiC,EAAQM,SAAS/X,IACzDxV,EAAI2X,EAAcP,UAGpBhC,EAAGZ,SAASe,IAAI,CAClBC,GAAImY,EAAK6C,UAAUhb,GACnBib,SAAU,CAACxD,EAAQd,SACnBxX,QAASsY,EAAQtY,QACjB6b,UAAW7C,EAAK6C,UAChBvD,QAASD,GAAaC,GACtBjC,WAA0C7qB,EAC1C0W,SAAU,CACN7B,SAA4C,QAAnCsb,EAAArD,EAAQtY,QAAQ+b,YAAYC,eAAO,IAAAL,OAAA,EAAnCA,EAAqCpC,gBAAiB,EAC/Dvf,OAAQuJ,EAAgB0Y,QACxBla,UAA6C,QAAnC6Z,EAAAtD,EAAQtY,QAAQ+b,YAAYC,eAAO,IAAAJ,OAAA,EAAnCA,EAAqC7Z,WAAY,GAC3Dma,cAAe,IAEnB7b,QAAS,IAEbmY,GAA+B,EAA0BQ,EAAK6C,UAAUhb,GAC5E,EACA,oBAAMsb,CAAe7D,GACjB,MAAM8D,EE/VYC,MAC1B,MAAMttB,EAAQ,IAAI6H,WAAW,IAC7BuiB,OAAOvP,OAAOC,gBAAgB9a,GAC9B,IAAIutB,EAAwB,GAC5B,MAAMC,EAAO,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC7L,IAAK,IAAI9nB,EAAI,EAAGA,EAAI1F,EAAMoG,OAAQV,IAAK,CACnC,MAAM+nB,EAAMztB,EAAM0F,GAClB6nB,EAAO7nB,EAAI,IAAM6nB,EAAO7nB,EAAI,IAAM,IAC9B8nB,EAAKC,EAAMD,EAAKpnB,OACxB,CACA,OAAOmnB,EAAO/lB,KAAK,IAAI,EFqVG8lB,GACZjZ,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GAC9C,GAAIkV,EAAQuD,UAAUzkB,OAASiM,EAAeoZ,aAAc,CACxD,MAAMzZ,EAAe,QAAQI,KAAagZ,UACpC1D,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,EAUtBxX,EAAgF,CAClFwb,uBAVuBlc,EAAGb,SAASgB,IAAI,CACvCC,GAAIub,EACJQ,MAAM,IAAIC,MAAOC,cACjBC,gBAAiBzE,EAAQM,SAASoE,IAClCC,OAAQP,EAAcO,QAAU,GAChChb,YAAaqW,EAAQtY,QAAQiC,YAC7Bib,eAAgBR,EAAcQ,gBAAkB,CAAC,EACjDhb,SAAUwa,EAAcxa,WAIxB4Z,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChDnX,QAASqc,EAAcrc,QAAU,EACjC8c,QAAQ,SAEN1c,EAAGZ,SAASuB,OAAOgC,EAAWjC,EACxC,KAAO,CACH,MAAM6B,EAAe,QAAQI,mBACvBsV,GAAOJ,EAASlV,EAAWJ,GAEjC,MAAM0Z,QAAsB/D,EACtBxX,EAA2D,CAC7D2a,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChDnX,QAASqc,EAAcrc,QAAU,EACjC8c,QAAQ,SAEN1c,EAAGZ,SAASuB,OAAOgC,EAAWjC,EACxC,CACAqX,IACJ,EACA,uBAAM4E,CAAkB9E,GACpB,MAAMlV,EAAYkV,EAAQuD,UAAUhb,GAC9B6b,QAAsBxZ,EAAiBE,GAC7C,GAAIkV,EAAQuD,UAAUzkB,OAASiM,EAAeoZ,aAE1C,YADAnE,EAAQC,SAAS7S,QAAQgX,EAAcxa,UAG3C,MAAM8Z,QAAgBvb,EAAGb,SAASrQ,IAAImtB,EAAcW,mBACpD,IAAMrB,EACF,MAAM,IAAInsB,MAAM,gEAEpByoB,EAAQC,SAAS7S,QAAQsW,EAAQ9Z,SACrC,EACA,oBAAMob,CAAehF,EAASU,GAC1B,MAAM5V,EAAYkV,EAAQuD,UAAUhb,GAC9B6b,QAAsBxZ,EAAiBE,GACvCjC,EAAgD,CAClDe,SAAU,IACHwa,EAAcxa,YACd8W,EAAK9W,UAEZ7B,QAASqc,EAAcrc,QAAU,SAE/BI,EAAGZ,SAASuB,OAAOsb,EAAevb,GACxCmX,EAAQC,SAAS7S,SACrB,GAEJ6X,gBAAiB,CACb,+BAAMC,CAA0BlF,EAASU,GACrC,MAAMyE,EAAgBnF,EAAQuD,UAAUhb,GAClC6c,EAAgB1E,EAAK2E,UAAU9c,GAC/B+c,EAA2B1a,EAAiBua,GAC5Cza,EAAe,yBAAyBya,KAAiBC,UACzDhF,GAAOJ,EAASmF,EAAeza,GAErC,MAAM6a,QAAoBD,EAC1B,IAAMC,EAAYlB,iBACd,MAAM,IAAI9sB,MAAM,4DAEpB,MAAMmsB,QAAgBvb,EAAGb,SAASrQ,IAAIsuB,EAAYlB,kBAClD,IAAMX,EACF,MAAM,IAAInsB,MAAM,+DAEd4Q,EAAGZ,SAASe,IAAI,CAClBC,GAAI6c,EACJ1d,QAASsY,EAAQtY,QACjB6b,UAAW7C,EAAK2E,UAChB7B,SAAU,CAACxD,EAAQd,SACnBsG,0BAA2BL,EAC3BnF,QAASD,GAAaC,GACtBjC,MAAOwH,EAAYxH,MACnBgH,kBAAmBQ,EAAYlB,iBAC/Bza,SAAU8Z,EAAQ9Z,SAClB7B,QAAS,IAEbmY,IACJ,EACA,uBAAMuF,CAAkBzF,GACpB,MAAMlV,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GAExCJ,EAAe,uBAAuBI,YACtCsV,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,EACtBqF,EAAsF,CAAC,EAC5FntB,OAAOV,KAAKwT,GACRvU,KAAImE,IACDyqB,EAAuBzqB,IAAO,CAAK,IAE3C+kB,EAAQuD,UAAUoC,wBAAwBjuB,SAAQ,EAAG6Q,KAAIqd,eACrDF,EAAuBnd,GAAMqd,CAAQ,IAEzC,MAAM/c,EAA2E,CAC7E6c,uBAAwBA,EACxBlC,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChDnX,QAAS,SAEPI,EAAGZ,SAASuB,OAAOgC,EAAWjC,GACpCqX,IACJ,EACA2F,oBAAAA,CAAqB7F,EAASU,GAC1B,MAAM,IAAInpB,MAAM,4BACpB,EACA,cAAMuuB,CAAS9F,EAASU,GAAsB,IAADqF,EACzC,MAAMjb,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GAC9C,GAAyB,OAArB4V,EAAKsF,MAAM1uB,MAAgB,CAC3B,MAAMoT,EAAe,gBAAgBI,KAAa4V,EAAKsF,MAAMzd,WACvD6X,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,EAC5B,GACI+D,EAAc6B,oBACd7B,EAAc6B,mBAAmBC,MAAKC,GAAKA,EAAE5d,KAAOmY,EAAKsF,MAAMzd,KAG/D,YADA+B,QAAQqV,QAAQE,cAAcG,EAAQd,QAAQ3W,GAAIyC,EAAe0X,cAGrE,MAAM7Z,EAAuE,CACzE2a,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChD+G,oBAAqB7B,EAAc6B,oBAAsB,IAAIzf,OAAO,CAChE+B,GAAImY,EAAKsF,MAAMzd,GACfzJ,KAAM4hB,EAAKsF,MAAMlnB,KACjB6D,QAAS+d,EAAKsF,MAAMrjB,UAExBoF,QAASqc,EAAcrc,QAAU,GAIrC,aAFMI,EAAGZ,SAASuB,OAAOgC,EAAWjC,QACpCqX,IAEJ,CACA,MAAMxV,EAAe,aAAaI,KAAa4V,EAAKsF,MAAMzd,WACpD6X,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,EAC5B,GAC2B,QAD3B0F,EACI3B,EAAcgC,iBAAS,IAAAL,GAAvBA,EAAyBG,MAAKC,GAAKA,EAAE5d,KAAOmY,EAAKsF,MAAMzd,KAGvD,YADA+B,QAAQqV,QAAQE,cAAcG,EAAQd,QAAQ3W,GAAIyC,EAAe0X,cAGrE,GAAwB,QAApBhC,EAAKsF,MAAMlnB,MAAsC,mBAApB4hB,EAAKsF,MAAMlnB,KAIxC,OAHA6N,QAAQC,KAAK,gEAEbtC,QAAQqV,QAAQE,cAAcG,EAAQd,QAAQ3W,GAAIyC,EAAe0X,cAGrE,MAAM2D,QAAmB9I,GACrByC,EAAQtY,QAAQa,GAChBmY,EAAKsF,MAAM1uB,OAETuR,EAA8D,CAChE2a,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChDkH,WAAYhC,EAAcgC,WAAa,IAAI5f,OAAO,CAC9C+B,GAAImY,EAAKsF,MAAMzd,GACfzJ,KAAM4hB,EAAKsF,MAAMlnB,KACjB6D,QAAS+d,EAAKsF,MAAMrjB,QACpBrL,MAA6B,iBAAf+uB,EACRA,EACAnb,EAAUmb,EAAWhT,cAE/BtL,QAASqc,EAAcrc,QAAU,SAE/BI,EAAGZ,SAASuB,OAAOgC,EAAWjC,GACpCqX,IACJ,EACA,sBAAMoG,CAAiBtG,EAASU,GAAsB,IAAD6F,EAAAC,EAAAC,EACjD,MAAM3b,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GAExCJ,EAAe,gBAAgBI,KAAa4V,EAAKgG,yBACjDtG,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,EACtB2F,EAA4B,QAAvBO,EAAGnC,EAAcO,cAAM,IAAA4B,OAAA,EAApBA,EAAsBL,MAAKjd,GAAKA,EAAEV,KAAOmY,EAAKgG,UACtDC,EAA2D,QAApCH,EAAGpC,EAAcwC,2BAAmB,IAAAJ,OAAA,EAAjCA,EAAmCK,WAAU5d,GAAKA,EAAEyd,UAAYhG,EAAKgG,UACrG,GACqC,QAAjCD,EAACrC,EAAc6B,0BAAkB,IAAAQ,IAAhCA,EAAkCP,MAAKC,GAAKA,EAAE5d,KAAOmY,EAAKgG,YAC1DV,EAGD,YADA1b,QAAQqV,QAAQE,cAAcG,EAAQd,QAAQ3W,GAAIyC,EAAe0X,cAGrE,GACqC,iBAA1BhC,EAAKoG,mBACR,cAAepG,EAAKoG,kBACpB,SAAUpG,EAAKoG,kBAMnB,OAHAna,QAAQC,KAAK,mEAEbtC,QAAQqV,QAAQE,cAAcG,EAAQd,QAAQ3W,GAAIyC,EAAe0X,cAGrE,IAAI7Z,EAEAvR,EADAyvB,GAAY,EAEhB,EAAG,CACC,IAAMrG,EAAKoG,iBACP,MAEJ,MAAME,QAAiBzJ,GACnByC,EAAQtY,QAAQa,GAChBmY,EAAKoG,kBAET,GAAwB,iBAAbE,EAAuB,CAC9B1vB,EAAQ0vB,EACRD,EAAYzvB,IAAU0uB,EAAM1uB,MAC5B,KACJ,CACA,GAAI0vB,EAAS3T,sBAAsBxZ,YAAa,CAC5CvC,EAAQ4T,EAAU8b,EAAS3T,YAC3B0T,EAAYzvB,IAAU0uB,EAAM1uB,MAC5B,KACJ,CACJ,OAAS,GACT,GAAIyvB,EAQA,MADApa,QAAQvJ,MAAM,gGACR,IAAI7L,MAAM,iGAEpB,QAAgCrE,IAA5ByzB,IAAsE,IAA7BA,EACzC9d,EAAS,CACL2a,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChD0H,qBAAsBxC,EAAcwC,qBAAuB,IAAIpgB,OAAO,CAClEkgB,QAAShG,EAAKgG,QACdvX,KAAMuR,EAAKuG,OAAO9X,KAClB+X,oBAAqB5vB,EACrB6vB,eAAgB,CAACnB,EAAM1uB,SAE3ByQ,QAASqc,EAAcrc,QAAU,OAElC,CACH,GAAIqc,EAAcwC,oBAAqBD,GAAyBO,oBAC5D,MAAM,IAAI3vB,MAAM,0DAEpB6sB,EAAcwC,oBAAqBD,GAAyBO,oBACxD5vB,EACJ8sB,EAAcwC,oBAAqBD,GAAyBQ,eAAerqB,KACvEkpB,EAAM1uB,OAEVuR,EAAS,CACL2a,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChD0H,oBAAqBxC,EAAcwC,oBACnC7e,QAASqc,EAAcrc,QAAU,EAEzC,OACMI,EAAGZ,SAASuB,OAAOgC,EAAWjC,GACpCqX,IACJ,GAEJkH,sBAAuB,CACnB,6BAAMC,CAAwBrH,EAASU,GACnC,MAAM5V,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GACxCwc,EAAc5G,EAAK6G,UAAUhf,GAC7BmC,EAAe,QAAQI,eAAuBwc,kBAE9ClH,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,EACtBxX,EAA+D,CACjE2e,WAAY,IACLpD,EAAcoD,WACjB,CAACF,GAAc,IACR5G,EAAK6G,UACRE,SAAU,CAAC,IAGnBjE,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChDnX,QAASqc,EAAcrc,QAAU,SAG/BI,EAAGZ,SAASuB,OAAOsb,EAAevb,GACxCqX,IACJ,EACA,oBAAMwH,CAAe1H,EAASU,GAC1B,MAAM5V,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GACxCwc,EAAc5G,EAAK6G,UAAUhf,GAC7BmC,EAAe,QAAQI,eAAuBwc,kBAE9ClH,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,QACtBlY,EAAGZ,SAASuB,OAAOsb,EAAe,CACpCZ,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChD,CAAC,cAAcoI,aAAuB,EACtC,CAAC,cAAcA,wBAAmC5G,EAAKuG,SAE3D/G,IACJ,EACA,oBAAMyH,CAAe3H,EAASU,GAC1B,MAAM5V,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GACxCwc,EAAc5G,EAAK6G,UAAUhf,GAC7BmC,EAAe,QAAQI,eAAuBwc,iBAE9ClH,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,QACtBlY,EAAGZ,SAASuB,OAAOsb,EAAe,CACpCZ,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChD,CAAC,cAAcoI,aAAuB,IAE1CpH,IACJ,EACA,+BAAM0H,CAA0B5H,EAASU,GACrC,MAAM5V,EAAYkV,EAAQuD,UAAUhb,GAC9B8X,EAAuBzV,EAAiBE,GACxCwc,EAAc5G,EAAK6G,UAAUhf,GAC7Bsf,EAAYnH,EAAKxpB,KACjBwT,EAAe,QAAQI,eAAuBwc,aAAuBO,UAErEzH,GAAOJ,EAASlV,EAAWJ,GACjC,MAAM0Z,QAAsB/D,EAC5B,IAAIyH,EACJ,GAA4B,iBAAjBpH,EAAKoH,QACZA,EAAUpH,EAAKoH,aACZ,GAAIpH,EAAKoH,mBAAmBjuB,YAC/BiuB,EAAU5c,EAAUwV,EAAKoH,aACtB,IAAIjuB,YAAY4S,OAAOiU,EAAKoH,SAG/B,OAFAnb,QAAQC,KAAK,sDACboT,EAAQC,SAASwC,OAAOzX,EAAe0X,cAEpC,IAAItpB,MAAMuD,QAAQ+jB,EAAKoH,SAK1B,OAFAnb,QAAQC,KAAK,gDACboT,EAAQC,SAASwC,OAAOzX,EAAe0X,cAHvCoF,EAAUpH,EAAKoH,OAKnB,OACM3f,EAAGZ,SAASuB,OAAOsb,EAAe,CACpC,CAAC,cAAckD,cAAwBO,KAAc,CACjD3wB,KAAM2wB,EACNC,WAEJtE,SAAUY,EAAcZ,SAAShd,OAAOwZ,EAAQd,SAChDnX,QAASqc,EAAcrc,QAAU,IAErCmY,IACJ,I,gBGvsBR,MAAM,SACFpa,EAAQ,cACRC,EAAa,YACbC,EAAW,OACXC,EAAM,qBACNC,EAAoB,sBACpB6hB,EAAqB,YACrBC,EAAW,iBACXC,GACA31B,EAAQ,MAEN,WAAE+T,EAAU,iBAAEC,EAAgB,YAAEI,EAAW,OAAED,EAAM,gBAAEE,GAAoBrU,EAAQ,KAkBvF8D,EAAO5D,QAAU,CACbsT,WACAC,gBACAC,cACAC,SACAC,uBACA6hB,wBACAC,cACAC,mBACAC,SAzBaA,CAACthB,EAAU,MACxB,GAAIA,GAAW,GAAwB,iBAAZA,EACvB,MAAM,IAAIrP,MAAM,qEAGpB,IAAIgP,EAAOF,IACPjL,EAAakL,EAAiBC,GAC9BM,EAAQH,IAMZ,OAJAH,EAAOE,EAAOF,GACdnL,EAAaqL,EAAOrL,GACpByL,EAAQJ,EAAOI,GAERF,EAAgBC,EAASxL,EAAYyL,EAAON,EAAK,E,6BCxB5D,MAAM4hB,EAAc71B,EAAQ,KACtB81B,EAAQ91B,EAAQ,KAEhB6F,EAAW7F,EAAQ,KACnBgJ,EAAmB8sB,EAAM9sB,iBACzB5C,EAAa0vB,EAAM1vB,WACnBE,EAAqBwvB,EAAMxvB,mBAE3ByvB,EAAgB,kBA0BtB,SAASC,EAAYx1B,EAAcy1B,GACjC,IAAI1T,EASJ,YARkB3hB,IAAdq1B,IACF1T,EAAQ0T,EAAUnwB,WAGfgwB,EAAMvtB,SAASga,KAClBA,EAAQ/hB,EAAa8F,GAAqC,gBAAER,WAGvDG,OAAOY,OAAO0b,EACvB,CAnCAriB,EAAQg2B,GAAKlxB,GACJ8wB,EAAMvtB,SAASvD,IAAU8wB,EAAMlwB,OAAOZ,EAAOoB,IAAepB,EAAMoB,aAAuB+vB,EAAK91B,eAEvGH,EAAQk2B,OAASpxB,GACR8wB,EAAMvtB,SAASvD,IAAUA,aAAiBmxB,EAAK91B,eAExDH,EAAQm2B,QAAU,CAAC71B,EAAcwE,GAAS0oB,UAAU,sBAAyB,CAAC,KAC5E,GAAIxtB,EAAQg2B,GAAGlxB,GACb,OAAO8wB,EAAM5uB,eAAelC,GAE9B,MAAM,IAAIxE,EAAaM,UAAU,GAAG4sB,sCAA4C,EAGlFxtB,EAAQo2B,sBAAwB,CAAC91B,EAAciI,EAAQsB,KACrD,MACMwsB,EADe/1B,EAAa8F,GACK,4BACjCX,EAAWM,OAAOY,OAAO0vB,GAK/B,OAJAtwB,OAAO8C,eAAepD,EAAUmwB,EAAM1uB,mBAAoB,CACxDpC,MAAO,CAAEyD,SAAQsB,OAAMysB,MAAO,GAC9BC,cAAc,IAET9wB,CAAQ,EAgBjBzF,EAAQ2G,OAAS,CAACrG,EAAc0J,EAAiBwsB,KAC/C,MAAMvvB,EAAU6uB,EAAYx1B,GAC5B,OAAON,EAAQy2B,MAAMxvB,EAAS3G,EAAc0J,EAAiBwsB,EAAY,EAG3Ex2B,EAAQmB,WAAa,CAACb,EAAc0J,EAAiBwsB,KACnD,MAAMvvB,EAAUjH,EAAQ2G,OAAOrG,EAAc0J,EAAiBwsB,GAC9D,OAAOZ,EAAM5uB,eAAeC,EAAQ,EAGtCjH,EAAQ02B,eAAiB,CAACzvB,EAAS3G,KAAV,EAEzBN,EAAQy2B,MAAQ,CAACxvB,EAAS3G,EAAc0J,EAAkB,GAAIwsB,EAAc,CAAC,KAC3EA,EAAYvvB,QAAUA,EAEtBjH,EAAQ02B,eAAezvB,EAAS3G,GAChCyF,OAAO8C,eAAe5B,EAASf,EAAY,CACzCpB,MAAO,IAAImxB,EAAK91B,eAAeG,EAAc0J,EAAiBwsB,GAC9DD,cAAc,IAGhBtvB,EAAQf,GAAY0vB,EAAM3vB,eAAiBgB,EACvCgvB,EAAKhsB,MACPgsB,EAAKhsB,KAAKhD,EAAQf,IAEbe,GAGTjH,EAAAA,IAAc,CAACM,EAAcy1B,KAC3B,MAAM9uB,EAAU6uB,EAAYx1B,EAAcy1B,GAY1C,OAVA/1B,EAAQ02B,eAAezvB,EAAS3G,GAChCyF,OAAO8C,eAAe5B,EAASf,EAAY,CACzCpB,MAAOiB,OAAOY,OAAOsvB,EAAK91B,eAAeyF,WACzC2wB,cAAc,IAGhBtvB,EAAQf,GAAY0vB,EAAM3vB,eAAiBgB,EACvCgvB,EAAKhsB,MACPgsB,EAAKhsB,KAAKhD,EAAQf,IAEbe,EAAQf,EAAW,EAG5B,MAAMywB,EAAU,IAAIzkB,IAAI,CAAC,SAAU,WAEnClS,EAAQ42B,QAAU,CAACt2B,EAAcu2B,KAC/B,IAAKA,EAAYlQ,MAAKmQ,GAAcH,EAAQ/xB,IAAIkyB,KAC9C,OAGF,MAAMpwB,EAAekvB,EAAMnvB,iBAAiBnG,GAC5C,MAAMP,EACJM,WAAAA,GACE,MAAM6tB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvB,QAAet2B,IAAXq2B,EACF,GAAInB,EAAMvtB,SAAS0uB,GACjB,QAAgCr2B,IAA5Bq2B,EAAOvxB,OAAOC,UAAyB,CACzC,IAAKmwB,EAAMvtB,SAAS0uB,GAClB,MAAM,IAAIz2B,EAAaM,UACrB,0FAEG,CACL,MAAMq2B,EAAI,GACJC,EAAMH,EACZ,IAAK,IAAII,KAAYD,EAAK,CACxB,IAAKtB,EAAMvtB,SAAS8uB,GAClB,MAAM,IAAI72B,EAAaM,UACrB,oGAKG,CACL,MAAMq2B,EAAI,GACJC,EAAMC,EACZ,IAAK,IAAIA,KAAYD,EACnBC,EAAWxB,EAAuB,UAAEwB,EAAU,CAC5C3J,QACE,kFAIF4J,QAAS92B,IAGX22B,EAAE3sB,KAAK6sB,GAETA,EAAWF,CACb,CAEAA,EAAE3sB,KAAK6sB,EACT,CACAJ,EAASE,CACX,CACF,KAAO,CACL,IAAKrB,EAAMvtB,SAAS0uB,GAClB,MAAM,IAAIz2B,EAAaM,UACrB,+EAEG,CACL,MAAMkJ,EAAS/D,OAAOY,OAAO,MAC7B,IAAK,MAAM8B,KAAOC,QAAQC,QAAQouB,GAAS,CACzC,MAAMM,EAAOtxB,OAAOqB,yBAAyB2vB,EAAQtuB,GACrD,GAAI4uB,GAAQA,EAAKC,WAAY,CAC3B,IAAIC,EAAW9uB,EAEf8uB,EAAW5B,EAAuB,UAAE4B,EAAU,CAC5C/J,QAAS,kEACT4J,QAAS92B,IAGX,IAAIk3B,EAAaT,EAAOtuB,GAExB+uB,EAAa7B,EAAuB,UAAE6B,EAAY,CAChDhK,QAAS,oEACT4J,QAAS92B,IAGXwJ,EAAOytB,GAAYC,CACrB,CACF,CACAT,EAASjtB,CACX,CACF,MAEAitB,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,qDACT4J,QAAS92B,SAIby2B,EAAS,GAEX7I,EAAK5jB,KAAKysB,EACZ,CACA,OAAO/2B,EAAQy2B,MAAM1wB,OAAOY,kBAAkBf,WAAYtF,EAAc4tB,EAC1E,CAEAxjB,MAAAA,CAAOhG,EAAMI,GACX,MAAM2yB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UACrB,iFAIJ,GAAIo2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,mFAAmFo2B,UAAU3sB,mBAGjG,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,+DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,CACE,IAAIA,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,+DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOnB,EAAMvsB,kBAAkBouB,EAAQvxB,GAAYwE,UAAUwjB,GAC/D,CAEAjpB,OAAOP,GACL,MAAM+yB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UACrB,iFAIJ,GAAIo2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,kFAAkFo2B,UAAU3sB,mBAGhG,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,+DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,CACE,IAAIA,EAASC,UAAU,QACRt2B,IAAXq2B,IACFA,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,+DACT4J,QAAS92B,KAGb4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOnB,EAAMvsB,kBAAkBouB,EAAQvxB,GAAYjB,UAAUipB,GAC/D,CAEAzpB,GAAAA,CAAIC,GACF,MAAM+yB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,8EAGnC,GAAIo2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,+EAA+Eo2B,UAAU3sB,mBAG7F,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,4DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOU,EAAQvxB,GAAYzB,OAAOypB,EACpC,CAEAtjB,MAAAA,CAAOlG,GACL,MAAM+yB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UACrB,iFAIJ,GAAIo2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,kFAAkFo2B,UAAU3sB,mBAGhG,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,+DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOnB,EAAMvsB,kBAAkBouB,EAAQvxB,GAAY0E,UAAUsjB,GAC/D,CAEAtpB,GAAAA,CAAIF,GACF,MAAM+yB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,8EAGnC,GAAIo2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,+EAA+Eo2B,UAAU3sB,mBAG7F,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,4DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,CACE,IAAIA,EAASC,UAAU,QACRt2B,IAAXq2B,IACFA,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,4DACT4J,QAAS92B,KAGb4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOU,EAAQvxB,GAAYtB,OAAOspB,EACpC,CAEArpB,GAAAA,CAAIH,EAAMI,GACR,MAAM2yB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,8EAGnC,GAAIo2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,gFAAgFo2B,UAAU3sB,mBAG9F,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,4DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,CACE,IAAIA,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,4DACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOnB,EAAMvsB,kBAAkBouB,EAAQvxB,GAAYrB,OAAOqpB,GAC5D,CAEAnjB,IAAAA,GACE,MAAM0sB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,+EAGnC,OAAOg1B,EAAMvsB,kBAAkBouB,EAAQvxB,GAAY6E,OACrD,CAEAG,QAAAA,GACE,MAAMusB,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UACrB,mFAIJ,OAAO62B,EAAQvxB,GAAYgF,UAC7B,CAEA7F,IAAAA,GACE,IAAKrF,EAAQg2B,GAAGh1B,MACd,MAAM,IAAIV,EAAaM,UAAU,+EAEnC,OAAOZ,EAAQo2B,sBAAsB91B,EAAcU,KAAM,MAC3D,CAEAsE,MAAAA,GACE,IAAKtF,EAAQg2B,GAAGh1B,MACd,MAAM,IAAIV,EAAaM,UACrB,iFAGJ,OAAOZ,EAAQo2B,sBAAsB91B,EAAcU,KAAM,QAC3D,CAEAuE,OAAAA,GACE,IAAKvF,EAAQg2B,GAAGh1B,MACd,MAAM,IAAIV,EAAaM,UACrB,kFAGJ,OAAOZ,EAAQo2B,sBAAsB91B,EAAcU,KAAM,YAC3D,CAEAkE,OAAAA,CAAQwyB,GACN,IAAK13B,EAAQg2B,GAAGh1B,MACd,MAAM,IAAIV,EAAaM,UACrB,kFAGJ,GAAIo2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,uFAGJ82B,EAAW/xB,EAASwwB,QAAQ71B,EAAco3B,EAAU,CAClDlK,QAAS,oFAEX,MAAMpoB,EAAU4xB,UAAU,GAC1B,IAAIW,EAAQ/wB,MAAM0E,KAAKtK,KAAKkF,IACxByD,EAAI,EACR,KAAOA,EAAIguB,EAAMttB,QAAQ,CACvB,MAAO5B,EAAK3D,GAAS6yB,EAAMhuB,GAAGrF,IAAIsxB,EAAMvsB,mBACxCquB,EAAS7xB,KAAKT,EAASN,EAAO2D,EAAKzH,MACnC22B,EAAQ/wB,MAAM0E,KAAKtK,KAAKkF,IACxByD,GACF,CACF,CAEA,QAAInF,GACF,MAAMizB,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UACrB,mFAIJ,OAAO62B,EAAQvxB,GAAkB,IACnC,EAEFH,OAAOiD,iBAAiBjJ,EAAgB6F,UAAW,CACjD8E,OAAQ,CAAE4sB,YAAY,GACtBryB,OAAQ,CAAEqyB,YAAY,GACtB7yB,IAAK,CAAE6yB,YAAY,GACnB1sB,OAAQ,CAAE0sB,YAAY,GACtB1yB,IAAK,CAAE0yB,YAAY,GACnBzyB,IAAK,CAAEyyB,YAAY,GACnBvsB,KAAM,CAAEusB,YAAY,GACpBpsB,SAAU,CAAEosB,YAAY,GACxBjyB,KAAM,CAAEiyB,YAAY,GACpBhyB,OAAQ,CAAEgyB,YAAY,GACtB/xB,QAAS,CAAE+xB,YAAY,GACvBpyB,QAAS,CAAEoyB,YAAY,GACvB9yB,KAAM,CAAE8yB,YAAY,GACpB,CAAC9xB,OAAOgZ,aAAc,CAAE1Z,MAAO,kBAAmByxB,cAAc,GAChE,CAAC/wB,OAAOC,UAAW,CAAEX,MAAO/E,EAAgB6F,UAAUL,QAASgxB,cAAc,EAAM/c,UAAU,KAE/F9S,EAAamvB,GAAiB91B,EAE9B2G,EAAa,4BAA8BX,OAAOY,OAAOD,EAAa,uBAAwB,CAC5F,CAAClB,OAAOgZ,aAAc,CACpB+X,cAAc,EACdzxB,MAAO,8BAGX8wB,EAAMttB,OAAO5B,EAAa,4BAA6B,CACrD2I,IAAAA,GACE,MAAMuoB,EAAW52B,MAAQA,KAAK40B,EAAM1uB,oBACpC,IAAK0wB,EACH,MAAM,IAAIt3B,EAAaM,UAAU,0EAGnC,MAAM,OAAE2H,EAAM,KAAEsB,EAAI,MAAEysB,GAAUsB,EAC1BtyB,EAASsB,MAAM0E,KAAK/C,EAAOrC,IAEjC,GAAIowB,GADQhxB,EAAO+E,OAEjB,OAAOvB,EAAiBxI,EAAc,CAAEwE,WAAOpE,EAAWqJ,MAAM,IAGlE,MAAMK,EAAO9E,EAAOgxB,GAEpB,OADAsB,EAAStB,MAAQA,EAAQ,EAClBxtB,EAAiBxI,EAAcs1B,EAAMhsB,eAAeQ,EAAK9F,IAAIsxB,EAAMvsB,mBAAoBQ,GAChG,IAGF9D,OAAO8C,eAAevI,EAAcu1B,EAAe,CACjDU,cAAc,EACd/c,UAAU,EACV1U,MAAO/E,GACP,EAGJ,MAAMk2B,EAAOn2B,EAAQ,I,6BCvfrB,MAAM+3B,EAAO/3B,EAAQ,KAEfg4B,EAAQh4B,EAAQ,MAChB,qBAAEkE,GAAyBlE,EAAQ,MACnC,oBAAEoT,EAAmB,2BAAEG,EAA0B,wBAAEF,EAAuB,yBAAEnB,EAAwB,wBACxGc,EAAuB,qBAAEV,EAAoB,4BAAEW,EAA2B,oBAAET,EAAmB,wBAC/FE,GAA4B1S,EAAQ,KAEtC,SAASwR,EAAEC,GACT,OAAOA,EAAKvF,YAAY,EAC1B,CAEA,MAAM+rB,EAAiB,CACrBC,IAAK,GACLC,KAAM,KACNC,KAAM,GACNC,MAAO,IACPC,GAAI,GACJC,IAAK,KAGDC,EAAU9yB,OAAO,WAEvB,SAAS+yB,EAAahrB,GACpB,MAAO,IAAIA,GAAKlD,MAClB,CAEA,SAASmuB,EAAGl3B,EAAOm3B,GACjB,MAAM1sB,EAAIzK,EAAMm3B,GAChB,OAAOC,MAAM3sB,QAAKrL,EAAYiE,OAAO6G,cAAcO,EACrD,CAEA,SAAS4sB,EAAYhgB,GACnB,MAAkB,MAAXA,GAA2C,QAAzBA,EAAOigB,aAClC,CAWA,SAASC,EAA2B/0B,GAClC,OAAyB,IAAlBA,EAAOuG,QAAgBytB,EAAMvjB,aAAazQ,EAAOkI,YAAY,MAAsB,MAAdlI,EAAO,IAA4B,MAAdA,EAAO,GAC1G,CAMA,SAASg1B,EAA+Bh1B,GACtC,OAAgG,IAAzFA,EAAOb,OAAO,qEACvB,CAMA,SAAS81B,EAAgB92B,GACvB,YAAkCvB,IAA3Bq3B,EAAe91B,EACxB,CAEA,SAAS+2B,EAAUz4B,GACjB,OAAOw4B,EAAgBx4B,EAAI0B,OAC7B,CAEA,SAASg3B,EAAa14B,GACpB,OAAQw4B,EAAgBx4B,EAAI0B,OAC9B,CAEA,SAASi3B,EAAYj3B,GACnB,OAAO81B,EAAe91B,EACxB,CAEA,SAASk3B,EAAgB73B,GACvB,GAAc,KAAVA,EACF,OAAOg3B,EAGT,IAAIc,EAAI,GAUR,GARI93B,EAAM+I,QAAU,GAAyB,MAApB/I,EAAM+3B,OAAO,IAAgD,MAAlC/3B,EAAM+3B,OAAO,GAAGT,eAClEt3B,EAAQA,EAAM4B,UAAU,GACxBk2B,EAAI,IACK93B,EAAM+I,QAAU,GAAyB,MAApB/I,EAAM+3B,OAAO,KAC3C/3B,EAAQA,EAAM4B,UAAU,GACxBk2B,EAAI,GAGQ,KAAV93B,EACF,OAAO,EAGT,IAAIg4B,EAAQ,UAQZ,OAPU,KAANF,IACFE,EAAQ,WAEA,KAANF,IACFE,EAAQ,iBAGNA,EAAM9rB,KAAKlM,GACNg3B,EAGFvmB,SAASzQ,EAAO83B,EACzB,CAyNA,SAASG,EAAUj4B,EAAOk4B,GAAW,GACnC,GAAiB,MAAbl4B,EAAM,GACR,MAAgC,MAA5BA,EAAMA,EAAM+I,OAAS,GAChBiuB,EAjKb,SAAmBh3B,GACjB,MAAMm4B,EAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACtC,IAAIC,EAAa,EACbC,EAAW,KACXC,EAAU,EAId,IAFAt4B,EAAQsF,MAAM0E,KAAKhK,GAAOyK,GAAKA,EAAEC,YAAY,MAEnC4tB,KAAatoB,EAAE,KAAM,CAC7B,GAAIhQ,EAAMs4B,EAAU,KAAOtoB,EAAE,KAC3B,OAAOgnB,EAGTsB,GAAW,IACTF,EACFC,EAAWD,CACb,CAEA,KAAOE,EAAUt4B,EAAM+I,QAAQ,CAC7B,GAAmB,IAAfqvB,EACF,OAAOpB,EAGT,GAAIh3B,EAAMs4B,KAAatoB,EAAE,KAAM,CAC7B,GAAiB,OAAbqoB,EACF,OAAOrB,IAEPsB,IACAF,EACFC,EAAWD,EACX,QACF,CAEA,IAAI50B,EAAQ,EACRuF,EAAS,EAEb,KAAOA,EAAS,GAAKytB,EAAMzmB,WAAW/P,EAAMs4B,KAC1C90B,EAAgB,GAARA,EAAeiN,SAASymB,EAAGl3B,EAAOs4B,GAAU,MAClDA,IACAvvB,EAGJ,GAAI/I,EAAMs4B,KAAatoB,EAAE,KAAM,CAC7B,GAAe,IAAXjH,EACF,OAAOiuB,EAKT,GAFAsB,GAAWvvB,EAEPqvB,EAAa,EACf,OAAOpB,EAGT,IAAIuB,EAAc,EAElB,UAA0Bn5B,IAAnBY,EAAMs4B,IAAwB,CACnC,IAAIE,EAAY,KAEhB,GAAID,EAAc,EAAG,CACnB,KAAIv4B,EAAMs4B,KAAatoB,EAAE,MAAQuoB,EAAc,GAG7C,OAAOvB,IAFLsB,CAIN,CAEA,IAAK9B,EAAMxjB,aAAahT,EAAMs4B,IAC5B,OAAOtB,EAGT,KAAOR,EAAMxjB,aAAahT,EAAMs4B,KAAW,CACzC,MAAMG,EAAShoB,SAASymB,EAAGl3B,EAAOs4B,IAClC,GAAkB,OAAdE,EACFA,EAAYC,MACP,IAAkB,IAAdD,EACT,OAAOxB,EAEPwB,EAAwB,GAAZA,EAAiBC,CAC/B,CACA,GAAID,EAAY,IACd,OAAOxB,IAEPsB,CACJ,CAEAH,EAAQC,GAAoC,IAAtBD,EAAQC,GAAsBI,IAElDD,EAEkB,IAAhBA,GAAqC,IAAhBA,KACrBH,CAEN,CAEA,GAAoB,IAAhBG,EACF,OAAOvB,EAGT,KACF,CAAO,GAAIh3B,EAAMs4B,KAAatoB,EAAE,MAE9B,KADEsoB,OACqBl5B,IAAnBY,EAAMs4B,GACR,OAAOtB,OAEJ,QAAuB53B,IAAnBY,EAAMs4B,GACf,OAAOtB,EAGTmB,EAAQC,GAAc50B,IACpB40B,CACJ,CAEA,GAAiB,OAAbC,EAAmB,CACrB,IAAIK,EAAQN,EAAaC,EAEzB,IADAD,EAAa,EACS,IAAfA,GAAoBM,EAAQ,GAAG,CACpC,MAAMC,EAAOR,EAAQE,EAAWK,EAAQ,GACxCP,EAAQE,EAAWK,EAAQ,GAAKP,EAAQC,GACxCD,EAAQC,GAAcO,IACpBP,IACAM,CACJ,CACF,MAAO,GAAiB,OAAbL,GAAoC,IAAfD,EAC9B,OAAOpB,EAGT,OAAOmB,CACT,CAqCWS,CAAU54B,EAAM4B,UAAU,EAAG5B,EAAM+I,OAAS,IAGrD,GAAImvB,EACF,OAqCJ,SAAyBl4B,GACvB,OAAIw3B,EAA+Bx3B,GAC1Bg3B,EAGFnlB,EAAwB7R,EAAO0Q,EACxC,CA3CWmoB,CAAgB74B,GAGzB,MACM84B,EAoFR,SAAuB3pB,EAAQ4pB,GAAW,GACxC,MAAMvwB,EAAS+tB,EAAK7mB,QAAQP,EAAQ,CAClCrC,aAAcisB,EACdhsB,WAAW,EACXC,cAAc,EACdE,kBAAmB6rB,EACnB9rB,wBAAwB,EACxB0C,gBAAiBopB,EACjBtpB,uBAAuB,IAEzB,GAAe,OAAXjH,EACF,OAAOwuB,EAGT,IAAK+B,EAAU,CACb,GAAe,KAAXvwB,EACF,OAAOwuB,EAET,GAhYKQ,EADiCh1B,EAiYDgG,KAhY0D,IAAhDhG,EAAOb,OAAO,6BAiY3D,OAAOq1B,CAEX,CApYF,IAA0Cx0B,EAqYxC,OAAOgG,CACT,CA3GsBwwB,CADLt2B,EAAqBkP,EAAoB5R,KAExD,OAAI84B,IAAgB9B,EACXA,EAUX,SAAuBh3B,GACrB,MAAMi5B,EAAQj5B,EAAMkP,MAAM,KAC1B,GAAgC,KAA5B+pB,EAAMA,EAAMlwB,OAAS,GAAW,CAClC,GAAqB,IAAjBkwB,EAAMlwB,OACR,OAAO,EAETkwB,EAAMnc,KACR,CAEA,MAAMjP,EAAOorB,EAAMA,EAAMlwB,OAAS,GAClC,OAAI8uB,EAAgBhqB,KAAUmpB,KAI1B,YAAY9qB,KAAK2B,EAKvB,CA1BMqrB,CAAcJ,GA1OpB,SAAmB94B,GACjB,MAAMi5B,EAAQj5B,EAAMkP,MAAM,KAO1B,GANgC,KAA5B+pB,EAAMA,EAAMlwB,OAAS,IACnBkwB,EAAMlwB,OAAS,GACjBkwB,EAAMnc,MAINmc,EAAMlwB,OAAS,EACjB,OAAOiuB,EAGT,MAAMmC,EAAU,GAChB,IAAK,MAAMC,KAAQH,EAAO,CACxB,MAAMI,EAAIxB,EAAgBuB,GAC1B,GAAIC,IAAMrC,EACR,OAAOA,EAGTmC,EAAQnwB,KAAKqwB,EACf,CAEA,IAAK,IAAIhxB,EAAI,EAAGA,EAAI8wB,EAAQpwB,OAAS,IAAKV,EACxC,GAAI8wB,EAAQ9wB,GAAK,IACf,OAAO2uB,EAGX,GAAImC,EAAQA,EAAQpwB,OAAS,IAAM,MAAQ,EAAIowB,EAAQpwB,QACrD,OAAOiuB,EAGT,IAAIsC,EAAOH,EAAQrc,MACfyc,EAAU,EAEd,IAAK,MAAMF,KAAKF,EACdG,GAAQD,EAAI,MAAQ,EAAIE,KACtBA,EAGJ,OAAOD,CACT,CAmMWE,CAAUV,GAGZA,CACT,CA6DA,SAAS13B,EAAcF,GACrB,MAAoB,iBAATA,EAnQb,SAAuBi3B,GACrB,IAAI5uB,EAAS,GACT8vB,EAAIlB,EAER,IAAK,IAAI9vB,EAAI,EAAGA,GAAK,IAAKA,EACxBkB,EAASlG,OAAOg2B,EAAI,KAAO9vB,EACjB,IAANlB,IACFkB,EAAS,IAAIA,KAEf8vB,EAAI7sB,KAAKC,MAAM4sB,EAAI,KAGrB,OAAO9vB,CACT,CAuPWkwB,CAAcv4B,GAInBA,aAAgBoE,MACX,IAzHX,SAAuB6yB,GACrB,IAAI5uB,EAAS,GACb,MAAM8uB,EAkFR,SAAgDF,GAC9C,IAAIuB,EAAe,KACfC,EAAc,EACdC,EAAa,KACbC,EAAY,EAEhB,IAAK,IAAIzB,EAAa,EAAGA,EAAaD,EAAQpvB,SAAUqvB,EAC1B,IAAxBD,EAAQC,IACNyB,EAAYF,IACdD,EAAeE,EACfD,EAAcE,GAGhBD,EAAa,KACbC,EAAY,IAEO,OAAfD,IACFA,EAAaxB,KAEbyB,GAIN,OAAIA,EAAYF,EACPC,EAGFF,CACT,CA9GmBI,CAAuC3B,GACxD,IAAI4B,GAAU,EAEd,IAAK,IAAI3B,EAAa,EAAGA,GAAc,IAAKA,EACtC2B,GAAmC,IAAxB5B,EAAQC,KAEZ2B,IACTA,GAAU,GAGR1B,IAAaD,GAOjB7uB,GAAU4uB,EAAQC,GAAYxuB,SAAS,IAEpB,IAAfwuB,IACF7uB,GAAU,OARVA,GADiC,IAAf6uB,EAAmB,KAAO,IAE5C2B,GAAU,IAWd,OAAOxwB,CACT,CA8FeywB,CAAc94B,MAGpBA,CACT,CAiDA,SAAS+4B,EAAYh7B,GACnB,MAAM,KAAEyC,GAASzC,EAuBnB,IAAwCuD,EAtBlB,IAAhBd,EAAKqH,SAGU,SAAf9J,EAAI0B,QAAqC,IAAhBe,EAAKqH,SAmBIvG,EAnB2Cd,EAAK,GAoB/E,eAAewK,KAAK1J,KAhB3Bd,EAAKob,MACP,CAEA,SAASod,EAAoBj7B,GAC3B,MAAwB,KAAjBA,EAAI4B,UAAoC,KAAjB5B,EAAI+B,QACpC,CAMA,SAASM,EAAgBrC,GACvB,MAA2B,iBAAbA,EAAIyC,IACpB,CAMA,SAASy4B,EAAgBn6B,EAAOd,EAAMk7B,EAAkBn7B,EAAK2B,GAU3D,GATAlB,KAAK44B,QAAU,EACf54B,KAAKM,MAAQA,EACbN,KAAKR,KAAOA,GAAQ,KACpBQ,KAAK06B,iBAAmBA,GAAoB,QAC5C16B,KAAKkB,cAAgBA,EACrBlB,KAAKT,IAAMA,EACXS,KAAKs3B,SAAU,EACft3B,KAAK26B,YAAa,GAEb36B,KAAKT,IAAK,CACbS,KAAKT,IAAM,CACT0B,OAAQ,GACRE,SAAU,GACVG,SAAU,GACVE,KAAM,KACNC,KAAM,KACNO,KAAM,GACNjC,MAAO,KACPsC,SAAU,MAGZ,MAAMie,EAxEV,SAA0Bxd,GAGxB,IAAI6J,EAAQ,EACRC,EAAM9J,EAAOuG,OACjB,KAAOsD,EAAQC,KACT9J,EAAOkY,WAAWrO,GAAS,MADXA,GAKtB,KAAOC,EAAMD,KACP7J,EAAOkY,WAAWpO,EAAM,GAAK,MADbA,GAKtB,OAAO9J,EAAOZ,UAAUyK,EAAOC,EACjC,CAwDgBguB,CAAiB56B,KAAKM,OAC9BggB,IAAQtgB,KAAKM,QACfN,KAAK26B,YAAa,GAEpB36B,KAAKM,MAAQggB,CACf,CAEA,MAAMA,EA7DR,SAA2B/gB,GACzB,OAAOA,EAAI6K,QAAQ,yBAA0B,GAC/C,CA2DcywB,CAAkB76B,KAAKM,OAenC,IAdIggB,IAAQtgB,KAAKM,QACfN,KAAK26B,YAAa,GAEpB36B,KAAKM,MAAQggB,EAEbtgB,KAAK86B,MAAQ55B,GAAiB,eAE9BlB,KAAK2X,OAAS,GACd3X,KAAK+6B,QAAS,EACd/6B,KAAKg7B,SAAU,EACfh7B,KAAKi7B,uBAAwB,EAE7Bj7B,KAAKM,MAAQsF,MAAM0E,KAAKtK,KAAKM,OAAOyK,GAAKA,EAAEC,YAAY,KAEhDhL,KAAK44B,SAAW54B,KAAKM,MAAM+I,SAAUrJ,KAAK44B,QAAS,CACxD,MAAM7tB,EAAI/K,KAAKM,MAAMN,KAAK44B,SACpBsC,EAAOxD,MAAM3sB,QAAKrL,EAAYiE,OAAO6G,cAAcO,GAGnDowB,EAAMn7B,KAAK,SAASA,KAAK86B,SAAS/vB,EAAGmwB,GAC3C,IAAKC,EACH,MACK,GAAIA,IAAQ7D,EAAS,CAC1Bt3B,KAAKs3B,SAAU,EACf,KACF,CACF,CACF,CAEAmD,EAAgB71B,UAAU,sBAAwB,SAA0BmG,EAAGmwB,GAC7E,GAAIpE,EAAMvjB,aAAaxI,GACrB/K,KAAK2X,QAAUujB,EAAKtD,cACpB53B,KAAK86B,MAAQ,aACR,IAAK96B,KAAKkB,cAKf,OADAlB,KAAK26B,YAAa,EACXrD,EAJPt3B,KAAK86B,MAAQ,cACX96B,KAAK44B,OAIT,CAEA,OAAO,CACT,EAEA6B,EAAgB71B,UAAU,gBAAkB,SAAqBmG,EAAGmwB,GAClE,GAAIpE,EAAMtjB,oBAAoBzI,IAAMA,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,KAC1EtQ,KAAK2X,QAAUujB,EAAKtD,mBACf,GAAI7sB,IAAMuF,EAAE,KAAM,CACvB,GAAItQ,KAAKkB,cAAe,CACtB,GAAI82B,EAAUh4B,KAAKT,OAASw4B,EAAgB/3B,KAAK2X,QAC/C,OAAO,EAGT,IAAKqgB,EAAUh4B,KAAKT,MAAQw4B,EAAgB/3B,KAAK2X,QAC/C,OAAO,EAGT,IAAK6iB,EAAoBx6B,KAAKT,MAA0B,OAAlBS,KAAKT,IAAIkC,OAAkC,SAAhBzB,KAAK2X,OACpE,OAAO,EAGT,GAAwB,SAApB3X,KAAKT,IAAI0B,QAAuC,KAAlBjB,KAAKT,IAAIiC,KACzC,OAAO,CAEX,CAEA,GADAxB,KAAKT,IAAI0B,OAASjB,KAAK2X,OACnB3X,KAAKkB,cAIP,OAHIlB,KAAKT,IAAIkC,OAASy2B,EAAYl4B,KAAKT,IAAI0B,UACzCjB,KAAKT,IAAIkC,KAAO,OAEX,EAETzB,KAAK2X,OAAS,GACU,SAApB3X,KAAKT,IAAI0B,QACPjB,KAAKM,MAAMN,KAAK44B,QAAU,KAAOtoB,EAAE,MAAQtQ,KAAKM,MAAMN,KAAK44B,QAAU,KAAOtoB,EAAE,OAChFtQ,KAAK26B,YAAa,GAEpB36B,KAAK86B,MAAQ,QACJ9C,EAAUh4B,KAAKT,MAAsB,OAAdS,KAAKR,MAAiBQ,KAAKR,KAAKyB,SAAWjB,KAAKT,IAAI0B,OACpFjB,KAAK86B,MAAQ,gCACJ9C,EAAUh4B,KAAKT,KACxBS,KAAK86B,MAAQ,4BACJ96B,KAAKM,MAAMN,KAAK44B,QAAU,KAAOtoB,EAAE,MAC5CtQ,KAAK86B,MAAQ,sBACX96B,KAAK44B,UAEP54B,KAAKT,IAAIyC,KAAO,GAChBhC,KAAK86B,MAAQ,cAEjB,KAAO,IAAK96B,KAAKkB,cAMf,OADAlB,KAAK26B,YAAa,EACXrD,EALPt3B,KAAK2X,OAAS,GACd3X,KAAK86B,MAAQ,YACb96B,KAAK44B,SAAW,CAIlB,CAEA,OAAO,CACT,EAEA6B,EAAgB71B,UAAU,mBAAqB,SAAuBmG,GACpE,OAAkB,OAAd/K,KAAKR,MAAkBoC,EAAgB5B,KAAKR,OAASuL,IAAMuF,EAAE,KACxDgnB,GACE11B,EAAgB5B,KAAKR,OAASuL,IAAMuF,EAAE,MAC/CtQ,KAAKT,IAAI0B,OAASjB,KAAKR,KAAKyB,OAC5BjB,KAAKT,IAAIyC,KAAOhC,KAAKR,KAAKwC,KAC1BhC,KAAKT,IAAIQ,MAAQC,KAAKR,KAAKO,MAC3BC,KAAKT,IAAI8C,SAAW,GACpBrC,KAAK86B,MAAQ,YACiB,SAArB96B,KAAKR,KAAKyB,QACnBjB,KAAK86B,MAAQ,SACX96B,KAAK44B,UAEP54B,KAAK86B,MAAQ,aACX96B,KAAK44B,UAGF,EACT,EAEA6B,EAAgB71B,UAAU,uCAAyC,SAAyCmG,GAU1G,OATIA,IAAMuF,EAAE,MAAQtQ,KAAKM,MAAMN,KAAK44B,QAAU,KAAOtoB,EAAE,MACrDtQ,KAAK86B,MAAQ,qCACX96B,KAAK44B,UAEP54B,KAAK26B,YAAa,EAClB36B,KAAK86B,MAAQ,aACX96B,KAAK44B,UAGF,CACT,EAEA6B,EAAgB71B,UAAU,2BAA6B,SAA8BmG,GAQnF,OAPIA,IAAMuF,EAAE,KACVtQ,KAAK86B,MAAQ,aAEb96B,KAAK86B,MAAQ,SACX96B,KAAK44B,UAGF,CACT,EAEA6B,EAAgB71B,UAAU,kBAAoB,SAAuBmG,GA4BnE,OA3BA/K,KAAKT,IAAI0B,OAASjB,KAAKR,KAAKyB,OACxB8J,IAAMuF,EAAE,KACVtQ,KAAK86B,MAAQ,iBACJ9C,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,OACxCtQ,KAAK26B,YAAa,EAClB36B,KAAK86B,MAAQ,mBAEb96B,KAAKT,IAAI4B,SAAWnB,KAAKR,KAAK2B,SAC9BnB,KAAKT,IAAI+B,SAAWtB,KAAKR,KAAK8B,SAC9BtB,KAAKT,IAAIiC,KAAOxB,KAAKR,KAAKgC,KAC1BxB,KAAKT,IAAIkC,KAAOzB,KAAKR,KAAKiC,KAC1BzB,KAAKT,IAAIyC,KAAOhC,KAAKR,KAAKwC,KAAKkH,QAC/BlJ,KAAKT,IAAIQ,MAAQC,KAAKR,KAAKO,MACvBgL,IAAMuF,EAAE,MACVtQ,KAAKT,IAAIQ,MAAQ,GACjBC,KAAK86B,MAAQ,SACJ/vB,IAAMuF,EAAE,MACjBtQ,KAAKT,IAAI8C,SAAW,GACpBrC,KAAK86B,MAAQ,YACHpD,MAAM3sB,KAChB/K,KAAKT,IAAIQ,MAAQ,KACjBC,KAAKT,IAAIyC,KAAKob,MACdpd,KAAK86B,MAAQ,SACX96B,KAAK44B,WAIJ,CACT,EAEA6B,EAAgB71B,UAAU,wBAA0B,SAA4BmG,GAiB9E,OAhBIitB,EAAUh4B,KAAKT,MAASwL,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MAKzCvF,IAAMuF,EAAE,KACjBtQ,KAAK86B,MAAQ,aAEb96B,KAAKT,IAAI4B,SAAWnB,KAAKR,KAAK2B,SAC9BnB,KAAKT,IAAI+B,SAAWtB,KAAKR,KAAK8B,SAC9BtB,KAAKT,IAAIiC,KAAOxB,KAAKR,KAAKgC,KAC1BxB,KAAKT,IAAIkC,KAAOzB,KAAKR,KAAKiC,KAC1BzB,KAAK86B,MAAQ,SACX96B,KAAK44B,UAZH7tB,IAAMuF,EAAE,QACVtQ,KAAK26B,YAAa,GAEpB36B,KAAK86B,MAAQ,qCAYR,CACT,EAEAL,EAAgB71B,UAAU,mCAAqC,SAAsCmG,GAUnG,OATIA,IAAMuF,EAAE,MAAQtQ,KAAKM,MAAMN,KAAK44B,QAAU,KAAOtoB,EAAE,MACrDtQ,KAAK86B,MAAQ,qCACX96B,KAAK44B,UAEP54B,KAAK26B,YAAa,EAClB36B,KAAK86B,MAAQ,qCACX96B,KAAK44B,UAGF,CACT,EAEA6B,EAAgB71B,UAAU,0CAA4C,SAA4CmG,GAQhH,OAPIA,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,OAC1BtQ,KAAK86B,MAAQ,cACX96B,KAAK44B,SAEP54B,KAAK26B,YAAa,GAGb,CACT,EAEAF,EAAgB71B,UAAU,mBAAqB,SAAwBmG,EAAGmwB,GACxE,GAAInwB,IAAMuF,EAAE,KAAM,CAChBtQ,KAAK26B,YAAa,EACd36B,KAAK+6B,SACP/6B,KAAK2X,OAAS,MAAM3X,KAAK2X,UAE3B3X,KAAK+6B,QAAS,EAGd,MAAMK,EAAM7D,EAAav3B,KAAK2X,QAC9B,IAAK,IAAIihB,EAAU,EAAGA,EAAUwC,IAAOxC,EAAS,CAC9C,MAAM3qB,EAAYjO,KAAK2X,OAAO3M,YAAY4tB,GAE1C,GAAI3qB,IAAcqC,EAAE,OAAStQ,KAAKi7B,sBAAuB,CACvDj7B,KAAKi7B,uBAAwB,EAC7B,QACF,CACA,MAAMI,EAAoBhpB,EAA2BpE,EAAWuD,GAC5DxR,KAAKi7B,sBACPj7B,KAAKT,IAAI+B,UAAY+5B,EAErBr7B,KAAKT,IAAI4B,UAAYk6B,CAEzB,CACAr7B,KAAK2X,OAAS,EAChB,MAAO,GAAI+f,MAAM3sB,IAAMA,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MACnD0nB,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,MAAQ,CACjD,GAAItQ,KAAK+6B,QAA0B,KAAhB/6B,KAAK2X,OAEtB,OADA3X,KAAK26B,YAAa,EACXrD,EAETt3B,KAAK44B,SAAWrB,EAAav3B,KAAK2X,QAAU,EAC5C3X,KAAK2X,OAAS,GACd3X,KAAK86B,MAAQ,MACf,MACE96B,KAAK2X,QAAUujB,EAGjB,OAAO,CACT,EAEAT,EAAgB71B,UAAU,kBAC1B61B,EAAgB71B,UAAU,cAAgB,SAAuBmG,EAAGmwB,GAClE,GAAIl7B,KAAKkB,eAAqC,SAApBlB,KAAKT,IAAI0B,SAC/BjB,KAAK44B,QACP54B,KAAK86B,MAAQ,iBACR,GAAI/vB,IAAMuF,EAAE,MAAStQ,KAAKg7B,QAkB1B,GAAItD,MAAM3sB,IAAMA,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MACnD0nB,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,MAAQ,CAEjD,KADEtQ,KAAK44B,QACHZ,EAAUh4B,KAAKT,MAAwB,KAAhBS,KAAK2X,OAE9B,OADA3X,KAAK26B,YAAa,EACXrD,EACF,GAAIt3B,KAAKkB,eAAiC,KAAhBlB,KAAK2X,SAC1B6iB,EAAoBx6B,KAAKT,MAA0B,OAAlBS,KAAKT,IAAIkC,MAEpD,OADAzB,KAAK26B,YAAa,GACX,EAGT,MAAMn5B,EAAO+2B,EAAUv4B,KAAK2X,OAAQsgB,EAAaj4B,KAAKT,MACtD,GAAIiC,IAAS81B,EACX,OAAOA,EAMT,GAHAt3B,KAAKT,IAAIiC,KAAOA,EAChBxB,KAAK2X,OAAS,GACd3X,KAAK86B,MAAQ,aACT96B,KAAKkB,cACP,OAAO,CAEX,MACM6J,IAAMuF,EAAE,KACVtQ,KAAKg7B,SAAU,EACNjwB,IAAMuF,EAAE,OACjBtQ,KAAKg7B,SAAU,GAEjBh7B,KAAK2X,QAAUujB,MA/CyB,CACxC,GAAoB,KAAhBl7B,KAAK2X,OAEP,OADA3X,KAAK26B,YAAa,EACXrD,EAGT,GAA2B,aAAvBt3B,KAAKkB,cACP,OAAO,EAGT,MAAMM,EAAO+2B,EAAUv4B,KAAK2X,OAAQsgB,EAAaj4B,KAAKT,MACtD,GAAIiC,IAAS81B,EACX,OAAOA,EAGTt3B,KAAKT,IAAIiC,KAAOA,EAChBxB,KAAK2X,OAAS,GACd3X,KAAK86B,MAAQ,MACf,CAgCA,OAAO,CACT,EAEAL,EAAgB71B,UAAU,cAAgB,SAAmBmG,EAAGmwB,GAC9D,GAAIpE,EAAMxjB,aAAavI,GACrB/K,KAAK2X,QAAUujB,MACV,MAAIxD,MAAM3sB,IAAMA,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,MACnD0nB,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,OAChCtQ,KAAKkB,eAiBd,OADAlB,KAAK26B,YAAa,EACXrD,EAhBP,GAAoB,KAAhBt3B,KAAK2X,OAAe,CACtB,MAAMlW,EAAOsP,SAAS/Q,KAAK2X,QAC3B,GAAIlW,EAAO,MAET,OADAzB,KAAK26B,YAAa,EACXrD,EAETt3B,KAAKT,IAAIkC,KAAOA,IAASy2B,EAAYl4B,KAAKT,IAAI0B,QAAU,KAAOQ,EAC/DzB,KAAK2X,OAAS,EAChB,CACA,GAAI3X,KAAKkB,cACP,OAAO,EAETlB,KAAK86B,MAAQ,eACX96B,KAAK44B,OAIT,CAEA,OAAO,CACT,EAEA,MAAM0C,EAA0B,IAAIpqB,IAAI,CAACZ,EAAE,KAAMA,EAAE,MAAOA,EAAE,KAAMA,EAAE,OAEpE,SAASirB,EAA6Bj7B,EAAOs4B,GAC3C,MAAMvvB,EAAS/I,EAAM+I,OAASuvB,EAC9B,OAAOvvB,GAAU,IAv0BqBmyB,EAw0BLl7B,EAAMs4B,GAx0BI6C,EAw0BMn7B,EAAMs4B,EAAU,GAv0B1D9B,EAAMvjB,aAAaioB,KAASC,IAAQnrB,EAAE,MAAQmrB,IAAQnrB,EAAE,SAw0BjD,IAAXjH,GAAgBiyB,EAAwB13B,IAAItD,EAAMs4B,EAAU,KAz0BjE,IAAwC4C,EAAKC,CA00B7C,CAySA,SAAS15B,EAAcxC,GACrB,GAAIqC,EAAgBrC,GAClB,OAAOA,EAAIyC,KAGb,IAAI6H,EAAS,GACb,IAAK,MAAM6xB,KAAWn8B,EAAIyC,KACxB6H,GAAU,IAAI6xB,IAEhB,OAAO7xB,CACT,CAjTA4wB,EAAgB71B,UAAU,cAAgB,SAAmBmG,GAoC3D,OAnCA/K,KAAKT,IAAI0B,OAAS,OAClBjB,KAAKT,IAAIiC,KAAO,GAEZuJ,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,OACtBvF,IAAMuF,EAAE,QACVtQ,KAAK26B,YAAa,GAEpB36B,KAAK86B,MAAQ,cACU,OAAd96B,KAAKR,MAAsC,SAArBQ,KAAKR,KAAKyB,QACzCjB,KAAKT,IAAIiC,KAAOxB,KAAKR,KAAKgC,KAC1BxB,KAAKT,IAAIyC,KAAOhC,KAAKR,KAAKwC,KAAKkH,QAC/BlJ,KAAKT,IAAIQ,MAAQC,KAAKR,KAAKO,MACvBgL,IAAMuF,EAAE,MACVtQ,KAAKT,IAAIQ,MAAQ,GACjBC,KAAK86B,MAAQ,SACJ/vB,IAAMuF,EAAE,MACjBtQ,KAAKT,IAAI8C,SAAW,GACpBrC,KAAK86B,MAAQ,YACHpD,MAAM3sB,KAChB/K,KAAKT,IAAIQ,MAAQ,KACZw7B,EAA6Bv7B,KAAKM,MAAON,KAAK44B,UAGjD54B,KAAK26B,YAAa,EAClB36B,KAAKT,IAAIyC,KAAO,IAHhBu4B,EAAYv6B,KAAKT,KAMnBS,KAAK86B,MAAQ,SACX96B,KAAK44B,WAGT54B,KAAK86B,MAAQ,SACX96B,KAAK44B,UAGF,CACT,EAEA6B,EAAgB71B,UAAU,oBAAsB,SAAwBmG,GA32BxE,IAA8CjI,EA63B5C,OAjBIiI,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,OACtBvF,IAAMuF,EAAE,QACVtQ,KAAK26B,YAAa,GAEpB36B,KAAK86B,MAAQ,cAEK,OAAd96B,KAAKR,MAAsC,SAArBQ,KAAKR,KAAKyB,UAC7Bs6B,EAA6Bv7B,KAAKM,MAAON,KAAK44B,UAl3B9B,KADmB91B,EAo3BC9C,KAAKR,KAAKwC,KAAK,IAn3B9CqH,QAAgBytB,EAAMvjB,aAAazQ,EAAOkI,YAAY,KAAqB,MAAdlI,EAAO,IAo3B5E9C,KAAKT,IAAIyC,KAAKsH,KAAKtJ,KAAKR,KAAKwC,KAAK,IAEpChC,KAAKT,IAAIiC,KAAOxB,KAAKR,KAAKgC,MAE5BxB,KAAK86B,MAAQ,SACX96B,KAAK44B,UAGF,CACT,EAEA6B,EAAgB71B,UAAU,mBAAqB,SAAuBmG,EAAGmwB,GACvE,GAAIxD,MAAM3sB,IAAMA,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,OAASvF,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,KAEvE,KADEtQ,KAAK44B,SACF54B,KAAKkB,eAAiB22B,EAA2B73B,KAAK2X,QACzD3X,KAAK26B,YAAa,EAClB36B,KAAK86B,MAAQ,YACR,GAAoB,KAAhB96B,KAAK2X,OAAe,CAE7B,GADA3X,KAAKT,IAAIiC,KAAO,GACZxB,KAAKkB,cACP,OAAO,EAETlB,KAAK86B,MAAQ,YACf,KAAO,CACL,IAAIt5B,EAAO+2B,EAAUv4B,KAAK2X,OAAQsgB,EAAaj4B,KAAKT,MACpD,GAAIiC,IAAS81B,EACX,OAAOA,EAOT,GALa,cAAT91B,IACFA,EAAO,IAETxB,KAAKT,IAAIiC,KAAOA,EAEZxB,KAAKkB,cACP,OAAO,EAGTlB,KAAK2X,OAAS,GACd3X,KAAK86B,MAAQ,YACf,MAEA96B,KAAK2X,QAAUujB,EAGjB,OAAO,CACT,EAEAT,EAAgB71B,UAAU,oBAAsB,SAAwBmG,GAyBtE,OAxBIitB,EAAUh4B,KAAKT,MACbwL,IAAMuF,EAAE,QACVtQ,KAAK26B,YAAa,GAEpB36B,KAAK86B,MAAQ,OAET/vB,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,SACxBtQ,KAAK44B,SAEC54B,KAAKkB,eAAiB6J,IAAMuF,EAAE,KAG9BtQ,KAAKkB,eAAiB6J,IAAMuF,EAAE,UAGzB5Q,IAANqL,GACT/K,KAAK86B,MAAQ,OACT/vB,IAAMuF,EAAE,QACRtQ,KAAK44B,SAEA54B,KAAKkB,eAAmC,OAAlBlB,KAAKT,IAAIiC,MACxCxB,KAAKT,IAAIyC,KAAKsH,KAAK,KARnBtJ,KAAKT,IAAI8C,SAAW,GACpBrC,KAAK86B,MAAQ,aAJb96B,KAAKT,IAAIQ,MAAQ,GACjBC,KAAK86B,MAAQ,UAaR,CACT,EAEAL,EAAgB71B,UAAU,cAAgB,SAAmBmG,GA78B7D,IAAqB4M,EAu/BnB,OAzCI+f,MAAM3sB,IAAMA,IAAMuF,EAAE,MAAS0nB,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,QAC1DtQ,KAAKkB,gBAAkB6J,IAAMuF,EAAE,MAAQvF,IAAMuF,EAAE,OAC/C0nB,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,QACjCtQ,KAAK26B,YAAa,GA/8BJ,QADlBhjB,GADmBA,EAo9BD3X,KAAK2X,QAn9BPigB,gBACqB,SAAXjgB,GAAgC,SAAXA,GAAgC,WAAXA,GAm9BhE4iB,EAAYv6B,KAAKT,KACbwL,IAAMuF,EAAE,MAAU0nB,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,OACnDtQ,KAAKT,IAAIyC,KAAKsH,KAAK,MAEZquB,EAAY33B,KAAK2X,SAAW5M,IAAMuF,EAAE,MAClC0nB,EAAUh4B,KAAKT,MAAQwL,IAAMuF,EAAE,MAEhCqnB,EAAY33B,KAAK2X,UACH,SAApB3X,KAAKT,IAAI0B,QAA8C,IAAzBjB,KAAKT,IAAIyC,KAAKqH,QAAgBwuB,EAA2B73B,KAAK2X,UAC9F3X,KAAK2X,OAAS,GAAG3X,KAAK2X,OAAO,OAE/B3X,KAAKT,IAAIyC,KAAKsH,KAAKtJ,KAAK2X,SALxB3X,KAAKT,IAAIyC,KAAKsH,KAAK,IAOrBtJ,KAAK2X,OAAS,GACV5M,IAAMuF,EAAE,OACVtQ,KAAKT,IAAIQ,MAAQ,GACjBC,KAAK86B,MAAQ,SAEX/vB,IAAMuF,EAAE,OACVtQ,KAAKT,IAAI8C,SAAW,GACpBrC,KAAK86B,MAAQ,cAKX/vB,IAAMuF,EAAE,MACRwmB,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,KAC1C9B,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,MAC9C54B,KAAK26B,YAAa,GAGpB36B,KAAK2X,QAAUtF,EAA2BtH,EAAGuG,KAGxC,CACT,EAEAmpB,EAAgB71B,UAAU,qBAAuB,SAAyBmG,GACxE,GAAIA,IAAMuF,EAAE,KACVtQ,KAAKT,IAAIQ,MAAQ,GACjBC,KAAK86B,MAAQ,aACR,GAAI/vB,IAAMuF,EAAE,KACjBtQ,KAAKT,IAAI8C,SAAW,GACpBrC,KAAK86B,MAAQ,gBACR,GAAI/vB,IAAMuF,EAAE,KAAM,CACvB,MAAMqrB,EAAY37B,KAAKM,MAAMN,KAAK44B,QAAU,GACxC+C,IAAcrrB,EAAE,MAAQqrB,IAAcrrB,EAAE,KAC1CtQ,KAAKT,IAAIyC,MAAQ,MAEjBhC,KAAKT,IAAIyC,MAAQ,GAErB,MAEO01B,MAAM3sB,IAAMA,IAAMuF,EAAE,OACvBtQ,KAAK26B,YAAa,GAGhB5vB,IAAMuF,EAAE,MACNwmB,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,KAC3C9B,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,MAC/C54B,KAAK26B,YAAa,GAGfjD,MAAM3sB,KACT/K,KAAKT,IAAIyC,MAAQqQ,EAA2BtH,EAAGiG,IAInD,OAAO,CACT,EAEAypB,EAAgB71B,UAAU,eAAiB,SAAoBmG,EAAGmwB,GAKhE,GAJKlD,EAAUh4B,KAAKT,MAA4B,OAApBS,KAAKT,IAAI0B,QAAuC,QAApBjB,KAAKT,IAAI0B,SAC/DjB,KAAK06B,iBAAmB,UAGpB16B,KAAKkB,eAAiB6J,IAAMuF,EAAE,MAASonB,MAAM3sB,GAAI,CACrD,MAAM6wB,EAA8B5D,EAAUh4B,KAAKT,KAAOwS,EAA8BX,EACxFpR,KAAKT,IAAIQ,OAASoS,EAAwBnS,KAAK2X,OAAQikB,GAEvD57B,KAAK2X,OAAS,GAEV5M,IAAMuF,EAAE,OACVtQ,KAAKT,IAAI8C,SAAW,GACpBrC,KAAK86B,MAAQ,WAEjB,MAAYpD,MAAM3sB,KAGZA,IAAMuF,EAAE,MACRwmB,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,KAC1C9B,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,MAC9C54B,KAAK26B,YAAa,GAGpB36B,KAAK2X,QAAUujB,GAGjB,OAAO,CACT,EAEAT,EAAgB71B,UAAU,kBAAoB,SAAuBmG,GAYnE,OAXK2sB,MAAM3sB,KAELA,IAAMuF,EAAE,MACRwmB,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,KAC1C9B,EAAMzmB,WAAWrQ,KAAKM,MAAMN,KAAK44B,QAAU,MAC9C54B,KAAK26B,YAAa,GAGpB36B,KAAKT,IAAI8C,UAAYgQ,EAA2BtH,EAAG+G,KAG9C,CACT,EA6DAlP,EAAO5D,QAAQyB,aA3Df,SAAsBlB,EAAKs8B,GACzB,IAAIhyB,EAAS,GAAGtK,EAAI0B,UAgCpB,OA/BiB,OAAb1B,EAAIiC,OACNqI,GAAU,KAEW,KAAjBtK,EAAI4B,UAAoC,KAAjB5B,EAAI+B,WAC7BuI,GAAUtK,EAAI4B,SACO,KAAjB5B,EAAI+B,WACNuI,GAAU,IAAItK,EAAI+B,YAEpBuI,GAAU,KAGZA,GAAUnI,EAAcnC,EAAIiC,MAEX,OAAbjC,EAAIkC,OACNoI,GAAU,IAAItK,EAAIkC,SAIL,OAAblC,EAAIiC,OAAkBI,EAAgBrC,IAAQA,EAAIyC,KAAKqH,OAAS,GAAqB,KAAhB9J,EAAIyC,KAAK,KAChF6H,GAAU,MAEZA,GAAU9H,EAAcxC,GAEN,OAAdA,EAAIQ,QACN8J,GAAU,IAAItK,EAAIQ,SAGf87B,GAAoC,OAAjBt8B,EAAI8C,WAC1BwH,GAAU,IAAItK,EAAI8C,YAGbwH,CACT,EA2BAjH,EAAO5D,QAAQ+C,cAAgBA,EAE/Ba,EAAO5D,QAAQ+B,mBAAqB,SAAUxB,GAE5C,OAAQA,EAAI0B,QACV,IAAK,OAAQ,CACX,MAAM66B,EAAUl5B,EAAO5D,QAAQ+8B,SAASh6B,EAAcxC,IACtD,OAAgB,OAAZu8B,GAGmB,SAAnBA,EAAQ76B,QAAwC,UAAnB66B,EAAQ76B,OAFhC,OAKF2B,EAAO5D,QAAQ+B,mBAAmB+6B,EAC3C,CACA,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,KACL,IAAK,MACH,OA7CN,SAAyBnyB,GACvB,IAAIb,EAAS,GAAGa,EAAM1I,YAOtB,OANA6H,GAAUpH,EAAciI,EAAMnI,MAEX,OAAfmI,EAAMlI,OACRqH,GAAU,IAAIa,EAAMlI,QAGfqH,CACT,CAoCakzB,CAAgB,CACrB/6B,OAAQ1B,EAAI0B,OACZO,KAAMjC,EAAIiC,KACVC,KAAMlC,EAAIkC,OAWd,QAEE,MAAO,OAEb,EAEAmB,EAAO5D,QAAQW,cAAgB,SAAUW,EAAO6O,QAC9BzP,IAAZyP,IACFA,EAAU,CAAC,GAGb,MAAMlQ,EAAM,IAAIw7B,EAAgBn6B,EAAO6O,EAAQrP,QAASqP,EAAQurB,iBAAkBvrB,EAAQ5P,IAAK4P,EAAQjO,eACvG,OAAIjC,EAAIq4B,QACC,KAGFr4B,EAAIM,GACb,EAEAqD,EAAO5D,QAAQqC,eAAiB,SAAU9B,EAAK4B,GAC7C5B,EAAI4B,SAAWgR,EAAwBhR,EAAUqQ,EACnD,EAEA5O,EAAO5D,QAAQuC,eAAiB,SAAUhC,EAAK+B,GAC7C/B,EAAI+B,SAAW6Q,EAAwB7Q,EAAUkQ,EACnD,EAEA5O,EAAO5D,QAAQ0C,cAAgBA,EAE/BkB,EAAO5D,QAAQoC,gCAlwBf,SAAyC7B,GACvC,OAAoB,OAAbA,EAAIiC,MAA8B,KAAbjC,EAAIiC,MAA8B,SAAfjC,EAAI0B,MACrD,EAkwBA2B,EAAO5D,QAAQ4C,gBAAkBA,EAEjCgB,EAAO5D,QAAQ2C,iBAAmB,SAAUs6B,GAC1C,OAAOt4B,OAAOs4B,EAChB,EAEAr5B,EAAO5D,QAAQ+8B,SAAW,SAAUz7B,EAAO6O,GAMzC,YALgBzP,IAAZyP,IACFA,EAAU,CAAC,GAINvM,EAAO5D,QAAQW,cAAcW,EAAO,CAAER,QAASqP,EAAQrP,QAAS46B,iBAAkBvrB,EAAQurB,kBACnG,C,qJCtvCA,MAAMwB,EAAS,WAGT18B,EAAO,GAUP28B,EAAgB,QAChBC,EAAgB,aAChBC,EAAkB,4BAGlBC,EAAS,CACd,SAAY,kDACZ,YAAa,iDACb,gBAAiB,iBAKZvvB,EAAQD,KAAKC,MACbwvB,EAAqB54B,OAAOkO,aAUlC,SAASjC,EAAMtE,GACd,MAAM,IAAIiP,WAAW+hB,EAAOhxB,GAC7B,CA6BA,SAASkxB,EAAU/sB,EAAQinB,GAC1B,MAAM6C,EAAQ9pB,EAAOD,MAAM,KAC3B,IAAI1G,EAAS,GACTywB,EAAMlwB,OAAS,IAGlBP,EAASywB,EAAM,GAAK,IACpB9pB,EAAS8pB,EAAM,IAIhB,MACMze,EA/BP,SAAa2hB,EAAO/F,GACnB,MAAM5tB,EAAS,GACf,IAAIO,EAASozB,EAAMpzB,OACnB,KAAOA,KACNP,EAAOO,GAAUqtB,EAAS+F,EAAMpzB,IAEjC,OAAOP,CACR,CAwBiBxF,EAFhBmM,EAASA,EAAOrF,QAAQiyB,EAAiB,MACnB7sB,MAAM,KACAknB,GAAUjsB,KAAK,KAC3C,OAAO3B,EAASgS,CACjB,CAeA,SAAS4hB,EAAW55B,GACnB,MAAM+G,EAAS,GACf,IAAIgwB,EAAU,EACd,MAAMxwB,EAASvG,EAAOuG,OACtB,KAAOwwB,EAAUxwB,GAAQ,CACxB,MAAMvF,EAAQhB,EAAOkY,WAAW6e,KAChC,GAAI/1B,GAAS,OAAUA,GAAS,OAAU+1B,EAAUxwB,EAAQ,CAE3D,MAAMszB,EAAQ75B,EAAOkY,WAAW6e,KACR,QAAX,MAAR8C,GACJ9yB,EAAOP,OAAe,KAARxF,IAAkB,KAAe,KAAR64B,GAAiB,QAIxD9yB,EAAOP,KAAKxF,GACZ+1B,IAEF,MACChwB,EAAOP,KAAKxF,EAEd,CACA,OAAO+F,CACR,CAUA,MAAM+yB,EAAajvB,GAAchK,OAAO6G,iBAAiBmD,GAmCnDkvB,EAAe,SAASC,EAAOC,GAGpC,OAAOD,EAAQ,GAAK,IAAMA,EAAQ,MAAgB,GAARC,IAAc,EACzD,EAOMC,EAAQ,SAASC,EAAOC,EAAWC,GACxC,IAAIna,EAAI,EAGR,IAFAia,EAAQE,EAAYpwB,EAAMkwB,EA1Kd,KA0K8BA,GAAS,EACnDA,GAASlwB,EAAMkwB,EAAQC,GACOD,EAAQG,IAA2Bpa,GAAKxjB,EACrEy9B,EAAQlwB,EAAMkwB,EA3JMz9B,IA6JrB,OAAOuN,EAAMiW,EAAI,GAAsBia,GAASA,EAhLpC,IAiLb,EASM/5B,EAAS,SAAS5C,GAEvB,MAAMuJ,EAAS,GACTwzB,EAAc/8B,EAAM+I,OAC1B,IAAIV,EAAI,EACJgxB,EA5LY,IA6LZ2D,EA9Le,GAoMfC,EAAQj9B,EAAMk9B,YAlMD,KAmMbD,EAAQ,IACXA,EAAQ,GAGT,IAAK,IAAIE,EAAI,EAAGA,EAAIF,IAASE,EAExBn9B,EAAM0a,WAAWyiB,IAAM,KAC1B7tB,EAAM,aAEP/F,EAAOP,KAAKhJ,EAAM0a,WAAWyiB,IAM9B,IAAK,IAAInI,EAAQiI,EAAQ,EAAIA,EAAQ,EAAI,EAAGjI,EAAQ+H,GAAwC,CAO3F,MAAMK,EAAO/0B,EACb,IAAK,IAAIg1B,EAAI,EAAG3a,EAAIxjB,GAA0BwjB,GAAKxjB,EAAM,CAEpD81B,GAAS+H,GACZztB,EAAM,iBAGP,MAAMktB,GA9FqB7uB,EA8FA3N,EAAM0a,WAAWsa,OA7F7B,IAAQrnB,EAAY,GACvBA,EAAY,GAAlB,GAEJA,GAAa,IAAQA,EAAY,GAC7BA,EAAY,GAEhBA,GAAa,IAAQA,EAAY,IAC7BA,EAAY,GAEbzO,EAsFDs9B,GAASt9B,GACZoQ,EAAM,iBAEHktB,EAAQ/vB,GAAOmvB,EAASvzB,GAAKg1B,IAChC/tB,EAAM,YAGPjH,GAAKm0B,EAAQa,EACb,MAAM5lB,EAAIiL,GAAKsa,EAhPL,EAgPoBta,GAAKsa,EA/OzB,MA+O8Cta,EAAIsa,EAE5D,GAAIR,EAAQ/kB,EACX,MAGD,MAAM6lB,EAAap+B,EAAOuY,EACtB4lB,EAAI5wB,EAAMmvB,EAAS0B,IACtBhuB,EAAM,YAGP+tB,GAAKC,CAEN,CAEA,MAAMta,EAAMzZ,EAAOR,OAAS,EAC5Bi0B,EAAON,EAAMr0B,EAAI+0B,EAAMpa,EAAa,GAARoa,GAIxB3wB,EAAMpE,EAAI2a,GAAO4Y,EAASvC,GAC7B/pB,EAAM,YAGP+pB,GAAK5sB,EAAMpE,EAAI2a,GACf3a,GAAK2a,EAGLzZ,EAAOjJ,OAAO+H,IAAK,EAAGgxB,EAEvB,CAtIoB,IAAS1rB,EAwI7B,OAAOtK,OAAO6G,iBAAiBX,EAChC,EASM9G,EAAS,SAASzC,GACvB,MAAMuJ,EAAS,GAMTwzB,GAHN/8B,EAAQo8B,EAAWp8B,IAGO+I,OAG1B,IAAIswB,EA/RY,IAgSZsD,EAAQ,EACRK,EAlSe,GAqSnB,IAAK,MAAMO,KAAgBv9B,EACtBu9B,EAAe,KAClBh0B,EAAOP,KAAKizB,EAAmBsB,IAIjC,MAAMC,EAAcj0B,EAAOR,OAC3B,IAAI00B,EAAiBD,EAWrB,IALIA,GACHj0B,EAAOP,KAjTS,KAqTVy0B,EAAiBV,GAAa,CAIpC,IAAIW,EAAI9B,EACR,IAAK,MAAM2B,KAAgBv9B,EACtBu9B,GAAgBlE,GAAKkE,EAAeG,IACvCA,EAAIH,GAMN,MAAMI,EAAwBF,EAAiB,EAC3CC,EAAIrE,EAAI5sB,GAAOmvB,EAASe,GAASgB,IACpCruB,EAAM,YAGPqtB,IAAUe,EAAIrE,GAAKsE,EACnBtE,EAAIqE,EAEJ,IAAK,MAAMH,KAAgBv9B,EAI1B,GAHIu9B,EAAelE,KAAOsD,EAAQf,GACjCtsB,EAAM,YAEHiuB,IAAiBlE,EAAG,CAEvB,IAAIuE,EAAIjB,EACR,IAAK,IAAIja,EAAIxjB,GAA0BwjB,GAAKxjB,EAAM,CACjD,MAAMuY,EAAIiL,GAAKsa,EAxVP,EAwVsBta,GAAKsa,EAvV3B,MAuVgDta,EAAIsa,EAC5D,GAAIY,EAAInmB,EACP,MAED,MAAMomB,EAAUD,EAAInmB,EACd6lB,EAAap+B,EAAOuY,EAC1BlO,EAAOP,KACNizB,EAAmBM,EAAa9kB,EAAIomB,EAAUP,EAAY,KAE3DM,EAAInxB,EAAMoxB,EAAUP,EACrB,CAEA/zB,EAAOP,KAAKizB,EAAmBM,EAAaqB,EAAG,KAC/CZ,EAAON,EAAMC,EAAOgB,EAAuBF,IAAmBD,GAC9Db,EAAQ,IACNc,CACH,GAGCd,IACAtD,CAEH,CACA,OAAO9vB,EAAOY,KAAK,GACpB,EAaM2F,EAAY,SAAS9P,GAC1B,OAAOk8B,EAAUl8B,GAAO,SAASwC,GAChC,OAAOq5B,EAAc3vB,KAAK1J,GACvBI,EAAOJ,EAAOoG,MAAM,GAAG0uB,eACvB90B,CACJ,GACD,EAaMkN,EAAU,SAAS1P,GACxB,OAAOk8B,EAAUl8B,GAAO,SAASwC,GAChC,OAAOs5B,EAAc5vB,KAAK1J,GACvB,OAASC,EAAOD,GAChBA,CACJ,GACD,EA8BA,EAzBiB,CAMhB,QAAW,QAQX,KAAQ,CACP,OAAU45B,EACV,OAAUE,GAEX,OAAU15B,EACV,OAAUH,EACV,QAAWiN,EACX,UAAaI,E,6BCrbd,MAAMukB,EAAc71B,EAAQ,KACtB81B,EAAQ91B,EAAQ,KAEtBE,EAAQm2B,QAAU,CAAC71B,EAAcwE,GAAS0oB,UAAU,sBAAyB,CAAC,KAC5E,GAAqB,mBAAV1oB,EACT,MAAM,IAAIxE,EAAaM,UAAU4sB,EAAU,sBAG7C,SAAS4R,KAA6BlR,GACpC,MAAM9oB,EAAUwwB,EAAMvsB,kBAAkBrI,MACxC,IAAIq+B,EAEJ,IAAK,IAAI11B,EAAI,EAAGA,EAAIukB,EAAK7jB,OAAQV,IAC/BukB,EAAKvkB,GAAKisB,EAAMvsB,kBAAkB6kB,EAAKvkB,IAOzC,OAJA01B,EAAa32B,QAAQiO,MAAM7R,EAAOM,EAAS8oB,GAE3CmR,EAAa1J,EAAiB,IAAE0J,EAAY,CAAE7R,QAASA,EAAS4J,QAAS92B,IAElE++B,CACT,CAiBA,OAfAD,EAA0BE,UAAY,IAAIpR,KACxC,IAAK,IAAIvkB,EAAI,EAAGA,EAAIukB,EAAK7jB,OAAQV,IAC/BukB,EAAKvkB,GAAKisB,EAAMvsB,kBAAkB6kB,EAAKvkB,IAGzC,IAAI01B,EAAa32B,QAAQ42B,UAAUx6B,EAAOopB,GAI1C,OAFAmR,EAAa1J,EAAiB,IAAE0J,EAAY,CAAE7R,QAASA,EAAS4J,QAAS92B,IAElE++B,CAAU,EAGnBD,EAA0BxJ,EAAM3vB,eAAiBnB,EACjDs6B,EAA0BG,gBAAkBz6B,EAErCs6B,CAAyB,C,6BCvClC,MAAMI,EAAqB1/B,EAAQ,KAC7BuB,EAAQvB,EAAQ,KAChB2/B,EAAY3/B,EAAQ,MACpB,eACJqE,EAAc,kCACdC,GACEtE,EAAQ,KAEZ8D,EAAO5D,QAAU,MACfK,WAAAA,CAAYyD,GACVA,EAASa,OAAOb,GAChB,MAAMgG,EAASzI,EAAMyC,GACrB,GAAe,OAAXgG,EACF,MAAM,IAAI/E,MAAM,qCAAqCjB,MAGvD9C,KAAK0+B,MAAQ51B,EAAOwC,KACpBtL,KAAK2+B,SAAW71B,EAAOyC,QACvBvL,KAAK4+B,YAAc,IAAIJ,EAAmB11B,EAAO2C,WACnD,CAEA,YAAOpL,CAAMyC,GACX,IACE,OAAO,IAAI9C,KAAK8C,EAClB,CAAE,MAAO0F,GACP,OAAO,IACT,CACF,CAEA,WAAIq2B,GACF,MAAO,GAAG7+B,KAAKsL,QAAQtL,KAAKuL,SAC9B,CAEA,QAAID,GACF,OAAOtL,KAAK0+B,KACd,CAEA,QAAIpzB,CAAKxH,GAGP,GAAqB,KAFrBA,EAAQX,EAAeQ,OAAOG,KAEpBuF,OACR,MAAM,IAAItF,MAAM,4CAElB,IAAKX,EAAkCU,GACrC,MAAM,IAAIC,MAAM,gBAAgBD,+CAGlC9D,KAAK0+B,MAAQ56B,CACf,CAEA,WAAIyH,GACF,OAAOvL,KAAK2+B,QACd,CAEA,WAAIpzB,CAAQzH,GAGV,GAAqB,KAFrBA,EAAQX,EAAeQ,OAAOG,KAEpBuF,OACR,MAAM,IAAItF,MAAM,+CAElB,IAAKX,EAAkCU,GACrC,MAAM,IAAIC,MAAM,mBAAmBD,+CAGrC9D,KAAK2+B,SAAW76B,CAClB,CAEA,cAAI2H,GACF,OAAOzL,KAAK4+B,WACd,CAEA10B,QAAAA,GAGE,OAAOu0B,EAAUz+B,KACnB,CAEA8+B,YAAAA,EAAa,mBAAEC,GAAqB,GAAU,CAAC,GAC7C,OAAQ/+B,KAAK0+B,OACX,IAAK,OACH,OAAQ1+B,KAAK2+B,UACX,IAAK,aACL,IAAK,aACL,IAAK,gBACL,IAAK,gBACL,IAAK,gBACL,IAAK,gBACL,IAAK,gBACL,IAAK,gBACL,IAAK,UACL,IAAK,aACL,IAAK,eACL,IAAK,eACH,OAAQI,GAAgD,IAA1B/+B,KAAK4+B,YAAYp7B,KAEjD,QACE,OAAO,EAIb,IAAK,cACH,OAAQxD,KAAK2+B,UACX,IAAK,aACL,IAAK,aACL,IAAK,eACL,IAAK,eACH,OAAQI,GAAgD,IAA1B/+B,KAAK4+B,YAAYp7B,KAEjD,QACE,OAAO,EAIb,QACE,OAAO,EAGb,CACAw7B,KAAAA,GACE,MAA0B,QAAlBh/B,KAAK2+B,WAAsC,SAAf3+B,KAAK0+B,OAAmC,gBAAf1+B,KAAK0+B,QAC3D1+B,KAAK2+B,SAAS9wB,SAAS,OAChC,CACAoxB,MAAAA,GACE,MAAyB,SAAlBj/B,KAAK2+B,UAAsC,SAAf3+B,KAAK0+B,KAC1C,E,2BC3HF,SAASQ,EAAcC,EAAWvjB,EAASzM,GAIzC,OAHIA,EAAQinB,UACV+I,EAAYhwB,EAAQinB,QAAQ+I,EAAUz7B,OAEjC,IAAIy7B,EAAU,GAAGhwB,EAAQqd,QAAUrd,EAAQqd,QAAU,WAAW5Q,KACzE,CAEA,SAASwjB,EAASt7B,EAAOqL,GACvB,GAAqB,iBAAVrL,EACT,MAAMo7B,EAAct/B,UAAW,oDAAqDuP,GAEtF,OAAKA,EAAQinB,QAGNjnB,EAAQinB,QAAQiJ,OAAOv7B,GAFrBu7B,OAAOv7B,EAGlB,CAGA,SAASw7B,EAAUtb,GAWjB,OAESub,EAFJvb,EAAI,GAAMA,EAAI,GAAO,MAAa,EAAJA,IAC5BA,EAAI,GAAMA,EAAI,IAAQ,MAAmB,GAAXA,GACTlX,KAAKC,MAAMiX,GAGblX,KAAK0yB,MAAMxb,GACvC,CAEA,SAASyb,EAAY9F,GACnB,OAAO4F,EAAmBzyB,KAAK4yB,MAAM/F,GACvC,CAEA,SAASlb,EAAKuF,GACZ,OAAOA,EAAI,GAAK,EAAI,CACtB,CAYA,SAASub,EAAmBvb,GAC1B,OAAa,IAANA,EAAU,EAAIA,CACvB,CAEA,SAAS2b,EAAwBzjB,GAAW,SAAE0jB,IAC5C,IAAIC,EAAYC,EACZF,GACFC,EAAa,EACbC,EAAa,GAAK5jB,EAAY,IAE9B2jB,IAAe,IAAM3jB,EAAY,IACjC4jB,EAAa,IAAM5jB,EAAY,GAAK,GAGtC,MAAM6jB,EAAoB,GAAK7jB,EACzB8jB,EAA+B,IAAM9jB,EAAY,GAEvD,MAAO,CAACpY,EAAOqL,EAAU,CAAC,KACxB,IAAI6U,EAAIob,EAASt7B,EAAOqL,GAGxB,GAFA6U,EAAIub,EAAmBvb,GAEnB7U,EAAQ8wB,aAAc,CACxB,IAAKZ,OAAOa,SAASlc,GACnB,MAAMkb,EAAct/B,UAAW,yBAA0BuP,GAK3D,GAFA6U,EAAIyb,EAAYzb,GAEZA,EAAI6b,GAAc7b,EAAI8b,EACxB,MAAMZ,EACJt/B,UACA,oCAAoCigC,QAAiBC,eACrD3wB,GAIJ,OAAO6U,CACT,CAEA,OAAKqb,OAAO3H,MAAM1T,IAAM7U,EAAQgxB,OAC9Bnc,EAAIlX,KAAKE,IAAIF,KAAKG,IAAI+W,EAAG6b,GAAaC,GACtC9b,EAAIsb,EAAUtb,GACPA,GAGJqb,OAAOa,SAASlc,IAAY,IAANA,GAG3BA,EAAIyb,EAAYzb,GAIZA,GAAK6b,GAAc7b,GAAK8b,EACnB9b,GAITA,EAnEJ,SAAgBA,EAAGC,GAGjB,MAAMmc,EAAoBpc,EAAIC,EAC9B,OAAIxF,EAAKwF,KAAOxF,EAAK2hB,GACZA,EAAoBnc,EAEtBmc,CACT,CA2DQC,CAAOrc,EAAG+b,IACTH,GAAY5b,GAAKgc,EACbhc,EAAI+b,EAEN/b,IAfE,CAeD,CAEZ,CAEA,SAASsc,EAAyBpkB,GAAW,SAAE0jB,IAC7C,MAAME,EAAaT,OAAOkB,iBACpBV,EAAaD,EAAW,EAAIP,OAAOmB,iBACnCC,EAAYb,EAAWc,OAAOC,QAAUD,OAAOE,OAErD,MAAO,CAAC98B,EAAOqL,EAAU,CAAC,KACxB,IAAI6U,EAAIob,EAASt7B,EAAOqL,GAGxB,GAFA6U,EAAIub,EAAmBvb,GAEnB7U,EAAQ8wB,aAAc,CACxB,IAAKZ,OAAOa,SAASlc,GACnB,MAAMkb,EAAct/B,UAAW,yBAA0BuP,GAK3D,GAFA6U,EAAIyb,EAAYzb,GAEZA,EAAI6b,GAAc7b,EAAI8b,EACxB,MAAMZ,EACJt/B,UACA,oCAAoCigC,QAAiBC,eACrD3wB,GAIJ,OAAO6U,CACT,CAEA,IAAKqb,OAAO3H,MAAM1T,IAAM7U,EAAQgxB,MAG9B,OAFAnc,EAAIlX,KAAKE,IAAIF,KAAKG,IAAI+W,EAAG6b,GAAaC,GACtC9b,EAAIsb,EAAUtb,GACPA,EAGT,IAAKqb,OAAOa,SAASlc,IAAY,IAANA,EACzB,OAAO,EAGT,IAAI6c,EAAUH,OAAOjB,EAAYzb,IAEjC,OADA6c,EAAUJ,EAAUvkB,EAAW2kB,GACxBxB,OAAOwB,EAAQ,CAE1B,CAEA7hC,EAAQ8hC,IAAMh9B,GACLA,EAGT9E,EAAQU,UAAY,KACF,EAGlBV,EAAQ+hC,QAAUj9B,GACTqZ,QAAQrZ,GAGjB9E,EAAQuL,KAAOo1B,EAAwB,EAAG,CAAEC,UAAU,IACtD5gC,EAAQgiC,MAAQrB,EAAwB,EAAG,CAAEC,UAAU,IAEvD5gC,EAAQiiC,MAAQtB,EAAwB,GAAI,CAAEC,UAAU,IACxD5gC,EAAQ,kBAAoB2gC,EAAwB,GAAI,CAAEC,UAAU,IAEpE5gC,EAAQkiC,KAAOvB,EAAwB,GAAI,CAAEC,UAAU,IACvD5gC,EAAQ,iBAAmB2gC,EAAwB,GAAI,CAAEC,UAAU,IAEnE5gC,EAAQ,aAAeshC,EAAyB,GAAI,CAAEV,UAAU,IAChE5gC,EAAQ,sBAAwBshC,EAAyB,GAAI,CAAEV,UAAU,IAEzE5gC,EAAQmiC,OAAS,CAACr9B,EAAOqL,EAAU,CAAC,KAClC,MAAM6U,EAAIob,EAASt7B,EAAOqL,GAE1B,IAAKkwB,OAAOa,SAASlc,GACnB,MAAMkb,EAAct/B,UAAW,uCAAwCuP,GAGzE,OAAO6U,CAAC,EAGVhlB,EAAQ,uBAAyB,CAAC8E,EAAOqL,EAAU,CAAC,IACxCiwB,EAASt7B,EAAOqL,GAK5BnQ,EAAQoiC,MAAQ,CAACt9B,EAAOqL,EAAU,CAAC,KACjC,MAAM6U,EAAIob,EAASt7B,EAAOqL,GAE1B,IAAKkwB,OAAOa,SAASlc,GACnB,MAAMkb,EAAct/B,UAAW,uCAAwCuP,GAGzE,GAAIpK,OAAOiwB,GAAGhR,GAAI,GAChB,OAAOA,EAGT,MAAMC,EAAInX,KAAKu0B,OAAOrd,GAEtB,IAAKqb,OAAOa,SAASjc,GACnB,MAAMib,EAAct/B,UAAW,kEAAmEuP,GAGpG,OAAO8U,CAAC,EAGVjlB,EAAQ,sBAAwB,CAAC8E,EAAOqL,EAAU,CAAC,KACjD,MAAM6U,EAAIob,EAASt7B,EAAOqL,GAE1B,OAAIuoB,MAAM1T,IAINjf,OAAOiwB,GAAGhR,GAAI,GAHTA,EAOFlX,KAAKu0B,OAAOrd,EAAE,EAGvBhlB,EAAQsiC,UAAY,CAACx9B,EAAOqL,EAAU,CAAC,KACrC,GAAIA,EAAQoyB,wBAAoC,OAAVz9B,EACpC,MAAO,GAGT,GAAqB,iBAAVA,EACT,MAAMo7B,EAAct/B,UAAW,qDAAsDuP,GAIvF,OADmBA,EAAQinB,QAAUjnB,EAAQinB,QAAQzyB,OAASA,QAC5CG,EAAM,EAG1B9E,EAAQwiC,WAAa,CAAC19B,EAAOqL,EAAU,CAAC,KACtC,MAAM6U,EAAIhlB,EAAQsiC,UAAUx9B,EAAOqL,GACnC,IAAIpE,EACJ,IAAK,IAAIpC,EAAI,OAA8BjJ,KAA1BqL,EAAIiZ,EAAEhZ,YAAYrC,MAAqBA,EACtD,GAAIoC,EAAI,IACN,MAAMm0B,EAAct/B,UAAW,4BAA6BuP,GAIhE,OAAO6U,CAAC,EAGVhlB,EAAQyiC,UAAY,CAAC39B,EAAOqL,EAAU,CAAC,KACrC,MAAMuyB,EAAI1iC,EAAQsiC,UAAUx9B,EAAOqL,GAC7BwqB,EAAI+H,EAAEr4B,OACNs4B,EAAI,GACV,IAAK,IAAIh5B,EAAI,EAAGA,EAAIgxB,IAAKhxB,EAAG,CAC1B,MAAMoC,EAAI22B,EAAE1mB,WAAWrS,GACvB,GAAIoC,EAAI,OAAUA,EAAI,MACpB42B,EAAEr4B,KAAK3F,OAAO6G,cAAcO,SACvB,GAAI,OAAUA,GAAKA,GAAK,MAC7B42B,EAAEr4B,KAAK3F,OAAO6G,cAAc,aACvB,GAAI7B,IAAMgxB,EAAI,EACnBgI,EAAEr4B,KAAK3F,OAAO6G,cAAc,YACvB,CACL,MAAMkX,EAAIggB,EAAE1mB,WAAWrS,EAAI,GAC3B,GAAI,OAAU+Y,GAAKA,GAAK,MAAQ,CAC9B,MAAM1X,EAAQ,KAAJe,EACJd,EAAQ,KAAJyX,EACVigB,EAAEr4B,KAAK3F,OAAO6G,cAAc,MAAa,KAAWR,EAAKC,MACvDtB,CACJ,MACEg5B,EAAEr4B,KAAK3F,OAAO6G,cAAc,OAEhC,CACF,CAEA,OAAOm3B,EAAEl3B,KAAK,GAAG,EAGnBzL,EAAQ+I,OAAS,CAACjE,EAAOqL,EAAU,CAAC,KAClC,GAAc,OAAVrL,GAAoC,iBAAVA,GAAuC,mBAAVA,EACzD,MAAMo7B,EAAct/B,UAAW,mBAAoBuP,GAGrD,OAAOrL,CAAK,EAGd,MAAM89B,EACF78B,OAAOqB,yBAAyBC,YAAYzB,UAAW,cAAcnB,IACnEo+B,EAC2B,mBAAtBrY,kBACLzkB,OAAOqB,yBAAyBojB,kBAAkB5kB,UAAW,cAAcnB,IAC3E,KAEN,SAASq+B,EAAuBh+B,GAC9B,IAKE,OAFA89B,EAAmB/8B,KAAKf,IAEjB,CACT,CAAE,MACA,OAAO,CACT,CACF,CAEA,SAASi+B,EAAoBj+B,GAC3B,IAEE,OADA+9B,EAAoBh9B,KAAKf,IAClB,CACT,CAAE,MACA,OAAO,CACT,CACF,CAEA,SAASk+B,EAAsBl+B,GAC7B,IAGE,OADA,IAAIgH,WAAWhH,IACR,CACT,CAAE,MACA,OAAO,CACT,CACF,CAEA9E,EAAQqH,YAAc,CAACvC,EAAOqL,EAAU,CAAC,KACvC,IAAK2yB,EAAuBh+B,GAAQ,CAClC,GAAIqL,EAAQ8yB,cAAgBF,EAAoBj+B,GAC9C,MAAMo7B,EAAct/B,UAAW,6CAA8CuP,GAE/E,MAAM+vB,EAAct/B,UAAW,wBAAyBuP,EAC1D,CACA,GAAI6yB,EAAsBl+B,GACxB,MAAMo7B,EAAct/B,UAAW,4BAA6BuP,GAG9D,OAAOrL,CAAK,EAGd,MAAMo+B,EACFn9B,OAAOqB,yBAAyB+7B,SAASv9B,UAAW,cAAcnB,IACtEzE,EAAQmjC,SAAW,CAACr+B,EAAOqL,EAAU,CAAC,KACpC,IACE+yB,EAAmBr9B,KAAKf,EAC1B,CAAE,MAAO0E,GACP,MAAM02B,EAAct/B,UAAW,oBAAqBuP,EACtD,CAEA,IAAKA,EAAQ8yB,aAAeF,EAAoBj+B,EAAM6T,QACpD,MAAMunB,EAAct/B,UAAW,yDAA0DuP,GAE3F,GAAI6yB,EAAsBl+B,EAAM6T,QAC9B,MAAMunB,EAAct/B,UAAW,sCAAuCuP,GAGxE,OAAOrL,CAAK,EAOd,MAAMs+B,EAAuBr9B,OAAOqB,yBAClCrB,OAAOQ,eAAeuF,YAAYlG,UAClCJ,OAAOgZ,aACP/Z,IACF,CACE4+B,UACAC,WACAC,WACAz3B,WACA03B,YACAC,YACAC,kBACAC,aACAC,cACA1+B,SAAQ2+B,IACR,MAAM,KAAEn/B,GAASm/B,EACXC,EAAU,YAAYt2B,KAAK9I,GAAQ,KAAO,IAChD1E,EAAQ0E,GAAQ,CAACI,EAAOqL,EAAU,CAAC,KACjC,IAAK9I,YAAY4S,OAAOnV,IAAUs+B,EAAqBv9B,KAAKf,KAAWJ,EACrE,MAAMw7B,EAAct/B,UAAW,UAAUkjC,KAAWp/B,WAAeyL,GAErE,IAAKA,EAAQ8yB,aAAeF,EAAoBj+B,EAAM6T,QACpD,MAAMunB,EAAct/B,UAAW,yDAA0DuP,GAE3F,GAAI6yB,EAAsBl+B,EAAM6T,QAC9B,MAAMunB,EAAct/B,UAAW,sCAAuCuP,GAGxE,OAAOrL,CAAK,CACb,IAKH9E,EAAQ+jC,gBAAkB,CAACj/B,EAAOqL,EAAU,CAAC,KAC3C,IAAK9I,YAAY4S,OAAOnV,GACtB,MAAMo7B,EAAct/B,UAAW,uDAAwDuP,GAGzF,IAAKA,EAAQ8yB,aAAeF,EAAoBj+B,EAAM6T,QACpD,MAAMunB,EAAct/B,UAAW,yDAA0DuP,GAG3F,GAAI6yB,EAAsBl+B,EAAM6T,QAC9B,MAAMunB,EAAct/B,UAAW,sCAAuCuP,GAExE,OAAOrL,CAAK,EAGd9E,EAAQgkC,aAAe,CAACl/B,EAAOqL,EAAU,CAAC,KACxC,GAAI9I,YAAY4S,OAAOnV,GAAQ,CAC7B,IAAKqL,EAAQ8yB,aAAeF,EAAoBj+B,EAAM6T,QACpD,MAAMunB,EAAct/B,UAAW,yDAA0DuP,GAG3F,GAAI6yB,EAAsBl+B,EAAM6T,QAC9B,MAAMunB,EAAct/B,UAAW,sCAAuCuP,GAExE,OAAOrL,CACT,CAEA,IAAKqL,EAAQ8yB,cAAgBH,EAAuBh+B,GAClD,MAAMo7B,EAAct/B,UAAW,yCAA0CuP,GAE3E,GAAIA,EAAQ8yB,cAAgBF,EAAoBj+B,KAAWg+B,EAAuBh+B,GAChF,MAAMo7B,EAAct/B,UAAW,6DAA8DuP,GAE/F,GAAI6yB,EAAsBl+B,GACxB,MAAMo7B,EAAct/B,UAAW,4BAA6BuP,GAG9D,OAAOrL,CAAK,EAGd9E,EAAQikC,aAAejkC,EAAQ,qB,2BC/b/BA,EAAQiM,uCAAyCnI,GACxCA,EAAOsH,QAAQ,eAAgB,IAAIA,QAAQ,eAAgB,IAGpEpL,EAAQkM,6BAA+BpI,GAC9BA,EAAOsH,QAAQ,eAAgB,IAGxCpL,EAAQmM,qBAAuBoF,GACb,MAATA,GAAyB,OAATA,GAA0B,OAATA,GAA0B,OAATA,EAG3DvR,EAAQoE,kCAAoCN,GACnC,iCAAiC0J,KAAK1J,GAG/C9D,EAAQqE,6CAA+CP,GAC9C,qCAAqC0J,KAAK1J,GAGnD9D,EAAQmE,eAAiBL,GAChBA,EAAOsH,QAAQ,WAAW8F,GAAKA,EAAE0nB,gBAI1C54B,EAAQoM,0BAA4B,CAAC9K,EAAO+K,KAC1C,IAAIvH,EAAQ,GAIZ,IAFAuH,MAEa,CACX,KAAOA,EAAW/K,EAAM+I,QAA8B,MAApB/I,EAAM+K,IAA0C,OAApB/K,EAAM+K,IAClEvH,GAASxD,EAAM+K,KACbA,EAGJ,GAAIA,GAAY/K,EAAM+I,OACpB,MAGF,MAAM65B,EAAmB5iC,EAAM+K,GAG/B,KAFEA,EAEuB,OAArB63B,EASF,MARA,GAAI73B,GAAY/K,EAAM+I,OAAQ,CAC5BvF,GAAS,KACT,KACF,CAEAA,GAASxD,EAAM+K,KACbA,CAIN,CAEA,MAAO,CAACvH,EAAOuH,EAAS,C,6BCzD1B,MAAM,kCAAEjI,GAAsCtE,EAAQ,KAEtD8D,EAAO5D,QAAUwM,IACf,IAAI23B,EAAgB,GAAG33B,EAASF,QAAQE,EAASD,UAEjD,GAAiC,IAA7BC,EAASC,WAAWjI,KACtB,OAAO2/B,EAGT,IAAK,IAAKz/B,EAAMI,KAAU0H,EAASC,WACjC03B,GAAiB,IACjBA,GAAiBz/B,EACjBy/B,GAAiB,IAEZ//B,EAAkCU,IAA2B,IAAjBA,EAAMuF,SACrDvF,EAAQA,EAAMsG,QAAQ,YAAa,QACnCtG,EAAQ,IAAIA,MAGdq/B,GAAiBr/B,EAGnB,OAAOq/B,CAAa,C,6BCtBtB,MAAMC,EAAWtkC,EAAQ,MACnB,SAAEi9B,EAAQ,aAAEt7B,EAAY,oBAAEyR,GAAwBpT,EAAQ,MAC1D,uCAAEqL,EAAsC,iBAAEE,EAAgB,sBAAEK,GAA0B5L,EAAQ,KAEpG8D,EAAO5D,QAAUqkC,IACf,MAAMC,EAAYvH,EAASsH,GAE3B,OAAkB,OAAdC,EACK,KAGF1gC,EAAO5D,QAAQukC,cAAcD,EAAU,EAGhD1gC,EAAO5D,QAAQukC,cAAgBD,IAC7B,GAAyB,SAArBA,EAAUriC,OACZ,OAAO,KAGT,MAAMX,EAAQG,EAAa6iC,GAAW,GAAMphC,UAAU,GAEtD,IAAImJ,EAAW,EAEXG,EAAW,GACf,KAAOH,EAAW/K,EAAM+I,QAA8B,MAApB/I,EAAM+K,IACtCG,GAAYlL,EAAM+K,KAChBA,EAIJ,GAFAG,EAAWrB,EAAuCqB,GAE9CH,IAAa/K,EAAM+I,OACrB,OAAO,OAGPgC,EAEF,MAAMm4B,EAAcljC,EAAM4B,UAAUmJ,GAEpC,IAAIke,EAAOrX,EAAoBsxB,GAG/B,MAAMC,EAA4B,8BAA8BC,KAAKl4B,GACrE,GAAIi4B,EAA2B,CAC7B,MAAME,EAAat5B,EAAiBkf,GAGpC,GAFAA,EAAO7e,EAAsBi5B,GAEhB,OAATpa,EACF,OAAO,KAET/d,EAAWi4B,EAA0B,EACvC,CAMA,IAAIG,EAJAp4B,EAASoC,WAAW,OACtBpC,EAAW,aAAaA,KAI1B,IACEo4B,EAAiB,IAAIR,EAAS53B,EAChC,CAAE,MAAOhD,GACPo7B,EAAiB,IAAIR,EAAS,8BAChC,CAEA,MAAO,CACL53B,SAAUo4B,EACVra,OACD,C,6BClEH,MAAM,WAAE1mB,EAAU,qBAAEG,GAAyBlE,EAAQ,MAC/C,mBAAE6R,EAAkB,wBAAEwB,EAAuB,0BAAEH,GAA8BlT,EAAQ,KAE3F,SAASwR,EAAEC,GACT,OAAOA,EAAKvF,YAAY,EAC1B,CAsEA,SAAS64B,EAA0BzpB,EAAK9P,EAAMw5B,GAC5C,IAAIn7B,EAAIyR,EAAI9L,QAAQhE,GACpB,KAAO3B,GAAK,GACVyR,EAAIzR,GAAKm7B,EACTn7B,EAAIyR,EAAI9L,QAAQhE,EAAM3B,EAAI,GAE5B,OAAOyR,CACT,CAEAxX,EAAO5D,QAAU,CACf6B,sBA9CF,SAA+BP,GAC7B,OAhCF,SAAyBA,GACvB,MAAMyjC,EAmDR,SAAmC3pB,EAAK4pB,GACtC,MAAMC,EAAO,GACb,IAAI91B,EAAO,EACPxF,EAAIyR,EAAI9L,QAAQ01B,GACpB,KAAOr7B,GAAK,GACVs7B,EAAK36B,KAAK8Q,EAAIlR,MAAMiF,EAAMxF,IAC1BwF,EAAOxF,EAAI,EACXA,EAAIyR,EAAI9L,QAAQ01B,EAAI71B,GAKtB,OAHIA,IAASiM,EAAI/Q,QACf46B,EAAK36B,KAAK8Q,EAAIlR,MAAMiF,IAEf81B,CACT,CAhEoBC,CAA0B5jC,EAAOgQ,EAAE,MAC/CzG,EAAS,GACf,IAAK,MAAM5G,KAAS8gC,EAAW,CAC7B,GAAqB,IAAjB9gC,EAAMoG,OACR,SAGF,IAAI3F,EAAMI,EACV,MAAMqgC,EAAelhC,EAAMqL,QAAQgC,EAAE,MAEjC6zB,GAAgB,GAClBzgC,EAAOT,EAAMiG,MAAM,EAAGi7B,GACtBrgC,EAAQb,EAAMiG,MAAMi7B,EAAe,KAEnCzgC,EAAOT,EACPa,EAAQ,IAAIgH,WAAW,IAGzBpH,EAAOmgC,EAA0BngC,EAAM,GAAM,IAC7CI,EAAQ+/B,EAA0B//B,EAAO,GAAM,IAE/C,MAAMsgC,EAAaphC,EAAqB2N,EAAmBjN,IACrD2gC,EAAcrhC,EAAqB2N,EAAmB7M,IAE5D+F,EAAOP,KAAK,CAAC86B,EAAYC,GAC3B,CACA,OAAOx6B,CACT,CAISy6B,CAAgBzhC,EAAWvC,GACpC,EA6CEmJ,oBA1CF,SAA6B86B,GAG3B,IAAI16B,EAAS,GACb,IAAK,MAAOlB,EAAGgB,KAAU46B,EAAOhgC,UAIpB,IAANoE,IACFkB,GAAU,KAEZA,GAAU,GANGsI,EAAwBxI,EAAM,GAAIqI,GAA2B,MAC5DG,EAAwBxI,EAAM,GAAIqI,GAA2B,KAO7E,OAAOnI,CACT,E,uBC5CAjH,EAAO5D,QAAU,CACb+O,eAdmB,uuIAerBK,qBAd2B,kgBAe3BG,UAdgB,q9UAehBmB,WAdiB,4gEAejBjB,UAdgB,8nVAehBC,UAdgB,o7DAehBC,OAda,syPAebC,OAda,y9MAebC,SAde,2LAefC,SAde,6HAefC,OAda,62TAebC,OAda,2ie,6BCXf,MAAM2lB,EAAc71B,EAAQ,KACtB81B,EAAQ91B,EAAQ,KAEhBoG,EAAa0vB,EAAM1vB,WACnBE,EAAqBwvB,EAAMxvB,mBAiBjC,SAAS0vB,EAAYx1B,EAAcy1B,GACjC,IAAI1T,EASJ,YARkB3hB,IAAdq1B,IACF1T,EAAQ0T,EAAUnwB,WAGfgwB,EAAMvtB,SAASga,KAClBA,EAAQ/hB,EAAa8F,GAAyB,IAAER,WAG3CG,OAAOY,OAAO0b,EACvB,CAxBAriB,EAAQg2B,GAAKlxB,GACJ8wB,EAAMvtB,SAASvD,IAAU8wB,EAAMlwB,OAAOZ,EAAOoB,IAAepB,EAAMoB,aAAuB+vB,EAAK91B,eAEvGH,EAAQk2B,OAASpxB,GACR8wB,EAAMvtB,SAASvD,IAAUA,aAAiBmxB,EAAK91B,eAExDH,EAAQm2B,QAAU,CAAC71B,EAAcwE,GAAS0oB,UAAU,sBAAyB,CAAC,KAC5E,GAAIxtB,EAAQg2B,GAAGlxB,GACb,OAAO8wB,EAAM5uB,eAAelC,GAE9B,MAAM,IAAIxE,EAAaM,UAAU,GAAG4sB,0BAAgC,EAgBtExtB,EAAQ2G,OAAS,CAACrG,EAAc0J,EAAiBwsB,KAC/C,MAAMvvB,EAAU6uB,EAAYx1B,GAC5B,OAAON,EAAQy2B,MAAMxvB,EAAS3G,EAAc0J,EAAiBwsB,EAAY,EAG3Ex2B,EAAQmB,WAAa,CAACb,EAAc0J,EAAiBwsB,KACnD,MAAMvvB,EAAUjH,EAAQ2G,OAAOrG,EAAc0J,EAAiBwsB,GAC9D,OAAOZ,EAAM5uB,eAAeC,EAAQ,EAGtCjH,EAAQ02B,eAAiB,CAACzvB,EAAS3G,KAAV,EAEzBN,EAAQy2B,MAAQ,CAACxvB,EAAS3G,EAAc0J,EAAkB,GAAIwsB,EAAc,CAAC,KAC3EA,EAAYvvB,QAAUA,EAEtBjH,EAAQ02B,eAAezvB,EAAS3G,GAChCyF,OAAO8C,eAAe5B,EAASf,EAAY,CACzCpB,MAAO,IAAImxB,EAAK91B,eAAeG,EAAc0J,EAAiBwsB,GAC9DD,cAAc,IAGhBtvB,EAAQf,GAAY0vB,EAAM3vB,eAAiBgB,EACvCgvB,EAAKhsB,MACPgsB,EAAKhsB,KAAKhD,EAAQf,IAEbe,GAGTjH,EAAAA,IAAc,CAACM,EAAcy1B,KAC3B,MAAM9uB,EAAU6uB,EAAYx1B,EAAcy1B,GAY1C,OAVA/1B,EAAQ02B,eAAezvB,EAAS3G,GAChCyF,OAAO8C,eAAe5B,EAASf,EAAY,CACzCpB,MAAOiB,OAAOY,OAAOsvB,EAAK91B,eAAeyF,WACzC2wB,cAAc,IAGhBtvB,EAAQf,GAAY0vB,EAAM3vB,eAAiBgB,EACvCgvB,EAAKhsB,MACPgsB,EAAKhsB,KAAKhD,EAAQf,IAEbe,EAAQf,EAAW,EAG5B,MAAMywB,EAAU,IAAIzkB,IAAI,CAAC,SAAU,WAEnClS,EAAQ42B,QAAU,CAACt2B,EAAcu2B,KAC/B,IAAKA,EAAYlQ,MAAKmQ,GAAcH,EAAQ/xB,IAAIkyB,KAC9C,OAGF,MAAMpwB,EAAekvB,EAAMnvB,iBAAiBnG,GAC5C,MAAMT,EACJQ,WAAAA,CAAYE,GACV,GAAIy2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,4DAA4Do2B,UAAU3sB,mBAG1E,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,yCACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,CACE,IAAIA,EAASC,UAAU,QACRt2B,IAAXq2B,IACFA,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,yCACT4J,QAAS92B,KAGb4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAO/2B,EAAQy2B,MAAM1wB,OAAOY,kBAAkBf,WAAYtF,EAAc4tB,EAC1E,CAEA5qB,MAAAA,GACE,MAAMm0B,EAAUz2B,WAAsCA,KAAOV,EAC7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,qEAGnC,OAAO62B,EAAQvxB,GAAY5C,QAC7B,CAEA,QAAI9B,GACF,MAAMi2B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnC,OAAO62B,EAAQvxB,GAAkB,IACnC,CAEA,QAAI1E,CAAKy1B,GACP,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,iEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAkB,KAAI+wB,CAChC,CAEA/rB,QAAAA,GAEE,IAAKlL,EAAQg2B,GADGh1B,MAEd,MAAM,IAAIV,EAAaM,UAAU,uEAGnC,OALgBI,KAKDkF,GAAkB,IACnC,CAEA,UAAIpE,GACF,MAAM21B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,yEAGnC,OAAO62B,EAAQvxB,GAAoB,MACrC,CAEA,YAAIlE,GACF,MAAMy1B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnC,OAAO62B,EAAQvxB,GAAsB,QACvC,CAEA,YAAIlE,CAASi1B,GACX,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,qEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAsB,SAAI+wB,CACpC,CAEA,YAAI90B,GACF,MAAMs1B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnC,OAAO62B,EAAQvxB,GAAsB,QACvC,CAEA,YAAI/D,CAAS80B,GACX,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,qEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAsB,SAAI+wB,CACpC,CAEA,YAAI30B,GACF,MAAMm1B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnC,OAAO62B,EAAQvxB,GAAsB,QACvC,CAEA,YAAI5D,CAAS20B,GACX,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,qEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAsB,SAAI+wB,CACpC,CAEA,QAAIz0B,GACF,MAAMi1B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnC,OAAO62B,EAAQvxB,GAAkB,IACnC,CAEA,QAAI1D,CAAKy0B,GACP,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,iEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAkB,KAAI+wB,CAChC,CAEA,YAAIp0B,GACF,MAAM40B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnC,OAAO62B,EAAQvxB,GAAsB,QACvC,CAEA,YAAIrD,CAASo0B,GACX,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,qEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAsB,SAAI+wB,CACpC,CAEA,QAAIx0B,GACF,MAAMg1B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnC,OAAO62B,EAAQvxB,GAAkB,IACnC,CAEA,QAAIzD,CAAKw0B,GACP,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,iEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAkB,KAAI+wB,CAChC,CAEA,YAAIn0B,GACF,MAAM20B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnC,OAAO62B,EAAQvxB,GAAsB,QACvC,CAEA,YAAIpD,CAASm0B,GACX,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,2EAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,qEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAsB,SAAI+wB,CACpC,CAEA,UAAIh0B,GACF,MAAMw0B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,yEAGnC,OAAO62B,EAAQvxB,GAAoB,MACrC,CAEA,UAAIjD,CAAOg0B,GACT,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,yEAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,mEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAoB,OAAI+wB,CAClC,CAEA,gBAAI9zB,GACF,MAAMs0B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,+EAGnC,OAAOg1B,EAAM1sB,cAAclI,KAAM,gBAAgB,IACxC40B,EAAMvsB,kBAAkBouB,EAAQvxB,GAA0B,eAErE,CAEA,QAAI9C,GACF,MAAMq0B,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnC,OAAO62B,EAAQvxB,GAAkB,IACnC,CAEA,QAAI9C,CAAK6zB,GACP,MAAMQ,EAAUz2B,WAAsCA,KAAOV,EAE7D,IAAKN,EAAQg2B,GAAGyB,GACd,MAAM,IAAIn3B,EAAaM,UAAU,uEAGnCq2B,EAAItB,EAAuB,UAAEsB,EAAG,CAC9BzJ,QAAS,iEACT4J,QAAS92B,IAGXm3B,EAAQvxB,GAAkB,KAAI+wB,CAChC,CAEA,YAAO51B,CAAMd,GACX,GAAIy2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,qEAAqEo2B,UAAU3sB,mBAGnF,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,kDACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,CACE,IAAIA,EAASC,UAAU,QACRt2B,IAAXq2B,IACFA,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,kDACT4J,QAAS92B,KAGb4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOnB,EAAMvsB,kBAAkB4sB,EAAK91B,eAAekB,MAAMf,KAAiB4tB,GAC5E,CAEA,eAAO3sB,CAAShB,GACd,GAAIy2B,UAAU3sB,OAAS,EACrB,MAAM,IAAI/J,EAAaM,UACrB,wEAAwEo2B,UAAU3sB,mBAGtF,MAAM6jB,EAAO,GACb,CACE,IAAI6I,EAASC,UAAU,GACvBD,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,qDACT4J,QAAS92B,IAEX4tB,EAAK5jB,KAAKysB,EACZ,CACA,CACE,IAAIA,EAASC,UAAU,QACRt2B,IAAXq2B,IACFA,EAASpB,EAAuB,UAAEoB,EAAQ,CACxCvJ,QAAS,qDACT4J,QAAS92B,KAGb4tB,EAAK5jB,KAAKysB,EACZ,CACA,OAAOd,EAAK91B,eAAeoB,YAAY2sB,EACzC,EAEFnoB,OAAOiD,iBAAiBnJ,EAAI+F,UAAW,CACrCtC,OAAQ,CAAEg0B,YAAY,GACtB91B,KAAM,CAAE81B,YAAY,GACpBpsB,SAAU,CAAEosB,YAAY,GACxBx1B,OAAQ,CAAEw1B,YAAY,GACtBt1B,SAAU,CAAEs1B,YAAY,GACxBn1B,SAAU,CAAEm1B,YAAY,GACxBh1B,SAAU,CAAEg1B,YAAY,GACxB90B,KAAM,CAAE80B,YAAY,GACpBz0B,SAAU,CAAEy0B,YAAY,GACxB70B,KAAM,CAAE60B,YAAY,GACpBx0B,SAAU,CAAEw0B,YAAY,GACxBr0B,OAAQ,CAAEq0B,YAAY,GACtBn0B,aAAc,CAAEm0B,YAAY,GAC5Bl0B,KAAM,CAAEk0B,YAAY,GACpB,CAAC9xB,OAAOgZ,aAAc,CAAE1Z,MAAO,MAAOyxB,cAAc,KAEtDxwB,OAAOiD,iBAAiBnJ,EAAK,CAAEwB,MAAO,CAAEi2B,YAAY,GAAQ/1B,SAAU,CAAE+1B,YAAY,KACpF5wB,EAA0B,IAAI7G,EAE9BkG,OAAO8C,eAAevI,EA3dF,MA2d+B,CACjDi2B,cAAc,EACd/c,UAAU,EACV1U,MAAOjF,IAGLg3B,EAAY/nB,SAAS,WACvB/I,OAAO8C,eAAevI,EAAc,YAAa,CAC/Ci2B,cAAc,EACd/c,UAAU,EACV1U,MAAOjF,GAEX,EAGF,MAAMo2B,EAAOn2B,EAAQ,G,UClfrB,MAAMyT,EAAgB3P,EAAO5D,QAAQuT,cAAgBxN,OAAOod,OAAO,CAC/D,SAAU,OAAQ,OAAQ,QAAS,OAAQ,QAAS,QAAS,OAC7D,UAAW,WAAY,MAAO,UAAW,QAAS,YAAa,MAC/D,SAAU,WAAY,SAAU,WAAY,aAAc,SAC1D,UAAW,QAAS,YAGlBqS,EAAc5xB,EAAO5D,QAAQw1B,YAAczvB,OAAOod,OAAO,CAC3D,OAAQ,OAAQ,YAAa,QAAS,SAAU,OAAQ,OACxD,UAAW,WAGToS,EAAwB3xB,EAAO5D,QAAQu1B,sBAAwBxvB,OAAOod,OAAO,CAC/E,OAAQ,WAAY,UAAW,QAAS,QAAS,SAAU,WAC3D,WAAY,aAGVsS,EAAmB7xB,EAAO5D,QAAQy1B,iBAAmB1vB,OAAOod,OAAO,CACrE,QAAS,MAAO,QAAS,QAAS,UAAW,OAAQ,WAGzDvf,EAAO5D,QAAQ0T,qBAAuB3N,OAAOod,OAAO,CAChD,WAAY,WAAY,SAAU,WAGtCvf,EAAO5D,QAAQsT,SAAWvN,OAAOod,OAC7BqS,EAAYxhB,OAAOT,IAGvB3P,EAAO5D,QAAQwT,YAAczN,OAAOod,OAChCoS,EAAsBvhB,OAAOyhB,IAGjC7xB,EAAO5D,QAAQyT,OAAS1N,OAAOod,OAAO,CAClC,OAAQ,YAAa,WAAY,eAAgB,YACjD,YAAa,gBAAiB,WAAY,YAAa,OACvD,aAAc,OAAQ,OAAQ,OAAQ,WAAY,WAAY,QAC9D,QAAS,Q,6BCnCb,MAAM,IAAEtjB,EAAG,gBAAEE,GAAoBD,EAAQ,IACnC0lC,EAAkB1lC,EAAQ,KAC1B2lC,EAAkB3lC,EAAQ,KAE1B4lC,EAAqB,CAAE9+B,MAAOb,OAAQ0U,QAAS9V,OAAQ/D,WAC7Df,EAAI+2B,QAAQ8O,EAAoB,CAAC,WACjC3lC,EAAgB62B,QAAQ8O,EAAoB,CAAC,WAE7C1lC,EAAQH,IAAM6lC,EAAmB7lC,IACjCG,EAAQD,gBAAkB2lC,EAAmB3lC,gBAE7CC,EAAQ+8B,SAAWyI,EAAgBzI,SACnC/8B,EAAQW,cAAgB6kC,EAAgB7kC,cACxCX,EAAQyB,aAAe+jC,EAAgB/jC,aACvCzB,EAAQ+C,cAAgByiC,EAAgBziC,cACxC/C,EAAQ0C,cAAgB8iC,EAAgB9iC,cACxC1C,EAAQ2C,iBAAmB6iC,EAAgB7iC,iBAC3C3C,EAAQ+B,mBAAqByjC,EAAgBzjC,mBAC7C/B,EAAQqC,eAAiBmjC,EAAgBnjC,eACzCrC,EAAQuC,eAAiBijC,EAAgBjjC,eACzCvC,EAAQoC,gCAAkCojC,EAAgBpjC,gCAC1DpC,EAAQ4C,gBAAkB4iC,EAAgB5iC,gBAE1C5C,EAAQkT,oBAAsBuyB,EAAgBvyB,oBAC9ClT,EAAQ2R,mBAAqB8zB,EAAgB9zB,kB","sources":["../node_modules/data-urls/node_modules/whatwg-url/webidl2js-wrapper.js","../node_modules/data-urls/node_modules/whatwg-url/lib/URL-impl.js","../node_modules/data-urls/node_modules/whatwg-url/lib/encoding.js","../node_modules/data-urls/node_modules/whatwg-mimetype/lib/mime-type-parameters.js","../node_modules/data-urls/node_modules/whatwg-url/lib/utils.js","../node_modules/data-urls/node_modules/whatwg-url/lib/URLSearchParams-impl.js","../node_modules/data-urls/lib/utils.js","../node_modules/data-urls/node_modules/whatwg-mimetype/lib/parser.js","../node_modules/data-urls/node_modules/tr46/lib/statusMapping.js","../node_modules/data-urls/node_modules/tr46/index.js","../node_modules/data-urls/node_modules/whatwg-url/lib/percent-encoding.js","../node_modules/do_username/lib/private_functions.js","../node_modules/data-urls/node_modules/whatwg-url/lib/infra.js","db/Identity.ts","db/db.ts","pagecontext.ts","workers/paths.ts","workers/session-utils.ts","../../../../toolkit/components/berytus/src/types.ts","key-utils.ts","ui/utils/userAttributesLabels.ts","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","crypto/CipherBox.ts","../node_modules/jose/dist/webapi/lib/buffer_utils.js","../node_modules/jose/dist/webapi/util/base64url.js","../node_modules/jose/dist/webapi/lib/base64.js","../node_modules/jose/dist/webapi/lib/private_symbols.js","../node_modules/jose/dist/webapi/util/errors.js","../node_modules/jose/dist/webapi/lib/iv.js","../node_modules/jose/dist/webapi/lib/check_iv_length.js","../node_modules/jose/dist/webapi/lib/check_cek_length.js","../node_modules/jose/dist/webapi/lib/crypto_key.js","../node_modules/jose/dist/webapi/lib/invalid_key_input.js","../node_modules/jose/dist/webapi/lib/is_key_like.js","../node_modules/jose/dist/webapi/lib/encrypt.js","../node_modules/jose/dist/webapi/lib/aeskw.js","../node_modules/jose/dist/webapi/lib/digest.js","../node_modules/jose/dist/webapi/lib/ecdhes.js","../node_modules/jose/dist/webapi/lib/pbes2kw.js","../node_modules/jose/dist/webapi/lib/check_key_length.js","../node_modules/jose/dist/webapi/lib/rsaes.js","../node_modules/jose/dist/webapi/lib/is_object.js","../node_modules/jose/dist/webapi/lib/is_jwk.js","../node_modules/jose/dist/webapi/lib/jwk_to_key.js","../node_modules/jose/dist/webapi/lib/normalize_key.js","../node_modules/jose/dist/webapi/lib/cek.js","../node_modules/jose/dist/webapi/lib/decrypt.js","../node_modules/jose/dist/webapi/lib/encrypt_key_management.js","../node_modules/jose/dist/webapi/key/export.js","../node_modules/jose/dist/webapi/lib/key_to_jwk.js","../node_modules/jose/dist/webapi/lib/aesgcmkw.js","../node_modules/jose/dist/webapi/lib/is_disjoint.js","../node_modules/jose/dist/webapi/lib/validate_crit.js","../node_modules/jose/dist/webapi/lib/check_key_type.js","../node_modules/jose/dist/webapi/jwe/flattened/encrypt.js","../node_modules/jose/dist/webapi/jwe/compact/encrypt.js","../node_modules/jose/dist/webapi/lib/decrypt_key_management.js","../node_modules/jose/dist/webapi/lib/validate_algorithms.js","../node_modules/jose/dist/webapi/jwe/compact/decrypt.js","../node_modules/jose/dist/webapi/jwe/flattened/decrypt.js","../node_modules/jose/dist/webapi/key/import.js","crypto/JWEPacketBox.ts","workers/field-utils.ts","workers/pageAction-popup-fix.ts","workers/pageAction-utils.ts","workers/main.ts","db/Channel.ts","utils.ts","../node_modules/do_username/lib/do_username.js","../node_modules/data-urls/node_modules/whatwg-url/lib/URLSearchParams.js","../node_modules/data-urls/node_modules/whatwg-url/lib/url-state-machine.js","../node_modules/punycode/punycode.es6.js","../node_modules/data-urls/node_modules/whatwg-url/lib/Function.js","../node_modules/data-urls/node_modules/whatwg-mimetype/lib/mime-type.js","../node_modules/data-urls/node_modules/webidl-conversions/lib/index.js","../node_modules/data-urls/node_modules/whatwg-mimetype/lib/utils.js","../node_modules/data-urls/node_modules/whatwg-mimetype/lib/serializer.js","../node_modules/data-urls/lib/parser.js","../node_modules/data-urls/node_modules/whatwg-url/lib/urlencoded.js","../node_modules/data-urls/node_modules/tr46/lib/regexes.js","../node_modules/data-urls/node_modules/whatwg-url/lib/URL.js","../node_modules/do_username/lib/constants.js","../node_modules/data-urls/node_modules/whatwg-url/index.js"],"sourcesContent":["\"use strict\";\n\nconst URL = require(\"./lib/URL\");\nconst URLSearchParams = require(\"./lib/URLSearchParams\");\n\nexports.URL = URL;\nexports.URLSearchParams = URLSearchParams;\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\nconst urlencoded = require(\"./urlencoded\");\nconst URLSearchParams = require(\"./URLSearchParams\");\n\nexports.implementation = class URLImpl {\n  // Unlike the spec, we duplicate some code between the constructor and canParse, because we want to give useful error\n  // messages in the constructor that distinguish between the different causes of failure.\n  constructor(globalObject, [url, base]) {\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === null) {\n        throw new TypeError(`Invalid base URL: ${base}`);\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === null) {\n      throw new TypeError(`Invalid URL: ${url}`);\n    }\n\n    const query = parsedURL.query !== null ? parsedURL.query : \"\";\n\n    this._url = parsedURL;\n\n    // We cannot invoke the \"new URLSearchParams object\" algorithm without going through the constructor, which strips\n    // question mark by default. Therefore the doNotStripQMark hack is used.\n    this._query = URLSearchParams.createImpl(globalObject, [query], { doNotStripQMark: true });\n    this._query._url = this;\n  }\n\n  static parse(globalObject, input, base) {\n    try {\n      return new URLImpl(globalObject, [input, base]);\n    } catch {\n      return null;\n    }\n  }\n\n  static canParse(url, base) {\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === null) {\n        return false;\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === null) {\n      return false;\n    }\n\n    return true;\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === null) {\n      throw new TypeError(`Invalid URL: ${v}`);\n    }\n\n    this._url = parsedURL;\n\n    this._query._list.splice(0);\n    const { query } = parsedURL;\n    if (query !== null) {\n      this._query._list = urlencoded.parseUrlencodedString(query);\n    }\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return `${this._url.scheme}:`;\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(`${v}:`, { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return `${usm.serializeHost(url.host)}:${usm.serializeInteger(url.port)}`;\n  }\n\n  set host(v) {\n    if (usm.hasAnOpaquePath(this._url)) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (usm.hasAnOpaquePath(this._url)) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    return usm.serializePath(this._url);\n  }\n\n  set pathname(v) {\n    if (usm.hasAnOpaquePath(this._url)) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return `?${this._url.query}`;\n  }\n\n  set search(v) {\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      this._query._list = [];\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n    this._query._list = urlencoded.parseUrlencodedString(input);\n  }\n\n  get searchParams() {\n    return this._query;\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return `#${this._url.fragment}`;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\nconst utf8Encoder = new TextEncoder();\nconst utf8Decoder = new TextDecoder(\"utf-8\", { ignoreBOM: true });\n\nfunction utf8Encode(string) {\n  return utf8Encoder.encode(string);\n}\n\nfunction utf8DecodeWithoutBOM(bytes) {\n  return utf8Decoder.decode(bytes);\n}\n\nmodule.exports = {\n  utf8Encode,\n  utf8DecodeWithoutBOM\n};\n","\"use strict\";\nconst {\n  asciiLowercase,\n  solelyContainsHTTPTokenCodePoints,\n  soleyContainsHTTPQuotedStringTokenCodePoints\n} = require(\"./utils.js\");\n\nmodule.exports = class MIMETypeParameters {\n  constructor(map) {\n    this._map = map;\n  }\n\n  get size() {\n    return this._map.size;\n  }\n\n  get(name) {\n    name = asciiLowercase(String(name));\n    return this._map.get(name);\n  }\n\n  has(name) {\n    name = asciiLowercase(String(name));\n    return this._map.has(name);\n  }\n\n  set(name, value) {\n    name = asciiLowercase(String(name));\n    value = String(value);\n\n    if (!solelyContainsHTTPTokenCodePoints(name)) {\n      throw new Error(`Invalid MIME type parameter name \"${name}\": only HTTP token code points are valid.`);\n    }\n    if (!soleyContainsHTTPQuotedStringTokenCodePoints(value)) {\n      throw new Error(`Invalid MIME type parameter value \"${value}\": only HTTP quoted-string token code points are ` +\n                      `valid.`);\n    }\n\n    return this._map.set(name, value);\n  }\n\n  clear() {\n    this._map.clear();\n  }\n\n  delete(name) {\n    name = asciiLowercase(String(name));\n    return this._map.delete(name);\n  }\n\n  forEach(callbackFn, thisArg) {\n    this._map.forEach(callbackFn, thisArg);\n  }\n\n  keys() {\n    return this._map.keys();\n  }\n\n  values() {\n    return this._map.values();\n  }\n\n  entries() {\n    return this._map.entries();\n  }\n\n  [Symbol.iterator]() {\n    return this._map[Symbol.iterator]();\n  }\n};\n","\"use strict\";\n\n// Returns \"Type(value) is Object\" in ES terminology.\nfunction isObject(value) {\n  return (typeof value === \"object\" && value !== null) || typeof value === \"function\";\n}\n\nconst hasOwn = Function.prototype.call.bind(Object.prototype.hasOwnProperty);\n\n// Like `Object.assign`, but using `[[GetOwnProperty]]` and `[[DefineOwnProperty]]`\n// instead of `[[Get]]` and `[[Set]]` and only allowing objects\nfunction define(target, source) {\n  for (const key of Reflect.ownKeys(source)) {\n    const descriptor = Reflect.getOwnPropertyDescriptor(source, key);\n    if (descriptor && !Reflect.defineProperty(target, key, descriptor)) {\n      throw new TypeError(`Cannot redefine property: ${String(key)}`);\n    }\n  }\n}\n\nfunction newObjectInRealm(globalObject, object) {\n  const ctorRegistry = initCtorRegistry(globalObject);\n  return Object.defineProperties(\n    Object.create(ctorRegistry[\"%Object.prototype%\"]),\n    Object.getOwnPropertyDescriptors(object)\n  );\n}\n\nconst wrapperSymbol = Symbol(\"wrapper\");\nconst implSymbol = Symbol(\"impl\");\nconst sameObjectCaches = Symbol(\"SameObject caches\");\nconst ctorRegistrySymbol = Symbol.for(\"[webidl2js] constructor registry\");\n\nconst AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(async function* () {}).prototype);\n\nfunction initCtorRegistry(globalObject) {\n  if (hasOwn(globalObject, ctorRegistrySymbol)) {\n    return globalObject[ctorRegistrySymbol];\n  }\n\n  const ctorRegistry = Object.create(null);\n\n  // In addition to registering all the WebIDL2JS-generated types in the constructor registry,\n  // we also register a few intrinsics that we make use of in generated code, since they are not\n  // easy to grab from the globalObject variable.\n  ctorRegistry[\"%Object.prototype%\"] = globalObject.Object.prototype;\n  ctorRegistry[\"%IteratorPrototype%\"] = Object.getPrototypeOf(\n    Object.getPrototypeOf(new globalObject.Array()[Symbol.iterator]())\n  );\n\n  try {\n    ctorRegistry[\"%AsyncIteratorPrototype%\"] = Object.getPrototypeOf(\n      Object.getPrototypeOf(\n        globalObject.eval(\"(async function* () {})\").prototype\n      )\n    );\n  } catch {\n    ctorRegistry[\"%AsyncIteratorPrototype%\"] = AsyncIteratorPrototype;\n  }\n\n  globalObject[ctorRegistrySymbol] = ctorRegistry;\n  return ctorRegistry;\n}\n\nfunction getSameObject(wrapper, prop, creator) {\n  if (!wrapper[sameObjectCaches]) {\n    wrapper[sameObjectCaches] = Object.create(null);\n  }\n\n  if (prop in wrapper[sameObjectCaches]) {\n    return wrapper[sameObjectCaches][prop];\n  }\n\n  wrapper[sameObjectCaches][prop] = creator();\n  return wrapper[sameObjectCaches][prop];\n}\n\nfunction wrapperForImpl(impl) {\n  return impl ? impl[wrapperSymbol] : null;\n}\n\nfunction implForWrapper(wrapper) {\n  return wrapper ? wrapper[implSymbol] : null;\n}\n\nfunction tryWrapperForImpl(impl) {\n  const wrapper = wrapperForImpl(impl);\n  return wrapper ? wrapper : impl;\n}\n\nfunction tryImplForWrapper(wrapper) {\n  const impl = implForWrapper(wrapper);\n  return impl ? impl : wrapper;\n}\n\nconst iterInternalSymbol = Symbol(\"internal\");\n\nfunction isArrayIndexPropName(P) {\n  if (typeof P !== \"string\") {\n    return false;\n  }\n  const i = P >>> 0;\n  if (i === 2 ** 32 - 1) {\n    return false;\n  }\n  const s = `${i}`;\n  if (P !== s) {\n    return false;\n  }\n  return true;\n}\n\nconst byteLengthGetter =\n    Object.getOwnPropertyDescriptor(ArrayBuffer.prototype, \"byteLength\").get;\nfunction isArrayBuffer(value) {\n  try {\n    byteLengthGetter.call(value);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction iteratorResult([key, value], kind) {\n  let result;\n  switch (kind) {\n    case \"key\":\n      result = key;\n      break;\n    case \"value\":\n      result = value;\n      break;\n    case \"key+value\":\n      result = [key, value];\n      break;\n  }\n  return { value: result, done: false };\n}\n\nconst supportsPropertyIndex = Symbol(\"supports property index\");\nconst supportedPropertyIndices = Symbol(\"supported property indices\");\nconst supportsPropertyName = Symbol(\"supports property name\");\nconst supportedPropertyNames = Symbol(\"supported property names\");\nconst indexedGet = Symbol(\"indexed property get\");\nconst indexedSetNew = Symbol(\"indexed property set new\");\nconst indexedSetExisting = Symbol(\"indexed property set existing\");\nconst namedGet = Symbol(\"named property get\");\nconst namedSetNew = Symbol(\"named property set new\");\nconst namedSetExisting = Symbol(\"named property set existing\");\nconst namedDelete = Symbol(\"named property delete\");\n\nconst asyncIteratorNext = Symbol(\"async iterator get the next iteration result\");\nconst asyncIteratorReturn = Symbol(\"async iterator return steps\");\nconst asyncIteratorInit = Symbol(\"async iterator initialization steps\");\nconst asyncIteratorEOI = Symbol(\"async iterator end of iteration\");\n\nmodule.exports = exports = {\n  isObject,\n  hasOwn,\n  define,\n  newObjectInRealm,\n  wrapperSymbol,\n  implSymbol,\n  getSameObject,\n  ctorRegistrySymbol,\n  initCtorRegistry,\n  wrapperForImpl,\n  implForWrapper,\n  tryWrapperForImpl,\n  tryImplForWrapper,\n  iterInternalSymbol,\n  isArrayBuffer,\n  isArrayIndexPropName,\n  supportsPropertyIndex,\n  supportedPropertyIndices,\n  supportsPropertyName,\n  supportedPropertyNames,\n  indexedGet,\n  indexedSetNew,\n  indexedSetExisting,\n  namedGet,\n  namedSetNew,\n  namedSetExisting,\n  namedDelete,\n  asyncIteratorNext,\n  asyncIteratorReturn,\n  asyncIteratorInit,\n  asyncIteratorEOI,\n  iteratorResult\n};\n","\"use strict\";\nconst urlencoded = require(\"./urlencoded\");\n\nexports.implementation = class URLSearchParamsImpl {\n  constructor(globalObject, constructorArgs, { doNotStripQMark = false }) {\n    let init = constructorArgs[0];\n    this._list = [];\n    this._url = null;\n\n    if (!doNotStripQMark && typeof init === \"string\" && init[0] === \"?\") {\n      init = init.slice(1);\n    }\n\n    if (Array.isArray(init)) {\n      for (const pair of init) {\n        if (pair.length !== 2) {\n          throw new TypeError(\"Failed to construct 'URLSearchParams': parameter 1 sequence's element does not \" +\n                              \"contain exactly two elements.\");\n        }\n        this._list.push([pair[0], pair[1]]);\n      }\n    } else if (typeof init === \"object\" && Object.getPrototypeOf(init) === null) {\n      for (const name of Object.keys(init)) {\n        const value = init[name];\n        this._list.push([name, value]);\n      }\n    } else {\n      this._list = urlencoded.parseUrlencodedString(init);\n    }\n  }\n\n  _updateSteps() {\n    if (this._url !== null) {\n      let serializedQuery = urlencoded.serializeUrlencoded(this._list);\n      if (serializedQuery === \"\") {\n        serializedQuery = null;\n      }\n\n      this._url._url.query = serializedQuery;\n    }\n  }\n\n  get size() {\n    return this._list.length;\n  }\n\n  append(name, value) {\n    this._list.push([name, value]);\n    this._updateSteps();\n  }\n\n  delete(name, value) {\n    let i = 0;\n    while (i < this._list.length) {\n      if (this._list[i][0] === name && (value === undefined || this._list[i][1] === value)) {\n        this._list.splice(i, 1);\n      } else {\n        i++;\n      }\n    }\n    this._updateSteps();\n  }\n\n  get(name) {\n    for (const tuple of this._list) {\n      if (tuple[0] === name) {\n        return tuple[1];\n      }\n    }\n    return null;\n  }\n\n  getAll(name) {\n    const output = [];\n    for (const tuple of this._list) {\n      if (tuple[0] === name) {\n        output.push(tuple[1]);\n      }\n    }\n    return output;\n  }\n\n  has(name, value) {\n    for (const tuple of this._list) {\n      if (tuple[0] === name && (value === undefined || tuple[1] === value)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  set(name, value) {\n    let found = false;\n    let i = 0;\n    while (i < this._list.length) {\n      if (this._list[i][0] === name) {\n        if (found) {\n          this._list.splice(i, 1);\n        } else {\n          found = true;\n          this._list[i][1] = value;\n          i++;\n        }\n      } else {\n        i++;\n      }\n    }\n    if (!found) {\n      this._list.push([name, value]);\n    }\n    this._updateSteps();\n  }\n\n  sort() {\n    this._list.sort((a, b) => {\n      if (a[0] < b[0]) {\n        return -1;\n      }\n      if (a[0] > b[0]) {\n        return 1;\n      }\n      return 0;\n    });\n\n    this._updateSteps();\n  }\n\n  [Symbol.iterator]() {\n    return this._list[Symbol.iterator]();\n  }\n\n  toString() {\n    return urlencoded.serializeUrlencoded(this._list);\n  }\n};\n","\"use strict\";\n\nexports.stripLeadingAndTrailingASCIIWhitespace = string => {\n  return string.replace(/^[ \\t\\n\\f\\r]+/u, \"\").replace(/[ \\t\\n\\f\\r]+$/u, \"\");\n};\n\nexports.isomorphicDecode = input => {\n  return Array.from(input, byte => String.fromCodePoint(byte)).join(\"\");\n};\n\nexports.forgivingBase64Decode = data => {\n  let asString;\n  try {\n    asString = atob(data);\n  } catch {\n    return null;\n  }\n\n  return Uint8Array.from(asString, c => c.codePointAt(0));\n};\n","\"use strict\";\nconst {\n  removeLeadingAndTrailingHTTPWhitespace,\n  removeTrailingHTTPWhitespace,\n  isHTTPWhitespaceChar,\n  solelyContainsHTTPTokenCodePoints,\n  soleyContainsHTTPQuotedStringTokenCodePoints,\n  asciiLowercase,\n  collectAnHTTPQuotedString\n} = require(\"./utils.js\");\n\nmodule.exports = input => {\n  input = removeLeadingAndTrailingHTTPWhitespace(input);\n\n  let position = 0;\n  let type = \"\";\n  while (position < input.length && input[position] !== \"/\") {\n    type += input[position];\n    ++position;\n  }\n\n  if (type.length === 0 || !solelyContainsHTTPTokenCodePoints(type)) {\n    return null;\n  }\n\n  if (position >= input.length) {\n    return null;\n  }\n\n  // Skips past \"/\"\n  ++position;\n\n  let subtype = \"\";\n  while (position < input.length && input[position] !== \";\") {\n    subtype += input[position];\n    ++position;\n  }\n\n  subtype = removeTrailingHTTPWhitespace(subtype);\n\n  if (subtype.length === 0 || !solelyContainsHTTPTokenCodePoints(subtype)) {\n    return null;\n  }\n\n  const mimeType = {\n    type: asciiLowercase(type),\n    subtype: asciiLowercase(subtype),\n    parameters: new Map()\n  };\n\n  while (position < input.length) {\n    // Skip past \";\"\n    ++position;\n\n    while (isHTTPWhitespaceChar(input[position])) {\n      ++position;\n    }\n\n    let parameterName = \"\";\n    while (position < input.length && input[position] !== \";\" && input[position] !== \"=\") {\n      parameterName += input[position];\n      ++position;\n    }\n    parameterName = asciiLowercase(parameterName);\n\n    if (position < input.length) {\n      if (input[position] === \";\") {\n        continue;\n      }\n\n      // Skip past \"=\"\n      ++position;\n    }\n\n    let parameterValue = null;\n    if (input[position] === \"\\\"\") {\n      [parameterValue, position] = collectAnHTTPQuotedString(input, position);\n\n      while (position < input.length && input[position] !== \";\") {\n        ++position;\n      }\n    } else {\n      parameterValue = \"\";\n      while (position < input.length && input[position] !== \";\") {\n        parameterValue += input[position];\n        ++position;\n      }\n\n      parameterValue = removeTrailingHTTPWhitespace(parameterValue);\n\n      if (parameterValue === \"\") {\n        continue;\n      }\n    }\n\n    if (parameterName.length > 0 &&\n        solelyContainsHTTPTokenCodePoints(parameterName) &&\n        soleyContainsHTTPQuotedStringTokenCodePoints(parameterValue) &&\n        !mimeType.parameters.has(parameterName)) {\n      mimeType.parameters.set(parameterName, parameterValue);\n    }\n  }\n\n  return mimeType;\n};\n","\"use strict\";\n\nmodule.exports.STATUS_MAPPING = {\n  mapped: 1,\n  valid: 2,\n  disallowed: 3,\n  deviation: 6,\n  ignored: 7\n};\n","\"use strict\";\n\nconst punycode = require(\"punycode/\");\nconst regexes = require(\"./lib/regexes.js\");\nconst mappingTable = require(\"./lib/mappingTable.json\");\nconst { STATUS_MAPPING } = require(\"./lib/statusMapping.js\");\n\nfunction containsNonASCII(str) {\n  return /[^\\x00-\\x7F]/u.test(str);\n}\n\nfunction findStatus(val) {\n  let start = 0;\n  let end = mappingTable.length - 1;\n\n  while (start <= end) {\n    const mid = Math.floor((start + end) / 2);\n\n    const target = mappingTable[mid];\n    const min = Array.isArray(target[0]) ? target[0][0] : target[0];\n    const max = Array.isArray(target[0]) ? target[0][1] : target[0];\n\n    if (min <= val && max >= val) {\n      return target.slice(1);\n    } else if (min > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nfunction mapChars(domainName, { transitionalProcessing }) {\n  let processed = \"\";\n\n  for (const ch of domainName) {\n    const [status, mapping] = findStatus(ch.codePointAt(0));\n\n    switch (status) {\n      case STATUS_MAPPING.disallowed:\n        processed += ch;\n        break;\n      case STATUS_MAPPING.ignored:\n        break;\n      case STATUS_MAPPING.mapped:\n        if (transitionalProcessing && ch === \"\") {\n          processed += \"ss\";\n        } else {\n          processed += mapping;\n        }\n        break;\n      case STATUS_MAPPING.deviation:\n        if (transitionalProcessing) {\n          processed += mapping;\n        } else {\n          processed += ch;\n        }\n        break;\n      case STATUS_MAPPING.valid:\n        processed += ch;\n        break;\n    }\n  }\n\n  return processed;\n}\n\nfunction validateLabel(label, {\n  checkHyphens,\n  checkBidi,\n  checkJoiners,\n  transitionalProcessing,\n  useSTD3ASCIIRules,\n  isBidi\n}) {\n  // \"must be satisfied for a non-empty label\"\n  if (label.length === 0) {\n    return true;\n  }\n\n  // \"1. The label must be in Unicode Normalization Form NFC.\"\n  if (label.normalize(\"NFC\") !== label) {\n    return false;\n  }\n\n  const codePoints = Array.from(label);\n\n  // \"2. If CheckHyphens, the label must not contain a U+002D HYPHEN-MINUS character in both the\n  // third and fourth positions.\"\n  //\n  // \"3. If CheckHyphens, the label must neither begin nor end with a U+002D HYPHEN-MINUS character.\"\n  if (checkHyphens) {\n    if ((codePoints[2] === \"-\" && codePoints[3] === \"-\") ||\n        (label.startsWith(\"-\") || label.endsWith(\"-\"))) {\n      return false;\n    }\n  }\n\n  // \"4. If not CheckHyphens, the label must not begin with xn--.\"\n  if (!checkHyphens) {\n    if (label.startsWith(\"xn--\")) {\n      return false;\n    }\n  }\n\n  // \"5. The label must not contain a U+002E ( . ) FULL STOP.\"\n  if (label.includes(\".\")) {\n    return false;\n  }\n\n  // \"6. The label must not begin with a combining mark, that is: General_Category=Mark.\"\n  if (regexes.combiningMarks.test(codePoints[0])) {\n    return false;\n  }\n\n  // \"7. Each code point in the label must only have certain Status values according to Section 5\"\n  for (const ch of codePoints) {\n    const codePoint = ch.codePointAt(0);\n    const [status] = findStatus(codePoint);\n    if (transitionalProcessing) {\n      // \"For Transitional Processing (deprecated), each value must be valid.\"\n      if (status !== STATUS_MAPPING.valid) {\n        return false;\n      }\n    } else if (status !== STATUS_MAPPING.valid && status !== STATUS_MAPPING.deviation) {\n      // \"For Nontransitional Processing, each value must be either valid or deviation.\"\n      return false;\n    }\n    // \"In addition, if UseSTD3ASCIIRules=true and the code point is an ASCII code point (U+0000..U+007F), then it must\n    // be a lowercase letter (a-z), a digit (0-9), or a hyphen-minus (U+002D). (Note: This excludes uppercase ASCII\n    // A-Z which are mapped in UTS #46 and disallowed in IDNA2008.)\"\n    if (useSTD3ASCIIRules && codePoint <= 0x7F) {\n      if (!/^(?:[a-z]|[0-9]|-)$/u.test(ch)) {\n        return false;\n      }\n    }\n  }\n\n  // \"8. If CheckJoiners, the label must satisify the ContextJ rules\"\n  // https://tools.ietf.org/html/rfc5892#appendix-A\n  if (checkJoiners) {\n    let last = 0;\n    for (const [i, ch] of codePoints.entries()) {\n      if (ch === \"\\u200C\" || ch === \"\\u200D\") {\n        if (i > 0) {\n          if (regexes.combiningClassVirama.test(codePoints[i - 1])) {\n            continue;\n          }\n          if (ch === \"\\u200C\") {\n            // TODO: make this more efficient\n            const next = codePoints.indexOf(\"\\u200C\", i + 1);\n            const test = next < 0 ? codePoints.slice(last) : codePoints.slice(last, next);\n            if (regexes.validZWNJ.test(test.join(\"\"))) {\n              last = i + 1;\n              continue;\n            }\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  // \"9. If CheckBidi, and if the domain name is a Bidi domain name, then the label must satisfy...\"\n  // https://tools.ietf.org/html/rfc5893#section-2\n  if (checkBidi && isBidi) {\n    let rtl;\n\n    // 1\n    if (regexes.bidiS1LTR.test(codePoints[0])) {\n      rtl = false;\n    } else if (regexes.bidiS1RTL.test(codePoints[0])) {\n      rtl = true;\n    } else {\n      return false;\n    }\n\n    if (rtl) {\n      // 2-4\n      if (!regexes.bidiS2.test(label) ||\n          !regexes.bidiS3.test(label) ||\n          (regexes.bidiS4EN.test(label) && regexes.bidiS4AN.test(label))) {\n        return false;\n      }\n    } else if (!regexes.bidiS5.test(label) ||\n               !regexes.bidiS6.test(label)) { // 5-6\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isBidiDomain(labels) {\n  const domain = labels.map(label => {\n    if (label.startsWith(\"xn--\")) {\n      try {\n        return punycode.decode(label.substring(4));\n      } catch {\n        return \"\";\n      }\n    }\n    return label;\n  }).join(\".\");\n  return regexes.bidiDomain.test(domain);\n}\n\nfunction processing(domainName, options) {\n  // 1. Map.\n  let string = mapChars(domainName, options);\n\n  // 2. Normalize.\n  string = string.normalize(\"NFC\");\n\n  // 3. Break.\n  const labels = string.split(\".\");\n  const isBidi = isBidiDomain(labels);\n\n  // 4. Convert/Validate.\n  let error = false;\n  for (const [i, origLabel] of labels.entries()) {\n    let label = origLabel;\n    let transitionalProcessingForThisLabel = options.transitionalProcessing;\n    if (label.startsWith(\"xn--\")) {\n      if (containsNonASCII(label)) {\n        error = true;\n        continue;\n      }\n\n      try {\n        label = punycode.decode(label.substring(4));\n      } catch {\n        if (!options.ignoreInvalidPunycode) {\n          error = true;\n          continue;\n        }\n      }\n      labels[i] = label;\n\n      if (label === \"\" || !containsNonASCII(label)) {\n        error = true;\n      }\n\n      transitionalProcessingForThisLabel = false;\n    }\n\n    // No need to validate if we already know there is an error.\n    if (error) {\n      continue;\n    }\n    const validation = validateLabel(label, {\n      ...options,\n      transitionalProcessing: transitionalProcessingForThisLabel,\n      isBidi\n    });\n    if (!validation) {\n      error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error\n  };\n}\n\nfunction toASCII(domainName, {\n  checkHyphens = false,\n  checkBidi = false,\n  checkJoiners = false,\n  useSTD3ASCIIRules = false,\n  verifyDNSLength = false,\n  transitionalProcessing = false,\n  ignoreInvalidPunycode = false\n} = {}) {\n  const result = processing(domainName, {\n    checkHyphens,\n    checkBidi,\n    checkJoiners,\n    useSTD3ASCIIRules,\n    transitionalProcessing,\n    ignoreInvalidPunycode\n  });\n  let labels = result.string.split(\".\");\n  labels = labels.map(l => {\n    if (containsNonASCII(l)) {\n      try {\n        return `xn--${punycode.encode(l)}`;\n      } catch {\n        result.error = true;\n      }\n    }\n    return l;\n  });\n\n  if (verifyDNSLength) {\n    const total = labels.join(\".\").length;\n    if (total > 253 || total === 0) {\n      result.error = true;\n    }\n\n    for (let i = 0; i < labels.length; ++i) {\n      if (labels[i].length > 63 || labels[i].length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) {\n    return null;\n  }\n  return labels.join(\".\");\n}\n\nfunction toUnicode(domainName, {\n  checkHyphens = false,\n  checkBidi = false,\n  checkJoiners = false,\n  useSTD3ASCIIRules = false,\n  transitionalProcessing = false,\n  ignoreInvalidPunycode = false\n} = {}) {\n  const result = processing(domainName, {\n    checkHyphens,\n    checkBidi,\n    checkJoiners,\n    useSTD3ASCIIRules,\n    transitionalProcessing,\n    ignoreInvalidPunycode\n  });\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n}\n\nmodule.exports = {\n  toASCII,\n  toUnicode\n};\n","\"use strict\";\nconst { isASCIIHex } = require(\"./infra\");\nconst { utf8Encode } = require(\"./encoding\");\n\nfunction p(char) {\n  return char.codePointAt(0);\n}\n\n// https://url.spec.whatwg.org/#percent-encode\nfunction percentEncode(c) {\n  let hex = c.toString(16).toUpperCase();\n  if (hex.length === 1) {\n    hex = `0${hex}`;\n  }\n\n  return `%${hex}`;\n}\n\n// https://url.spec.whatwg.org/#percent-decode\nfunction percentDecodeBytes(input) {\n  const output = new Uint8Array(input.byteLength);\n  let outputIndex = 0;\n  for (let i = 0; i < input.byteLength; ++i) {\n    const byte = input[i];\n    if (byte !== 0x25) {\n      output[outputIndex++] = byte;\n    } else if (byte === 0x25 && (!isASCIIHex(input[i + 1]) || !isASCIIHex(input[i + 2]))) {\n      output[outputIndex++] = byte;\n    } else {\n      const bytePoint = parseInt(String.fromCodePoint(input[i + 1], input[i + 2]), 16);\n      output[outputIndex++] = bytePoint;\n      i += 2;\n    }\n  }\n\n  return output.slice(0, outputIndex);\n}\n\n// https://url.spec.whatwg.org/#string-percent-decode\nfunction percentDecodeString(input) {\n  const bytes = utf8Encode(input);\n  return percentDecodeBytes(bytes);\n}\n\n// https://url.spec.whatwg.org/#c0-control-percent-encode-set\nfunction isC0ControlPercentEncode(c) {\n  return c <= 0x1F || c > 0x7E;\n}\n\n// https://url.spec.whatwg.org/#fragment-percent-encode-set\nconst extraFragmentPercentEncodeSet = new Set([p(\" \"), p(\"\\\"\"), p(\"<\"), p(\">\"), p(\"`\")]);\nfunction isFragmentPercentEncode(c) {\n  return isC0ControlPercentEncode(c) || extraFragmentPercentEncodeSet.has(c);\n}\n\n// https://url.spec.whatwg.org/#query-percent-encode-set\nconst extraQueryPercentEncodeSet = new Set([p(\" \"), p(\"\\\"\"), p(\"#\"), p(\"<\"), p(\">\")]);\nfunction isQueryPercentEncode(c) {\n  return isC0ControlPercentEncode(c) || extraQueryPercentEncodeSet.has(c);\n}\n\n// https://url.spec.whatwg.org/#special-query-percent-encode-set\nfunction isSpecialQueryPercentEncode(c) {\n  return isQueryPercentEncode(c) || c === p(\"'\");\n}\n\n// https://url.spec.whatwg.org/#path-percent-encode-set\nconst extraPathPercentEncodeSet = new Set([p(\"?\"), p(\"`\"), p(\"{\"), p(\"}\"), p(\"^\")]);\nfunction isPathPercentEncode(c) {\n  return isQueryPercentEncode(c) || extraPathPercentEncodeSet.has(c);\n}\n\n// https://url.spec.whatwg.org/#userinfo-percent-encode-set\nconst extraUserinfoPercentEncodeSet =\n  new Set([p(\"/\"), p(\":\"), p(\";\"), p(\"=\"), p(\"@\"), p(\"[\"), p(\"\\\\\"), p(\"]\"), p(\"|\")]);\nfunction isUserinfoPercentEncode(c) {\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\n}\n\n// https://url.spec.whatwg.org/#component-percent-encode-set\nconst extraComponentPercentEncodeSet = new Set([p(\"$\"), p(\"%\"), p(\"&\"), p(\"+\"), p(\",\")]);\nfunction isComponentPercentEncode(c) {\n  return isUserinfoPercentEncode(c) || extraComponentPercentEncodeSet.has(c);\n}\n\n// https://url.spec.whatwg.org/#application-x-www-form-urlencoded-percent-encode-set\nconst extraURLEncodedPercentEncodeSet = new Set([p(\"!\"), p(\"'\"), p(\"(\"), p(\")\"), p(\"~\")]);\nfunction isURLEncodedPercentEncode(c) {\n  return isComponentPercentEncode(c) || extraURLEncodedPercentEncodeSet.has(c);\n}\n\n// https://url.spec.whatwg.org/#code-point-percent-encode-after-encoding\n// https://url.spec.whatwg.org/#utf-8-percent-encode\n// Assuming encoding is always utf-8 allows us to trim one of the logic branches. TODO: support encoding.\n// The \"-Internal\" variant here has code points as JS strings. The external version used by other files has code points\n// as JS numbers, like the rest of the codebase.\nfunction utf8PercentEncodeCodePointInternal(codePoint, percentEncodePredicate) {\n  const bytes = utf8Encode(codePoint);\n  let output = \"\";\n  for (const byte of bytes) {\n    // Our percentEncodePredicate operates on bytes, not code points, so this is slightly different from the spec.\n    if (!percentEncodePredicate(byte)) {\n      output += String.fromCharCode(byte);\n    } else {\n      output += percentEncode(byte);\n    }\n  }\n\n  return output;\n}\n\nfunction utf8PercentEncodeCodePoint(codePoint, percentEncodePredicate) {\n  return utf8PercentEncodeCodePointInternal(String.fromCodePoint(codePoint), percentEncodePredicate);\n}\n\n// https://url.spec.whatwg.org/#string-percent-encode-after-encoding\n// https://url.spec.whatwg.org/#string-utf-8-percent-encode\nfunction utf8PercentEncodeString(input, percentEncodePredicate, spaceAsPlus = false) {\n  let output = \"\";\n  for (const codePoint of input) {\n    if (spaceAsPlus && codePoint === \" \") {\n      output += \"+\";\n    } else {\n      output += utf8PercentEncodeCodePointInternal(codePoint, percentEncodePredicate);\n    }\n  }\n  return output;\n}\n\nmodule.exports = {\n  isC0ControlPercentEncode,\n  isFragmentPercentEncode,\n  isQueryPercentEncode,\n  isSpecialQueryPercentEncode,\n  isPathPercentEncode,\n  isUserinfoPercentEncode,\n  isURLEncodedPercentEncode,\n  percentDecodeString,\n  percentDecodeBytes,\n  utf8PercentEncodeString,\n  utf8PercentEncodeCodePoint\n};\n","const { SEA_LIST, SEA_CREATURES, DESCRIPTORS, COLORS, CREATURE_DESCRIPTORS } = require('./constants');\n\nconst random = (items) => items[Math.random() * items.length | 0];\n\nmodule.exports.randomNoun = () => random(SEA_LIST);\n\nmodule.exports.randomDescriptor = (noun) => {\n    if (!SEA_CREATURES.includes(noun)) return random(DESCRIPTORS);\n\n    return random(DESCRIPTORS.concat(CREATURE_DESCRIPTORS));\n};\n\nmodule.exports.format = (string) => string[0].toUpperCase() + string.slice(1);\n\nmodule.exports.randomColor = () => random(COLORS);\n\nmodule.exports.combineUsername = (maxSize, descriptor, color, noun) => {\n    if ((descriptor + color + noun).length <= maxSize)\n        return descriptor + color + noun;\n    else if ((descriptor + noun).length <= maxSize)\n        return descriptor + noun;\n    else if ((color + noun).length <= maxSize)\n        return color + noun;\n    else\n        return noun.slice(0, maxSize);\n};\n","\"use strict\";\n\n// Note that we take code points as JS numbers, not JS strings.\n\nfunction isASCIIDigit(c) {\n  return c >= 0x30 && c <= 0x39;\n}\n\nfunction isASCIIAlpha(c) {\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\n}\n\nfunction isASCIIAlphanumeric(c) {\n  return isASCIIAlpha(c) || isASCIIDigit(c);\n}\n\nfunction isASCIIHex(c) {\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\n}\n\nmodule.exports = {\n  isASCIIDigit,\n  isASCIIAlpha,\n  isASCIIAlphanumeric,\n  isASCIIHex\n};\n","import type { UserAttributeKey } from \"@berytus/types\";\nimport { UserAttribute } from \"./db\";\n\n// Not all users have a website, a profile page, or\n// ... a picture.\nconst optionalKeys = [\"profile\", \"picture\", \"website\"] as const;\nexport function isUserAttributeKeyOptional(key: string): boolean {\n    return optionalKeys.indexOf(\n        key as OptionalUserAttributeKey\n    ) !== -1;\n}\ntype OptionalUserAttributeKey = typeof optionalKeys[number];\n\nexport type UserAttributes = Record<\n    Exclude<UserAttributeKey, OptionalUserAttributeKey>,\n    UserAttribute\n> & Partial<Record<OptionalUserAttributeKey, UserAttribute>>;\n\nexport interface Identity {\n    id: string;\n    userAttributes?: UserAttributes;\n    emailAddress?: string;\n    mobileNumber?: string;\n}\n\nexport const PRIMARY_IDENTITY_ID = \"primary\";","import Dexie, { Table } from 'dexie';\nimport { SingleChange } from './ts-utils';\nimport { Identity, PRIMARY_IDENTITY_ID } from './Identity';\nimport { Picture } from './Picture';\nimport { Channel } from './Channel';\nimport { WebApp } from './WebApp';\nimport type { Request, FieldInfo, FieldValueRejectionReason, RecordMetadata, BerytusSendMessageUnion, PreliminaryRequestContext, BerytusChallengeInfoUnion, UserAttributeKey, WebAppActor, ChannelMetadata, LoginOperationMetadata, UriParams, RequestContext, RequestContextWithOperation, RequestContextWithLoginOperation } from '@berytus/types';\nimport { EBerytusChallengeType } from \"@berytus/enums\";\nimport { BerytusEncryptedPacket } from '@berytus/types-extd';\nimport { SigningKey } from './SigningKey';\n\nexport interface Field extends FieldInfo {\n  value: string;\n}\n\nexport interface FieldValueRejection extends FieldValueRejectionReason {\n  fieldId: string;\n  webAppDictatedValue?: Field['value'];\n  previousValues: Array<Field['value']>;\n}\n\nexport interface UserAttribute {\n  id: UserAttributeKey;\n  mimeType?: string;\n  // TODO(berytus): REmove this once we remove ArrayBufferViews.\n  value: string | ArrayBuffer | ArrayBufferView | BerytusEncryptedPacket;\n}\n\nexport interface PutField extends FieldInfo {\n  value: string;\n}\n\nexport interface ChallengeMessage extends Omit<BerytusSendMessageUnion, 'challenge' | 'payload'> {\n  payload: string | string[];\n}\n\nexport type Challenge = BerytusChallengeInfoUnion & {\n  messages: Record<string, ChallengeMessage>;\n  closed?: boolean;\n  abortionReasonCode?: string;\n};\n\nexport type SrpChallenge = Challenge & {\n  type: EBerytusChallengeType.SecureRemotePassword;\n  srpState: {\n    fields: { username: string; password: string };\n    serverPublicKeyHexB?: string;\n    clientPrivateKeyHexa?: string;\n    clientPublicKeyHexA?: string; /* Not really needed in any computation, but good for debugging */\n    salt?: string;\n    clientProof?: string;\n    serverProofValid?: boolean;\n  }\n}\n\nexport type DsChallenge = Challenge & {\n  type: EBerytusChallengeType.DigitalSignature;\n  dsState: {\n    // PEM\n    privateKey: string;\n    nonce?: string;\n    signedMessage?: string;\n  }\n}\n\nexport type RRequiredUserAttributes = Record<UserAttributeKey, boolean>;\nexport type RUserAttributes = Record<UserAttributeKey, UserAttribute>;\n\nexport interface Session {\n  id: string;\n  /**\n   * This is the ExtensionRequestContext. Currently, it holds the active\n   * request and the tabId where the Authentication or Registration session is.\n   */\n  context: PreliminaryRequestContext | RequestContext | RequestContextWithOperation | RequestContextWithLoginOperation;\n  /**\n   * Only set in the MODE_EXTERNAL_WINDOW mode. If set, this is\n   * the tabId of the created window. See session-utils.ts->openWindowOrRedirectTab\n   * This is the tab id that corresponds to the Password Manager (us) -'s\n   * created window for request processing (approve session, select user\n   * attributes, etc). This is not the tab id where the Authentication or\n   * Registration session is.\n   */\n  tabId?: number;\n  channel: ChannelMetadata;\n  operation: LoginOperationMetadata;\n  //sessionInfo: OperationMetadata;\n  requests: Array<Request>;\n  requiredUserAttributes?: RRequiredUserAttributes;\n  userAttributes?: Partial<RUserAttributes>;\n  createFieldOptions?: Array<FieldInfo>;\n  putFields?: Array<PutField>;\n  fields?: Array<Field>;\n  rejectedFieldValues?: Array<FieldValueRejection>;\n  metadata: RecordMetadata;\n  createdAccountId?: string;\n  transitionedFromSessionId?: string;\n  /**\n   * Auth session attributes.\n   * TODO: Separate the registration session attributes\n   * from the auth ones\n   */\n  selectedAccountId?: string;\n  challenges?: Record<string, Challenge | SrpChallenge | DsChallenge>;\n  /**\n   * Numeric version of the record. This is used by React Components that expects\n   * a newer version. This is helpful when the background script opens a popup,\n   * but without waiting until the record has been updated. The React Component\n   * expects a record after a specific 'version' where this attribute indicates.\n   */\n  version: number;\n  saved?: boolean;\n  closed?: boolean;\n}\n\nexport interface Account {\n    id: string;\n    registrationUri: UriParams;\n    webAppActor: WebAppActor;\n    userAttributes: Partial<Record<UserAttributeKey, UserAttribute>>;\n    fields: Array<Field>;\n    date: string;\n    metadata: RecordMetadata;\n}\n\nexport interface Settings {\n  seamless: { signup: boolean; login: boolean };\n}\n\nexport const PRIMARY_SETTINGS_ID = \"primary\";\n\nexport interface PendingRequest {\n  id: string;\n  url: string;\n  tabId: number;\n}\n\nexport class SecretDexie extends Dexie {\n  // 'friends' is added by dexie when declaring the stores()\n  // We just tell the typing system this is the case\n  accounts!: Table<Account>;\n  sessions!: Table<Session>;\n  identity!: Table<Identity>;\n  picture!: Table<Picture>;\n  channel!: Table<Channel>;\n  signingKeys!: Table<SigningKey>;\n  webApp!: Table<WebApp>;\n  pendingRequests!: Table<PendingRequest>;\n  protected settings!: Table<Settings & { id: string }>;\n\n  constructor() {\n    super('secret*');\n    this.version(1).stores({\n      accounts: 'id',\n      sessions: 'id',\n      identity: 'id',\n      settings: 'id',\n      picture: 'filename',\n      channel: 'id',\n      webAppKey: '++id, ed25519Key',\n      pendingRequests: 'id',\n      signingKeys: 'public, private'\n    });\n    this.on('ready', async (dexieDb: Dexie) => {\n      const db = dexieDb as SecretDexie;\n      if ((await db.settings.count()) === 0) {\n        db.settings.add({\n          id: PRIMARY_SETTINGS_ID,\n          seamless: { signup: false, login: false }\n        });\n      }\n      if ((await db.identity.count()) === 0) {\n        db.identity.add({ id: PRIMARY_IDENTITY_ID });\n      }\n    });\n  }\n\n  async getSettings() {\n    const settings = await this.settings.get(PRIMARY_SETTINGS_ID);\n    if (! settings) {\n      throw new Error(\"What?\");\n    }\n    return settings;\n  }\n\n  async updateSettings(change: SingleChange<Settings>) {\n    return this.settings.update(PRIMARY_SETTINGS_ID, {\n      ...change\n    });\n  }\n\n  async getIdentity(): Promise<Identity> {\n    const identity = await this.identity.get(PRIMARY_IDENTITY_ID);\n    if (! identity) {\n      throw new Error('Expecting identity to be set!');\n    }\n    return identity;\n  }\n\n  async savePicture(f: File) {\n    const data = btoa(String.fromCharCode.apply(null, new Uint8Array(await f.arrayBuffer()) as any));\n    const picture = await this.picture.put({\n      filename: f.name,\n      type: f.type,\n      data\n    });\n    return picture;\n  }\n\n  findCorrespondingAccounts(\n    givenActor: WebAppActor,\n    category?: string,\n    version?: number\n  ) {\n    const matchActors = (actorA: WebAppActor, actorB: WebAppActor): boolean => {\n      if (\"ed25519Key\" in actorA) {\n        if (!(\"ed25519Key\" in actorB)) {\n          return false;\n        }\n        return actorA.ed25519Key === actorB.ed25519Key;\n      }\n      if (\"ed25519Key\" in actorB) {\n        return false;\n      }\n      return actorB.originalUri.hostname === actorA.originalUri.hostname;\n    }\n    return this.accounts.filter(\n      ({ webAppActor, metadata }) => {\n        if (! matchActors(givenActor, webAppActor)) {\n          return false;\n        }\n        if (\n          category !== undefined &&\n          category !== metadata.category\n        ) {\n          return false;\n        }\n        if (\n          version !== undefined &&\n          version !== metadata.version\n        ) {\n          return false;\n        }\n        return true;\n      }\n      );\n  }\n\n  pictureToDataUrl(picture: Picture) {\n    return `data:${picture.type};base64,${picture.data}`;\n  }\n}\n\nexport const db = new SecretDexie();\n\n// Just needed to distriibute T when it is a union.\ntype KeyOf<T> = T extends any ? keyof T : never;\nconst Algorithms: Record<number, string> = {\n  [-42]: \"RSAES-OAEP w/ SHA-256\"\n};\n\nexport const fieldOptionValueToString = (optionName: KeyOf<Field['options']>, value: Field['options'][keyof Field['options']]): string => {\n  if (value === undefined) {\n    return \"\";\n  }\n  if (optionName === 'alg') {\n    return Algorithms[Number(value)] || `COSE:${value}`;\n  }\n  return String(value);\n}\n\nexport const isSrpChallenge = (challenge: Challenge): challenge is SrpChallenge => {\n  return \"srpState\" in challenge;\n}\nexport const isDsChallenge = (challenge: Challenge): challenge is DsChallenge => {\n  return \"dsState\" in challenge;\n}\n\n//import('./dummy-data');","export const PAGECONTEXT_WINDOW = \"window\";\nexport const PAGECONTEXT_POPUP = \"popup\";\n\nexport const allowedPageContexts = [\n    PAGECONTEXT_WINDOW,\n    PAGECONTEXT_POPUP\n] as const;\n\nexport type AppPageContext = typeof PAGECONTEXT_WINDOW | typeof PAGECONTEXT_POPUP;\n\nexport const isPopup = (pageContext: string) => {\n    return pageContext === PAGECONTEXT_POPUP;\n}","import { AppPageContext } from \"@root/pagecontext\";\n\nexport const indexUrl =\n    browser?.runtime?.getURL\n        ? browser.runtime.getURL('build/index.html') + \"#\"\n        : 'http://localhost:3000';\n\nexport const paths = { loading: `loading` };\n\nexport const url = (relativePath: string, appPageContext: AppPageContext) => {\n    if (relativePath.startsWith('/')) {\n        return `${indexUrl}/${appPageContext}${relativePath}`;\n    }\n    return `${indexUrl}/${appPageContext}/${relativePath}`;\n}","import { Session, db } from \"@root/db/db\";\nimport { openWindow, redirectTab } from \"./window-utils\";\n\nexport const getSessionRecord = async (sessionId: string) => {\n    const record = await db.sessions.get(sessionId);\n    if (! record) {\n        throw new Error('Unable to find session record by id ' + sessionId);\n    }\n    return record;\n}\n\n/**\n * For each Authentication/Registration session, we create one window.\n * For subsequent requests, we update the tab's URL of the existing window\n * to process the new requests. However, when a request is rejected, the window\n * is closed. As such, the initially created window/tab does not exist anymore.\n * For this, subsequent requests should call `openWindowOrRedirectTab` to either\n * redirect the existing tab (if present) or create a new one. This is only\n * applicable in the MODE_EXTERNAL_WINDOW mode. If a new window/tab is created,\n * we update the session record to reflect the new tab id.\n * @param sessionId\n * @param tabId\n * @param relativePath\n */\nexport const openWindowOrRedirectTab = async (\n    sessionId: string,\n    tabId: number,\n    relativePath: string\n) => {\n    try {\n        await browser.tabs.get(tabId);\n    } catch (e) {\n        // BRTTODO: Check if exception indicates a Tab Not Found error.\n        // no tab. create a window.\n        const window = await openWindow(relativePath);\n        // update session record to store the new tab id.\n        const newTabId = window.tabs![0].id!\n        const change: Pick<Session, 'tabId'> = { tabId: newTabId };\n        await db.sessions.update(sessionId, change);\n        return newTabId;\n    }\n    await redirectTab(tabId, relativePath);\n}","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport type { BerytusChallengeAbortionCode, BerytusChallengeInfoUnion, BerytusFieldOptionsUnion, BerytusFieldUnion, BerytusFieldValue, BerytusFieldValueUnion, BerytusKeyDerivationParams, BerytusKeyExchangeAuthentication, BerytusKeyExchangeParams, BerytusKeyExchangeSession, BerytusKeyGenParams, BerytusReceiveMessageUnion, BerytusSendMessageUnion, BerytusUserAttributeDefinition, EBerytusChallengeType, EBerytusFieldType } from \"./generated/berytus.web.d.ts\";\n\nexport interface ChannelConstraints {\n    secretManagerPublicKey?: string[];\n    enableEndToEndEncryption: boolean;\n    account?: AccountConstraints;\n}\n\nexport interface PartialAccountIdentity {\n    fieldId: string;\n    fieldValue: string;\n}\n\nexport type AccountIdentity = Array<PartialAccountIdentity>;\n\nexport interface AccountConstraints {\n    category?: string;\n    schemaVersion?: number;\n    identity?: AccountIdentity;\n}\n\nexport interface ChannelMetadata {\n    id: string;\n    constraints: ChannelConstraints;\n    webAppActor: WebAppActor;\n    scmActor: CryptoActor; /* retrieved from getSigningKey() */\n    e2eeEnabled: boolean;\n}\n\nexport interface UriParams {\n    uri: string;\n    scheme: string;\n    hostname: string;\n    port: number;\n    path: string;\n};\n\nexport interface OriginActor {\n    originalUri: UriParams;\n    currentUri: UriParams;\n}\n\nexport interface CryptoActor {\n    ed25519Key: string;\n}\n\nexport interface Request {\n    id: string;\n    type: string;\n}\n\nexport interface DocumentMetadata {\n    id: number; /* e.g. tabId if sent to extensions */\n    uri: UriParams;\n}\n\nexport enum EOperationStatus {\n    Pending = \"Pending\",\n    Created = \"Created\",\n    Aborted = \"Aborted\",\n    Finished = \"Finished\"\n}\n\nexport enum EOperationType {\n    PendingDeclaration = \"PendingDeclaration\",\n    Registration = \"Registration\",\n    Authentication = \"Authentication\"\n}\n\nexport interface OperationState {}\n\nexport interface OperationMetadata {\n    id: string;\n    type: EOperationType;\n    status: EOperationStatus;\n    /**\n     * State about the operation, e.g.:\n     * { fields:  [BerytusIdentityField, ...], ... }\n     */\n    // TODO(berytus): This is currently unused.\n    state: OperationState;\n}\n\nexport interface FieldInfo {\n    id: string;\n    type: EBerytusFieldType;\n    // NOTE(berytus): ValidatedRequestHandler does not\n    // (yet) check if the options is logically conformant.\n    // Alternatively, type FieldInfo = Omit<BerytusFieldUnion, \"value\">\n    // -- however, type-parser would not be able to parse Omit<..>\n    // A better option is to generate *FieldInfoUnion\n    options: BerytusFieldOptionsUnion;\n}\n\nexport interface LoginOperationMetadata extends OperationMetadata {\n    intent: ELoginUserIntent;\n    requestedUserAttributes: RequestedUserAttributes;\n    fields: Record<string, FieldInfo>;\n    challenges: Record<string, BerytusChallengeInfoUnion>;\n}\n\n// TODO(berytus): Addd LoginOperation : *Metadata which includes state\n// about the fields created and so on.\n\nexport interface PreliminaryRequestContext {\n    request: Request;\n    document: DocumentMetadata;\n}\n\nexport interface RequestContext extends PreliminaryRequestContext {\n    channel: ChannelMetadata;\n}\n\nexport interface RequestContextWithOperation extends RequestContext {\n    operation: OperationMetadata;\n}\n\nexport interface RequestContextWithLoginOperation extends RequestContext {\n    operation: LoginOperationMetadata;\n}\n\nexport type CredentialsMetadata = number;\n\nexport enum ELoginUserIntent {\n    PendingDeclaration = \"PendingDeclaration\",\n    Authenticate = \"Authenticate\",\n    Register = \"Register\"\n}\n\nexport type WebAppActor = CryptoActor | OriginActor;\n\nexport interface GenerateX25519KeyResult {\n    public: string;\n};\n\nexport interface InitialKeyExchangeParametersDraft {\n    readonly channelId: string; // provided by Berytus\n    readonly webAppX25519Key: string; // provided by the web app\n}\n\n/**\n * What the SCM should return when generating\n * the key exch paramters.\n */\nexport interface PartialKeyExchangeParametersFromScm {\n    scmX25519Key: string;\n    hkdfHash: string; //hash name\n    hkdfSalt: ArrayBuffer;\n    hkdfInfo: ArrayBuffer;\n    aesKeyLength: number; // bits\n}\n\nexport interface KeyExchangeParameters\n    extends InitialKeyExchangeParametersDraft,\n            PartialKeyExchangeParametersFromScm {\n    /**\n     * This is what should be signed.\n     */\n    packet: string;\n}\n\nenum EChallengeType {\n    Identification = \"Identification\",\n    DigitalSignature = \"DigitalSignature\",\n    Password = \"Password\",\n    SecureRemotePassword = \"SecureRemotePassword\",\n    ForeignIdentityOtp = \"ForeignIdentityOtp\"\n}\n\nenum EChallengeStatus {\n    Invalid = \"Invalid\",\n    Pending = \"Pending\",\n    Active = \"Active\",\n    Aborted = \"Aborted\",\n    Sealed = \"Sealed\"\n}\n\nexport interface ChallengeParameters {}\n\nexport interface ChallengeMetadata {\n    readonly id: string;\n    readonly type: EChallengeType;\n    readonly parameters: ChallengeParameters;\n    readonly status: EChallengeStatus;\n}\n\nexport interface ChallengePayload {}\n\nexport interface ChallengeMessage {\n    /**\n     * Unique message name across the challenge.\n     */\n    name: string; // one of EMT{x}\n    payload: ChallengePayload;\n};\n\nexport interface ChallengeMessageResponse {\n    payload: ChallengePayload;\n};\n\nexport interface ChallengeAbortionReason {\n    /**\n     * TODO(berytus): Use string type instead of\n     * ChallengeAbortionCode UnionType until we can\n     * handle unions in schema generation using `choices`\n     */\n    code: string;\n}\n\n// TODO(berytus): Addd ChallengeDetail : ChallengeMetadata which includes state\n// about the fields created and so on.\n\nexport type UserAttributeKey = \"name\" | \"givenName\" | \"familyName\" | \"middleName\" |\n    \"nickname\" |/* \"preferredUsername\" |*/ \"profile\" | \"picture\" |\n    \"website\" |/* \"email\" |*/ \"gender\" | \"birthdate\" | \"zoneinfo\" |\n    \"locale\" |/* \"phoneNumber\" |*/ \"address\" | `custom:${string}`;\n\n\nexport interface UserAttribute extends BerytusUserAttributeDefinition {\n    id: UserAttributeKey;\n};\n\nexport interface RequestedUserAttribute {\n    id: UserAttributeKey;\n    required: boolean;\n}\n\nexport type UserAttributes = Array<UserAttribute>;\nexport type RequestedUserAttributes = Array<RequestedUserAttribute>;\n\nenum EFieldType {\n    Identity = \"Identity\",\n    ForeignIdentity = \"ForeignIdentity\",\n    Password = \"Password\",\n    SecurePassword = \"SecurePassword\",\n    Key = \"Key\"\n};\n\nexport interface BaseFieldMetadata {\n    fieldType: EFieldType;\n    fieldId: string;\n    description?: string;\n}\n\nexport interface FieldValueRejectionReason {\n    code: string;\n}\n\n// TODO(berytus): ERejectionCode should be in the API.\nexport enum ERejectionCode {\n    UnknownReason,\n    GeneralError,\n    NetworkError,\n    UserError,\n    OperationAborted,\n    /* begin challenge trap codes */\n    ChallengeNotSupported,\n    UnexpectedChallengeMessage,\n    InvalidChallengeMessage\n    /* end challenge trap codes */\n}\n\nenum EMetadataProperty {\n    Version = \"Version\",\n    Status = \"Status\",\n    Category = \"Category\",\n    ChangePassUrl = \"ChangePassUrl\"\n};\n\nexport enum EMetadataStatus {\n    Pending = \"Pending\",\n    Created = \"Created\",\n    Retired = \"Retired\",\n};\n\nexport interface RecordMetadata {\n    version: number;\n    status: EMetadataStatus;\n    category: string;\n    changePassUrl: string;\n}\n\n/* Request Arguments */\nexport type GetCredentialsMetadataArgs = {\n    webAppActor: WebAppActor,\n    channelConstraints: ChannelConstraints,\n    accountConstraints: AccountConstraints\n};\nexport type GetSigningKeyArgs = {\n    webAppActor: WebAppActor;\n};\nexport type GetSigningKeyResult = string;\n\nexport type CreateChannelArgs = {\n    channel: ChannelMetadata;\n};\n\nexport interface KeyAgreementParameters {\n    authentication: BerytusKeyExchangeAuthentication;\n    session: BerytusKeyExchangeSession;\n    exchange: BerytusKeyExchangeParams;\n    derivation: BerytusKeyDerivationParams;\n    generation: BerytusKeyGenParams;\n};\nexport type SignKeyAgreementParametersArgs = {\n    /**\n     * CanonicalJSON-stringified KeyAgreementParameters\n     */\n    canonicalJson: string;\n}\nexport type SignKeyAgreementParametersResult = {\n    scmSignature: ArrayBuffer;\n}\n\nexport type GenerateKeyExchangeParametersArgs = {\n    paramsDraft: InitialKeyExchangeParametersDraft\n}\nexport type VerifySignedKeyExchangeParametersArgs = {\n    /**\n     * CanonicalJSON-stringified KeyAgreementParameters\n     */\n    canonicalJson: string;\n    webAppSignature: ArrayBuffer;\n}\nexport type ApproveOperationArgs = {\n    operation: LoginOperationMetadata\n}\nexport type UpdateMetadataArgs = {\n    metadata: RecordMetadata\n}\n\nexport interface UpdateUserAttributesArgs {\n    userAttributes: Array<UserAttribute>;\n};\n\nexport type ApproveTransitionToAuthOpArgs = {\n    newAuthOp: LoginOperationMetadata\n}\nexport type AddFieldArgs = {\n    field: BerytusFieldUnion;\n}\n\n/**\n * The secret manager should resolve with null\n * when a field value was specified in the args.\n */\nexport type AddFieldResult = BerytusFieldValueUnion | null;\n\nexport type RejectFieldValueArgs = {\n    fieldId: string;\n    reason: FieldValueRejectionReason,\n    optionalNewValue?: BerytusFieldValueUnion;\n}\n\n/**\n * The secret manager should resolve with null\n * when a field value was specified in the args.\n */\nexport type RejectFieldResult = BerytusFieldValueUnion | null;\n\nexport type ApproveChallengeRequestArgs = {\n    challenge: BerytusChallengeInfoUnion;\n}\nexport type AbortChallengeArgs = {\n    challenge: BerytusChallengeInfoUnion;\n    reason: BerytusChallengeAbortionCode\n}\nexport type CloseChallengeArgs = {\n    challenge: BerytusChallengeInfoUnion;\n}\nexport type RespondToChallengeMessageArgs = BerytusSendMessageUnion;\nexport type { BerytusSendMessageUnion };\nexport type RespondToChallengeMessageResult = BerytusReceiveMessageUnion;\nexport type { BerytusReceiveMessageUnion };\nexport type { BerytusChallengeInfoUnion };\nexport { EBerytusChallengeType };\n/* Request Arguments */\n\nexport interface RequestHandler {\n    manager: {\n        getSigningKey(\n            context: PreliminaryRequestContext,\n            args: GetSigningKeyArgs\n        ): GetSigningKeyResult;\n        getCredentialsMetadata(\n            context: PreliminaryRequestContext,\n            args: GetCredentialsMetadataArgs\n        ): CredentialsMetadata;\n    };\n    channel: {\n        createChannel(\n            context: PreliminaryRequestContext,\n            args: CreateChannelArgs\n        ): void;\n        generateX25519Key(context: RequestContext): GenerateX25519KeyResult;\n        signKeyExchangeParameters(\n            context: RequestContext,\n            args: SignKeyAgreementParametersArgs\n        ): SignKeyAgreementParametersResult;\n        verifySignedKeyExchangeParameters(\n            context: RequestContext,\n            args: VerifySignedKeyExchangeParametersArgs\n        ): void;\n        enableEndToEndEncryption(context: RequestContext): void;\n        closeChannel(context: RequestContext): void;\n    };\n    /**\n     * Common requests between the account creation/registration\n     * operations, grouped under login.\n     */\n    login: {\n        approveOperation(\n            context: RequestContext,\n            args: ApproveOperationArgs\n        ): ELoginUserIntent;\n        closeOperation(\n            context: RequestContextWithOperation\n        ): void;\n        /* Berytus setPasswordUrl/setStatus/setVersion/setCategory: */\n        getRecordMetadata(\n            context: RequestContextWithOperation\n        ): RecordMetadata\n        updateMetadata(\n            context: RequestContextWithOperation,\n            args: UpdateMetadataArgs\n        ): void\n    },\n    accountCreation: {\n        approveTransitionToAuthOp(\n            context: RequestContextWithOperation,\n            args: ApproveTransitionToAuthOpArgs\n        ): void;\n        getUserAttributes(\n            context: RequestContextWithLoginOperation\n        ): UserAttributes;\n        updateUserAttributes(\n            context: RequestContextWithOperation,\n            args: UpdateUserAttributesArgs\n        ): void;\n        addField(\n            context: RequestContextWithLoginOperation,\n            args: AddFieldArgs\n        ): AddFieldResult;\n        rejectFieldValue(\n            context: RequestContextWithLoginOperation,\n            args: RejectFieldValueArgs\n        ): RejectFieldResult;\n    };\n    accountAuthentication: {\n        approveChallengeRequest(\n            context: RequestContextWithOperation,\n            args: ApproveChallengeRequestArgs\n        ): void;\n        abortChallenge(\n            context: RequestContextWithOperation,\n            args: AbortChallengeArgs\n        ): void;\n        closeChallenge(\n            context: RequestContextWithOperation,\n            args: CloseChallengeArgs,\n        ): void;\n        respondToChallengeMessage(\n            context: RequestContextWithLoginOperation,\n            args: RespondToChallengeMessageArgs\n        ): RespondToChallengeMessageResult;\n    }\n}\n\nexport type ResponseContext<G extends keyof RequestHandler, M extends keyof RequestHandler[G]> = {\n    response:\n        RequestHandler[G][M] extends (...args: any[]) => any\n        ? {\n            resolve: (val: ReturnType<RequestHandler[G][M]>) => void,\n            reject: (val: unknown) => void\n        }\n        : never\n}\n\nexport type IUnderlyingRequestHandler = {\n    [group in keyof RequestHandler]: {\n        [method in keyof RequestHandler[group]]:\n            RequestHandler[group][method] extends (...args: any[]) => any\n                ? Parameters<RequestHandler[group][method]> extends [infer context, ...infer tail]\n                    ? (context: context & ResponseContext<group,method> , ...rest: tail) => void\n                    : never\n                : never\n    }\n}\n\nexport type IPublicRequestHandler = {\n    [group in keyof RequestHandler]: {\n        [method in keyof RequestHandler[group]]:\n            RequestHandler[group][method] extends (...args: any[]) => any\n                ? Parameters<RequestHandler[group][method]> extends [infer context, ...infer tail]\n                    ?   (context: Omit<context, 'request'>, ...rest: tail) => Promise<ReturnType<RequestHandler[group][method]>>\n                    : never\n                : never\n    }\n}\n\nexport type RequestGroup = keyof RequestHandler;\nexport type RequestType = keyof {\n    [K in RequestGroup as `${Capitalize<K>}_${Capitalize<keyof RequestHandler[K] & string>}`]: true\n}\n\nexport type RequestHandlerFunction<ER extends RequestType> =\n    Uncapitalize<ER> extends `${infer G}_${infer T}`\n        ? G extends RequestGroup\n            ? Uncapitalize<T> extends `${infer M}`\n                ? M extends keyof RequestHandler[G]\n                    ? RequestHandler[G][M]\n                    : never\n                : never\n            : never\n    : never;\n\nexport type RequestHandlerFunctionParameters<ER extends RequestType>\n    = Parameters<RequestHandlerFunction<ER>>;\n\nexport type RequestHandlerFunctionReturnType<ER extends RequestType>\n    = Awaited<ReturnType<RequestHandlerFunction<ER>>>;","export function formatBase64AsPem(str: string, publicKey: boolean = true) {\n    const type = publicKey ? \"PUBLIC\" : \"PRIVATE\"\n    let res = `-----BEGIN ${type} KEY-----\\n`;\n\n    while(str.length > 0) {\n        res += str.substring(0, 64) + '\\n';\n        str = str.substring(64);\n    }\n\n    res = res + `-----END ${type} KEY-----`;\n\n    return res;\n}\nexport function formatSignatureBufToString(signedMessage: ArrayBuffer): string {\n    let hex = ab2base64(signedMessage);\n    let res = \"-----BEGIN CUSTOM SIGNATURE FORMAT -----\\n\";\n\n    while(hex.length > 0) {\n        res += hex.substring(0, 64) + '\\n';\n        hex = hex.substring(64);\n    }\n\n    res += \"----END CUSTOM SIGNATURE FORMAT -----\";\n    return res;\n}\n\nexport function extractPemBase64Body(pemStr: string, publicKey: boolean = true): string {\n    const type = publicKey ? \"PUBLIC\" : \"PRIVATE\"\n    const header = `-----BEGIN ${type} KEY-----\\n`;\n    const footer = `-----END ${type} KEY-----`;\n    if (! pemStr.startsWith(header)) {\n        throw new Error('Key does not start with \"'+header+'\"')\n    }\n    if (! pemStr.endsWith(footer)) {\n        throw new Error('Key does not end with \"'+footer+'\"')\n    }\n    const body = pemStr.substring(header.length, pemStr.length - footer.length);\n    const base64 = body.replace(/\\r?\\n|\\r/g, '');\n    return base64;\n}\n// TODO(berytus): Review this impl\nexport function pemToBuf(str: string, publicKey: boolean = true): ArrayBufferLike {\n    const base64 = extractPemBase64Body(str, publicKey);\n    return str2ab(atob(base64));\n}\n\nexport function bufToPem(buffer: ArrayBuffer, publicKey?: boolean) {\n    return formatBase64AsPem(ab2base64(buffer), publicKey);\n}\n\nexport function ab2str(buffer: ArrayBufferLike) {\n    return String.fromCharCode.apply(null, new Uint8Array(buffer) as any);\n}\n\nexport function str2ab(str: string): ArrayBufferLike {\n    return new TextEncoder().encode(str).buffer;\n}\n\nexport function ab2base64(buffer: ArrayBufferLike) {\n    return btoa(ab2str(buffer));\n}\n\nexport function decodeHex(hex: string): ArrayBufferLike {\n    if (hex.startsWith(\"0x\")) {\n        hex = hex.substring(2);\n    }\n    if (hex.length % 2 !== 0) {\n        throw new Error(\"Bad Hex.\");\n    }\n    const bytes = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < hex.length;) {\n        bytes[i / 2] = Number.parseInt(hex.slice(i, i += 2), 16);\n    }\n    return bytes.buffer;\n}\n\nexport async function privateKeyBufToPublicKeyBuf(privateKeyBuf: ArrayBufferLike): Promise<ArrayBuffer> {\n    const privateKey = await window.crypto.subtle.importKey(\n        \"pkcs8\",\n        privateKeyBuf instanceof ArrayBuffer\n            ? privateKeyBuf\n            : new Uint8Array(privateKeyBuf),\n        {\n            name: \"RSA-OAEP\",\n            hash: {name: \"SHA-256\"}\n        },\n        true,\n        [\"decrypt\"]\n    );\n    const privateKeyJwk = await window.crypto.subtle.exportKey('jwk', privateKey);\n    const publicKey = await window.crypto.subtle.importKey(\n        'jwk',\n        {\n            n: privateKeyJwk.n,\n            e: privateKeyJwk.e,\n            alg: privateKeyJwk.alg,\n            kty: privateKeyJwk.kty,\n        },\n        {\n            name: \"RSA-OAEP\",\n            hash: { name: \"SHA-256\" }\n        },\n        true,\n        [\"encrypt\"]\n    );\n    return window.crypto.subtle.exportKey('spki', publicKey);\n}\n\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}","import type { UserAttributeKey } from \"@berytus/types\";\n\nexport const userAttributesLabels: Record<\n    UserAttributeKey, string\n> = {\n    \"name\": \"Full name\",\n    \"givenName\": \"First name\",\n    \"middleName\": \"Middle name\",\n    \"familyName\": \"Family name\",\n    \"nickname\": \"Nickname\",\n    \"gender\": \"Gender\",\n    \"birthdate\": \"Birthdate\",\n    \"locale\": \"Locale\",\n    \"address\": \"Address\",\n    \"profile\": \"Profile URL\",\n    \"picture\": \"Picture\",\n    \"website\": \"Website URL\",\n    \"zoneinfo\": \"Zoneinfo\"\n}","function _classPrivateFieldBase(e, t) {\n  if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\");\n  return e;\n}\nexport { _classPrivateFieldBase as default };","var id = 0;\nfunction _classPrivateFieldKey(e) {\n  return \"__private_\" + id++ + \"_\" + e;\n}\nexport { _classPrivateFieldKey as default };","type EncryptFunction<CT> = (datum: string | ArrayBufferLike, prop?: string) => Promise<CT>;\ntype DecryptFunction<CT, DT> = (datum: CT, prop?: string) => Promise<DT>;\n\nexport interface CipherBoxOptions<CipherType, DecipherType> {\n    ignoreProp?: (prop: string) => boolean;\n    ignoreValue?: (value: unknown) => boolean;\n    encrypt: EncryptFunction<CipherType>;\n    decrypt: DecryptFunction<CipherType, DecipherType>;\n}\n\nexport type EncryptedDictionary<T extends object, CT> = {\n    [K in keyof T]:\n        string extends T[K]\n        ? CT\n        : number extends T[K]\n        ? CT\n        : boolean extends T[K]\n        ? CT\n        : ArrayBufferLike extends T[K]\n        ? CT\n        : ArrayBufferView extends T[K]\n        ? CT\n        : T[K] extends object\n        ? EncryptedDictionary<T[K], CT>\n        : T[K]\n};\n\nexport type DecryptedDictionary<T extends object, CT, DT> = {\n    [K in keyof T]:\n        CT extends infer CTI\n        ? CTI extends T[K]\n        ? DT\n        : T[K]\n        : never\n};\n\nexport abstract class AbstractCipherBox<CipherType, DecipherType> {\n    #options: CipherBoxOptions<CipherType, DecipherType>;\n    constructor(opts: CipherBoxOptions<CipherType, DecipherType>) {\n        this.#options = opts;\n    }\n\n    get options() {\n        return this.#options;\n    }\n\n    abstract isCiphertextType(ciph: unknown): ciph is CipherType;\n\n    async #encryptDictionary<O extends object>(\n        input: O,\n        output: Record<string, any>,\n        path: string = '$dict'\n    ): Promise<void> {\n        if (input === null) {\n            throw new Error(\"Passed dictionary is null.\");\n        }\n        if (typeof input !== \"object\") {\n            throw new Error(\"Passed dictionary is not an object.\");\n        }\n        if (input instanceof ArrayBuffer || ArrayBuffer.isView(input)) {\n            throw new Error('ArrayBuffer(View) must not be passed to encryptDictionary(). Use encrypt() instead.');\n        }\n        const promises: Promise<void>[] = [];\n        for (const key in input) {\n            if (this.#options.ignoreProp && this.#options.ignoreProp(key)) {\n                continue;\n            }\n            if (this.#options.ignoreValue && this.#options.ignoreValue(input[key])) {\n                continue;\n            }\n            if (\n                typeof input[key] === 'object' &&\n                input[key] !== null &&\n                ! (input[key] instanceof ArrayBuffer) &&\n                ! ArrayBuffer.isView(input[key])\n            ) {\n                if (Array.isArray(input[key])) {\n                    output[key] = [];\n                } else {\n                    output[key] = {};\n                }\n                promises.push(\n                    this.#encryptDictionary(\n                        input[key] as object,\n                        output[key],\n                        `${path}.${key}`\n                    )\n                );\n                continue;\n            }\n            promises.push(\n                this.encrypt(input[key], key)\n                    .then(encrypted => {\n                        if (encrypted === null) {\n                            output[key] = input[key];\n                            return;\n                        }\n                        output[key] = encrypted;\n                    })\n            );\n        }\n        return Promise.all(promises)\n            .then(_ => Promise.resolve());\n    }\n\n    async #decryptDictionary<O extends object>(\n        input: O,\n        output: Record<string, any>,\n        path: string = '$dict'\n    ): Promise<void> {\n        if (input === null) {\n            throw new Error(\"Passed dictionary is null.\");\n        }\n        if (typeof input !== \"object\") {\n            throw new Error(\"Passed dictionary is not an object.\");\n        }\n        if (input instanceof ArrayBuffer || ArrayBuffer.isView(input)) {\n            throw new Error('ArrayBuffer(View) must not be passed to decryptDictionary(). Use decrypt() instead.');\n        }\n        const promises: Promise<void>[] = []\n        for (const key in input) {\n            if (this.#options.ignoreProp && this.#options.ignoreProp(key)) {\n                continue;\n            }\n            if (\n                typeof input[key] === 'object' &&\n                input[key] !== null &&\n                ! (input[key] instanceof ArrayBuffer) &&\n                ! ArrayBuffer.isView(input[key])\n            ) {\n                if (Array.isArray(input[key])) {\n                    output[key] = [];\n                } else {\n                    output[key] = {};\n                }\n                promises.push(\n                    this.#decryptDictionary(\n                        input[key] as object,\n                        output[key],\n                        `${path}.${key}`\n                    )\n                );\n                continue;\n            }\n            promises.push(\n                this.decrypt(input[key] as any, key)\n                    .then(decrypted => {\n                        if (decrypted === null) {\n                            output[key] = input[key];\n                            return;\n                        }\n                        output[key] = decrypted;\n                    })\n            );\n        }\n        return Promise.all(promises)\n            .then(_ => Promise.resolve())\n    }\n\n    public async encryptDictionary<O extends object>(\n        obj: O\n    ): Promise<EncryptedDictionary<O, CipherType>> {\n        const output = {};\n        await this.#encryptDictionary(\n            obj,\n            output\n        );\n        return output as EncryptedDictionary<O, CipherType>;\n    }\n\n    public async decryptDictionary<O extends object>(\n        obj: O\n    ): Promise<DecryptedDictionary<O, CipherType, DecipherType>> {\n        const output = {};\n        await this.#decryptDictionary(\n            obj,\n            output\n        );\n        return output as DecryptedDictionary<O, CipherType, DecipherType>;\n    }\n\n    public async decrypt(\n        datum: CipherType,\n        path?: string\n    ): Promise<null | DecipherType> {\n        if (this.#options.ignoreValue && this.#options.ignoreValue(datum)) {\n            return null;\n        }\n        if (! this.isCiphertextType(datum)) {\n            throw new Error(`decrypt() cannot decrypt '${typeof datum}' type in ${path}.`);\n        }\n        if (\n            typeof datum === \"string\" ||\n            datum instanceof ArrayBuffer ||\n            ArrayBuffer.isView(datum)\n        ) {\n            return this.#options.decrypt(datum, path);\n        }\n        throw new Error(`Bad isCiphertextType() implementation.`);\n    }\n\n    async encrypt(\n        datum: unknown,\n        path?: string\n    ): Promise<null | CipherType> {\n        if (this.#options.ignoreValue && this.#options.ignoreValue(datum)) {\n            return null;\n        }\n        if (datum === null || datum === undefined) {\n            console.warn(\"refusing to encrypt null/undefined values\");\n            return null;\n        }\n        switch (typeof datum) {\n            case 'string':\n                return this.#options.encrypt(datum, path);\n            case 'number':\n                return this.#options.encrypt(datum.toString(10), path);\n            case 'boolean':\n                return this.#options.encrypt(datum ? '1' : '0', path);\n            case 'object':\n                if (datum instanceof ArrayBuffer) {\n                    return this.#options.encrypt(datum, path);\n                }\n                if (ArrayBuffer.isView(datum)) {\n                    return this.#options.encrypt(datum.buffer, path);\n                }\n                break;\n        }\n        throw new Error(`encrypt() cannot encrypt '${typeof datum}' type in ${path}.`);\n    }\n}\n\n","export const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    for (const buffer of buffers) {\n        buf.set(buffer, i);\n        i += buffer.length;\n    }\n    return buf;\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\n","import { encoder, decoder } from '../lib/buffer_utils.js';\nimport { encodeBase64, decodeBase64 } from '../lib/base64.js';\nexport function decode(input) {\n    if (Uint8Array.fromBase64) {\n        return Uint8Array.fromBase64(typeof input === 'string' ? input : decoder.decode(input), {\n            alphabet: 'base64url',\n        });\n    }\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n}\nexport function encode(input) {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    if (Uint8Array.prototype.toBase64) {\n        return unencoded.toBase64({ alphabet: 'base64url', omitPadding: true });\n    }\n    return encodeBase64(unencoded).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n","export function encodeBase64(input) {\n    if (Uint8Array.prototype.toBase64) {\n        return input.toBase64();\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < input.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n}\nexport function decodeBase64(encoded) {\n    if (Uint8Array.fromBase64) {\n        return Uint8Array.fromBase64(encoded);\n    }\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n}\n","export const unprotected = Symbol();\n","export class JOSEError extends Error {\n    static code = 'ERR_JOSE_GENERIC';\n    code = 'ERR_JOSE_GENERIC';\n    constructor(message, options) {\n        super(message, options);\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nexport class JWTClaimValidationFailed extends JOSEError {\n    static code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n    code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n    claim;\n    reason;\n    payload;\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nexport class JWTExpired extends JOSEError {\n    static code = 'ERR_JWT_EXPIRED';\n    code = 'ERR_JWT_EXPIRED';\n    claim;\n    reason;\n    payload;\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nexport class JOSEAlgNotAllowed extends JOSEError {\n    static code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n    code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n}\nexport class JOSENotSupported extends JOSEError {\n    static code = 'ERR_JOSE_NOT_SUPPORTED';\n    code = 'ERR_JOSE_NOT_SUPPORTED';\n}\nexport class JWEDecryptionFailed extends JOSEError {\n    static code = 'ERR_JWE_DECRYPTION_FAILED';\n    code = 'ERR_JWE_DECRYPTION_FAILED';\n    constructor(message = 'decryption operation failed', options) {\n        super(message, options);\n    }\n}\nexport class JWEInvalid extends JOSEError {\n    static code = 'ERR_JWE_INVALID';\n    code = 'ERR_JWE_INVALID';\n}\nexport class JWSInvalid extends JOSEError {\n    static code = 'ERR_JWS_INVALID';\n    code = 'ERR_JWS_INVALID';\n}\nexport class JWTInvalid extends JOSEError {\n    static code = 'ERR_JWT_INVALID';\n    code = 'ERR_JWT_INVALID';\n}\nexport class JWKInvalid extends JOSEError {\n    static code = 'ERR_JWK_INVALID';\n    code = 'ERR_JWK_INVALID';\n}\nexport class JWKSInvalid extends JOSEError {\n    static code = 'ERR_JWKS_INVALID';\n    code = 'ERR_JWKS_INVALID';\n}\nexport class JWKSNoMatchingKey extends JOSEError {\n    static code = 'ERR_JWKS_NO_MATCHING_KEY';\n    code = 'ERR_JWKS_NO_MATCHING_KEY';\n    constructor(message = 'no applicable key found in the JSON Web Key Set', options) {\n        super(message, options);\n    }\n}\nexport class JWKSMultipleMatchingKeys extends JOSEError {\n    [Symbol.asyncIterator];\n    static code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    constructor(message = 'multiple matching keys found in the JSON Web Key Set', options) {\n        super(message, options);\n    }\n}\nexport class JWKSTimeout extends JOSEError {\n    static code = 'ERR_JWKS_TIMEOUT';\n    code = 'ERR_JWKS_TIMEOUT';\n    constructor(message = 'request timed out', options) {\n        super(message, options);\n    }\n}\nexport class JWSSignatureVerificationFailed extends JOSEError {\n    static code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    constructor(message = 'signature verification failed', options) {\n        super(message, options);\n    }\n}\n","import { JOSENotSupported } from '../util/errors.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A128GCMKW':\n        case 'A192GCM':\n        case 'A192GCMKW':\n        case 'A256GCM':\n        case 'A256GCMKW':\n            return 96;\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            return 128;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => crypto.getRandomValues(new Uint8Array(bitLength(alg) >> 3));\n","import { JWEInvalid } from '../util/errors.js';\nimport { bitLength } from './iv.js';\nexport default (enc, iv) => {\n    if (iv.length << 3 !== bitLength(enc)) {\n        throw new JWEInvalid('Invalid Initialization Vector length');\n    }\n};\n","import { JWEInvalid } from '../util/errors.js';\nexport default (cek, expected) => {\n    const actual = cek.byteLength << 3;\n    if (actual !== expected) {\n        throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`);\n    }\n};\n","function unusable(name, prop = 'algorithm.name') {\n    return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`);\n}\nfunction isAlgorithm(algorithm, name) {\n    return algorithm.name === name;\n}\nfunction getHashLength(hash) {\n    return parseInt(hash.name.slice(4), 10);\n}\nfunction getNamedCurve(alg) {\n    switch (alg) {\n        case 'ES256':\n            return 'P-256';\n        case 'ES384':\n            return 'P-384';\n        case 'ES512':\n            return 'P-521';\n        default:\n            throw new Error('unreachable');\n    }\n}\nfunction checkUsage(key, usage) {\n    if (usage && !key.usages.includes(usage)) {\n        throw new TypeError(`CryptoKey does not support this operation, its usages must include ${usage}.`);\n    }\n}\nexport function checkSigCryptoKey(key, alg, usage) {\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512': {\n            if (!isAlgorithm(key.algorithm, 'HMAC'))\n                throw unusable('HMAC');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'RS256':\n        case 'RS384':\n        case 'RS512': {\n            if (!isAlgorithm(key.algorithm, 'RSASSA-PKCS1-v1_5'))\n                throw unusable('RSASSA-PKCS1-v1_5');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'PS256':\n        case 'PS384':\n        case 'PS512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-PSS'))\n                throw unusable('RSA-PSS');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'Ed25519':\n        case 'EdDSA': {\n            if (!isAlgorithm(key.algorithm, 'Ed25519'))\n                throw unusable('Ed25519');\n            break;\n        }\n        case 'ES256':\n        case 'ES384':\n        case 'ES512': {\n            if (!isAlgorithm(key.algorithm, 'ECDSA'))\n                throw unusable('ECDSA');\n            const expected = getNamedCurve(alg);\n            const actual = key.algorithm.namedCurve;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.namedCurve');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usage);\n}\nexport function checkEncCryptoKey(key, alg, usage) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM': {\n            if (!isAlgorithm(key.algorithm, 'AES-GCM'))\n                throw unusable('AES-GCM');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (!isAlgorithm(key.algorithm, 'AES-KW'))\n                throw unusable('AES-KW');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'ECDH': {\n            switch (key.algorithm.name) {\n                case 'ECDH':\n                case 'X25519':\n                    break;\n                default:\n                    throw unusable('ECDH or X25519');\n            }\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW':\n            if (!isAlgorithm(key.algorithm, 'PBKDF2'))\n                throw unusable('PBKDF2');\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-OAEP'))\n                throw unusable('RSA-OAEP');\n            const expected = parseInt(alg.slice(9), 10) || 1;\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usage);\n}\n","function message(msg, actual, ...types) {\n    types = types.filter(Boolean);\n    if (types.length > 2) {\n        const last = types.pop();\n        msg += `one of type ${types.join(', ')}, or ${last}.`;\n    }\n    else if (types.length === 2) {\n        msg += `one of type ${types[0]} or ${types[1]}.`;\n    }\n    else {\n        msg += `of type ${types[0]}.`;\n    }\n    if (actual == null) {\n        msg += ` Received ${actual}`;\n    }\n    else if (typeof actual === 'function' && actual.name) {\n        msg += ` Received function ${actual.name}`;\n    }\n    else if (typeof actual === 'object' && actual != null) {\n        if (actual.constructor?.name) {\n            msg += ` Received an instance of ${actual.constructor.name}`;\n        }\n    }\n    return msg;\n}\nexport default (actual, ...types) => {\n    return message('Key must be ', actual, ...types);\n};\nexport function withAlg(alg, actual, ...types) {\n    return message(`Key for the ${alg} algorithm must be `, actual, ...types);\n}\n","export function assertCryptoKey(key) {\n    if (!isCryptoKey(key)) {\n        throw new Error('CryptoKey instance expected');\n    }\n}\nexport function isCryptoKey(key) {\n    return key?.[Symbol.toStringTag] === 'CryptoKey';\n}\nexport function isKeyObject(key) {\n    return key?.[Symbol.toStringTag] === 'KeyObject';\n}\nexport default (key) => {\n    return isCryptoKey(key) || isKeyObject(key);\n};\n","import { concat, uint64be } from './buffer_utils.js';\nimport checkIvLength from './check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport { checkEncCryptoKey } from './crypto_key.js';\nimport invalidKeyInput from './invalid_key_input.js';\nimport generateIv from './iv.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { isCryptoKey } from './is_key_like.js';\nasync function cbcEncrypt(enc, plaintext, cek, iv, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['encrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const ciphertext = new Uint8Array(await crypto.subtle.encrypt({\n        iv,\n        name: 'AES-CBC',\n    }, encKey, plaintext));\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const tag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    return { ciphertext, tag, iv };\n}\nasync function gcmEncrypt(enc, plaintext, cek, iv, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['encrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'encrypt');\n        encKey = cek;\n    }\n    const encrypted = new Uint8Array(await crypto.subtle.encrypt({\n        additionalData: aad,\n        iv,\n        name: 'AES-GCM',\n        tagLength: 128,\n    }, encKey, plaintext));\n    const tag = encrypted.slice(-16);\n    const ciphertext = encrypted.slice(0, -16);\n    return { ciphertext, tag, iv };\n}\nexport default async (enc, plaintext, cek, iv, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'CryptoKey', 'KeyObject', 'Uint8Array', 'JSON Web Key'));\n    }\n    if (iv) {\n        checkIvLength(enc, iv);\n    }\n    else {\n        iv = generateIv(enc);\n    }\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array) {\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            }\n            return cbcEncrypt(enc, plaintext, cek, iv, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array) {\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            }\n            return gcmEncrypt(enc, plaintext, cek, iv, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\n","import { checkEncCryptoKey } from './crypto_key.js';\nfunction checkKeySize(key, alg) {\n    if (key.algorithm.length !== parseInt(alg.slice(1, 4), 10)) {\n        throw new TypeError(`Invalid key size for alg: ${alg}`);\n    }\n}\nfunction getCryptoKey(key, alg, usage) {\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'AES-KW', true, [usage]);\n    }\n    checkEncCryptoKey(key, alg, usage);\n    return key;\n}\nexport async function wrap(alg, key, cek) {\n    const cryptoKey = await getCryptoKey(key, alg, 'wrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, { hash: 'SHA-256', name: 'HMAC' }, true, ['sign']);\n    return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, cryptoKey, 'AES-KW'));\n}\nexport async function unwrap(alg, key, encryptedKey) {\n    const cryptoKey = await getCryptoKey(key, alg, 'unwrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, cryptoKey, 'AES-KW', { hash: 'SHA-256', name: 'HMAC' }, true, ['sign']);\n    return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n}\n","export default async (algorithm, data) => {\n    const subtleDigest = `SHA-${algorithm.slice(-3)}`;\n    return new Uint8Array(await crypto.subtle.digest(subtleDigest, data));\n};\n","import { encoder, concat, uint32be } from './buffer_utils.js';\nimport { checkEncCryptoKey } from './crypto_key.js';\nimport digest from './digest.js';\nfunction lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nasync function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await digest('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\nexport async function deriveKey(publicKey, privateKey, algorithm, keyLength, apu = new Uint8Array(0), apv = new Uint8Array(0)) {\n    checkEncCryptoKey(publicKey, 'ECDH');\n    checkEncCryptoKey(privateKey, 'ECDH', 'deriveBits');\n    const value = concat(lengthAndInput(encoder.encode(algorithm)), lengthAndInput(apu), lengthAndInput(apv), uint32be(keyLength));\n    let length;\n    if (publicKey.algorithm.name === 'X25519') {\n        length = 256;\n    }\n    else {\n        length =\n            Math.ceil(parseInt(publicKey.algorithm.namedCurve.slice(-3), 10) / 8) << 3;\n    }\n    const sharedSecret = new Uint8Array(await crypto.subtle.deriveBits({\n        name: publicKey.algorithm.name,\n        public: publicKey,\n    }, privateKey, length));\n    return concatKdf(sharedSecret, keyLength, value);\n}\nexport function allowed(key) {\n    switch (key.algorithm.namedCurve) {\n        case 'P-256':\n        case 'P-384':\n        case 'P-521':\n            return true;\n        default:\n            return key.algorithm.name === 'X25519';\n    }\n}\n","import { encode as b64u } from '../util/base64url.js';\nimport * as aeskw from './aeskw.js';\nimport { checkEncCryptoKey } from './crypto_key.js';\nimport { concat, encoder } from './buffer_utils.js';\nimport { JWEInvalid } from '../util/errors.js';\nfunction getCryptoKey(key, alg) {\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'PBKDF2', false, ['deriveBits']);\n    }\n    checkEncCryptoKey(key, alg, 'deriveBits');\n    return key;\n}\nconst concatSalt = (alg, p2sInput) => concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\nasync function deriveKey(p2s, alg, p2c, key) {\n    if (!(p2s instanceof Uint8Array) || p2s.length < 8) {\n        throw new JWEInvalid('PBES2 Salt Input must be 8 or more octets');\n    }\n    const salt = concatSalt(alg, p2s);\n    const keylen = parseInt(alg.slice(13, 16), 10);\n    const subtleAlg = {\n        hash: `SHA-${alg.slice(8, 11)}`,\n        iterations: p2c,\n        name: 'PBKDF2',\n        salt,\n    };\n    const cryptoKey = await getCryptoKey(key, alg);\n    return new Uint8Array(await crypto.subtle.deriveBits(subtleAlg, cryptoKey, keylen));\n}\nexport async function wrap(alg, key, cek, p2c = 2048, p2s = crypto.getRandomValues(new Uint8Array(16))) {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    const encryptedKey = await aeskw.wrap(alg.slice(-6), derived, cek);\n    return { encryptedKey, p2c, p2s: b64u(p2s) };\n}\nexport async function unwrap(alg, key, encryptedKey, p2c, p2s) {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    return aeskw.unwrap(alg.slice(-6), derived, encryptedKey);\n}\n","export default (alg, key) => {\n    if (alg.startsWith('RS') || alg.startsWith('PS')) {\n        const { modulusLength } = key.algorithm;\n        if (typeof modulusLength !== 'number' || modulusLength < 2048) {\n            throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`);\n        }\n    }\n};\n","import { checkEncCryptoKey } from './crypto_key.js';\nimport checkKeyLength from './check_key_length.js';\nimport { JOSENotSupported } from '../util/errors.js';\nconst subtleAlgorithm = (alg) => {\n    switch (alg) {\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            return 'RSA-OAEP';\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n};\nexport async function encrypt(alg, key, cek) {\n    checkEncCryptoKey(key, alg, 'encrypt');\n    checkKeyLength(alg, key);\n    return new Uint8Array(await crypto.subtle.encrypt(subtleAlgorithm(alg), key, cek));\n}\nexport async function decrypt(alg, key, encryptedKey) {\n    checkEncCryptoKey(key, alg, 'decrypt');\n    checkKeyLength(alg, key);\n    return new Uint8Array(await crypto.subtle.decrypt(subtleAlgorithm(alg), key, encryptedKey));\n}\n","function isObjectLike(value) {\n    return typeof value === 'object' && value !== null;\n}\nexport default (input) => {\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(input) === null) {\n        return true;\n    }\n    let proto = input;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(input) === proto;\n};\n","import isObject from './is_object.js';\nexport function isJWK(key) {\n    return isObject(key) && typeof key.kty === 'string';\n}\nexport function isPrivateJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'string';\n}\nexport function isPublicJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'undefined';\n}\nexport function isSecretJWK(key) {\n    return key.kty === 'oct' && typeof key.k === 'string';\n}\n","import { JOSENotSupported } from '../util/errors.js';\nfunction subtleMapping(jwk) {\n    let algorithm;\n    let keyUsages;\n    switch (jwk.kty) {\n        case 'RSA': {\n            switch (jwk.alg) {\n                case 'PS256':\n                case 'PS384':\n                case 'PS512':\n                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RS256':\n                case 'RS384':\n                case 'RS512':\n                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RSA-OAEP':\n                case 'RSA-OAEP-256':\n                case 'RSA-OAEP-384':\n                case 'RSA-OAEP-512':\n                    algorithm = {\n                        name: 'RSA-OAEP',\n                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,\n                    };\n                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'EC': {\n            switch (jwk.alg) {\n                case 'ES256':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES384':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES512':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'OKP': {\n            switch (jwk.alg) {\n                case 'Ed25519':\n                case 'EdDSA':\n                    algorithm = { name: 'Ed25519' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"kty\" (Key Type) Parameter value');\n    }\n    return { algorithm, keyUsages };\n}\nexport default async (jwk) => {\n    if (!jwk.alg) {\n        throw new TypeError('\"alg\" argument is required when \"jwk.alg\" is not present');\n    }\n    const { algorithm, keyUsages } = subtleMapping(jwk);\n    const keyData = { ...jwk };\n    delete keyData.alg;\n    delete keyData.use;\n    return crypto.subtle.importKey('jwk', keyData, algorithm, jwk.ext ?? (jwk.d ? false : true), jwk.key_ops ?? keyUsages);\n};\n","import { isJWK } from './is_jwk.js';\nimport { decode } from '../util/base64url.js';\nimport importJWK from './jwk_to_key.js';\nimport { isCryptoKey, isKeyObject } from './is_key_like.js';\nlet cache;\nconst handleJWK = async (key, jwk, alg, freeze = false) => {\n    cache ||= new WeakMap();\n    let cached = cache.get(key);\n    if (cached?.[alg]) {\n        return cached[alg];\n    }\n    const cryptoKey = await importJWK({ ...jwk, alg });\n    if (freeze)\n        Object.freeze(key);\n    if (!cached) {\n        cache.set(key, { [alg]: cryptoKey });\n    }\n    else {\n        cached[alg] = cryptoKey;\n    }\n    return cryptoKey;\n};\nconst handleKeyObject = (keyObject, alg) => {\n    cache ||= new WeakMap();\n    let cached = cache.get(keyObject);\n    if (cached?.[alg]) {\n        return cached[alg];\n    }\n    const isPublic = keyObject.type === 'public';\n    const extractable = isPublic ? true : false;\n    let cryptoKey;\n    if (keyObject.asymmetricKeyType === 'x25519') {\n        switch (alg) {\n            case 'ECDH-ES':\n            case 'ECDH-ES+A128KW':\n            case 'ECDH-ES+A192KW':\n            case 'ECDH-ES+A256KW':\n                break;\n            default:\n                throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        cryptoKey = keyObject.toCryptoKey(keyObject.asymmetricKeyType, extractable, isPublic ? [] : ['deriveBits']);\n    }\n    if (keyObject.asymmetricKeyType === 'ed25519') {\n        if (alg !== 'EdDSA' && alg !== 'Ed25519') {\n            throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        cryptoKey = keyObject.toCryptoKey(keyObject.asymmetricKeyType, extractable, [\n            isPublic ? 'verify' : 'sign',\n        ]);\n    }\n    if (keyObject.asymmetricKeyType === 'rsa') {\n        let hash;\n        switch (alg) {\n            case 'RSA-OAEP':\n                hash = 'SHA-1';\n                break;\n            case 'RS256':\n            case 'PS256':\n            case 'RSA-OAEP-256':\n                hash = 'SHA-256';\n                break;\n            case 'RS384':\n            case 'PS384':\n            case 'RSA-OAEP-384':\n                hash = 'SHA-384';\n                break;\n            case 'RS512':\n            case 'PS512':\n            case 'RSA-OAEP-512':\n                hash = 'SHA-512';\n                break;\n            default:\n                throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        if (alg.startsWith('RSA-OAEP')) {\n            return keyObject.toCryptoKey({\n                name: 'RSA-OAEP',\n                hash,\n            }, extractable, isPublic ? ['encrypt'] : ['decrypt']);\n        }\n        cryptoKey = keyObject.toCryptoKey({\n            name: alg.startsWith('PS') ? 'RSA-PSS' : 'RSASSA-PKCS1-v1_5',\n            hash,\n        }, extractable, [isPublic ? 'verify' : 'sign']);\n    }\n    if (keyObject.asymmetricKeyType === 'ec') {\n        const nist = new Map([\n            ['prime256v1', 'P-256'],\n            ['secp384r1', 'P-384'],\n            ['secp521r1', 'P-521'],\n        ]);\n        const namedCurve = nist.get(keyObject.asymmetricKeyDetails?.namedCurve);\n        if (!namedCurve) {\n            throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        if (alg === 'ES256' && namedCurve === 'P-256') {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDSA',\n                namedCurve,\n            }, extractable, [isPublic ? 'verify' : 'sign']);\n        }\n        if (alg === 'ES384' && namedCurve === 'P-384') {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDSA',\n                namedCurve,\n            }, extractable, [isPublic ? 'verify' : 'sign']);\n        }\n        if (alg === 'ES512' && namedCurve === 'P-521') {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDSA',\n                namedCurve,\n            }, extractable, [isPublic ? 'verify' : 'sign']);\n        }\n        if (alg.startsWith('ECDH-ES')) {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDH',\n                namedCurve,\n            }, extractable, isPublic ? [] : ['deriveBits']);\n        }\n    }\n    if (!cryptoKey) {\n        throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n    }\n    if (!cached) {\n        cache.set(keyObject, { [alg]: cryptoKey });\n    }\n    else {\n        cached[alg] = cryptoKey;\n    }\n    return cryptoKey;\n};\nexport default async (key, alg) => {\n    if (key instanceof Uint8Array) {\n        return key;\n    }\n    if (isCryptoKey(key)) {\n        return key;\n    }\n    if (isKeyObject(key)) {\n        if (key.type === 'secret') {\n            return key.export();\n        }\n        if ('toCryptoKey' in key && typeof key.toCryptoKey === 'function') {\n            try {\n                return handleKeyObject(key, alg);\n            }\n            catch (err) {\n                if (err instanceof TypeError) {\n                    throw err;\n                }\n            }\n        }\n        let jwk = key.export({ format: 'jwk' });\n        return handleJWK(key, jwk, alg);\n    }\n    if (isJWK(key)) {\n        if (key.k) {\n            return decode(key.k);\n        }\n        return handleJWK(key, key, alg, true);\n    }\n    throw new Error('unreachable');\n};\n","import { JOSENotSupported } from '../util/errors.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n            return 128;\n        case 'A192GCM':\n            return 192;\n        case 'A256GCM':\n        case 'A128CBC-HS256':\n            return 256;\n        case 'A192CBC-HS384':\n            return 384;\n        case 'A256CBC-HS512':\n            return 512;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => crypto.getRandomValues(new Uint8Array(bitLength(alg) >> 3));\n","import { concat, uint64be } from './buffer_utils.js';\nimport checkIvLength from './check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport { JOSENotSupported, JWEDecryptionFailed, JWEInvalid } from '../util/errors.js';\nimport { checkEncCryptoKey } from './crypto_key.js';\nimport invalidKeyInput from './invalid_key_input.js';\nimport { isCryptoKey } from './is_key_like.js';\nasync function timingSafeEqual(a, b) {\n    if (!(a instanceof Uint8Array)) {\n        throw new TypeError('First argument must be a buffer');\n    }\n    if (!(b instanceof Uint8Array)) {\n        throw new TypeError('Second argument must be a buffer');\n    }\n    const algorithm = { name: 'HMAC', hash: 'SHA-256' };\n    const key = (await crypto.subtle.generateKey(algorithm, false, ['sign']));\n    const aHmac = new Uint8Array(await crypto.subtle.sign(algorithm, key, a));\n    const bHmac = new Uint8Array(await crypto.subtle.sign(algorithm, key, b));\n    let out = 0;\n    let i = -1;\n    while (++i < 32) {\n        out |= aHmac[i] ^ bHmac[i];\n    }\n    return out === 0;\n}\nasync function cbcDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['decrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const expectedTag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    let macCheckPassed;\n    try {\n        macCheckPassed = await timingSafeEqual(tag, expectedTag);\n    }\n    catch {\n    }\n    if (!macCheckPassed) {\n        throw new JWEDecryptionFailed();\n    }\n    let plaintext;\n    try {\n        plaintext = new Uint8Array(await crypto.subtle.decrypt({ iv, name: 'AES-CBC' }, encKey, ciphertext));\n    }\n    catch {\n    }\n    if (!plaintext) {\n        throw new JWEDecryptionFailed();\n    }\n    return plaintext;\n}\nasync function gcmDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['decrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'decrypt');\n        encKey = cek;\n    }\n    try {\n        return new Uint8Array(await crypto.subtle.decrypt({\n            additionalData: aad,\n            iv,\n            name: 'AES-GCM',\n            tagLength: 128,\n        }, encKey, concat(ciphertext, tag)));\n    }\n    catch {\n        throw new JWEDecryptionFailed();\n    }\n}\nexport default async (enc, cek, ciphertext, iv, tag, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'CryptoKey', 'KeyObject', 'Uint8Array', 'JSON Web Key'));\n    }\n    if (!iv) {\n        throw new JWEInvalid('JWE Initialization Vector missing');\n    }\n    if (!tag) {\n        throw new JWEInvalid('JWE Authentication Tag missing');\n    }\n    checkIvLength(enc, iv);\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            return cbcDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            return gcmDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\n","import * as aeskw from './aeskw.js';\nimport * as ecdhes from './ecdhes.js';\nimport * as pbes2kw from './pbes2kw.js';\nimport * as rsaes from './rsaes.js';\nimport { encode as b64u } from '../util/base64url.js';\nimport normalizeKey from './normalize_key.js';\nimport generateCek, { bitLength as cekLength } from '../lib/cek.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { exportJWK } from '../key/export.js';\nimport { wrap as aesGcmKw } from './aesgcmkw.js';\nimport { assertCryptoKey } from './is_key_like.js';\nexport default async (alg, enc, key, providedCek, providedParameters = {}) => {\n    let encryptedKey;\n    let parameters;\n    let cek;\n    switch (alg) {\n        case 'dir': {\n            cek = key;\n            break;\n        }\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            assertCryptoKey(key);\n            if (!ecdhes.allowed(key)) {\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            }\n            const { apu, apv } = providedParameters;\n            let ephemeralKey;\n            if (providedParameters.epk) {\n                ephemeralKey = (await normalizeKey(providedParameters.epk, alg));\n            }\n            else {\n                ephemeralKey = (await crypto.subtle.generateKey(key.algorithm, true, ['deriveBits'])).privateKey;\n            }\n            const { x, y, crv, kty } = await exportJWK(ephemeralKey);\n            const sharedSecret = await ecdhes.deriveKey(key, ephemeralKey, alg === 'ECDH-ES' ? enc : alg, alg === 'ECDH-ES' ? cekLength(enc) : parseInt(alg.slice(-5, -2), 10), apu, apv);\n            parameters = { epk: { x, crv, kty } };\n            if (kty === 'EC')\n                parameters.epk.y = y;\n            if (apu)\n                parameters.apu = b64u(apu);\n            if (apv)\n                parameters.apv = b64u(apv);\n            if (alg === 'ECDH-ES') {\n                cek = sharedSecret;\n                break;\n            }\n            cek = providedCek || generateCek(enc);\n            const kwAlg = alg.slice(-6);\n            encryptedKey = await aeskw.wrap(kwAlg, sharedSecret, cek);\n            break;\n        }\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            cek = providedCek || generateCek(enc);\n            assertCryptoKey(key);\n            encryptedKey = await rsaes.encrypt(alg, key, cek);\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            cek = providedCek || generateCek(enc);\n            const { p2c, p2s } = providedParameters;\n            ({ encryptedKey, ...parameters } = await pbes2kw.wrap(alg, key, cek, p2c, p2s));\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            cek = providedCek || generateCek(enc);\n            encryptedKey = await aeskw.wrap(alg, key, cek);\n            break;\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            cek = providedCek || generateCek(enc);\n            const { iv } = providedParameters;\n            ({ encryptedKey, ...parameters } = await aesGcmKw(alg, key, cek, iv));\n            break;\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n    return { cek, encryptedKey, parameters };\n};\n","import { toSPKI as exportPublic, toPKCS8 as exportPrivate } from '../lib/asn1.js';\nimport keyToJWK from '../lib/key_to_jwk.js';\nexport async function exportSPKI(key) {\n    return exportPublic(key);\n}\nexport async function exportPKCS8(key) {\n    return exportPrivate(key);\n}\nexport async function exportJWK(key) {\n    return keyToJWK(key);\n}\n","import invalidKeyInput from './invalid_key_input.js';\nimport { encode as b64u } from '../util/base64url.js';\nimport { isCryptoKey, isKeyObject } from './is_key_like.js';\nexport default async function keyToJWK(key) {\n    if (isKeyObject(key)) {\n        if (key.type === 'secret') {\n            key = key.export();\n        }\n        else {\n            return key.export({ format: 'jwk' });\n        }\n    }\n    if (key instanceof Uint8Array) {\n        return {\n            kty: 'oct',\n            k: b64u(key),\n        };\n    }\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, 'CryptoKey', 'KeyObject', 'Uint8Array'));\n    }\n    if (!key.extractable) {\n        throw new TypeError('non-extractable CryptoKey cannot be exported as a JWK');\n    }\n    const { ext, key_ops, alg, use, ...jwk } = await crypto.subtle.exportKey('jwk', key);\n    return jwk;\n}\n","import encrypt from './encrypt.js';\nimport decrypt from './decrypt.js';\nimport { encode as b64u } from '../util/base64url.js';\nexport async function wrap(alg, key, cek, iv) {\n    const jweAlgorithm = alg.slice(0, 7);\n    const wrapped = await encrypt(jweAlgorithm, cek, key, iv, new Uint8Array(0));\n    return {\n        encryptedKey: wrapped.ciphertext,\n        iv: b64u(wrapped.iv),\n        tag: b64u(wrapped.tag),\n    };\n}\nexport async function unwrap(alg, key, encryptedKey, iv, tag) {\n    const jweAlgorithm = alg.slice(0, 7);\n    return decrypt(jweAlgorithm, key, encryptedKey, iv, tag, new Uint8Array(0));\n}\n","export default (...headers) => {\n    const sources = headers.filter(Boolean);\n    if (sources.length === 0 || sources.length === 1) {\n        return true;\n    }\n    let acc;\n    for (const header of sources) {\n        const parameters = Object.keys(header);\n        if (!acc || acc.size === 0) {\n            acc = new Set(parameters);\n            continue;\n        }\n        for (const parameter of parameters) {\n            if (acc.has(parameter)) {\n                return false;\n            }\n            acc.add(parameter);\n        }\n    }\n    return true;\n};\n","import { JOSENotSupported, JWEInvalid, JWSInvalid } from '../util/errors.js';\nexport default (Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) => {\n    if (joseHeader.crit !== undefined && protectedHeader?.crit === undefined) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be integrity protected');\n    }\n    if (!protectedHeader || protectedHeader.crit === undefined) {\n        return new Set();\n    }\n    if (!Array.isArray(protectedHeader.crit) ||\n        protectedHeader.crit.length === 0 ||\n        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be an array of non-empty strings when present');\n    }\n    let recognized;\n    if (recognizedOption !== undefined) {\n        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);\n    }\n    else {\n        recognized = recognizedDefault;\n    }\n    for (const parameter of protectedHeader.crit) {\n        if (!recognized.has(parameter)) {\n            throw new JOSENotSupported(`Extension Header Parameter \"${parameter}\" is not recognized`);\n        }\n        if (joseHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" is missing`);\n        }\n        if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" MUST be integrity protected`);\n        }\n    }\n    return new Set(protectedHeader.crit);\n};\n","import { withAlg as invalidKeyInput } from './invalid_key_input.js';\nimport isKeyLike from './is_key_like.js';\nimport * as jwk from './is_jwk.js';\nconst tag = (key) => key?.[Symbol.toStringTag];\nconst jwkMatchesOp = (alg, key, usage) => {\n    if (key.use !== undefined) {\n        let expected;\n        switch (usage) {\n            case 'sign':\n            case 'verify':\n                expected = 'sig';\n                break;\n            case 'encrypt':\n            case 'decrypt':\n                expected = 'enc';\n                break;\n        }\n        if (key.use !== expected) {\n            throw new TypeError(`Invalid key for this operation, its \"use\" must be \"${expected}\" when present`);\n        }\n    }\n    if (key.alg !== undefined && key.alg !== alg) {\n        throw new TypeError(`Invalid key for this operation, its \"alg\" must be \"${alg}\" when present`);\n    }\n    if (Array.isArray(key.key_ops)) {\n        let expectedKeyOp;\n        switch (true) {\n            case usage === 'sign' || usage === 'verify':\n            case alg === 'dir':\n            case alg.includes('CBC-HS'):\n                expectedKeyOp = usage;\n                break;\n            case alg.startsWith('PBES2'):\n                expectedKeyOp = 'deriveBits';\n                break;\n            case /^A\\d{3}(?:GCM)?(?:KW)?$/.test(alg):\n                if (!alg.includes('GCM') && alg.endsWith('KW')) {\n                    expectedKeyOp = usage === 'encrypt' ? 'wrapKey' : 'unwrapKey';\n                }\n                else {\n                    expectedKeyOp = usage;\n                }\n                break;\n            case usage === 'encrypt' && alg.startsWith('RSA'):\n                expectedKeyOp = 'wrapKey';\n                break;\n            case usage === 'decrypt':\n                expectedKeyOp = alg.startsWith('RSA') ? 'unwrapKey' : 'deriveBits';\n                break;\n        }\n        if (expectedKeyOp && key.key_ops?.includes?.(expectedKeyOp) === false) {\n            throw new TypeError(`Invalid key for this operation, its \"key_ops\" must include \"${expectedKeyOp}\" when present`);\n        }\n    }\n    return true;\n};\nconst symmetricTypeCheck = (alg, key, usage) => {\n    if (key instanceof Uint8Array)\n        return;\n    if (jwk.isJWK(key)) {\n        if (jwk.isSecretJWK(key) && jwkMatchesOp(alg, key, usage))\n            return;\n        throw new TypeError(`JSON Web Key for symmetric algorithms must have JWK \"kty\" (Key Type) equal to \"oct\" and the JWK \"k\" (Key Value) present`);\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, 'CryptoKey', 'KeyObject', 'JSON Web Key', 'Uint8Array'));\n    }\n    if (key.type !== 'secret') {\n        throw new TypeError(`${tag(key)} instances for symmetric algorithms must be of type \"secret\"`);\n    }\n};\nconst asymmetricTypeCheck = (alg, key, usage) => {\n    if (jwk.isJWK(key)) {\n        switch (usage) {\n            case 'decrypt':\n            case 'sign':\n                if (jwk.isPrivateJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a private JWK`);\n            case 'encrypt':\n            case 'verify':\n                if (jwk.isPublicJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a public JWK`);\n        }\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, 'CryptoKey', 'KeyObject', 'JSON Web Key'));\n    }\n    if (key.type === 'secret') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithms must not be of type \"secret\"`);\n    }\n    if (key.type === 'public') {\n        switch (usage) {\n            case 'sign':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm signing must be of type \"private\"`);\n            case 'decrypt':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm decryption must be of type \"private\"`);\n            default:\n                break;\n        }\n    }\n    if (key.type === 'private') {\n        switch (usage) {\n            case 'verify':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm verifying must be of type \"public\"`);\n            case 'encrypt':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm encryption must be of type \"public\"`);\n            default:\n                break;\n        }\n    }\n};\nexport default (alg, key, usage) => {\n    const symmetric = alg.startsWith('HS') ||\n        alg === 'dir' ||\n        alg.startsWith('PBES2') ||\n        /^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(alg) ||\n        /^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(alg);\n    if (symmetric) {\n        symmetricTypeCheck(alg, key, usage);\n    }\n    else {\n        asymmetricTypeCheck(alg, key, usage);\n    }\n};\n","import { encode as b64u } from '../../util/base64url.js';\nimport { unprotected } from '../../lib/private_symbols.js';\nimport encrypt from '../../lib/encrypt.js';\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\nimport { JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport normalizeKey from '../../lib/normalize_key.js';\nimport checkKeyType from '../../lib/check_key_type.js';\nexport class FlattenedEncrypt {\n    #plaintext;\n    #protectedHeader;\n    #sharedUnprotectedHeader;\n    #unprotectedHeader;\n    #aad;\n    #cek;\n    #iv;\n    #keyManagementParameters;\n    constructor(plaintext) {\n        if (!(plaintext instanceof Uint8Array)) {\n            throw new TypeError('plaintext must be an instance of Uint8Array');\n        }\n        this.#plaintext = plaintext;\n    }\n    setKeyManagementParameters(parameters) {\n        if (this.#keyManagementParameters) {\n            throw new TypeError('setKeyManagementParameters can only be called once');\n        }\n        this.#keyManagementParameters = parameters;\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this.#protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this.#protectedHeader = protectedHeader;\n        return this;\n    }\n    setSharedUnprotectedHeader(sharedUnprotectedHeader) {\n        if (this.#sharedUnprotectedHeader) {\n            throw new TypeError('setSharedUnprotectedHeader can only be called once');\n        }\n        this.#sharedUnprotectedHeader = sharedUnprotectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this.#unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this.#unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    setAdditionalAuthenticatedData(aad) {\n        this.#aad = aad;\n        return this;\n    }\n    setContentEncryptionKey(cek) {\n        if (this.#cek) {\n            throw new TypeError('setContentEncryptionKey can only be called once');\n        }\n        this.#cek = cek;\n        return this;\n    }\n    setInitializationVector(iv) {\n        if (this.#iv) {\n            throw new TypeError('setInitializationVector can only be called once');\n        }\n        this.#iv = iv;\n        return this;\n    }\n    async encrypt(key, options) {\n        if (!this.#protectedHeader && !this.#unprotectedHeader && !this.#sharedUnprotectedHeader) {\n            throw new JWEInvalid('either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()');\n        }\n        if (!isDisjoint(this.#protectedHeader, this.#unprotectedHeader, this.#sharedUnprotectedHeader)) {\n            throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\n        }\n        const joseHeader = {\n            ...this.#protectedHeader,\n            ...this.#unprotectedHeader,\n            ...this.#sharedUnprotectedHeader,\n        };\n        validateCrit(JWEInvalid, new Map(), options?.crit, this.#protectedHeader, joseHeader);\n        if (joseHeader.zip !== undefined) {\n            throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported.');\n        }\n        const { alg, enc } = joseHeader;\n        if (typeof alg !== 'string' || !alg) {\n            throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\n        }\n        if (typeof enc !== 'string' || !enc) {\n            throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\n        }\n        let encryptedKey;\n        if (this.#cek && (alg === 'dir' || alg === 'ECDH-ES')) {\n            throw new TypeError(`setContentEncryptionKey cannot be called with JWE \"alg\" (Algorithm) Header ${alg}`);\n        }\n        checkKeyType(alg === 'dir' ? enc : alg, key, 'encrypt');\n        let cek;\n        {\n            let parameters;\n            const k = await normalizeKey(key, alg);\n            ({ cek, encryptedKey, parameters } = await encryptKeyManagement(alg, enc, k, this.#cek, this.#keyManagementParameters));\n            if (parameters) {\n                if (options && unprotected in options) {\n                    if (!this.#unprotectedHeader) {\n                        this.setUnprotectedHeader(parameters);\n                    }\n                    else {\n                        this.#unprotectedHeader = { ...this.#unprotectedHeader, ...parameters };\n                    }\n                }\n                else if (!this.#protectedHeader) {\n                    this.setProtectedHeader(parameters);\n                }\n                else {\n                    this.#protectedHeader = { ...this.#protectedHeader, ...parameters };\n                }\n            }\n        }\n        let additionalData;\n        let protectedHeader;\n        let aadMember;\n        if (this.#protectedHeader) {\n            protectedHeader = encoder.encode(b64u(JSON.stringify(this.#protectedHeader)));\n        }\n        else {\n            protectedHeader = encoder.encode('');\n        }\n        if (this.#aad) {\n            aadMember = b64u(this.#aad);\n            additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(aadMember));\n        }\n        else {\n            additionalData = protectedHeader;\n        }\n        const { ciphertext, tag, iv } = await encrypt(enc, this.#plaintext, cek, this.#iv, additionalData);\n        const jwe = {\n            ciphertext: b64u(ciphertext),\n        };\n        if (iv) {\n            jwe.iv = b64u(iv);\n        }\n        if (tag) {\n            jwe.tag = b64u(tag);\n        }\n        if (encryptedKey) {\n            jwe.encrypted_key = b64u(encryptedKey);\n        }\n        if (aadMember) {\n            jwe.aad = aadMember;\n        }\n        if (this.#protectedHeader) {\n            jwe.protected = decoder.decode(protectedHeader);\n        }\n        if (this.#sharedUnprotectedHeader) {\n            jwe.unprotected = this.#sharedUnprotectedHeader;\n        }\n        if (this.#unprotectedHeader) {\n            jwe.header = this.#unprotectedHeader;\n        }\n        return jwe;\n    }\n}\n","import { FlattenedEncrypt } from '../flattened/encrypt.js';\nexport class CompactEncrypt {\n    #flattened;\n    constructor(plaintext) {\n        this.#flattened = new FlattenedEncrypt(plaintext);\n    }\n    setContentEncryptionKey(cek) {\n        this.#flattened.setContentEncryptionKey(cek);\n        return this;\n    }\n    setInitializationVector(iv) {\n        this.#flattened.setInitializationVector(iv);\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        this.#flattened.setProtectedHeader(protectedHeader);\n        return this;\n    }\n    setKeyManagementParameters(parameters) {\n        this.#flattened.setKeyManagementParameters(parameters);\n        return this;\n    }\n    async encrypt(key, options) {\n        const jwe = await this.#flattened.encrypt(key, options);\n        return [jwe.protected, jwe.encrypted_key, jwe.iv, jwe.ciphertext, jwe.tag].join('.');\n    }\n}\n","import * as aeskw from './aeskw.js';\nimport * as ecdhes from './ecdhes.js';\nimport * as pbes2kw from './pbes2kw.js';\nimport * as rsaes from './rsaes.js';\nimport { decode as b64u } from '../util/base64url.js';\nimport { JOSENotSupported, JWEInvalid } from '../util/errors.js';\nimport { bitLength as cekLength } from '../lib/cek.js';\nimport { importJWK } from '../key/import.js';\nimport isObject from './is_object.js';\nimport { unwrap as aesGcmKw } from './aesgcmkw.js';\nimport { assertCryptoKey } from './is_key_like.js';\nexport default async (alg, key, encryptedKey, joseHeader, options) => {\n    switch (alg) {\n        case 'dir': {\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n            return key;\n        }\n        case 'ECDH-ES':\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!isObject(joseHeader.epk))\n                throw new JWEInvalid(`JOSE Header \"epk\" (Ephemeral Public Key) missing or invalid`);\n            assertCryptoKey(key);\n            if (!ecdhes.allowed(key))\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            const epk = await importJWK(joseHeader.epk, alg);\n            assertCryptoKey(epk);\n            let partyUInfo;\n            let partyVInfo;\n            if (joseHeader.apu !== undefined) {\n                if (typeof joseHeader.apu !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apu\" (Agreement PartyUInfo) invalid`);\n                try {\n                    partyUInfo = b64u(joseHeader.apu);\n                }\n                catch {\n                    throw new JWEInvalid('Failed to base64url decode the apu');\n                }\n            }\n            if (joseHeader.apv !== undefined) {\n                if (typeof joseHeader.apv !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apv\" (Agreement PartyVInfo) invalid`);\n                try {\n                    partyVInfo = b64u(joseHeader.apv);\n                }\n                catch {\n                    throw new JWEInvalid('Failed to base64url decode the apv');\n                }\n            }\n            const sharedSecret = await ecdhes.deriveKey(epk, key, alg === 'ECDH-ES' ? joseHeader.enc : alg, alg === 'ECDH-ES' ? cekLength(joseHeader.enc) : parseInt(alg.slice(-5, -2), 10), partyUInfo, partyVInfo);\n            if (alg === 'ECDH-ES')\n                return sharedSecret;\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aeskw.unwrap(alg.slice(-6), sharedSecret, encryptedKey);\n        }\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            assertCryptoKey(key);\n            return rsaes.decrypt(alg, key, encryptedKey);\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.p2c !== 'number')\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) missing or invalid`);\n            const p2cLimit = options?.maxPBES2Count || 10_000;\n            if (joseHeader.p2c > p2cLimit)\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) out is of acceptable bounds`);\n            if (typeof joseHeader.p2s !== 'string')\n                throw new JWEInvalid(`JOSE Header \"p2s\" (PBES2 Salt) missing or invalid`);\n            let p2s;\n            try {\n                p2s = b64u(joseHeader.p2s);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the p2s');\n            }\n            return pbes2kw.unwrap(alg, key, encryptedKey, joseHeader.p2c, p2s);\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aeskw.unwrap(alg, key, encryptedKey);\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.iv !== 'string')\n                throw new JWEInvalid(`JOSE Header \"iv\" (Initialization Vector) missing or invalid`);\n            if (typeof joseHeader.tag !== 'string')\n                throw new JWEInvalid(`JOSE Header \"tag\" (Authentication Tag) missing or invalid`);\n            let iv;\n            try {\n                iv = b64u(joseHeader.iv);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the iv');\n            }\n            let tag;\n            try {\n                tag = b64u(joseHeader.tag);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the tag');\n            }\n            return aesGcmKw(alg, key, encryptedKey, iv, tag);\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n};\n","export default (option, algorithms) => {\n    if (algorithms !== undefined &&\n        (!Array.isArray(algorithms) || algorithms.some((s) => typeof s !== 'string'))) {\n        throw new TypeError(`\"${option}\" option must be an array of strings`);\n    }\n    if (!algorithms) {\n        return undefined;\n    }\n    return new Set(algorithms);\n};\n","import { flattenedDecrypt } from '../flattened/decrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactDecrypt(jwe, key, options) {\n    if (jwe instanceof Uint8Array) {\n        jwe = decoder.decode(jwe);\n    }\n    if (typeof jwe !== 'string') {\n        throw new JWEInvalid('Compact JWE must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: encryptedKey, 2: iv, 3: ciphertext, 4: tag, length, } = jwe.split('.');\n    if (length !== 5) {\n        throw new JWEInvalid('Invalid Compact JWE');\n    }\n    const decrypted = await flattenedDecrypt({\n        ciphertext,\n        iv: iv || undefined,\n        protected: protectedHeader,\n        tag: tag || undefined,\n        encrypted_key: encryptedKey || undefined,\n    }, key, options);\n    const result = { plaintext: decrypted.plaintext, protectedHeader: decrypted.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n","import { decode as b64u } from '../../util/base64url.js';\nimport decrypt from '../../lib/decrypt.js';\nimport { JOSEAlgNotAllowed, JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport decryptKeyManagement from '../../lib/decrypt_key_management.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport generateCek from '../../lib/cek.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nimport normalizeKey from '../../lib/normalize_key.js';\nimport checkKeyType from '../../lib/check_key_type.js';\nexport async function flattenedDecrypt(jwe, key, options) {\n    if (!isObject(jwe)) {\n        throw new JWEInvalid('Flattened JWE must be an object');\n    }\n    if (jwe.protected === undefined && jwe.header === undefined && jwe.unprotected === undefined) {\n        throw new JWEInvalid('JOSE Header missing');\n    }\n    if (jwe.iv !== undefined && typeof jwe.iv !== 'string') {\n        throw new JWEInvalid('JWE Initialization Vector incorrect type');\n    }\n    if (typeof jwe.ciphertext !== 'string') {\n        throw new JWEInvalid('JWE Ciphertext missing or incorrect type');\n    }\n    if (jwe.tag !== undefined && typeof jwe.tag !== 'string') {\n        throw new JWEInvalid('JWE Authentication Tag incorrect type');\n    }\n    if (jwe.protected !== undefined && typeof jwe.protected !== 'string') {\n        throw new JWEInvalid('JWE Protected Header incorrect type');\n    }\n    if (jwe.encrypted_key !== undefined && typeof jwe.encrypted_key !== 'string') {\n        throw new JWEInvalid('JWE Encrypted Key incorrect type');\n    }\n    if (jwe.aad !== undefined && typeof jwe.aad !== 'string') {\n        throw new JWEInvalid('JWE AAD incorrect type');\n    }\n    if (jwe.header !== undefined && !isObject(jwe.header)) {\n        throw new JWEInvalid('JWE Shared Unprotected Header incorrect type');\n    }\n    if (jwe.unprotected !== undefined && !isObject(jwe.unprotected)) {\n        throw new JWEInvalid('JWE Per-Recipient Unprotected Header incorrect type');\n    }\n    let parsedProt;\n    if (jwe.protected) {\n        try {\n            const protectedHeader = b64u(jwe.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch {\n            throw new JWEInvalid('JWE Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jwe.header, jwe.unprotected)) {\n        throw new JWEInvalid('JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jwe.header,\n        ...jwe.unprotected,\n    };\n    validateCrit(JWEInvalid, new Map(), options?.crit, parsedProt, joseHeader);\n    if (joseHeader.zip !== undefined) {\n        throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported.');\n    }\n    const { alg, enc } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWEInvalid('missing JWE Algorithm (alg) in JWE Header');\n    }\n    if (typeof enc !== 'string' || !enc) {\n        throw new JWEInvalid('missing JWE Encryption Algorithm (enc) in JWE Header');\n    }\n    const keyManagementAlgorithms = options && validateAlgorithms('keyManagementAlgorithms', options.keyManagementAlgorithms);\n    const contentEncryptionAlgorithms = options &&\n        validateAlgorithms('contentEncryptionAlgorithms', options.contentEncryptionAlgorithms);\n    if ((keyManagementAlgorithms && !keyManagementAlgorithms.has(alg)) ||\n        (!keyManagementAlgorithms && alg.startsWith('PBES2'))) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter value not allowed');\n    }\n    if (contentEncryptionAlgorithms && !contentEncryptionAlgorithms.has(enc)) {\n        throw new JOSEAlgNotAllowed('\"enc\" (Encryption Algorithm) Header Parameter value not allowed');\n    }\n    let encryptedKey;\n    if (jwe.encrypted_key !== undefined) {\n        try {\n            encryptedKey = b64u(jwe.encrypted_key);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the encrypted_key');\n        }\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jwe);\n        resolvedKey = true;\n    }\n    checkKeyType(alg === 'dir' ? enc : alg, key, 'decrypt');\n    const k = await normalizeKey(key, alg);\n    let cek;\n    try {\n        cek = await decryptKeyManagement(alg, k, encryptedKey, joseHeader, options);\n    }\n    catch (err) {\n        if (err instanceof TypeError || err instanceof JWEInvalid || err instanceof JOSENotSupported) {\n            throw err;\n        }\n        cek = generateCek(enc);\n    }\n    let iv;\n    let tag;\n    if (jwe.iv !== undefined) {\n        try {\n            iv = b64u(jwe.iv);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the iv');\n        }\n    }\n    if (jwe.tag !== undefined) {\n        try {\n            tag = b64u(jwe.tag);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the tag');\n        }\n    }\n    const protectedHeader = encoder.encode(jwe.protected ?? '');\n    let additionalData;\n    if (jwe.aad !== undefined) {\n        additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(jwe.aad));\n    }\n    else {\n        additionalData = protectedHeader;\n    }\n    let ciphertext;\n    try {\n        ciphertext = b64u(jwe.ciphertext);\n    }\n    catch {\n        throw new JWEInvalid('Failed to base64url decode the ciphertext');\n    }\n    const plaintext = await decrypt(enc, cek, ciphertext, iv, tag, additionalData);\n    const result = { plaintext };\n    if (jwe.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jwe.aad !== undefined) {\n        try {\n            result.additionalAuthenticatedData = b64u(jwe.aad);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the aad');\n        }\n    }\n    if (jwe.unprotected !== undefined) {\n        result.sharedUnprotectedHeader = jwe.unprotected;\n    }\n    if (jwe.header !== undefined) {\n        result.unprotectedHeader = jwe.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key: k };\n    }\n    return result;\n}\n","import { decode as decodeBase64URL } from '../util/base64url.js';\nimport { fromSPKI, fromPKCS8, fromX509 } from '../lib/asn1.js';\nimport toCryptoKey from '../lib/jwk_to_key.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nexport async function importSPKI(spki, alg, options) {\n    if (typeof spki !== 'string' || spki.indexOf('-----BEGIN PUBLIC KEY-----') !== 0) {\n        throw new TypeError('\"spki\" must be SPKI formatted string');\n    }\n    return fromSPKI(spki, alg, options);\n}\nexport async function importX509(x509, alg, options) {\n    if (typeof x509 !== 'string' || x509.indexOf('-----BEGIN CERTIFICATE-----') !== 0) {\n        throw new TypeError('\"x509\" must be X.509 formatted string');\n    }\n    return fromX509(x509, alg, options);\n}\nexport async function importPKCS8(pkcs8, alg, options) {\n    if (typeof pkcs8 !== 'string' || pkcs8.indexOf('-----BEGIN PRIVATE KEY-----') !== 0) {\n        throw new TypeError('\"pkcs8\" must be PKCS#8 formatted string');\n    }\n    return fromPKCS8(pkcs8, alg, options);\n}\nexport async function importJWK(jwk, alg, options) {\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    let ext;\n    alg ??= jwk.alg;\n    ext ??= options?.extractable ?? jwk.ext;\n    switch (jwk.kty) {\n        case 'oct':\n            if (typeof jwk.k !== 'string' || !jwk.k) {\n                throw new TypeError('missing \"k\" (Key Value) Parameter value');\n            }\n            return decodeBase64URL(jwk.k);\n        case 'RSA':\n            if ('oth' in jwk && jwk.oth !== undefined) {\n                throw new JOSENotSupported('RSA JWK \"oth\" (Other Primes Info) Parameter value is not supported');\n            }\n        case 'EC':\n        case 'OKP':\n            return toCryptoKey({ ...jwk, alg, ext });\n        default:\n            throw new JOSENotSupported('Unsupported \"kty\" (Key Type) Parameter value');\n    }\n}\n","import { BerytusEncryptedPacket } from \"@berytus/types-extd\";\nimport { CipherBoxOptions, AbstractCipherBox } from \"./CipherBox\";\nimport { CompactEncrypt, compactDecrypt } from 'jose';\nimport parseDataURL from 'data-urls';\n\ninterface BaseJWEPacketCipherBoxOptions {\n    key: CryptoKey;\n    avoidReEncryption?: boolean;\n}\n\ninterface JWEPacketCipherBoxOptions extends BaseJWEPacketCipherBoxOptions,\n    Omit<CipherBoxOptions<BerytusEncryptedPacket, ArrayBuffer>, \"encrypt\" | \"decrypt\"> {}\n\nexport default class JWEPacketCipherBox extends AbstractCipherBox<BerytusEncryptedPacket, ArrayBuffer> {\n    #opts: BaseJWEPacketCipherBoxOptions;\n\n    constructor(opts: JWEPacketCipherBoxOptions) {\n        super({\n            ignoreProp: opts.ignoreProp,\n            ignoreValue: opts.ignoreValue,\n            encrypt: (d, p) => {\n                return this.#encrypt(d);\n            },\n            decrypt: (d, p) => {\n                return this.#decrypt(d, p);\n            },\n        });\n        this.#opts = {\n            key: opts.key,\n            avoidReEncryption: opts.avoidReEncryption !== undefined\n                ? opts.avoidReEncryption\n                : true\n        };\n    }\n\n    isCiphertextType(ciph: unknown): ciph is BerytusEncryptedPacket {\n        return typeof ciph === \"object\" &&\n            ciph !== null\n            && \"type\" in ciph\n            && ciph.type === \"JWE\"\n            && \"value\" in ciph\n            && typeof ciph.value === \"string\";\n    }\n\n    async #encrypt(datum: string | ArrayBufferLike | ArrayBufferView): Promise<BerytusEncryptedPacket> {\n        if (this.#opts.avoidReEncryption && this.isCiphertextType(datum)) {\n            console.warn(\"Avoiding re-encryption of existing JWE packet.\");\n            return datum;\n        }\n        let content: { mimeType: string; plaintext: Uint8Array; } | undefined = undefined;\n        if (typeof datum === \"string\") {\n            const dataURL = parseDataURL(datum);\n            if (dataURL) {\n                const charset = dataURL.mimeType.parameters.get(\"charset\");\n                if (charset && charset !== \"utf-8\") {\n                    throw new Error(\"Refusing to encrypt data URL with a charset other than utf-8\");\n                }\n                content = {\n                    mimeType: dataURL.mimeType.toString(),\n                    plaintext: dataURL.body\n                };\n            } else {\n                content = {\n                    plaintext: new TextEncoder().encode(datum),\n                    mimeType: \"text/plain;charset=utf-8\"\n                };\n            }\n        } else if (\n            datum instanceof ArrayBuffer ||\n            datum instanceof SharedArrayBuffer\n        ) {\n            content = {\n                plaintext: new Uint8Array(datum),\n                mimeType: \"application/octet-stream\"\n            };\n        } else if (ArrayBuffer.isView(datum)) {\n            content = {\n                plaintext: new Uint8Array(datum.buffer),\n                mimeType: \"application/octet-stream\"\n            };\n        }\n        if (! content) {\n            throw new Error(`Cannot encrypt datum of unsupported '${typeof datum}' type.`);\n        }\n        const op = new CompactEncrypt(\n            content.plaintext\n        );\n        const jweCompact = await op\n            .setProtectedHeader({\n                //alg: 'ECDH-ES',\n                alg: 'dir',\n                enc: 'A256GCM',\n                cty: content.mimeType,\n                typ: \"JOSE\"\n            })\n            .encrypt(this.#opts.key);\n        return {\n            type: \"JWE\",\n            value: jweCompact\n        };\n    }\n\n    async #decrypt(datum: BerytusEncryptedPacket, path?: string): Promise<ArrayBuffer> {\n        const { plaintext } = await compactDecrypt(datum.value, this.#opts.key);\n        if (plaintext.buffer instanceof ArrayBuffer) {\n            return plaintext.buffer;\n        }\n        throw new Error(\n            'jose returned plaintext of unsupported data type. Maybe a SharedArrayBuffer?'\n        );\n    }\n}","import type { BerytusEncryptedPacket, BerytusFieldValueUnion } from \"@berytus/types-extd\";\nimport { Channel } from \"@root/db/Channel\";\nimport { db } from \"@root/db\";\nimport JWEPacketCipherBox from \"@root/crypto/JWEPacketBox\";\n\nconst createJWEPacketCipherBox = async (channelOrId: Channel | string) => {\n    let channel;\n    if (typeof channelOrId === \"string\") {\n        channel = await db.channel.get(channelOrId);\n        if (! channel) {\n            throw new Error('Unable to find channel by id ' + channelOrId);\n        }\n    } else {\n        channel = channelOrId;\n    }\n    if (!channel.e2eeKey) {\n        throw new Error('Cannot create JWECipherBox, channel\\'s e2eeKey is unset.');\n    }\n    const box = new JWEPacketCipherBox({ key: channel.e2eeKey });\n    return box;\n}\n\nconst decryptPacket = async (\n    channelOrId: Channel | string,\n    packet: BerytusEncryptedPacket\n): Promise<ArrayBufferLike> => {\n    if (packet.type !== \"JWE\") {\n        throw new Error('Unrecognised packet type.');\n    }\n    const box = await createJWEPacketCipherBox(channelOrId);\n    const decr = await box.decrypt(packet);\n    if (decr === null) {\n        throw new Error('CipherBox refused to decrypt.');\n    }\n    return decr;\n}\n\nexport const toClearFieldValue = async <FVU extends BerytusFieldValueUnion>(\n    channelOrId: Channel | string,\n    fieldValue: FVU\n) => {\n    if (typeof fieldValue === \"string\") {\n        return fieldValue;\n    }\n    if (\n        typeof fieldValue === \"object\" &&\n        fieldValue !== null &&\n        \"type\" in fieldValue &&\n        \"value\" in fieldValue &&\n        fieldValue.type === \"JWE\" &&\n        typeof fieldValue.value === \"string\"\n    ) {\n        const decrypted = await decryptPacket(\n            channelOrId,\n            fieldValue\n        );\n        // TODO(berytus): This implementation needs documentation\n        // We stringified the returned, deciphered, buffer as\n        // all field who has a non-strucuted field values have string\n        // field value types. A Better approach is to return the proper\n        // decoding according to the field type.\n        return new TextDecoder().decode(new Uint8Array(decrypted));\n    }\n    const box = await createJWEPacketCipherBox(channelOrId);\n    // Note(berytus): All other fields that have structured values\n    // have inner values as ArrayBuffers, not strings.\n    const res = await box.decryptDictionary(fieldValue as Exclude<FVU, string | BerytusEncryptedPacket>);\n    return res;\n}","/**\n * browser.pageAction.openPopup() is a nuanced API.\n * - Cannot be called unless a user action status is set; fair.\n * - Would close a popup if it's open; making things difficult.\n *      - And, it's impossible to check whether the popup is already\n *        open without losing the user action status.\n * => Therefore, calling browser.pageAction.openPopup() whenever\n *    we want the user to resolve a request could potentially close\n *    an already open popup.\n *\n * In Berytus 0.1, I had implemented a WebExtension API for this purpose,\n * called openPageActionPopupIfNecessary (under browser.authrealm).\n * It had enabled extensions to open the popup, if necessary, only when\n * a request is pending and has not been resolved/reject yet. While this is\n * certainly not ideal to deploy for all extensions, it served as a remedy.\n *\n * In Berytus 0.2, I wrote the below code as a workaround without\n * relying on the introduction of a new WebExtensions API. Essentially,\n * the popup should send a message to the background script asking it\n * to resolve/reject the request. Here, the background script would\n * first hide the popup from the tab, ensuring that it is closed,\n * and it cannot be opened by the user, before resolving/rejecting the\n * request. Hence, whenever a new request comes from Berytus, the popup\n * is guaranteed to be closed, and browser.pageAction.openPopup() would\n * certainly open the popup. Sadly, this means that the popup page\n * should not directly call browser.berytus.(resolve/reject)Request.\n */\n\nimport { setPageActionUrlInTab } from \"./pageAction-utils\";\n\ninterface OpenOptions {\n    requestId: string;\n    tabId: number;\n}\n\nexport const openPageActionPopupIfNecessary = async ({ requestId, tabId }: OpenOptions, absolutePath: string) => {\n    browser.pageAction.show(tabId);\n    const prom0 = associateTabIdWithRequest(requestId, tabId);\n    const prom1 = setPageActionUrlInTab(tabId, absolutePath, false);\n    const prom2 = (browser.pageAction as any).openPopup();\n    await prom0;\n    await prom1;\n    await prom2;\n}\n\nconst tabDictKey = (requestId: string) => `tabdict:${requestId}`;\n\nconst associateTabIdWithRequest = async (requestId: string, tabId: number) => {\n    await browser.storage.session.set({\n        [tabDictKey(requestId)]: tabId\n    });\n}\n\nconst getAssociatedTabId = async (requestId: string): Promise<number | undefined> => {\n    const key = tabDictKey(requestId);\n    const res = await browser.storage.session.get(key);\n    return res[key];\n}\n\nconst deleteTabIdAssociation = async (requestId: string): Promise<void> => {\n    await browser.storage.session.remove(tabDictKey(requestId));\n}\n\ntype MessageRequests = {\n    type: \"resolveRequest\" | \"rejectRequest\"\n    data: {\n        requestId: string;\n        value: unknown\n    }\n} /* | ... */\n\nbrowser.runtime.onMessage.addListener(\n    function(request: MessageRequests, sender, sendResponse) {\n        console.log(\"onMessage:\", request, sender)\n        if (sender.id !== \"secretstar@alichry\") {\n            return;\n        }\n        const hide = async () => {\n            const tabId = await getAssociatedTabId(request.data.requestId);\n            if (! tabId) {\n                console.warn(\"secretstar: can't hide popup, tabId undefined.\");\n                return;\n            }\n            try {\n                await Promise.resolve(browser.pageAction.hide(tabId));\n            } catch (e) {\n                console.warn(\"secretstar: error hiding popup:\");\n                console.error(e)\n            } finally {\n                await deleteTabIdAssociation(request.data.requestId);\n            }\n        }\n        const send = async (type: \"resolve\" | \"reject\") => {\n            try {\n                await (\n                    type === \"resolve\"\n                        ? browser.berytus.resolveRequest(request.data.requestId, request.data.value)\n                        : browser.berytus.rejectRequest(request.data.requestId, request.data.value)\n                );\n                console.debug(\"secretstar@alichry: settled request\", request.data.requestId);\n            } catch (e) {\n                console.warn(\"secretstar: error resolving request:\");\n                console.error(e);\n            }\n        }\n        if (request.type === \"resolveRequest\") {\n            hide().then(() => send(\"resolve\"));\n            sendResponse();\n            return;\n        }\n        if (request.type === \"rejectRequest\") {\n            hide().then(() => send(\"reject\"));\n            sendResponse();\n            return;\n        }\n    }\n);","import { PAGECONTEXT_POPUP } from '@root/pagecontext';\nimport { url, paths } from './paths';\n\nexport function setPageActionUrlInTab(\n    tabIdWherePageActionIs: number,\n    path: string,\n    relative = true\n) {\n    return browser.pageAction.setPopup({\n        tabId: tabIdWherePageActionIs,\n        popup: relative\n            ? url(path, PAGECONTEXT_POPUP)\n            : path\n    });\n}\n\nexport function setPageActionToLoadingPage(tabIdWherePageActionIs: number) {\n    return setPageActionUrlInTab(tabIdWherePageActionIs, paths.loading);\n}\n\n/**\n * browser.pageAction.openPopup() has several limitations:\n * 1. It only opens up the page action popup in the selected tab.\n * 2. If the popup is already open, it closes it. Making it difficult\n * to open the popup if necessary.\n * 3. If we wish to highlight the relevant tab where the popup should open,\n * we lose the `user action` status since doing so is asynchronous, and\n * we cannot open the popup unless the correct tab is highlighted.\n * We have created browser.authRealm.openPageActionPopupIfNecessary\n * to open the popup in the relevant tab (the tab belonging to the authRealm\n * session).\n * @param tabIdWherePageActionIs\n */\nexport async function openPageActionInTabId(tabIdWherePageActionIs: number) {\n    const tab = await browser.tabs.get(tabIdWherePageActionIs);\n    await browser.tabs.highlight({ windowId: tab.windowId, tabs: [tab.index] });\n    // Firefox only.\n    (browser.pageAction as any).openPopup();\n}","import { Session, db } from \"@root/db/db\";\nimport { MODE, MODE_EXTERNAL_WINDOW } from \"../env\";\nimport { openWindow } from \"./window-utils\";\nimport { getSessionRecord, openWindowOrRedirectTab } from \"./session-utils\";\nimport { url } from \"./paths\";\nimport { randomPassword } from \"@root/utils\";\nimport { PAGECONTEXT_POPUP } from \"@root/pagecontext\";\nimport { ab2base64, base64ToArrayBuffer } from \"@root/key-utils\";\nimport { Channel, isChannelE2EReady } from \"@root/db/Channel\";\nimport { ERejectionCode, EOperationType, EMetadataStatus, RequestType } from \"@berytus/enums\";\nimport type { KeyAgreementParameters, PreliminaryRequestContext } from \"@berytus/types\";\nimport { userAttributesLabels } from \"@root/ui/utils/userAttributesLabels\";\nimport { toClearFieldValue } from \"./field-utils\";\nimport { openPageActionPopupIfNecessary } from \"./pageAction-popup-fix\";\n\nconsole.debug(\"secretstar(bg): loaded\");\n\nconst plainContext = (context: PreliminaryRequestContext) => {\n    return {\n        ...context,\n        response: undefined,\n    }\n}\n\nasync function printSessionForSimiluationPrep(\n    phase: RequestType | `${RequestType}:${string}`,\n    sessionId: string\n) {\n    // const session = await getSessionRecord(sessionId);\n    // console.log('simulate:', JSON.stringify({\n    //     phase, session\n    // }, null, 2));\n}\n\nasync function printSessionWithChannelForSimulationPrep(\n    phase: RequestType,\n    sessionId: string\n) {\n    // const session = await getSessionRecord(sessionId);\n    // const channel = await db.channel.get(session.channel.id);\n    // if (! channel) {\n    //     throw new Error('Cant find channel to print simulation prep');\n    // }\n    // console.log('simulate', phase, JSON.stringify({\n    //     session,\n    //     channel\n    // }, null, 2));\n}\n\nasync function showUi(\n    context: PreliminaryRequestContext,\n    sessionId: string,\n    relativePath: string,\n    sessionRecordPromise?: ReturnType<typeof getSessionRecord>\n) {\n    if (MODE === MODE_EXTERNAL_WINDOW) {\n        const { tabId } = await (sessionRecordPromise || getSessionRecord(sessionId));\n        if (! tabId) {\n            console.error('Secret* is in External Mode but session record had no tab id');\n            browser.berytus.rejectRequest(context.request.id, ERejectionCode.GeneralError);\n            return;\n        }\n        await openWindowOrRedirectTab(sessionId, tabId, relativePath);\n        return;\n    }\n    openPageActionPopupIfNecessary(\n        { requestId: context.request.id, tabId: context.document.id },\n        url(relativePath, PAGECONTEXT_POPUP)\n    );\n}\n\nbrowser.berytus.registerRequestHandler({\n    manager: {\n        async getSigningKey(context, args): Promise<void> {\n            const keys = await db.signingKeys.toArray();\n            if (keys.length > 0) {\n                context.response.resolve(keys[0].public);\n                return;\n            }\n            const keyPair = await window.crypto.subtle.generateKey(\n                \"Ed25519\",\n                true,\n                ['sign', 'verify']\n            ) as CryptoKeyPair;\n            const publicKey = ab2base64(\n                await window.crypto.subtle.exportKey(\"spki\", keyPair.publicKey)\n            );\n            await db.signingKeys.add({\n                public: publicKey,\n                private: await window.crypto.subtle.exportKey(\"pkcs8\", keyPair.privateKey)\n            })\n            context.response.resolve(publicKey);\n        },\n        async getCredentialsMetadata(context, args): Promise<void> {\n            const accounts = db.findCorrespondingAccounts(\n                args.webAppActor,\n                args.accountConstraints.category,\n                args.accountConstraints.schemaVersion\n            );\n            context.response.resolve(await accounts.count());\n        },\n    },\n    channel: {\n        async createChannel(context, args) {\n            const key = await db.signingKeys.get(args.channel.scmActor.ed25519Key);\n            if (! key) {\n                throw new Error(\n                    'Unable to find signing key '\n                    + args.channel.scmActor.ed25519Key\n                );\n            }\n            await db.channel.add({\n                id: args.channel.id,\n                scmEd25519: key,\n                webAppEd25519Pub: \"ed25519Key\" in args.channel.webAppActor\n                    ? args.channel.webAppActor.ed25519Key\n                    : undefined,\n                e2eeActvie: false\n            });\n            context.response.resolve();\n        },\n        async generateX25519Key(context) {\n            const channel = await db.channel.get(context.channel.id);\n            if (! channel) {\n                throw new Error('Unable to find channel by id ' + context.channel.id);\n            }\n            if (channel.scmX25519) {\n                throw new Error(\"Expecting our scm x25519 key to be unset; got otherwise.\");\n            }\n            const scmX25519Key = await window.crypto.subtle.generateKey(\n                \"X25519\",\n                true,\n                [\"deriveKey\"],\n            ) as CryptoKeyPair;\n            const b64Spki = ab2base64(\n                await window.crypto.subtle.exportKey(\"spki\", scmX25519Key.publicKey)\n            );\n            const change: Pick<Channel, 'scmX25519'> = {\n                scmX25519: {\n                    private: await window.crypto.subtle.exportKey(\"pkcs8\", scmX25519Key.privateKey),\n                    public: b64Spki\n                }\n            };\n            await db.channel.update(channel, change);\n            context.response.resolve({\n                public: b64Spki\n            });\n        },\n        async verifySignedKeyExchangeParameters(context, args): Promise<void> {\n            const channel = await db.channel.get(context.channel.id);\n            if (! channel) {\n                throw new Error('Unable to find channel by id ' + context.channel.id);\n            }\n            if (! channel.scmEd25519) {\n                throw new Error('Expecting our scm Ed25519 to be set; got otherwise.');\n            }\n            if (! channel.scmX25519) {\n                throw new Error('Expecting our scm X25519 to be set; got otherwise.');\n            }\n            if (channel.keyAgreement) {\n                throw new Error('Expecting key agreement parameters to be unset; got otherwise.');\n            }\n            if (! channel.webAppEd25519Pub) {\n                throw new Error('Expecting channel to have a crypto web app actor set; got otherwise.');\n            }\n            const parameters: KeyAgreementParameters = (() => {\n                const obj = JSON.parse(args.canonicalJson);\n                obj.session.fingerprint.salt =\n                    new Uint8Array(obj.session.fingerprint.salt).buffer;\n                obj.session.fingerprint.value =\n                    new Uint8Array(obj.session.fingerprint.value).buffer;\n                obj.derivation.salt =\n                    new Uint8Array(obj.derivation.salt).buffer;\n                obj.derivation.info =\n                    new Uint8Array(obj.derivation.info).buffer;\n                return obj;\n            })();\n            if (parameters.authentication.public.scm !== channel.scmEd25519.public) {\n                throw new Error(\"Crypto scm actor mismatch\");\n            }\n            if (parameters.authentication.public.webApp !== channel.webAppEd25519Pub) {\n                throw new Error(\"Crypto web app actor mismatch\");\n            }\n            if (parameters.exchange.public.scm !== channel.scmX25519.public) {\n\n                throw new Error(\"Scm X25519 mismatch\");\n            }\n            const webAppKey = await crypto.subtle.importKey(\n                'spki',\n                base64ToArrayBuffer(parameters.authentication.public.webApp),\n                'Ed25519',\n                false,\n                ['verify']\n            );\n            const data = new TextEncoder().encode(args.canonicalJson);\n            const valid = await crypto.subtle.verify(\n                'Ed25519',\n                webAppKey,\n                args.webAppSignature,\n                data\n            );\n            if (! valid) {\n                context.response.reject(ERejectionCode.GeneralError);\n                return;\n            }\n            const change: Pick<Channel, 'keyAgreement'> = {\n                keyAgreement: {\n                    parameters,\n                    signatures: {\n                        canonicalJson: args.canonicalJson,\n                        webAppSignature: args.webAppSignature\n                    },\n                }\n            };\n            await db.channel.update(channel, change);\n            context.response.resolve();\n        },\n        async signKeyExchangeParameters(context, args) {\n            const channel = await db.channel.get(context.channel.id);\n            if (! channel) {\n                throw new Error('Unable to find channel by id ' + context.channel.id);\n            }\n            if (! channel.scmEd25519) {\n                throw new Error('Expecting our scm ed25519Key to have been genenrated');\n            }\n            if (! channel.scmX25519) {\n                throw new Error('Expecting our scm scmX25519 to have been genenrated');\n            }\n            if (! channel.webAppEd25519Pub) {\n                throw new Error('Expecting web app ed25519 to have been given previously');\n            }\n            if (! channel.keyAgreement) {\n                throw new Error('Expecting key agreement parameters to be set; got otherwise.');\n            }\n            if (channel.keyAgreement.signatures.scmSignature) {\n                throw new Error('Expecting our scm signature to be unset; got otherwise.');\n            }\n            if (channel.keyAgreement.signatures.canonicalJson !== args.canonicalJson) {\n                throw new Error('Expecting our stored key agreement JSON to match what was provided; got otherwise.');\n            }\n            const ed25519Key = await window.crypto.subtle.importKey(\n                'pkcs8',\n                channel.scmEd25519.private,\n                \"Ed25519\",\n                false,\n                ['sign']\n            );\n            const scmSignature = await window.crypto.subtle.sign(\n                \"Ed25519\",\n                ed25519Key,\n                new TextEncoder().encode(args.canonicalJson)\n            );\n            await db.channel.update(channel, {\n                'keyAgreement.signatures.scmSignature': scmSignature\n            });\n            context.response.resolve({\n                scmSignature\n            });\n        },\n        async enableEndToEndEncryption(context): Promise<void> {\n            // TODO(berytus): It seems showUi depends on a session id\n            // (the operation id) retrieved from approveOperation.\n            // Once we refactor showUi to accept a channel id instead,\n            // we can consider showing a UI fo enableE2EE\n            // let window: chrome.windows.Window | undefined = undefined;\n            // const relativePath = `enable-e2e/${context.channel.id}/${context.request.id}/${context.request.type}`;\n            // if (MODE === MODE_EXTERNAL_WINDOW) {\n            //     window = await openWindow(relativePath);\n            // } else {\n            //     openPageActionPopupIfNecessary(\n            //         { requestId: context.request.id, tabId: context.document.id },\n            //         url(relativePath, PAGECONTEXT_POPUP)\n            //     );\n            // }\n            const channel = await db.channel.get(context.channel.id);\n            if (! channel) {\n                throw new Error('Expecting channel to be created; got otherwise.');\n            }\n            if (! isChannelE2EReady(channel)) {\n                throw new Error('Expecting channel to be E2E ready; got otherwise.');\n            }\n            const webAppKey = await crypto.subtle.importKey(\n                'spki',\n                // @ts-ignore: NOTE(berytus): Firefox only\n                Uint8Array.fromBase64(channel.keyAgreement.parameters.exchange.public.webApp),\n                'X25519',\n                false,\n                []\n            );\n            const scmKey = await window.crypto.subtle.importKey(\n                'pkcs8',\n                channel.scmX25519.private,\n                \"X25519\",\n                false,\n                ['deriveKey']\n            );\n            const sharedKey = await crypto.subtle.deriveKey(\n                {\n                    name: \"X25519\",\n                    public: webAppKey\n                },\n                scmKey,\n                'HKDF',\n                false,\n                ['deriveKey']\n            );\n            const encryptionKey = await crypto.subtle.deriveKey(\n                channel.keyAgreement.parameters.derivation,\n                sharedKey,\n                channel.keyAgreement.parameters.generation,\n                true,\n                ['encrypt', 'decrypt']\n            );\n            const change: Pick<Channel, 'e2eeActvie' | 'e2eeKey'> = {\n                e2eeActvie: true,\n                e2eeKey: encryptionKey\n            };\n            await db.channel.update(channel.id, change);\n            context.response.resolve();\n        },\n        closeChannel: function (context): void {\n            context.response.resolve();\n        }\n    },\n    login: {\n        async approveOperation(context, args): Promise<void> {\n            let window: chrome.windows.Window | undefined = undefined;\n            const relativePath = `intent/${args.operation.id}/0`;\n            if (MODE === MODE_EXTERNAL_WINDOW) {\n                window = await openWindow(relativePath);\n            } else {\n                openPageActionPopupIfNecessary(\n                    { requestId: context.request.id, tabId: context.document.id },\n                    url(relativePath, PAGECONTEXT_POPUP)\n                );\n            }\n            await db.sessions.add({\n                id: args.operation.id,\n                requests: [context.request],\n                channel: context.channel,\n                operation: args.operation,\n                context: plainContext(context),\n                tabId: window?.tabs ? window.tabs[0].id : undefined,\n                metadata: {\n                    version: context.channel.constraints.account?.schemaVersion || 0,\n                    status: EMetadataStatus.Pending,\n                    category: context.channel.constraints.account?.category || \"\",\n                    changePassUrl: \"\"\n                },\n                version: 1\n            });\n            printSessionForSimiluationPrep('Login_ApproveOperation', args.operation.id);\n        },\n        async closeOperation(context): Promise<void> {\n            const accountId = randomPassword();\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n            if (context.operation.type === EOperationType.Registration) {\n                const relativePath = `save/${sessionId}/${accountId}`;\n                await showUi(context, sessionId, relativePath, sessionRecordPromise);\n                const sessionRecord = await sessionRecordPromise;\n                const newAccountId = await db.accounts.add({\n                    id: accountId,\n                    date: new Date().toISOString(),\n                    registrationUri: context.document.uri,\n                    fields: sessionRecord.fields || [],\n                    webAppActor: context.channel.webAppActor,\n                    userAttributes: sessionRecord.userAttributes || {},\n                    metadata: sessionRecord.metadata\n                });\n                const change: Pick<Session, 'createdAccountId' | 'requests' | 'version' | 'closed'> = {\n                    createdAccountId: newAccountId as string, // BRTTODO: Perhaps change ids from strings to IndexableType for all references.\n                    requests: sessionRecord.requests.concat(context.request),\n                    version: sessionRecord.version + 1,\n                    closed: true\n                };\n                await db.sessions.update(sessionId, change);\n            } else {\n                const relativePath = `auth/${sessionId}/finished`;\n                await showUi(context, sessionId, relativePath, sessionRecordPromise);\n\n                const sessionRecord = await sessionRecordPromise;\n                const change: Pick<Session, 'requests' | 'version' | 'closed'> = {\n                    requests: sessionRecord.requests.concat(context.request),\n                    version: sessionRecord.version + 1,\n                    closed: true\n                };\n                await db.sessions.update(sessionId, change);\n            }\n            printSessionForSimiluationPrep(\"Login_CloseOperation\", sessionId);\n        },\n        async getRecordMetadata(context): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecord = await getSessionRecord(sessionId);\n            if (context.operation.type === EOperationType.Registration) {\n                context.response.resolve(sessionRecord.metadata);\n                return;\n            }\n            const account = await db.accounts.get(sessionRecord.selectedAccountId!);\n            if (! account) {\n                throw new Error('unable to get account record, the account id does not exist.');\n            }\n            context.response.resolve(account.metadata);\n        },\n        async updateMetadata(context, args): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecord = await getSessionRecord(sessionId);\n            const change: Pick<Session, 'metadata' | 'version'> = {\n                metadata: {\n                    ...sessionRecord.metadata,\n                    ...args.metadata\n                },\n                version: sessionRecord.version + 1\n            };\n            await db.sessions.update(sessionRecord, change);\n            context.response.resolve();\n        }\n    },\n    accountCreation: {\n        async approveTransitionToAuthOp(context, args): Promise<void> {\n            const currSessionId = context.operation.id;\n            const nextSessionId = args.newAuthOp.id;\n            const currSessionRecordPromise = getSessionRecord(currSessionId);\n            const relativePath = `transition-to-auth-op/${currSessionId}/${nextSessionId}`;\n            await showUi(context, currSessionId, relativePath, currSessionRecordPromise);\n\n            const currSession = await currSessionRecordPromise;\n            if (! currSession.createdAccountId) {\n                throw new Error(\"Expecting createdAccountId to be set when transitioning!\");\n            }\n            const account = await db.accounts.get(currSession.createdAccountId);\n            if (! account) {\n                throw new Error(\"Expecting account to be created before transitioning.\");\n            }\n            await db.sessions.add({\n                id: nextSessionId,\n                channel: context.channel,\n                operation: args.newAuthOp,\n                requests: [context.request],\n                transitionedFromSessionId: currSessionId,\n                context: plainContext(context),\n                tabId: currSession.tabId, // window tab id. not the content page tab id.\n                selectedAccountId: currSession.createdAccountId,\n                metadata: account.metadata,\n                version: 1,\n            });\n            printSessionForSimiluationPrep('AccountCreation_ApproveTransitionToAuthOp', nextSessionId);\n        },\n        async getUserAttributes(context): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n            {/* BRTTODO: 23/1/2024 Remove afterVersion -- this seems to be problematic. We should refactor how we process requests to use request id instead */}\n            const relativePath = `get-user-attributes/${sessionId}/1`;\n            await showUi(context, sessionId, relativePath, sessionRecordPromise);\n            const sessionRecord = await sessionRecordPromise;\n            const requiredUserAttributes: Partial<Record<keyof typeof userAttributesLabels, boolean>> = {};\n            (Object.keys(userAttributesLabels) as Array<keyof typeof userAttributesLabels>)\n                .map(key => {\n                    requiredUserAttributes[key] = false;\n                });\n            context.operation.requestedUserAttributes.forEach(({ id, required }) => {\n                requiredUserAttributes[id] = required;\n            });\n            const change: Pick<Session, 'requests' | 'requiredUserAttributes' | 'version'> = {\n                requiredUserAttributes: requiredUserAttributes as Record<keyof typeof userAttributesLabels, boolean>,\n                requests: sessionRecord.requests.concat(context.request),\n                version: 2\n            };\n            await db.sessions.update(sessionId, change);\n            printSessionForSimiluationPrep('AccountCreation_GetUserAttributes', sessionId);\n        },\n        updateUserAttributes(context, args): void {\n            throw new Error(\"Function not implemented.\");\n        },\n        async addField(context, args): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n            if (args.field.value === null) {\n                const relativePath = `create-field/${sessionId}/${args.field.id}`;\n                await showUi(context, sessionId, relativePath, sessionRecordPromise);\n                const sessionRecord = await sessionRecordPromise;\n                if (\n                    sessionRecord.createFieldOptions &&\n                    sessionRecord.createFieldOptions.find(o => o.id === args.field.id)\n                ) {\n                    browser.berytus.rejectRequest(context.request.id, ERejectionCode.GeneralError);\n                    return;\n                }\n                const change: Pick<Session, 'requests' | 'createFieldOptions' | 'version'> = {\n                    requests: sessionRecord.requests.concat(context.request),\n                    createFieldOptions: (sessionRecord.createFieldOptions || []).concat({\n                        id: args.field.id,\n                        type: args.field.type,\n                        options: args.field.options\n                    }),\n                    version: sessionRecord.version + 1\n                };\n                await db.sessions.update(sessionId, change);\n                printSessionForSimiluationPrep('AccountCreation_AddField', sessionId);\n                return;\n            }\n            const relativePath = `put-field/${sessionId}/${args.field.id}`;\n            await showUi(context, sessionId, relativePath, sessionRecordPromise);\n            const sessionRecord = await sessionRecordPromise;\n            if (\n                sessionRecord.putFields?.find(o => o.id === args.field.id)\n            ) {\n                browser.berytus.rejectRequest(context.request.id, ERejectionCode.GeneralError);\n                return;\n            }\n            if (args.field.type === \"Key\" || args.field.type === \"SecurePassword\") {\n                console.warn(\"PutField of type Key or SecurePassword are not allowed.\");\n                // TODO(berytus): Implement a logical validator in ValidatedRequestHandler\n                browser.berytus.rejectRequest(context.request.id, ERejectionCode.GeneralError);\n                return;\n            }\n            const clearValue = await toClearFieldValue(\n                context.channel.id,\n                args.field.value\n            );\n            const change: Pick<Session, 'requests' | 'putFields' | 'version'> = {\n                requests: sessionRecord.requests.concat(context.request),\n                putFields: (sessionRecord.putFields || []).concat({\n                    id: args.field.id,\n                    type: args.field.type,\n                    options: args.field.options,\n                    value: typeof clearValue === \"string\"\n                        ? clearValue\n                        : ab2base64(clearValue.privateKey)\n                }),\n                version: sessionRecord.version + 1\n            };\n            await db.sessions.update(sessionId, change);\n            printSessionForSimiluationPrep('AccountCreation_AddField:Put', sessionId);\n        },\n        async rejectFieldValue(context, args): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n\n            const relativePath = `create-field/${sessionId}/${args.fieldId}/rejected`;\n            await showUi(context, sessionId, relativePath, sessionRecordPromise);\n            const sessionRecord = await sessionRecordPromise;\n            const field = sessionRecord.fields?.find(f => f.id === args.fieldId);\n            const rejectedFieldValueIndex = sessionRecord.rejectedFieldValues?.findIndex(f => f.fieldId === args.fieldId);\n            if (\n                !sessionRecord.createFieldOptions?.find(o => o.id === args.fieldId) ||\n                !field\n            ) {\n                browser.berytus.rejectRequest(context.request.id, ERejectionCode.GeneralError);\n                return;\n            }\n            if (\n                typeof args.optionalNewValue === \"object\" && (\n                    \"publicKey\" in args.optionalNewValue ||\n                    \"salt\" in args.optionalNewValue\n                )\n            ) {\n                console.warn(\"RejectField of type Key or SecurePassword are not allowed.\");\n                // TODO(berytus): Implement a logical validator in ValidatedRequestHandler\n                browser.berytus.rejectRequest(context.request.id, ERejectionCode.GeneralError);\n                return;\n            }\n            let change: Pick<Session, 'requests' | 'rejectedFieldValues' | 'version'>;\n            let sameValue = false;\n            let value = undefined;\n            do {\n                if (! args.optionalNewValue) {\n                    break;\n                }\n                const newValue = await toClearFieldValue(\n                    context.channel.id,\n                    args.optionalNewValue\n                );\n                if (typeof newValue === \"string\") {\n                    value = newValue;\n                    sameValue = value === field.value;\n                    break;\n                }\n                if (newValue.privateKey instanceof ArrayBuffer) {\n                    value = ab2base64(newValue.privateKey);\n                    sameValue = value === field.value;\n                    break;\n                }\n            } while (false);\n            if (sameValue) {\n                // BRTTODO: A web app can reject a field value while dictating its new\n                // value the same as the previous one (the one being rejected). This\n                // should not happen, but since the AuthRealm API does not\n                // store field values, it cannot validate whether the optionalNewValue\n                // is different than the rejected one (or previously rejected).\n                // So for now, we throw an error here.\n                console.error('BRTTODO: WebApp rejected field value with an new value that equals the rejected one. Genuis.');\n                throw new Error('Unable to rejectRegistrationField. WebApp rejected the field value with an invalid new value.');\n            }\n            if (rejectedFieldValueIndex === undefined || rejectedFieldValueIndex === -1) {\n                change = {\n                    requests: sessionRecord.requests.concat(context.request),\n                    rejectedFieldValues: (sessionRecord.rejectedFieldValues || []).concat({\n                        fieldId: args.fieldId,\n                        code: args.reason.code,\n                        webAppDictatedValue: value,\n                        previousValues: [field.value]\n                    }),\n                    version: sessionRecord.version + 1\n                };\n            } else {\n                if (sessionRecord.rejectedFieldValues![rejectedFieldValueIndex].webAppDictatedValue) {\n                    throw new Error('This field has been rejected and overriden previously!');\n                }\n                sessionRecord.rejectedFieldValues![rejectedFieldValueIndex].webAppDictatedValue =\n                    value;\n                sessionRecord.rejectedFieldValues![rejectedFieldValueIndex].previousValues.push(\n                    field.value\n                );\n                change = {\n                    requests: sessionRecord.requests.concat(context.request),\n                    rejectedFieldValues: sessionRecord.rejectedFieldValues!,\n                    version: sessionRecord.version + 1\n                };\n            }\n            await db.sessions.update(sessionId, change);\n            printSessionForSimiluationPrep('AccountCreation_RejectFieldValue', sessionId);\n        }\n    },\n    accountAuthentication: {\n        async approveChallengeRequest(context, args): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n            const challengeId = args.challenge.id;\n            const relativePath = `auth/${sessionId}/challenge/${challengeId}/approve`;\n\n            await showUi(context, sessionId, relativePath, sessionRecordPromise);\n            const sessionRecord = await sessionRecordPromise;\n            const change: Pick<Session, 'challenges' | 'requests' | 'version'> = {\n                challenges: {\n                    ...sessionRecord.challenges,\n                    [challengeId]: {\n                        ...args.challenge,\n                        messages: {}\n                    }\n                },\n                requests: sessionRecord.requests.concat(context.request),\n                version: sessionRecord.version + 1\n            };\n\n            await db.sessions.update(sessionRecord, change);\n            printSessionForSimiluationPrep('AccountAuthentication_ApproveChallengeRequest', sessionId);\n        },\n        async abortChallenge(context, args): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n            const challengeId = args.challenge.id;\n            const relativePath = `auth/${sessionId}/challenge/${challengeId}/aborted`;\n\n            await showUi(context, sessionId, relativePath, sessionRecordPromise);\n            const sessionRecord = await sessionRecordPromise;\n            await db.sessions.update(sessionRecord, {\n                requests: sessionRecord.requests.concat(context.request),\n                [`challenges.${challengeId}.closed`]: true,\n                [`challenges.${challengeId}.abortionReasonCode`]: args.reason\n            });\n            printSessionForSimiluationPrep('AccountAuthentication_AbortChallenge', sessionId);\n        },\n        async closeChallenge(context, args): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n            const challengeId = args.challenge.id;\n            const relativePath = `auth/${sessionId}/challenge/${challengeId}/sealed`;\n\n            await showUi(context, sessionId, relativePath, sessionRecordPromise);\n            const sessionRecord = await sessionRecordPromise;\n            await db.sessions.update(sessionRecord, {\n                requests: sessionRecord.requests.concat(context.request),\n                [`challenges.${challengeId}.closed`]: true\n            });\n            printSessionForSimiluationPrep('AccountAuthentication_CloseChallenge', sessionId);\n        },\n        async respondToChallengeMessage(context, args): Promise<void> {\n            const sessionId = context.operation.id;\n            const sessionRecordPromise = getSessionRecord(sessionId);\n            const challengeId = args.challenge.id;\n            const messageId = args.name;\n            const relativePath = `auth/${sessionId}/challenge/${challengeId}/message/${messageId}`;\n\n            await showUi(context, sessionId, relativePath, sessionRecordPromise);\n            const sessionRecord = await sessionRecordPromise;\n            let payload;\n            if (typeof args.payload === \"string\") {\n                payload = args.payload;\n            } else if (args.payload instanceof ArrayBuffer) {\n                payload = ab2base64(args.payload);\n            } else if (ArrayBuffer.isView(args.payload)) {\n                console.warn(\"TODO(berytus): Remove ArrayBufferView support\");\n                context.response.reject(ERejectionCode.GeneralError);\n                return;\n            } else if (Array.isArray(args.payload)) {\n                payload = args.payload;\n            } else {\n                console.warn(\"TODO(berytus): Support Encrypted Packet\");\n                context.response.reject(ERejectionCode.GeneralError);\n                return;\n            }\n            await db.sessions.update(sessionRecord, {\n                [`challenges.${challengeId}.messages.${messageId}`]: {\n                    name: messageId,\n                    payload\n                },\n                requests: sessionRecord.requests.concat(context.request),\n                version: sessionRecord.version + 1\n            });\n            printSessionForSimiluationPrep('AccountAuthentication_RespondToChallengeMessage', sessionId);\n        }\n    }\n});","import { KeyAgreementParameters } from \"@berytus/types\";\n\nexport interface Channel {\n    id: string;\n    scmEd25519?: {\n        private: ArrayBuffer; // raw pkcs8\n        public: string; // base64 spki\n    };\n    scmX25519?: {\n        private: ArrayBuffer; // raw pkcs8\n        public: string; // base64 spki\n    };\n    webAppEd25519Pub?: string;\n    keyAgreement?: {\n        parameters: KeyAgreementParameters;\n        signatures: {\n            canonicalJson: string;\n            webAppSignature: ArrayBuffer;\n            scmSignature?: ArrayBuffer;\n        };\n    };\n    e2eeActvie: boolean;\n    e2eeKey?: CryptoKey;\n}\n\ninterface E2EReadyChannel extends Channel {\n    scmEd25519: NonNullable<Channel['scmEd25519']>;\n    scmX25519: NonNullable<Channel['scmX25519']>;\n    webAppEd25519Pub: NonNullable<Channel['webAppEd25519Pub']>;\n    keyAgreement: NonNullable<Channel['keyAgreement']>;\n}\n\nexport interface E2EChannel extends E2EReadyChannel {\n    e2eeActvie: true;\n    e2eeKey: CryptoKey;\n}\n\nexport function isChannelE2EReady(channel: Channel): channel is E2EReadyChannel {\n    return !!(channel.scmEd25519 &&\n        channel.scmX25519 &&\n        channel.webAppEd25519Pub &&\n        channel.keyAgreement &&\n        channel.keyAgreement.signatures.webAppSignature &&\n        channel.keyAgreement.signatures.scmSignature);\n}","import{ generate } from \"do_username\";\nimport { EBerytusFieldType } from \"@berytus/enums\";\n\nexport const randomPassword = () => {\n    const bytes = new Uint8Array(16);\n    window.crypto.getRandomValues(bytes);\n    let blocks: Array<string> = [];\n    const lang = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9']\n    for (let i = 0; i < bytes.length; i++) {\n        const num = bytes[i];\n        blocks[i % 4] = (blocks[i % 4] || \"\") +\n            lang[num % lang.length];\n    }\n    return blocks.join('-');\n}\n\nexport const randomUsername = () => {\n    const suffix = randomPassword().substring(0, 4);\n    return generate(8) + suffix;\n}\n\nexport type BgColor = `bg-${string}`;\n\n\nexport async function randomFieldValue(fieldType: typeof EBerytusFieldType[keyof typeof EBerytusFieldType]): Promise<string | ArrayBuffer> {\n    switch (fieldType) {\n        case EBerytusFieldType.Identity:\n            return randomUsername();\n        case EBerytusFieldType.Password:\n        case EBerytusFieldType.SecurePassword:\n            return randomPassword();\n        case EBerytusFieldType.Key:\n            const genKey = await crypto.subtle.generateKey(\n                {\n                    name: \"RSA-OAEP\",\n                    modulusLength: 4096,\n                    publicExponent: new Uint8Array([1, 0, 1]),\n                    hash: \"SHA-256\",\n                },\n                true,\n                [\"encrypt\", \"decrypt\"]\n            );\n            const privKeyBuf = await window.crypto.subtle.exportKey(\"pkcs8\", genKey.privateKey);\n            return privKeyBuf;\n        default:\n            throw new Error('error: generateStr received an invalid fieldType ' + EBerytusFieldType[fieldType]);\n    }\n}\n\nexport const notEmpty = (str: string | undefined): boolean => {\n    if (str === undefined) {\n        return false;\n    }\n    return str.length > 0;\n}\n\nexport const scrollTopSmooth = () => {\n    window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n    });\n};\n\nexport const concatErrorMessages = (...args: Array<Error | undefined>): string => {\n    let res: Array<string> = [];\n    for (let i = 0; i < args.length; i++) {\n        const err = args[i];\n        if (! err) {\n            continue;\n        }\n        res.push(err.message);\n    }\n    return res.join(' && ');\n}\n\nexport function atLeastOneErrorSet(errors?: Array<Error | undefined>): boolean {\n    if (! errors) {\n        return false;\n    }\n    for (let i = 0; i < errors.length; i++) {\n        if (errors[i]) {\n            return true;\n        }\n    }\n    return false;\n}","const {\n    SEA_LIST,\n    SEA_CREATURES,\n    DESCRIPTORS,\n    COLORS,\n    CREATURE_DESCRIPTORS,\n    ADJECTIVE_DESCRIPTORS,\n    SEA_OBJECTS,\n    SIZE_DESCRIPTORS,\n} = require('./constants');\n\nconst { randomNoun, randomDescriptor, randomColor, format, combineUsername } = require('./private_functions');\n\nconst generate = (maxSize = 30) => {\n    if (maxSize <= 0 || typeof maxSize !== 'number') {\n        throw new Error('The maxSize argument must be an integer number greater than zero.');\n    }\n\n    let noun = randomNoun();\n    let descriptor = randomDescriptor(noun);\n    let color = randomColor();\n\n    noun = format(noun);\n    descriptor = format(descriptor);\n    color = format(color);\n\n    return combineUsername(maxSize, descriptor, color, noun);\n};\n\nmodule.exports = {\n    SEA_LIST,\n    SEA_CREATURES,\n    DESCRIPTORS,\n    COLORS,\n    CREATURE_DESCRIPTORS,\n    ADJECTIVE_DESCRIPTORS,\n    SEA_OBJECTS,\n    SIZE_DESCRIPTORS,\n    generate,\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\n\nconst Function = require(\"./Function.js\");\nconst newObjectInRealm = utils.newObjectInRealm;\nconst implSymbol = utils.implSymbol;\nconst ctorRegistrySymbol = utils.ctorRegistrySymbol;\n\nconst interfaceName = \"URLSearchParams\";\n\nexports.is = value => {\n  return utils.isObject(value) && utils.hasOwn(value, implSymbol) && value[implSymbol] instanceof Impl.implementation;\n};\nexports.isImpl = value => {\n  return utils.isObject(value) && value instanceof Impl.implementation;\n};\nexports.convert = (globalObject, value, { context = \"The provided value\" } = {}) => {\n  if (exports.is(value)) {\n    return utils.implForWrapper(value);\n  }\n  throw new globalObject.TypeError(`${context} is not of type 'URLSearchParams'.`);\n};\n\nexports.createDefaultIterator = (globalObject, target, kind) => {\n  const ctorRegistry = globalObject[ctorRegistrySymbol];\n  const iteratorPrototype = ctorRegistry[\"URLSearchParams Iterator\"];\n  const iterator = Object.create(iteratorPrototype);\n  Object.defineProperty(iterator, utils.iterInternalSymbol, {\n    value: { target, kind, index: 0 },\n    configurable: true\n  });\n  return iterator;\n};\n\nfunction makeWrapper(globalObject, newTarget) {\n  let proto;\n  if (newTarget !== undefined) {\n    proto = newTarget.prototype;\n  }\n\n  if (!utils.isObject(proto)) {\n    proto = globalObject[ctorRegistrySymbol][\"URLSearchParams\"].prototype;\n  }\n\n  return Object.create(proto);\n}\n\nexports.create = (globalObject, constructorArgs, privateData) => {\n  const wrapper = makeWrapper(globalObject);\n  return exports.setup(wrapper, globalObject, constructorArgs, privateData);\n};\n\nexports.createImpl = (globalObject, constructorArgs, privateData) => {\n  const wrapper = exports.create(globalObject, constructorArgs, privateData);\n  return utils.implForWrapper(wrapper);\n};\n\nexports._internalSetup = (wrapper, globalObject) => {};\n\nexports.setup = (wrapper, globalObject, constructorArgs = [], privateData = {}) => {\n  privateData.wrapper = wrapper;\n\n  exports._internalSetup(wrapper, globalObject);\n  Object.defineProperty(wrapper, implSymbol, {\n    value: new Impl.implementation(globalObject, constructorArgs, privateData),\n    configurable: true\n  });\n\n  wrapper[implSymbol][utils.wrapperSymbol] = wrapper;\n  if (Impl.init) {\n    Impl.init(wrapper[implSymbol]);\n  }\n  return wrapper;\n};\n\nexports.new = (globalObject, newTarget) => {\n  const wrapper = makeWrapper(globalObject, newTarget);\n\n  exports._internalSetup(wrapper, globalObject);\n  Object.defineProperty(wrapper, implSymbol, {\n    value: Object.create(Impl.implementation.prototype),\n    configurable: true\n  });\n\n  wrapper[implSymbol][utils.wrapperSymbol] = wrapper;\n  if (Impl.init) {\n    Impl.init(wrapper[implSymbol]);\n  }\n  return wrapper[implSymbol];\n};\n\nconst exposed = new Set([\"Window\", \"Worker\"]);\n\nexports.install = (globalObject, globalNames) => {\n  if (!globalNames.some(globalName => exposed.has(globalName))) {\n    return;\n  }\n\n  const ctorRegistry = utils.initCtorRegistry(globalObject);\n  class URLSearchParams {\n    constructor() {\n      const args = [];\n      {\n        let curArg = arguments[0];\n        if (curArg !== undefined) {\n          if (utils.isObject(curArg)) {\n            if (curArg[Symbol.iterator] !== undefined) {\n              if (!utils.isObject(curArg)) {\n                throw new globalObject.TypeError(\n                  \"Failed to construct 'URLSearchParams': parameter 1\" + \" sequence\" + \" is not an iterable object.\"\n                );\n              } else {\n                const V = [];\n                const tmp = curArg;\n                for (let nextItem of tmp) {\n                  if (!utils.isObject(nextItem)) {\n                    throw new globalObject.TypeError(\n                      \"Failed to construct 'URLSearchParams': parameter 1\" +\n                        \" sequence\" +\n                        \"'s element\" +\n                        \" is not an iterable object.\"\n                    );\n                  } else {\n                    const V = [];\n                    const tmp = nextItem;\n                    for (let nextItem of tmp) {\n                      nextItem = conversions[\"USVString\"](nextItem, {\n                        context:\n                          \"Failed to construct 'URLSearchParams': parameter 1\" +\n                          \" sequence\" +\n                          \"'s element\" +\n                          \"'s element\",\n                        globals: globalObject\n                      });\n\n                      V.push(nextItem);\n                    }\n                    nextItem = V;\n                  }\n\n                  V.push(nextItem);\n                }\n                curArg = V;\n              }\n            } else {\n              if (!utils.isObject(curArg)) {\n                throw new globalObject.TypeError(\n                  \"Failed to construct 'URLSearchParams': parameter 1\" + \" record\" + \" is not an object.\"\n                );\n              } else {\n                const result = Object.create(null);\n                for (const key of Reflect.ownKeys(curArg)) {\n                  const desc = Object.getOwnPropertyDescriptor(curArg, key);\n                  if (desc && desc.enumerable) {\n                    let typedKey = key;\n\n                    typedKey = conversions[\"USVString\"](typedKey, {\n                      context: \"Failed to construct 'URLSearchParams': parameter 1\" + \" record\" + \"'s key\",\n                      globals: globalObject\n                    });\n\n                    let typedValue = curArg[key];\n\n                    typedValue = conversions[\"USVString\"](typedValue, {\n                      context: \"Failed to construct 'URLSearchParams': parameter 1\" + \" record\" + \"'s value\",\n                      globals: globalObject\n                    });\n\n                    result[typedKey] = typedValue;\n                  }\n                }\n                curArg = result;\n              }\n            }\n          } else {\n            curArg = conversions[\"USVString\"](curArg, {\n              context: \"Failed to construct 'URLSearchParams': parameter 1\",\n              globals: globalObject\n            });\n          }\n        } else {\n          curArg = \"\";\n        }\n        args.push(curArg);\n      }\n      return exports.setup(Object.create(new.target.prototype), globalObject, args);\n    }\n\n    append(name, value) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\n          \"'append' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n\n      if (arguments.length < 2) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'append' on 'URLSearchParams': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      {\n        let curArg = arguments[1];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'append' on 'URLSearchParams': parameter 2\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      return utils.tryWrapperForImpl(esValue[implSymbol].append(...args));\n    }\n\n    delete(name) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\n          \"'delete' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'delete' on 'URLSearchParams': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      {\n        let curArg = arguments[1];\n        if (curArg !== undefined) {\n          curArg = conversions[\"USVString\"](curArg, {\n            context: \"Failed to execute 'delete' on 'URLSearchParams': parameter 2\",\n            globals: globalObject\n          });\n        }\n        args.push(curArg);\n      }\n      return utils.tryWrapperForImpl(esValue[implSymbol].delete(...args));\n    }\n\n    get(name) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get' called on an object that is not a valid instance of URLSearchParams.\");\n      }\n\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'get' on 'URLSearchParams': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      return esValue[implSymbol].get(...args);\n    }\n\n    getAll(name) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\n          \"'getAll' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'getAll' on 'URLSearchParams': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      return utils.tryWrapperForImpl(esValue[implSymbol].getAll(...args));\n    }\n\n    has(name) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'has' called on an object that is not a valid instance of URLSearchParams.\");\n      }\n\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'has' on 'URLSearchParams': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      {\n        let curArg = arguments[1];\n        if (curArg !== undefined) {\n          curArg = conversions[\"USVString\"](curArg, {\n            context: \"Failed to execute 'has' on 'URLSearchParams': parameter 2\",\n            globals: globalObject\n          });\n        }\n        args.push(curArg);\n      }\n      return esValue[implSymbol].has(...args);\n    }\n\n    set(name, value) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set' called on an object that is not a valid instance of URLSearchParams.\");\n      }\n\n      if (arguments.length < 2) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'set' on 'URLSearchParams': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      {\n        let curArg = arguments[1];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'set' on 'URLSearchParams': parameter 2\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      return utils.tryWrapperForImpl(esValue[implSymbol].set(...args));\n    }\n\n    sort() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'sort' called on an object that is not a valid instance of URLSearchParams.\");\n      }\n\n      return utils.tryWrapperForImpl(esValue[implSymbol].sort());\n    }\n\n    toString() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\n          \"'toString' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n\n      return esValue[implSymbol].toString();\n    }\n\n    keys() {\n      if (!exports.is(this)) {\n        throw new globalObject.TypeError(\"'keys' called on an object that is not a valid instance of URLSearchParams.\");\n      }\n      return exports.createDefaultIterator(globalObject, this, \"key\");\n    }\n\n    values() {\n      if (!exports.is(this)) {\n        throw new globalObject.TypeError(\n          \"'values' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n      return exports.createDefaultIterator(globalObject, this, \"value\");\n    }\n\n    entries() {\n      if (!exports.is(this)) {\n        throw new globalObject.TypeError(\n          \"'entries' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n      return exports.createDefaultIterator(globalObject, this, \"key+value\");\n    }\n\n    forEach(callback) {\n      if (!exports.is(this)) {\n        throw new globalObject.TypeError(\n          \"'forEach' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          \"Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.\"\n        );\n      }\n      callback = Function.convert(globalObject, callback, {\n        context: \"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1\"\n      });\n      const thisArg = arguments[1];\n      let pairs = Array.from(this[implSymbol]);\n      let i = 0;\n      while (i < pairs.length) {\n        const [key, value] = pairs[i].map(utils.tryWrapperForImpl);\n        callback.call(thisArg, value, key, this);\n        pairs = Array.from(this[implSymbol]);\n        i++;\n      }\n    }\n\n    get size() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\n          \"'get size' called on an object that is not a valid instance of URLSearchParams.\"\n        );\n      }\n\n      return esValue[implSymbol][\"size\"];\n    }\n  }\n  Object.defineProperties(URLSearchParams.prototype, {\n    append: { enumerable: true },\n    delete: { enumerable: true },\n    get: { enumerable: true },\n    getAll: { enumerable: true },\n    has: { enumerable: true },\n    set: { enumerable: true },\n    sort: { enumerable: true },\n    toString: { enumerable: true },\n    keys: { enumerable: true },\n    values: { enumerable: true },\n    entries: { enumerable: true },\n    forEach: { enumerable: true },\n    size: { enumerable: true },\n    [Symbol.toStringTag]: { value: \"URLSearchParams\", configurable: true },\n    [Symbol.iterator]: { value: URLSearchParams.prototype.entries, configurable: true, writable: true }\n  });\n  ctorRegistry[interfaceName] = URLSearchParams;\n\n  ctorRegistry[\"URLSearchParams Iterator\"] = Object.create(ctorRegistry[\"%IteratorPrototype%\"], {\n    [Symbol.toStringTag]: {\n      configurable: true,\n      value: \"URLSearchParams Iterator\"\n    }\n  });\n  utils.define(ctorRegistry[\"URLSearchParams Iterator\"], {\n    next() {\n      const internal = this && this[utils.iterInternalSymbol];\n      if (!internal) {\n        throw new globalObject.TypeError(\"next() called on a value that is not a URLSearchParams iterator object\");\n      }\n\n      const { target, kind, index } = internal;\n      const values = Array.from(target[implSymbol]);\n      const len = values.length;\n      if (index >= len) {\n        return newObjectInRealm(globalObject, { value: undefined, done: true });\n      }\n\n      const pair = values[index];\n      internal.index = index + 1;\n      return newObjectInRealm(globalObject, utils.iteratorResult(pair.map(utils.tryWrapperForImpl), kind));\n    }\n  });\n\n  Object.defineProperty(globalObject, interfaceName, {\n    configurable: true,\n    writable: true,\n    value: URLSearchParams\n  });\n};\n\nconst Impl = require(\"./URLSearchParams-impl.js\");\n","\"use strict\";\nconst tr46 = require(\"tr46\");\n\nconst infra = require(\"./infra\");\nconst { utf8DecodeWithoutBOM } = require(\"./encoding\");\nconst { percentDecodeString, utf8PercentEncodeCodePoint, utf8PercentEncodeString, isC0ControlPercentEncode,\n  isFragmentPercentEncode, isQueryPercentEncode, isSpecialQueryPercentEncode, isPathPercentEncode,\n  isUserinfoPercentEncode } = require(\"./percent-encoding\");\n\nfunction p(char) {\n  return char.codePointAt(0);\n}\n\nconst specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\n\nconst failure = Symbol(\"failure\");\n\nfunction countSymbols(str) {\n  return [...str].length;\n}\n\nfunction at(input, idx) {\n  const c = input[idx];\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\n}\n\nfunction isSingleDot(buffer) {\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\n}\n\nfunction isDoubleDot(buffer) {\n  buffer = buffer.toLowerCase();\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\n}\n\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\n  return infra.isASCIIAlpha(cp1) && (cp2 === p(\":\") || cp2 === p(\"|\"));\n}\n\nfunction isWindowsDriveLetterString(string) {\n  return string.length === 2 && infra.isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\n}\n\nfunction isNormalizedWindowsDriveLetterString(string) {\n  return string.length === 2 && infra.isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\n}\n\nfunction containsForbiddenHostCodePoint(string) {\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|<|>|\\?|@|\\[|\\\\|\\]|\\^|\\|/u) !== -1;\n}\n\nfunction containsForbiddenDomainCodePoint(string) {\n  return containsForbiddenHostCodePoint(string) || string.search(/[\\u0000-\\u001F]|%|\\u007F/u) !== -1;\n}\n\nfunction isSpecialScheme(scheme) {\n  return specialSchemes[scheme] !== undefined;\n}\n\nfunction isSpecial(url) {\n  return isSpecialScheme(url.scheme);\n}\n\nfunction isNotSpecial(url) {\n  return !isSpecialScheme(url.scheme);\n}\n\nfunction defaultPort(scheme) {\n  return specialSchemes[scheme];\n}\n\nfunction parseIPv4Number(input) {\n  if (input === \"\") {\n    return failure;\n  }\n\n  let R = 10;\n\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\n    input = input.substring(2);\n    R = 16;\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\n    input = input.substring(1);\n    R = 8;\n  }\n\n  if (input === \"\") {\n    return 0;\n  }\n\n  let regex = /[^0-7]/u;\n  if (R === 10) {\n    regex = /[^0-9]/u;\n  }\n  if (R === 16) {\n    regex = /[^0-9A-Fa-f]/u;\n  }\n\n  if (regex.test(input)) {\n    return failure;\n  }\n\n  return parseInt(input, R);\n}\n\nfunction parseIPv4(input) {\n  const parts = input.split(\".\");\n  if (parts[parts.length - 1] === \"\") {\n    if (parts.length > 1) {\n      parts.pop();\n    }\n  }\n\n  if (parts.length > 4) {\n    return failure;\n  }\n\n  const numbers = [];\n  for (const part of parts) {\n    const n = parseIPv4Number(part);\n    if (n === failure) {\n      return failure;\n    }\n\n    numbers.push(n);\n  }\n\n  for (let i = 0; i < numbers.length - 1; ++i) {\n    if (numbers[i] > 255) {\n      return failure;\n    }\n  }\n  if (numbers[numbers.length - 1] >= 256 ** (5 - numbers.length)) {\n    return failure;\n  }\n\n  let ipv4 = numbers.pop();\n  let counter = 0;\n\n  for (const n of numbers) {\n    ipv4 += n * 256 ** (3 - counter);\n    ++counter;\n  }\n\n  return ipv4;\n}\n\nfunction serializeIPv4(address) {\n  let output = \"\";\n  let n = address;\n\n  for (let i = 1; i <= 4; ++i) {\n    output = String(n % 256) + output;\n    if (i !== 4) {\n      output = `.${output}`;\n    }\n    n = Math.floor(n / 256);\n  }\n\n  return output;\n}\n\nfunction parseIPv6(input) {\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\n  let pieceIndex = 0;\n  let compress = null;\n  let pointer = 0;\n\n  input = Array.from(input, c => c.codePointAt(0));\n\n  if (input[pointer] === p(\":\")) {\n    if (input[pointer + 1] !== p(\":\")) {\n      return failure;\n    }\n\n    pointer += 2;\n    ++pieceIndex;\n    compress = pieceIndex;\n  }\n\n  while (pointer < input.length) {\n    if (pieceIndex === 8) {\n      return failure;\n    }\n\n    if (input[pointer] === p(\":\")) {\n      if (compress !== null) {\n        return failure;\n      }\n      ++pointer;\n      ++pieceIndex;\n      compress = pieceIndex;\n      continue;\n    }\n\n    let value = 0;\n    let length = 0;\n\n    while (length < 4 && infra.isASCIIHex(input[pointer])) {\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\n      ++pointer;\n      ++length;\n    }\n\n    if (input[pointer] === p(\".\")) {\n      if (length === 0) {\n        return failure;\n      }\n\n      pointer -= length;\n\n      if (pieceIndex > 6) {\n        return failure;\n      }\n\n      let numbersSeen = 0;\n\n      while (input[pointer] !== undefined) {\n        let ipv4Piece = null;\n\n        if (numbersSeen > 0) {\n          if (input[pointer] === p(\".\") && numbersSeen < 4) {\n            ++pointer;\n          } else {\n            return failure;\n          }\n        }\n\n        if (!infra.isASCIIDigit(input[pointer])) {\n          return failure;\n        }\n\n        while (infra.isASCIIDigit(input[pointer])) {\n          const number = parseInt(at(input, pointer));\n          if (ipv4Piece === null) {\n            ipv4Piece = number;\n          } else if (ipv4Piece === 0) {\n            return failure;\n          } else {\n            ipv4Piece = ipv4Piece * 10 + number;\n          }\n          if (ipv4Piece > 255) {\n            return failure;\n          }\n          ++pointer;\n        }\n\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\n\n        ++numbersSeen;\n\n        if (numbersSeen === 2 || numbersSeen === 4) {\n          ++pieceIndex;\n        }\n      }\n\n      if (numbersSeen !== 4) {\n        return failure;\n      }\n\n      break;\n    } else if (input[pointer] === p(\":\")) {\n      ++pointer;\n      if (input[pointer] === undefined) {\n        return failure;\n      }\n    } else if (input[pointer] !== undefined) {\n      return failure;\n    }\n\n    address[pieceIndex] = value;\n    ++pieceIndex;\n  }\n\n  if (compress !== null) {\n    let swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex !== 0 && swaps > 0) {\n      const temp = address[compress + swaps - 1];\n      address[compress + swaps - 1] = address[pieceIndex];\n      address[pieceIndex] = temp;\n      --pieceIndex;\n      --swaps;\n    }\n  } else if (compress === null && pieceIndex !== 8) {\n    return failure;\n  }\n\n  return address;\n}\n\nfunction serializeIPv6(address) {\n  let output = \"\";\n  const compress = findTheIPv6AddressCompressedPieceIndex(address);\n  let ignore0 = false;\n\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\n    if (ignore0 && address[pieceIndex] === 0) {\n      continue;\n    } else if (ignore0) {\n      ignore0 = false;\n    }\n\n    if (compress === pieceIndex) {\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\n      output += separator;\n      ignore0 = true;\n      continue;\n    }\n\n    output += address[pieceIndex].toString(16);\n\n    if (pieceIndex !== 7) {\n      output += \":\";\n    }\n  }\n\n  return output;\n}\n\nfunction parseHost(input, isOpaque = false) {\n  if (input[0] === \"[\") {\n    if (input[input.length - 1] !== \"]\") {\n      return failure;\n    }\n\n    return parseIPv6(input.substring(1, input.length - 1));\n  }\n\n  if (isOpaque) {\n    return parseOpaqueHost(input);\n  }\n\n  const domain = utf8DecodeWithoutBOM(percentDecodeString(input));\n  const asciiDomain = domainToASCII(domain);\n  if (asciiDomain === failure) {\n    return failure;\n  }\n\n  if (endsInANumber(asciiDomain)) {\n    return parseIPv4(asciiDomain);\n  }\n\n  return asciiDomain;\n}\n\nfunction endsInANumber(input) {\n  const parts = input.split(\".\");\n  if (parts[parts.length - 1] === \"\") {\n    if (parts.length === 1) {\n      return false;\n    }\n    parts.pop();\n  }\n\n  const last = parts[parts.length - 1];\n  if (parseIPv4Number(last) !== failure) {\n    return true;\n  }\n\n  if (/^[0-9]+$/u.test(last)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction parseOpaqueHost(input) {\n  if (containsForbiddenHostCodePoint(input)) {\n    return failure;\n  }\n\n  return utf8PercentEncodeString(input, isC0ControlPercentEncode);\n}\n\nfunction findTheIPv6AddressCompressedPieceIndex(address) {\n  let longestIndex = null;\n  let longestSize = 1; // only find elements > 1\n  let foundIndex = null;\n  let foundSize = 0;\n\n  for (let pieceIndex = 0; pieceIndex < address.length; ++pieceIndex) {\n    if (address[pieceIndex] !== 0) {\n      if (foundSize > longestSize) {\n        longestIndex = foundIndex;\n        longestSize = foundSize;\n      }\n\n      foundIndex = null;\n      foundSize = 0;\n    } else {\n      if (foundIndex === null) {\n        foundIndex = pieceIndex;\n      }\n      ++foundSize;\n    }\n  }\n\n  if (foundSize > longestSize) {\n    return foundIndex;\n  }\n\n  return longestIndex;\n}\n\nfunction serializeHost(host) {\n  if (typeof host === \"number\") {\n    return serializeIPv4(host);\n  }\n\n  // IPv6 serializer\n  if (host instanceof Array) {\n    return `[${serializeIPv6(host)}]`;\n  }\n\n  return host;\n}\n\nfunction domainToASCII(domain, beStrict = false) {\n  const result = tr46.toASCII(domain, {\n    checkHyphens: beStrict,\n    checkBidi: true,\n    checkJoiners: true,\n    useSTD3ASCIIRules: beStrict,\n    transitionalProcessing: false,\n    verifyDNSLength: beStrict,\n    ignoreInvalidPunycode: false\n  });\n  if (result === null) {\n    return failure;\n  }\n\n  if (!beStrict) {\n    if (result === \"\") {\n      return failure;\n    }\n    if (containsForbiddenDomainCodePoint(result)) {\n      return failure;\n    }\n  }\n  return result;\n}\n\nfunction trimControlChars(string) {\n  // Avoid using regexp because of this V8 bug: https://issues.chromium.org/issues/42204424\n\n  let start = 0;\n  let end = string.length;\n  for (; start < end; ++start) {\n    if (string.charCodeAt(start) > 0x20) {\n      break;\n    }\n  }\n  for (; end > start; --end) {\n    if (string.charCodeAt(end - 1) > 0x20) {\n      break;\n    }\n  }\n  return string.substring(start, end);\n}\n\nfunction trimTabAndNewline(url) {\n  return url.replace(/\\u0009|\\u000A|\\u000D/ug, \"\");\n}\n\nfunction shortenPath(url) {\n  const { path } = url;\n  if (path.length === 0) {\n    return;\n  }\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\n    return;\n  }\n\n  path.pop();\n}\n\nfunction includesCredentials(url) {\n  return url.username !== \"\" || url.password !== \"\";\n}\n\nfunction cannotHaveAUsernamePasswordPort(url) {\n  return url.host === null || url.host === \"\" || url.scheme === \"file\";\n}\n\nfunction hasAnOpaquePath(url) {\n  return typeof url.path === \"string\";\n}\n\nfunction isNormalizedWindowsDriveLetter(string) {\n  return /^[A-Za-z]:$/u.test(string);\n}\n\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\n  this.pointer = 0;\n  this.input = input;\n  this.base = base || null;\n  this.encodingOverride = encodingOverride || \"utf-8\";\n  this.stateOverride = stateOverride;\n  this.url = url;\n  this.failure = false;\n  this.parseError = false;\n\n  if (!this.url) {\n    this.url = {\n      scheme: \"\",\n      username: \"\",\n      password: \"\",\n      host: null,\n      port: null,\n      path: [],\n      query: null,\n      fragment: null\n    };\n\n    const res = trimControlChars(this.input);\n    if (res !== this.input) {\n      this.parseError = true;\n    }\n    this.input = res;\n  }\n\n  const res = trimTabAndNewline(this.input);\n  if (res !== this.input) {\n    this.parseError = true;\n  }\n  this.input = res;\n\n  this.state = stateOverride || \"scheme start\";\n\n  this.buffer = \"\";\n  this.atFlag = false;\n  this.arrFlag = false;\n  this.passwordTokenSeenFlag = false;\n\n  this.input = Array.from(this.input, c => c.codePointAt(0));\n\n  for (; this.pointer <= this.input.length; ++this.pointer) {\n    const c = this.input[this.pointer];\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\n\n    // exec state machine\n    const ret = this[`parse ${this.state}`](c, cStr);\n    if (!ret) {\n      break; // terminate algorithm\n    } else if (ret === failure) {\n      this.failure = true;\n      break;\n    }\n  }\n}\n\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\n  if (infra.isASCIIAlpha(c)) {\n    this.buffer += cStr.toLowerCase();\n    this.state = \"scheme\";\n  } else if (!this.stateOverride) {\n    this.state = \"no scheme\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\n  if (infra.isASCIIAlphanumeric(c) || c === p(\"+\") || c === p(\"-\") || c === p(\".\")) {\n    this.buffer += cStr.toLowerCase();\n  } else if (c === p(\":\")) {\n    if (this.stateOverride) {\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\n        return false;\n      }\n\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\n        return false;\n      }\n\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\n        return false;\n      }\n\n      if (this.url.scheme === \"file\" && this.url.host === \"\") {\n        return false;\n      }\n    }\n    this.url.scheme = this.buffer;\n    if (this.stateOverride) {\n      if (this.url.port === defaultPort(this.url.scheme)) {\n        this.url.port = null;\n      }\n      return false;\n    }\n    this.buffer = \"\";\n    if (this.url.scheme === \"file\") {\n      if (this.input[this.pointer + 1] !== p(\"/\") || this.input[this.pointer + 2] !== p(\"/\")) {\n        this.parseError = true;\n      }\n      this.state = \"file\";\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\n      this.state = \"special relative or authority\";\n    } else if (isSpecial(this.url)) {\n      this.state = \"special authority slashes\";\n    } else if (this.input[this.pointer + 1] === p(\"/\")) {\n      this.state = \"path or authority\";\n      ++this.pointer;\n    } else {\n      this.url.path = \"\";\n      this.state = \"opaque path\";\n    }\n  } else if (!this.stateOverride) {\n    this.buffer = \"\";\n    this.state = \"no scheme\";\n    this.pointer = -1;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\n  if (this.base === null || (hasAnOpaquePath(this.base) && c !== p(\"#\"))) {\n    return failure;\n  } else if (hasAnOpaquePath(this.base) && c === p(\"#\")) {\n    this.url.scheme = this.base.scheme;\n    this.url.path = this.base.path;\n    this.url.query = this.base.query;\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else if (this.base.scheme === \"file\") {\n    this.state = \"file\";\n    --this.pointer;\n  } else {\n    this.state = \"relative\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\n  if (c === p(\"/\") && this.input[this.pointer + 1] === p(\"/\")) {\n    this.state = \"special authority ignore slashes\";\n    ++this.pointer;\n  } else {\n    this.parseError = true;\n    this.state = \"relative\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\n  if (c === p(\"/\")) {\n    this.state = \"authority\";\n  } else {\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\n  this.url.scheme = this.base.scheme;\n  if (c === p(\"/\")) {\n    this.state = \"relative slash\";\n  } else if (isSpecial(this.url) && c === p(\"\\\\\")) {\n    this.parseError = true;\n    this.state = \"relative slash\";\n  } else {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n    if (c === p(\"?\")) {\n      this.url.query = \"\";\n      this.state = \"query\";\n    } else if (c === p(\"#\")) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    } else if (!isNaN(c)) {\n      this.url.query = null;\n      this.url.path.pop();\n      this.state = \"path\";\n      --this.pointer;\n    }\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\n  if (isSpecial(this.url) && (c === p(\"/\") || c === p(\"\\\\\"))) {\n    if (c === p(\"\\\\\")) {\n      this.parseError = true;\n    }\n    this.state = \"special authority ignore slashes\";\n  } else if (c === p(\"/\")) {\n    this.state = \"authority\";\n  } else {\n    this.url.username = this.base.username;\n    this.url.password = this.base.password;\n    this.url.host = this.base.host;\n    this.url.port = this.base.port;\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\n  if (c === p(\"/\") && this.input[this.pointer + 1] === p(\"/\")) {\n    this.state = \"special authority ignore slashes\";\n    ++this.pointer;\n  } else {\n    this.parseError = true;\n    this.state = \"special authority ignore slashes\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\n  if (c !== p(\"/\") && c !== p(\"\\\\\")) {\n    this.state = \"authority\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\n  if (c === p(\"@\")) {\n    this.parseError = true;\n    if (this.atFlag) {\n      this.buffer = `%40${this.buffer}`;\n    }\n    this.atFlag = true;\n\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\n    const len = countSymbols(this.buffer);\n    for (let pointer = 0; pointer < len; ++pointer) {\n      const codePoint = this.buffer.codePointAt(pointer);\n\n      if (codePoint === p(\":\") && !this.passwordTokenSeenFlag) {\n        this.passwordTokenSeenFlag = true;\n        continue;\n      }\n      const encodedCodePoints = utf8PercentEncodeCodePoint(codePoint, isUserinfoPercentEncode);\n      if (this.passwordTokenSeenFlag) {\n        this.url.password += encodedCodePoints;\n      } else {\n        this.url.username += encodedCodePoints;\n      }\n    }\n    this.buffer = \"\";\n  } else if (isNaN(c) || c === p(\"/\") || c === p(\"?\") || c === p(\"#\") ||\n             (isSpecial(this.url) && c === p(\"\\\\\"))) {\n    if (this.atFlag && this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    }\n    this.pointer -= countSymbols(this.buffer) + 1;\n    this.buffer = \"\";\n    this.state = \"host\";\n  } else {\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse hostname\"] =\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\n  if (this.stateOverride && this.url.scheme === \"file\") {\n    --this.pointer;\n    this.state = \"file host\";\n  } else if (c === p(\":\") && !this.arrFlag) {\n    if (this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    }\n\n    if (this.stateOverride === \"hostname\") {\n      return false;\n    }\n\n    const host = parseHost(this.buffer, isNotSpecial(this.url));\n    if (host === failure) {\n      return failure;\n    }\n\n    this.url.host = host;\n    this.buffer = \"\";\n    this.state = \"port\";\n  } else if (isNaN(c) || c === p(\"/\") || c === p(\"?\") || c === p(\"#\") ||\n             (isSpecial(this.url) && c === p(\"\\\\\"))) {\n    --this.pointer;\n    if (isSpecial(this.url) && this.buffer === \"\") {\n      this.parseError = true;\n      return failure;\n    } else if (this.stateOverride && this.buffer === \"\" &&\n               (includesCredentials(this.url) || this.url.port !== null)) {\n      this.parseError = true;\n      return false;\n    }\n\n    const host = parseHost(this.buffer, isNotSpecial(this.url));\n    if (host === failure) {\n      return failure;\n    }\n\n    this.url.host = host;\n    this.buffer = \"\";\n    this.state = \"path start\";\n    if (this.stateOverride) {\n      return false;\n    }\n  } else {\n    if (c === p(\"[\")) {\n      this.arrFlag = true;\n    } else if (c === p(\"]\")) {\n      this.arrFlag = false;\n    }\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\n  if (infra.isASCIIDigit(c)) {\n    this.buffer += cStr;\n  } else if (isNaN(c) || c === p(\"/\") || c === p(\"?\") || c === p(\"#\") ||\n             (isSpecial(this.url) && c === p(\"\\\\\")) ||\n             this.stateOverride) {\n    if (this.buffer !== \"\") {\n      const port = parseInt(this.buffer);\n      if (port > 2 ** 16 - 1) {\n        this.parseError = true;\n        return failure;\n      }\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\n      this.buffer = \"\";\n    }\n    if (this.stateOverride) {\n      return false;\n    }\n    this.state = \"path start\";\n    --this.pointer;\n  } else {\n    this.parseError = true;\n    return failure;\n  }\n\n  return true;\n};\n\nconst fileOtherwiseCodePoints = new Set([p(\"/\"), p(\"\\\\\"), p(\"?\"), p(\"#\")]);\n\nfunction startsWithWindowsDriveLetter(input, pointer) {\n  const length = input.length - pointer;\n  return length >= 2 &&\n    isWindowsDriveLetterCodePoints(input[pointer], input[pointer + 1]) &&\n    (length === 2 || fileOtherwiseCodePoints.has(input[pointer + 2]));\n}\n\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\n  this.url.scheme = \"file\";\n  this.url.host = \"\";\n\n  if (c === p(\"/\") || c === p(\"\\\\\")) {\n    if (c === p(\"\\\\\")) {\n      this.parseError = true;\n    }\n    this.state = \"file slash\";\n  } else if (this.base !== null && this.base.scheme === \"file\") {\n    this.url.host = this.base.host;\n    this.url.path = this.base.path.slice();\n    this.url.query = this.base.query;\n    if (c === p(\"?\")) {\n      this.url.query = \"\";\n      this.state = \"query\";\n    } else if (c === p(\"#\")) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    } else if (!isNaN(c)) {\n      this.url.query = null;\n      if (!startsWithWindowsDriveLetter(this.input, this.pointer)) {\n        shortenPath(this.url);\n      } else {\n        this.parseError = true;\n        this.url.path = [];\n      }\n\n      this.state = \"path\";\n      --this.pointer;\n    }\n  } else {\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\n  if (c === p(\"/\") || c === p(\"\\\\\")) {\n    if (c === p(\"\\\\\")) {\n      this.parseError = true;\n    }\n    this.state = \"file host\";\n  } else {\n    if (this.base !== null && this.base.scheme === \"file\") {\n      if (!startsWithWindowsDriveLetter(this.input, this.pointer) &&\n          isNormalizedWindowsDriveLetterString(this.base.path[0])) {\n        this.url.path.push(this.base.path[0]);\n      }\n      this.url.host = this.base.host;\n    }\n    this.state = \"path\";\n    --this.pointer;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\n  if (isNaN(c) || c === p(\"/\") || c === p(\"\\\\\") || c === p(\"?\") || c === p(\"#\")) {\n    --this.pointer;\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\n      this.parseError = true;\n      this.state = \"path\";\n    } else if (this.buffer === \"\") {\n      this.url.host = \"\";\n      if (this.stateOverride) {\n        return false;\n      }\n      this.state = \"path start\";\n    } else {\n      let host = parseHost(this.buffer, isNotSpecial(this.url));\n      if (host === failure) {\n        return failure;\n      }\n      if (host === \"localhost\") {\n        host = \"\";\n      }\n      this.url.host = host;\n\n      if (this.stateOverride) {\n        return false;\n      }\n\n      this.buffer = \"\";\n      this.state = \"path start\";\n    }\n  } else {\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\n  if (isSpecial(this.url)) {\n    if (c === p(\"\\\\\")) {\n      this.parseError = true;\n    }\n    this.state = \"path\";\n\n    if (c !== p(\"/\") && c !== p(\"\\\\\")) {\n      --this.pointer;\n    }\n  } else if (!this.stateOverride && c === p(\"?\")) {\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (!this.stateOverride && c === p(\"#\")) {\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else if (c !== undefined) {\n    this.state = \"path\";\n    if (c !== p(\"/\")) {\n      --this.pointer;\n    }\n  } else if (this.stateOverride && this.url.host === null) {\n    this.url.path.push(\"\");\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\n  if (isNaN(c) || c === p(\"/\") || (isSpecial(this.url) && c === p(\"\\\\\")) ||\n      (!this.stateOverride && (c === p(\"?\") || c === p(\"#\")))) {\n    if (isSpecial(this.url) && c === p(\"\\\\\")) {\n      this.parseError = true;\n    }\n\n    if (isDoubleDot(this.buffer)) {\n      shortenPath(this.url);\n      if (c !== p(\"/\") && !(isSpecial(this.url) && c === p(\"\\\\\"))) {\n        this.url.path.push(\"\");\n      }\n    } else if (isSingleDot(this.buffer) && c !== p(\"/\") &&\n               !(isSpecial(this.url) && c === p(\"\\\\\"))) {\n      this.url.path.push(\"\");\n    } else if (!isSingleDot(this.buffer)) {\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\n        this.buffer = `${this.buffer[0]}:`;\n      }\n      this.url.path.push(this.buffer);\n    }\n    this.buffer = \"\";\n    if (c === p(\"?\")) {\n      this.url.query = \"\";\n      this.state = \"query\";\n    }\n    if (c === p(\"#\")) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    }\n  } else {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n\n    if (c === p(\"%\") &&\n      (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n        !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    this.buffer += utf8PercentEncodeCodePoint(c, isPathPercentEncode);\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse opaque path\"] = function parseOpaquePath(c) {\n  if (c === p(\"?\")) {\n    this.url.query = \"\";\n    this.state = \"query\";\n  } else if (c === p(\"#\")) {\n    this.url.fragment = \"\";\n    this.state = \"fragment\";\n  } else if (c === p(\" \")) {\n    const remaining = this.input[this.pointer + 1];\n    if (remaining === p(\"?\") || remaining === p(\"#\")) {\n      this.url.path += \"%20\";\n    } else {\n      this.url.path += \" \";\n    }\n  } else {\n    // TODO: Add: not a URL code point\n    if (!isNaN(c) && c !== p(\"%\")) {\n      this.parseError = true;\n    }\n\n    if (c === p(\"%\") &&\n        (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n         !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    if (!isNaN(c)) {\n      this.url.path += utf8PercentEncodeCodePoint(c, isC0ControlPercentEncode);\n    }\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\n  if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\n    this.encodingOverride = \"utf-8\";\n  }\n\n  if ((!this.stateOverride && c === p(\"#\")) || isNaN(c)) {\n    const queryPercentEncodePredicate = isSpecial(this.url) ? isSpecialQueryPercentEncode : isQueryPercentEncode;\n    this.url.query += utf8PercentEncodeString(this.buffer, queryPercentEncodePredicate);\n\n    this.buffer = \"\";\n\n    if (c === p(\"#\")) {\n      this.url.fragment = \"\";\n      this.state = \"fragment\";\n    }\n  } else if (!isNaN(c)) {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n\n    if (c === p(\"%\") &&\n      (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n        !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    this.buffer += cStr;\n  }\n\n  return true;\n};\n\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\n  if (!isNaN(c)) {\n    // TODO: If c is not a URL code point and not \"%\", parse error.\n    if (c === p(\"%\") &&\n      (!infra.isASCIIHex(this.input[this.pointer + 1]) ||\n        !infra.isASCIIHex(this.input[this.pointer + 2]))) {\n      this.parseError = true;\n    }\n\n    this.url.fragment += utf8PercentEncodeCodePoint(c, isFragmentPercentEncode);\n  }\n\n  return true;\n};\n\nfunction serializeURL(url, excludeFragment) {\n  let output = `${url.scheme}:`;\n  if (url.host !== null) {\n    output += \"//\";\n\n    if (url.username !== \"\" || url.password !== \"\") {\n      output += url.username;\n      if (url.password !== \"\") {\n        output += `:${url.password}`;\n      }\n      output += \"@\";\n    }\n\n    output += serializeHost(url.host);\n\n    if (url.port !== null) {\n      output += `:${url.port}`;\n    }\n  }\n\n  if (url.host === null && !hasAnOpaquePath(url) && url.path.length > 1 && url.path[0] === \"\") {\n    output += \"/.\";\n  }\n  output += serializePath(url);\n\n  if (url.query !== null) {\n    output += `?${url.query}`;\n  }\n\n  if (!excludeFragment && url.fragment !== null) {\n    output += `#${url.fragment}`;\n  }\n\n  return output;\n}\n\nfunction serializeOrigin(tuple) {\n  let result = `${tuple.scheme}://`;\n  result += serializeHost(tuple.host);\n\n  if (tuple.port !== null) {\n    result += `:${tuple.port}`;\n  }\n\n  return result;\n}\n\nfunction serializePath(url) {\n  if (hasAnOpaquePath(url)) {\n    return url.path;\n  }\n\n  let output = \"\";\n  for (const segment of url.path) {\n    output += `/${segment}`;\n  }\n  return output;\n}\n\nmodule.exports.serializeURL = serializeURL;\n\nmodule.exports.serializePath = serializePath;\n\nmodule.exports.serializeURLOrigin = function (url) {\n  // https://url.spec.whatwg.org/#concept-url-origin\n  switch (url.scheme) {\n    case \"blob\": {\n      const pathURL = module.exports.parseURL(serializePath(url));\n      if (pathURL === null) {\n        return \"null\";\n      }\n      if (pathURL.scheme !== \"http\" && pathURL.scheme !== \"https\") {\n        return \"null\";\n      }\n      return module.exports.serializeURLOrigin(pathURL);\n    }\n    case \"ftp\":\n    case \"http\":\n    case \"https\":\n    case \"ws\":\n    case \"wss\":\n      return serializeOrigin({\n        scheme: url.scheme,\n        host: url.host,\n        port: url.port\n      });\n    case \"file\":\n      // The spec says:\n      // > Unfortunate as it is, this is left as an exercise to the reader. When in doubt, return a new opaque origin.\n      // Browsers tested so far:\n      // - Chrome says \"file://\", but treats file: URLs as cross-origin for most (all?) purposes; see e.g.\n      //   https://bugs.chromium.org/p/chromium/issues/detail?id=37586\n      // - Firefox says \"null\", but treats file: URLs as same-origin sometimes based on directory stuff; see\n      //   https://developer.mozilla.org/en-US/docs/Archive/Misc_top_level/Same-origin_policy_for_file:_URIs\n      return \"null\";\n    default:\n      // serializing an opaque origin returns \"null\"\n      return \"null\";\n  }\n};\n\nmodule.exports.basicURLParse = function (input, options) {\n  if (options === undefined) {\n    options = {};\n  }\n\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\n  if (usm.failure) {\n    return null;\n  }\n\n  return usm.url;\n};\n\nmodule.exports.setTheUsername = function (url, username) {\n  url.username = utf8PercentEncodeString(username, isUserinfoPercentEncode);\n};\n\nmodule.exports.setThePassword = function (url, password) {\n  url.password = utf8PercentEncodeString(password, isUserinfoPercentEncode);\n};\n\nmodule.exports.serializeHost = serializeHost;\n\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\n\nmodule.exports.hasAnOpaquePath = hasAnOpaquePath;\n\nmodule.exports.serializeInteger = function (integer) {\n  return String(integer);\n};\n\nmodule.exports.parseURL = function (input, options) {\n  if (options === undefined) {\n    options = {};\n  }\n\n  // We don't handle blobs, so this just delegates:\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\n};\n","'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7F]/; // Note: U+007F DEL is excluded too.\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, callback) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = callback(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {String} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(domain, callback) {\n\tconst parts = domain.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tdomain = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tdomain = domain.replace(regexSeparators, '\\x2E');\n\tconst labels = domain.split('.');\n\tconst encoded = map(labels, callback).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = codePoints => String.fromCodePoint(...codePoints);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint >= 0x30 && codePoint < 0x3A) {\n\t\treturn 26 + (codePoint - 0x30);\n\t}\n\tif (codePoint >= 0x41 && codePoint < 0x5B) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint >= 0x61 && codePoint < 0x7B) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tconst oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\t\t\tif (digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tconst inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tconst basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue === n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.3.1',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport { ucs2decode, ucs2encode, decode, encode, toASCII, toUnicode };\nexport default punycode;\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\n\nexports.convert = (globalObject, value, { context = \"The provided value\" } = {}) => {\n  if (typeof value !== \"function\") {\n    throw new globalObject.TypeError(context + \" is not a function\");\n  }\n\n  function invokeTheCallbackFunction(...args) {\n    const thisArg = utils.tryWrapperForImpl(this);\n    let callResult;\n\n    for (let i = 0; i < args.length; i++) {\n      args[i] = utils.tryWrapperForImpl(args[i]);\n    }\n\n    callResult = Reflect.apply(value, thisArg, args);\n\n    callResult = conversions[\"any\"](callResult, { context: context, globals: globalObject });\n\n    return callResult;\n  }\n\n  invokeTheCallbackFunction.construct = (...args) => {\n    for (let i = 0; i < args.length; i++) {\n      args[i] = utils.tryWrapperForImpl(args[i]);\n    }\n\n    let callResult = Reflect.construct(value, args);\n\n    callResult = conversions[\"any\"](callResult, { context: context, globals: globalObject });\n\n    return callResult;\n  };\n\n  invokeTheCallbackFunction[utils.wrapperSymbol] = value;\n  invokeTheCallbackFunction.objectReference = value;\n\n  return invokeTheCallbackFunction;\n};\n","\"use strict\";\nconst MIMETypeParameters = require(\"./mime-type-parameters.js\");\nconst parse = require(\"./parser.js\");\nconst serialize = require(\"./serializer.js\");\nconst {\n  asciiLowercase,\n  solelyContainsHTTPTokenCodePoints\n} = require(\"./utils.js\");\n\nmodule.exports = class MIMEType {\n  constructor(string) {\n    string = String(string);\n    const result = parse(string);\n    if (result === null) {\n      throw new Error(`Could not parse MIME type string \"${string}\"`);\n    }\n\n    this._type = result.type;\n    this._subtype = result.subtype;\n    this._parameters = new MIMETypeParameters(result.parameters);\n  }\n\n  static parse(string) {\n    try {\n      return new this(string);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  get essence() {\n    return `${this.type}/${this.subtype}`;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(value) {\n    value = asciiLowercase(String(value));\n\n    if (value.length === 0) {\n      throw new Error(\"Invalid type: must be a non-empty string\");\n    }\n    if (!solelyContainsHTTPTokenCodePoints(value)) {\n      throw new Error(`Invalid type ${value}: must contain only HTTP token code points`);\n    }\n\n    this._type = value;\n  }\n\n  get subtype() {\n    return this._subtype;\n  }\n\n  set subtype(value) {\n    value = asciiLowercase(String(value));\n\n    if (value.length === 0) {\n      throw new Error(\"Invalid subtype: must be a non-empty string\");\n    }\n    if (!solelyContainsHTTPTokenCodePoints(value)) {\n      throw new Error(`Invalid subtype ${value}: must contain only HTTP token code points`);\n    }\n\n    this._subtype = value;\n  }\n\n  get parameters() {\n    return this._parameters;\n  }\n\n  toString() {\n    // The serialize function works on both \"MIME type records\" (i.e. the results of parse) and on this class, since\n    // this class's interface is identical.\n    return serialize(this);\n  }\n\n  isJavaScript({ prohibitParameters = false } = {}) {\n    switch (this._type) {\n      case \"text\": {\n        switch (this._subtype) {\n          case \"ecmascript\":\n          case \"javascript\":\n          case \"javascript1.0\":\n          case \"javascript1.1\":\n          case \"javascript1.2\":\n          case \"javascript1.3\":\n          case \"javascript1.4\":\n          case \"javascript1.5\":\n          case \"jscript\":\n          case \"livescript\":\n          case \"x-ecmascript\":\n          case \"x-javascript\": {\n            return !prohibitParameters || this._parameters.size === 0;\n          }\n          default: {\n            return false;\n          }\n        }\n      }\n      case \"application\": {\n        switch (this._subtype) {\n          case \"ecmascript\":\n          case \"javascript\":\n          case \"x-ecmascript\":\n          case \"x-javascript\": {\n            return !prohibitParameters || this._parameters.size === 0;\n          }\n          default: {\n            return false;\n          }\n        }\n      }\n      default: {\n        return false;\n      }\n    }\n  }\n  isXML() {\n    return (this._subtype === \"xml\" && (this._type === \"text\" || this._type === \"application\")) ||\n           this._subtype.endsWith(\"+xml\");\n  }\n  isHTML() {\n    return this._subtype === \"html\" && this._type === \"text\";\n  }\n};\n","\"use strict\";\n\nfunction makeException(ErrorType, message, options) {\n  if (options.globals) {\n    ErrorType = options.globals[ErrorType.name];\n  }\n  return new ErrorType(`${options.context ? options.context : \"Value\"} ${message}.`);\n}\n\nfunction toNumber(value, options) {\n  if (typeof value === \"bigint\") {\n    throw makeException(TypeError, \"is a BigInt which cannot be converted to a number\", options);\n  }\n  if (!options.globals) {\n    return Number(value);\n  }\n  return options.globals.Number(value);\n}\n\n// Round x to the nearest integer, choosing the even integer if it lies halfway between two.\nfunction evenRound(x) {\n  // There are four cases for numbers with fractional part being .5:\n  //\n  // case |     x     | floor(x) | round(x) | expected | x <> 0 | x % 1 | x & 1 |   example\n  //   1  |  2n + 0.5 |  2n      |  2n + 1  |  2n      |   >    |  0.5  |   0   |  0.5 ->  0\n  //   2  |  2n + 1.5 |  2n + 1  |  2n + 2  |  2n + 2  |   >    |  0.5  |   1   |  1.5 ->  2\n  //   3  | -2n - 0.5 | -2n - 1  | -2n      | -2n      |   <    | -0.5  |   0   | -0.5 ->  0\n  //   4  | -2n - 1.5 | -2n - 2  | -2n - 1  | -2n - 2  |   <    | -0.5  |   1   | -1.5 -> -2\n  // (where n is a non-negative integer)\n  //\n  // Branch here for cases 1 and 4\n  if ((x > 0 && (x % 1) === +0.5 && (x & 1) === 0) ||\n        (x < 0 && (x % 1) === -0.5 && (x & 1) === 1)) {\n    return censorNegativeZero(Math.floor(x));\n  }\n\n  return censorNegativeZero(Math.round(x));\n}\n\nfunction integerPart(n) {\n  return censorNegativeZero(Math.trunc(n));\n}\n\nfunction sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\nfunction modulo(x, y) {\n  // https://tc39.github.io/ecma262/#eqn-modulo\n  // Note that http://stackoverflow.com/a/4467559/3191 does NOT work for large modulos\n  const signMightNotMatch = x % y;\n  if (sign(y) !== sign(signMightNotMatch)) {\n    return signMightNotMatch + y;\n  }\n  return signMightNotMatch;\n}\n\nfunction censorNegativeZero(x) {\n  return x === 0 ? 0 : x;\n}\n\nfunction createIntegerConversion(bitLength, { unsigned }) {\n  let lowerBound, upperBound;\n  if (unsigned) {\n    lowerBound = 0;\n    upperBound = 2 ** bitLength - 1;\n  } else {\n    lowerBound = -(2 ** (bitLength - 1));\n    upperBound = 2 ** (bitLength - 1) - 1;\n  }\n\n  const twoToTheBitLength = 2 ** bitLength;\n  const twoToOneLessThanTheBitLength = 2 ** (bitLength - 1);\n\n  return (value, options = {}) => {\n    let x = toNumber(value, options);\n    x = censorNegativeZero(x);\n\n    if (options.enforceRange) {\n      if (!Number.isFinite(x)) {\n        throw makeException(TypeError, \"is not a finite number\", options);\n      }\n\n      x = integerPart(x);\n\n      if (x < lowerBound || x > upperBound) {\n        throw makeException(\n          TypeError,\n          `is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`,\n          options\n        );\n      }\n\n      return x;\n    }\n\n    if (!Number.isNaN(x) && options.clamp) {\n      x = Math.min(Math.max(x, lowerBound), upperBound);\n      x = evenRound(x);\n      return x;\n    }\n\n    if (!Number.isFinite(x) || x === 0) {\n      return 0;\n    }\n    x = integerPart(x);\n\n    // Math.pow(2, 64) is not accurately representable in JavaScript, so try to avoid these per-spec operations if\n    // possible. Hopefully it's an optimization for the non-64-bitLength cases too.\n    if (x >= lowerBound && x <= upperBound) {\n      return x;\n    }\n\n    // These will not work great for bitLength of 64, but oh well. See the README for more details.\n    x = modulo(x, twoToTheBitLength);\n    if (!unsigned && x >= twoToOneLessThanTheBitLength) {\n      return x - twoToTheBitLength;\n    }\n    return x;\n  };\n}\n\nfunction createLongLongConversion(bitLength, { unsigned }) {\n  const upperBound = Number.MAX_SAFE_INTEGER;\n  const lowerBound = unsigned ? 0 : Number.MIN_SAFE_INTEGER;\n  const asBigIntN = unsigned ? BigInt.asUintN : BigInt.asIntN;\n\n  return (value, options = {}) => {\n    let x = toNumber(value, options);\n    x = censorNegativeZero(x);\n\n    if (options.enforceRange) {\n      if (!Number.isFinite(x)) {\n        throw makeException(TypeError, \"is not a finite number\", options);\n      }\n\n      x = integerPart(x);\n\n      if (x < lowerBound || x > upperBound) {\n        throw makeException(\n          TypeError,\n          `is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`,\n          options\n        );\n      }\n\n      return x;\n    }\n\n    if (!Number.isNaN(x) && options.clamp) {\n      x = Math.min(Math.max(x, lowerBound), upperBound);\n      x = evenRound(x);\n      return x;\n    }\n\n    if (!Number.isFinite(x) || x === 0) {\n      return 0;\n    }\n\n    let xBigInt = BigInt(integerPart(x));\n    xBigInt = asBigIntN(bitLength, xBigInt);\n    return Number(xBigInt);\n  };\n}\n\nexports.any = value => {\n  return value;\n};\n\nexports.undefined = () => {\n  return undefined;\n};\n\nexports.boolean = value => {\n  return Boolean(value);\n};\n\nexports.byte = createIntegerConversion(8, { unsigned: false });\nexports.octet = createIntegerConversion(8, { unsigned: true });\n\nexports.short = createIntegerConversion(16, { unsigned: false });\nexports[\"unsigned short\"] = createIntegerConversion(16, { unsigned: true });\n\nexports.long = createIntegerConversion(32, { unsigned: false });\nexports[\"unsigned long\"] = createIntegerConversion(32, { unsigned: true });\n\nexports[\"long long\"] = createLongLongConversion(64, { unsigned: false });\nexports[\"unsigned long long\"] = createLongLongConversion(64, { unsigned: true });\n\nexports.double = (value, options = {}) => {\n  const x = toNumber(value, options);\n\n  if (!Number.isFinite(x)) {\n    throw makeException(TypeError, \"is not a finite floating-point value\", options);\n  }\n\n  return x;\n};\n\nexports[\"unrestricted double\"] = (value, options = {}) => {\n  const x = toNumber(value, options);\n\n  return x;\n};\n\nexports.float = (value, options = {}) => {\n  const x = toNumber(value, options);\n\n  if (!Number.isFinite(x)) {\n    throw makeException(TypeError, \"is not a finite floating-point value\", options);\n  }\n\n  if (Object.is(x, -0)) {\n    return x;\n  }\n\n  const y = Math.fround(x);\n\n  if (!Number.isFinite(y)) {\n    throw makeException(TypeError, \"is outside the range of a single-precision floating-point value\", options);\n  }\n\n  return y;\n};\n\nexports[\"unrestricted float\"] = (value, options = {}) => {\n  const x = toNumber(value, options);\n\n  if (isNaN(x)) {\n    return x;\n  }\n\n  if (Object.is(x, -0)) {\n    return x;\n  }\n\n  return Math.fround(x);\n};\n\nexports.DOMString = (value, options = {}) => {\n  if (options.treatNullAsEmptyString && value === null) {\n    return \"\";\n  }\n\n  if (typeof value === \"symbol\") {\n    throw makeException(TypeError, \"is a symbol, which cannot be converted to a string\", options);\n  }\n\n  const StringCtor = options.globals ? options.globals.String : String;\n  return StringCtor(value);\n};\n\nexports.ByteString = (value, options = {}) => {\n  const x = exports.DOMString(value, options);\n  let c;\n  for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n    if (c > 255) {\n      throw makeException(TypeError, \"is not a valid ByteString\", options);\n    }\n  }\n\n  return x;\n};\n\nexports.USVString = (value, options = {}) => {\n  const S = exports.DOMString(value, options);\n  const n = S.length;\n  const U = [];\n  for (let i = 0; i < n; ++i) {\n    const c = S.charCodeAt(i);\n    if (c < 0xD800 || c > 0xDFFF) {\n      U.push(String.fromCodePoint(c));\n    } else if (0xDC00 <= c && c <= 0xDFFF) {\n      U.push(String.fromCodePoint(0xFFFD));\n    } else if (i === n - 1) {\n      U.push(String.fromCodePoint(0xFFFD));\n    } else {\n      const d = S.charCodeAt(i + 1);\n      if (0xDC00 <= d && d <= 0xDFFF) {\n        const a = c & 0x3FF;\n        const b = d & 0x3FF;\n        U.push(String.fromCodePoint((2 << 15) + ((2 << 9) * a) + b));\n        ++i;\n      } else {\n        U.push(String.fromCodePoint(0xFFFD));\n      }\n    }\n  }\n\n  return U.join(\"\");\n};\n\nexports.object = (value, options = {}) => {\n  if (value === null || (typeof value !== \"object\" && typeof value !== \"function\")) {\n    throw makeException(TypeError, \"is not an object\", options);\n  }\n\n  return value;\n};\n\nconst abByteLengthGetter =\n    Object.getOwnPropertyDescriptor(ArrayBuffer.prototype, \"byteLength\").get;\nconst sabByteLengthGetter =\n    typeof SharedArrayBuffer === \"function\" ?\n      Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype, \"byteLength\").get :\n      null;\n\nfunction isNonSharedArrayBuffer(value) {\n  try {\n    // This will throw on SharedArrayBuffers, but not detached ArrayBuffers.\n    // (The spec says it should throw, but the spec conflicts with implementations: https://github.com/tc39/ecma262/issues/678)\n    abByteLengthGetter.call(value);\n\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction isSharedArrayBuffer(value) {\n  try {\n    sabByteLengthGetter.call(value);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction isArrayBufferDetached(value) {\n  try {\n    // eslint-disable-next-line no-new\n    new Uint8Array(value);\n    return false;\n  } catch {\n    return true;\n  }\n}\n\nexports.ArrayBuffer = (value, options = {}) => {\n  if (!isNonSharedArrayBuffer(value)) {\n    if (options.allowShared && !isSharedArrayBuffer(value)) {\n      throw makeException(TypeError, \"is not an ArrayBuffer or SharedArrayBuffer\", options);\n    }\n    throw makeException(TypeError, \"is not an ArrayBuffer\", options);\n  }\n  if (isArrayBufferDetached(value)) {\n    throw makeException(TypeError, \"is a detached ArrayBuffer\", options);\n  }\n\n  return value;\n};\n\nconst dvByteLengthGetter =\n    Object.getOwnPropertyDescriptor(DataView.prototype, \"byteLength\").get;\nexports.DataView = (value, options = {}) => {\n  try {\n    dvByteLengthGetter.call(value);\n  } catch (e) {\n    throw makeException(TypeError, \"is not a DataView\", options);\n  }\n\n  if (!options.allowShared && isSharedArrayBuffer(value.buffer)) {\n    throw makeException(TypeError, \"is backed by a SharedArrayBuffer, which is not allowed\", options);\n  }\n  if (isArrayBufferDetached(value.buffer)) {\n    throw makeException(TypeError, \"is backed by a detached ArrayBuffer\", options);\n  }\n\n  return value;\n};\n\n// Returns the unforgeable `TypedArray` constructor name or `undefined`,\n// if the `this` value isn't a valid `TypedArray` object.\n//\n// https://tc39.es/ecma262/#sec-get-%typedarray%.prototype-@@tostringtag\nconst typedArrayNameGetter = Object.getOwnPropertyDescriptor(\n  Object.getPrototypeOf(Uint8Array).prototype,\n  Symbol.toStringTag\n).get;\n[\n  Int8Array,\n  Int16Array,\n  Int32Array,\n  Uint8Array,\n  Uint16Array,\n  Uint32Array,\n  Uint8ClampedArray,\n  Float32Array,\n  Float64Array\n].forEach(func => {\n  const { name } = func;\n  const article = /^[AEIOU]/u.test(name) ? \"an\" : \"a\";\n  exports[name] = (value, options = {}) => {\n    if (!ArrayBuffer.isView(value) || typedArrayNameGetter.call(value) !== name) {\n      throw makeException(TypeError, `is not ${article} ${name} object`, options);\n    }\n    if (!options.allowShared && isSharedArrayBuffer(value.buffer)) {\n      throw makeException(TypeError, \"is a view on a SharedArrayBuffer, which is not allowed\", options);\n    }\n    if (isArrayBufferDetached(value.buffer)) {\n      throw makeException(TypeError, \"is a view on a detached ArrayBuffer\", options);\n    }\n\n    return value;\n  };\n});\n\n// Common definitions\n\nexports.ArrayBufferView = (value, options = {}) => {\n  if (!ArrayBuffer.isView(value)) {\n    throw makeException(TypeError, \"is not a view on an ArrayBuffer or SharedArrayBuffer\", options);\n  }\n\n  if (!options.allowShared && isSharedArrayBuffer(value.buffer)) {\n    throw makeException(TypeError, \"is a view on a SharedArrayBuffer, which is not allowed\", options);\n  }\n\n  if (isArrayBufferDetached(value.buffer)) {\n    throw makeException(TypeError, \"is a view on a detached ArrayBuffer\", options);\n  }\n  return value;\n};\n\nexports.BufferSource = (value, options = {}) => {\n  if (ArrayBuffer.isView(value)) {\n    if (!options.allowShared && isSharedArrayBuffer(value.buffer)) {\n      throw makeException(TypeError, \"is a view on a SharedArrayBuffer, which is not allowed\", options);\n    }\n\n    if (isArrayBufferDetached(value.buffer)) {\n      throw makeException(TypeError, \"is a view on a detached ArrayBuffer\", options);\n    }\n    return value;\n  }\n\n  if (!options.allowShared && !isNonSharedArrayBuffer(value)) {\n    throw makeException(TypeError, \"is not an ArrayBuffer or a view on one\", options);\n  }\n  if (options.allowShared && !isSharedArrayBuffer(value) && !isNonSharedArrayBuffer(value)) {\n    throw makeException(TypeError, \"is not an ArrayBuffer, SharedArrayBuffer, or a view on one\", options);\n  }\n  if (isArrayBufferDetached(value)) {\n    throw makeException(TypeError, \"is a detached ArrayBuffer\", options);\n  }\n\n  return value;\n};\n\nexports.DOMTimeStamp = exports[\"unsigned long long\"];\n","\"use strict\";\n\nexports.removeLeadingAndTrailingHTTPWhitespace = string => {\n  return string.replace(/^[ \\t\\n\\r]+/u, \"\").replace(/[ \\t\\n\\r]+$/u, \"\");\n};\n\nexports.removeTrailingHTTPWhitespace = string => {\n  return string.replace(/[ \\t\\n\\r]+$/u, \"\");\n};\n\nexports.isHTTPWhitespaceChar = char => {\n  return char === \" \" || char === \"\\t\" || char === \"\\n\" || char === \"\\r\";\n};\n\nexports.solelyContainsHTTPTokenCodePoints = string => {\n  return /^[-!#$%&'*+.^_`|~A-Za-z0-9]*$/u.test(string);\n};\n\nexports.soleyContainsHTTPQuotedStringTokenCodePoints = string => {\n  return /^[\\t\\u0020-\\u007E\\u0080-\\u00FF]*$/u.test(string);\n};\n\nexports.asciiLowercase = string => {\n  return string.replace(/[A-Z]/ug, l => l.toLowerCase());\n};\n\n// This variant only implements it with the extract-value flag set.\nexports.collectAnHTTPQuotedString = (input, position) => {\n  let value = \"\";\n\n  position++;\n\n  while (true) {\n    while (position < input.length && input[position] !== \"\\\"\" && input[position] !== \"\\\\\") {\n      value += input[position];\n      ++position;\n    }\n\n    if (position >= input.length) {\n      break;\n    }\n\n    const quoteOrBackslash = input[position];\n    ++position;\n\n    if (quoteOrBackslash === \"\\\\\") {\n      if (position >= input.length) {\n        value += \"\\\\\";\n        break;\n      }\n\n      value += input[position];\n      ++position;\n    } else {\n      break;\n    }\n  }\n\n  return [value, position];\n};\n","\"use strict\";\nconst { solelyContainsHTTPTokenCodePoints } = require(\"./utils.js\");\n\nmodule.exports = mimeType => {\n  let serialization = `${mimeType.type}/${mimeType.subtype}`;\n\n  if (mimeType.parameters.size === 0) {\n    return serialization;\n  }\n\n  for (let [name, value] of mimeType.parameters) {\n    serialization += \";\";\n    serialization += name;\n    serialization += \"=\";\n\n    if (!solelyContainsHTTPTokenCodePoints(value) || value.length === 0) {\n      value = value.replace(/([\"\\\\])/ug, \"\\\\$1\");\n      value = `\"${value}\"`;\n    }\n\n    serialization += value;\n  }\n\n  return serialization;\n};\n","\"use strict\";\nconst MIMEType = require(\"whatwg-mimetype\");\nconst { parseURL, serializeURL, percentDecodeString } = require(\"whatwg-url\");\nconst { stripLeadingAndTrailingASCIIWhitespace, isomorphicDecode, forgivingBase64Decode } = require(\"./utils.js\");\n\nmodule.exports = stringInput => {\n  const urlRecord = parseURL(stringInput);\n\n  if (urlRecord === null) {\n    return null;\n  }\n\n  return module.exports.fromURLRecord(urlRecord);\n};\n\nmodule.exports.fromURLRecord = urlRecord => {\n  if (urlRecord.scheme !== \"data\") {\n    return null;\n  }\n\n  const input = serializeURL(urlRecord, true).substring(\"data:\".length);\n\n  let position = 0;\n\n  let mimeType = \"\";\n  while (position < input.length && input[position] !== \",\") {\n    mimeType += input[position];\n    ++position;\n  }\n  mimeType = stripLeadingAndTrailingASCIIWhitespace(mimeType);\n\n  if (position === input.length) {\n    return null;\n  }\n\n  ++position;\n\n  const encodedBody = input.substring(position);\n\n  let body = percentDecodeString(encodedBody);\n\n  // Can't use /i regexp flag because it isn't restricted to ASCII.\n  const mimeTypeBase64MatchResult = /(.*); *[Bb][Aa][Ss][Ee]64$/u.exec(mimeType);\n  if (mimeTypeBase64MatchResult) {\n    const stringBody = isomorphicDecode(body);\n    body = forgivingBase64Decode(stringBody);\n\n    if (body === null) {\n      return null;\n    }\n    mimeType = mimeTypeBase64MatchResult[1];\n  }\n\n  if (mimeType.startsWith(\";\")) {\n    mimeType = `text/plain${mimeType}`;\n  }\n\n  let mimeTypeRecord;\n  try {\n    mimeTypeRecord = new MIMEType(mimeType);\n  } catch (e) {\n    mimeTypeRecord = new MIMEType(\"text/plain;charset=US-ASCII\");\n  }\n\n  return {\n    mimeType: mimeTypeRecord,\n    body\n  };\n};\n","\"use strict\";\nconst { utf8Encode, utf8DecodeWithoutBOM } = require(\"./encoding\");\nconst { percentDecodeBytes, utf8PercentEncodeString, isURLEncodedPercentEncode } = require(\"./percent-encoding\");\n\nfunction p(char) {\n  return char.codePointAt(0);\n}\n\n// https://url.spec.whatwg.org/#concept-urlencoded-parser\nfunction parseUrlencoded(input) {\n  const sequences = strictlySplitByteSequence(input, p(\"&\"));\n  const output = [];\n  for (const bytes of sequences) {\n    if (bytes.length === 0) {\n      continue;\n    }\n\n    let name, value;\n    const indexOfEqual = bytes.indexOf(p(\"=\"));\n\n    if (indexOfEqual >= 0) {\n      name = bytes.slice(0, indexOfEqual);\n      value = bytes.slice(indexOfEqual + 1);\n    } else {\n      name = bytes;\n      value = new Uint8Array(0);\n    }\n\n    name = replaceByteInByteSequence(name, 0x2B, 0x20);\n    value = replaceByteInByteSequence(value, 0x2B, 0x20);\n\n    const nameString = utf8DecodeWithoutBOM(percentDecodeBytes(name));\n    const valueString = utf8DecodeWithoutBOM(percentDecodeBytes(value));\n\n    output.push([nameString, valueString]);\n  }\n  return output;\n}\n\n// https://url.spec.whatwg.org/#concept-urlencoded-string-parser\nfunction parseUrlencodedString(input) {\n  return parseUrlencoded(utf8Encode(input));\n}\n\n// https://url.spec.whatwg.org/#concept-urlencoded-serializer\nfunction serializeUrlencoded(tuples) {\n  // TODO: accept and use encoding argument\n\n  let output = \"\";\n  for (const [i, tuple] of tuples.entries()) {\n    const name = utf8PercentEncodeString(tuple[0], isURLEncodedPercentEncode, true);\n    const value = utf8PercentEncodeString(tuple[1], isURLEncodedPercentEncode, true);\n\n    if (i !== 0) {\n      output += \"&\";\n    }\n    output += `${name}=${value}`;\n  }\n  return output;\n}\n\nfunction strictlySplitByteSequence(buf, cp) {\n  const list = [];\n  let last = 0;\n  let i = buf.indexOf(cp);\n  while (i >= 0) {\n    list.push(buf.slice(last, i));\n    last = i + 1;\n    i = buf.indexOf(cp, last);\n  }\n  if (last !== buf.length) {\n    list.push(buf.slice(last));\n  }\n  return list;\n}\n\nfunction replaceByteInByteSequence(buf, from, to) {\n  let i = buf.indexOf(from);\n  while (i >= 0) {\n    buf[i] = to;\n    i = buf.indexOf(from, i + 1);\n  }\n  return buf;\n}\n\nmodule.exports = {\n  parseUrlencodedString,\n  serializeUrlencoded\n};\n","\"use strict\";\n\nconst combiningMarks = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0897-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B55-\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3C\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0CF3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D81-\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1715\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA82C\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\u{101FD}\\u{102E0}\\u{10376}-\\u{1037A}\\u{10A01}-\\u{10A03}\\u{10A05}\\u{10A06}\\u{10A0C}-\\u{10A0F}\\u{10A38}-\\u{10A3A}\\u{10A3F}\\u{10AE5}\\u{10AE6}\\u{10D24}-\\u{10D27}\\u{10D69}-\\u{10D6D}\\u{10EAB}\\u{10EAC}\\u{10EFC}-\\u{10EFF}\\u{10F46}-\\u{10F50}\\u{10F82}-\\u{10F85}\\u{11000}-\\u{11002}\\u{11038}-\\u{11046}\\u{11070}\\u{11073}\\u{11074}\\u{1107F}-\\u{11082}\\u{110B0}-\\u{110BA}\\u{110C2}\\u{11100}-\\u{11102}\\u{11127}-\\u{11134}\\u{11145}\\u{11146}\\u{11173}\\u{11180}-\\u{11182}\\u{111B3}-\\u{111C0}\\u{111C9}-\\u{111CC}\\u{111CE}\\u{111CF}\\u{1122C}-\\u{11237}\\u{1123E}\\u{11241}\\u{112DF}-\\u{112EA}\\u{11300}-\\u{11303}\\u{1133B}\\u{1133C}\\u{1133E}-\\u{11344}\\u{11347}\\u{11348}\\u{1134B}-\\u{1134D}\\u{11357}\\u{11362}\\u{11363}\\u{11366}-\\u{1136C}\\u{11370}-\\u{11374}\\u{113B8}-\\u{113C0}\\u{113C2}\\u{113C5}\\u{113C7}-\\u{113CA}\\u{113CC}-\\u{113D0}\\u{113D2}\\u{113E1}\\u{113E2}\\u{11435}-\\u{11446}\\u{1145E}\\u{114B0}-\\u{114C3}\\u{115AF}-\\u{115B5}\\u{115B8}-\\u{115C0}\\u{115DC}\\u{115DD}\\u{11630}-\\u{11640}\\u{116AB}-\\u{116B7}\\u{1171D}-\\u{1172B}\\u{1182C}-\\u{1183A}\\u{11930}-\\u{11935}\\u{11937}\\u{11938}\\u{1193B}-\\u{1193E}\\u{11940}\\u{11942}\\u{11943}\\u{119D1}-\\u{119D7}\\u{119DA}-\\u{119E0}\\u{119E4}\\u{11A01}-\\u{11A0A}\\u{11A33}-\\u{11A39}\\u{11A3B}-\\u{11A3E}\\u{11A47}\\u{11A51}-\\u{11A5B}\\u{11A8A}-\\u{11A99}\\u{11C2F}-\\u{11C36}\\u{11C38}-\\u{11C3F}\\u{11C92}-\\u{11CA7}\\u{11CA9}-\\u{11CB6}\\u{11D31}-\\u{11D36}\\u{11D3A}\\u{11D3C}\\u{11D3D}\\u{11D3F}-\\u{11D45}\\u{11D47}\\u{11D8A}-\\u{11D8E}\\u{11D90}\\u{11D91}\\u{11D93}-\\u{11D97}\\u{11EF3}-\\u{11EF6}\\u{11F00}\\u{11F01}\\u{11F03}\\u{11F34}-\\u{11F3A}\\u{11F3E}-\\u{11F42}\\u{11F5A}\\u{13440}\\u{13447}-\\u{13455}\\u{1611E}-\\u{1612F}\\u{16AF0}-\\u{16AF4}\\u{16B30}-\\u{16B36}\\u{16F4F}\\u{16F51}-\\u{16F87}\\u{16F8F}-\\u{16F92}\\u{16FE4}\\u{16FF0}\\u{16FF1}\\u{1BC9D}\\u{1BC9E}\\u{1CF00}-\\u{1CF2D}\\u{1CF30}-\\u{1CF46}\\u{1D165}-\\u{1D169}\\u{1D16D}-\\u{1D172}\\u{1D17B}-\\u{1D182}\\u{1D185}-\\u{1D18B}\\u{1D1AA}-\\u{1D1AD}\\u{1D242}-\\u{1D244}\\u{1DA00}-\\u{1DA36}\\u{1DA3B}-\\u{1DA6C}\\u{1DA75}\\u{1DA84}\\u{1DA9B}-\\u{1DA9F}\\u{1DAA1}-\\u{1DAAF}\\u{1E000}-\\u{1E006}\\u{1E008}-\\u{1E018}\\u{1E01B}-\\u{1E021}\\u{1E023}\\u{1E024}\\u{1E026}-\\u{1E02A}\\u{1E08F}\\u{1E130}-\\u{1E136}\\u{1E2AE}\\u{1E2EC}-\\u{1E2EF}\\u{1E4EC}-\\u{1E4EF}\\u{1E5EE}\\u{1E5EF}\\u{1E8D0}-\\u{1E8D6}\\u{1E944}-\\u{1E94A}\\u{E0100}-\\u{E01EF}]/u;\nconst combiningClassVirama = /[\\u094D\\u09CD\\u0A4D\\u0ACD\\u0B4D\\u0BCD\\u0C4D\\u0CCD\\u0D3B\\u0D3C\\u0D4D\\u0DCA\\u0E3A\\u0EBA\\u0F84\\u1039\\u103A\\u1714\\u1715\\u1734\\u17D2\\u1A60\\u1B44\\u1BAA\\u1BAB\\u1BF2\\u1BF3\\u2D7F\\uA806\\uA82C\\uA8C4\\uA953\\uA9C0\\uAAF6\\uABED\\u{10A3F}\\u{11046}\\u{11070}\\u{1107F}\\u{110B9}\\u{11133}\\u{11134}\\u{111C0}\\u{11235}\\u{112EA}\\u{1134D}\\u{113CE}-\\u{113D0}\\u{11442}\\u{114C2}\\u{115BF}\\u{1163F}\\u{116B6}\\u{1172B}\\u{11839}\\u{1193D}\\u{1193E}\\u{119E0}\\u{11A34}\\u{11A47}\\u{11A99}\\u{11C3F}\\u{11D44}\\u{11D45}\\u{11D97}\\u{11F41}\\u{11F42}\\u{1612F}]/u;\nconst validZWNJ = /[\\u0620\\u0626\\u0628\\u062A-\\u062E\\u0633-\\u063F\\u0641-\\u0647\\u0649\\u064A\\u066E\\u066F\\u0678-\\u0687\\u069A-\\u06BF\\u06C1\\u06C2\\u06CC\\u06CE\\u06D0\\u06D1\\u06FA-\\u06FC\\u06FF\\u0712-\\u0714\\u071A-\\u071D\\u071F-\\u0727\\u0729\\u072B\\u072D\\u072E\\u074E-\\u0758\\u075C-\\u076A\\u076D-\\u0770\\u0772\\u0775-\\u0777\\u077A-\\u077F\\u07CA-\\u07EA\\u0841-\\u0845\\u0848\\u084A-\\u0853\\u0855\\u0860\\u0862-\\u0865\\u0868\\u0886\\u0889-\\u088D\\u08A0-\\u08A9\\u08AF\\u08B0\\u08B3-\\u08B8\\u08BA-\\u08C8\\u1807\\u1820-\\u1878\\u1887-\\u18A8\\u18AA\\uA840-\\uA872\\u{10AC0}-\\u{10AC4}\\u{10ACD}\\u{10AD3}-\\u{10ADC}\\u{10ADE}-\\u{10AE0}\\u{10AEB}-\\u{10AEE}\\u{10B80}\\u{10B82}\\u{10B86}-\\u{10B88}\\u{10B8A}\\u{10B8B}\\u{10B8D}\\u{10B90}\\u{10BAD}\\u{10BAE}\\u{10D00}-\\u{10D21}\\u{10D23}\\u{10EC3}\\u{10EC4}\\u{10F30}-\\u{10F32}\\u{10F34}-\\u{10F44}\\u{10F51}-\\u{10F53}\\u{10F70}-\\u{10F73}\\u{10F76}-\\u{10F81}\\u{10FB0}\\u{10FB2}\\u{10FB3}\\u{10FB8}\\u{10FBB}\\u{10FBC}\\u{10FBE}\\u{10FBF}\\u{10FC1}\\u{10FC4}\\u{10FCA}\\u{10FCB}\\u{1E900}-\\u{1E943}][\\xAD\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u061C\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u070F\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0897-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C00\\u0C04\\u0C3C\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732\\u1733\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DFF\\u200B\\u200E\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u206A-\\u206F\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302D\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFEFF\\uFFF9-\\uFFFB\\u{101FD}\\u{102E0}\\u{10376}-\\u{1037A}\\u{10A01}-\\u{10A03}\\u{10A05}\\u{10A06}\\u{10A0C}-\\u{10A0F}\\u{10A38}-\\u{10A3A}\\u{10A3F}\\u{10AE5}\\u{10AE6}\\u{10D24}-\\u{10D27}\\u{10D69}-\\u{10D6D}\\u{10EAB}\\u{10EAC}\\u{10EFC}-\\u{10EFF}\\u{10F46}-\\u{10F50}\\u{10F82}-\\u{10F85}\\u{11001}\\u{11038}-\\u{11046}\\u{11070}\\u{11073}\\u{11074}\\u{1107F}-\\u{11081}\\u{110B3}-\\u{110B6}\\u{110B9}\\u{110BA}\\u{110C2}\\u{11100}-\\u{11102}\\u{11127}-\\u{1112B}\\u{1112D}-\\u{11134}\\u{11173}\\u{11180}\\u{11181}\\u{111B6}-\\u{111BE}\\u{111C9}-\\u{111CC}\\u{111CF}\\u{1122F}-\\u{11231}\\u{11234}\\u{11236}\\u{11237}\\u{1123E}\\u{11241}\\u{112DF}\\u{112E3}-\\u{112EA}\\u{11300}\\u{11301}\\u{1133B}\\u{1133C}\\u{11340}\\u{11366}-\\u{1136C}\\u{11370}-\\u{11374}\\u{113BB}-\\u{113C0}\\u{113CE}\\u{113D0}\\u{113D2}\\u{113E1}\\u{113E2}\\u{11438}-\\u{1143F}\\u{11442}-\\u{11444}\\u{11446}\\u{1145E}\\u{114B3}-\\u{114B8}\\u{114BA}\\u{114BF}\\u{114C0}\\u{114C2}\\u{114C3}\\u{115B2}-\\u{115B5}\\u{115BC}\\u{115BD}\\u{115BF}\\u{115C0}\\u{115DC}\\u{115DD}\\u{11633}-\\u{1163A}\\u{1163D}\\u{1163F}\\u{11640}\\u{116AB}\\u{116AD}\\u{116B0}-\\u{116B5}\\u{116B7}\\u{1171D}\\u{1171F}\\u{11722}-\\u{11725}\\u{11727}-\\u{1172B}\\u{1182F}-\\u{11837}\\u{11839}\\u{1183A}\\u{1193B}\\u{1193C}\\u{1193E}\\u{11943}\\u{119D4}-\\u{119D7}\\u{119DA}\\u{119DB}\\u{119E0}\\u{11A01}-\\u{11A0A}\\u{11A33}-\\u{11A38}\\u{11A3B}-\\u{11A3E}\\u{11A47}\\u{11A51}-\\u{11A56}\\u{11A59}-\\u{11A5B}\\u{11A8A}-\\u{11A96}\\u{11A98}\\u{11A99}\\u{11C30}-\\u{11C36}\\u{11C38}-\\u{11C3D}\\u{11C3F}\\u{11C92}-\\u{11CA7}\\u{11CAA}-\\u{11CB0}\\u{11CB2}\\u{11CB3}\\u{11CB5}\\u{11CB6}\\u{11D31}-\\u{11D36}\\u{11D3A}\\u{11D3C}\\u{11D3D}\\u{11D3F}-\\u{11D45}\\u{11D47}\\u{11D90}\\u{11D91}\\u{11D95}\\u{11D97}\\u{11EF3}\\u{11EF4}\\u{11F00}\\u{11F01}\\u{11F36}-\\u{11F3A}\\u{11F40}\\u{11F42}\\u{11F5A}\\u{13430}-\\u{13440}\\u{13447}-\\u{13455}\\u{1611E}-\\u{16129}\\u{1612D}-\\u{1612F}\\u{16AF0}-\\u{16AF4}\\u{16B30}-\\u{16B36}\\u{16F4F}\\u{16F8F}-\\u{16F92}\\u{16FE4}\\u{1BC9D}\\u{1BC9E}\\u{1BCA0}-\\u{1BCA3}\\u{1CF00}-\\u{1CF2D}\\u{1CF30}-\\u{1CF46}\\u{1D167}-\\u{1D169}\\u{1D173}-\\u{1D182}\\u{1D185}-\\u{1D18B}\\u{1D1AA}-\\u{1D1AD}\\u{1D242}-\\u{1D244}\\u{1DA00}-\\u{1DA36}\\u{1DA3B}-\\u{1DA6C}\\u{1DA75}\\u{1DA84}\\u{1DA9B}-\\u{1DA9F}\\u{1DAA1}-\\u{1DAAF}\\u{1E000}-\\u{1E006}\\u{1E008}-\\u{1E018}\\u{1E01B}-\\u{1E021}\\u{1E023}\\u{1E024}\\u{1E026}-\\u{1E02A}\\u{1E08F}\\u{1E130}-\\u{1E136}\\u{1E2AE}\\u{1E2EC}-\\u{1E2EF}\\u{1E4EC}-\\u{1E4EF}\\u{1E5EE}\\u{1E5EF}\\u{1E8D0}-\\u{1E8D6}\\u{1E944}-\\u{1E94B}\\u{E0001}\\u{E0020}-\\u{E007F}\\u{E0100}-\\u{E01EF}]*\\u200C[\\xAD\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u061C\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u070F\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0897-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C00\\u0C04\\u0C3C\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732\\u1733\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DFF\\u200B\\u200E\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u206A-\\u206F\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302D\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFEFF\\uFFF9-\\uFFFB\\u{101FD}\\u{102E0}\\u{10376}-\\u{1037A}\\u{10A01}-\\u{10A03}\\u{10A05}\\u{10A06}\\u{10A0C}-\\u{10A0F}\\u{10A38}-\\u{10A3A}\\u{10A3F}\\u{10AE5}\\u{10AE6}\\u{10D24}-\\u{10D27}\\u{10D69}-\\u{10D6D}\\u{10EAB}\\u{10EAC}\\u{10EFC}-\\u{10EFF}\\u{10F46}-\\u{10F50}\\u{10F82}-\\u{10F85}\\u{11001}\\u{11038}-\\u{11046}\\u{11070}\\u{11073}\\u{11074}\\u{1107F}-\\u{11081}\\u{110B3}-\\u{110B6}\\u{110B9}\\u{110BA}\\u{110C2}\\u{11100}-\\u{11102}\\u{11127}-\\u{1112B}\\u{1112D}-\\u{11134}\\u{11173}\\u{11180}\\u{11181}\\u{111B6}-\\u{111BE}\\u{111C9}-\\u{111CC}\\u{111CF}\\u{1122F}-\\u{11231}\\u{11234}\\u{11236}\\u{11237}\\u{1123E}\\u{11241}\\u{112DF}\\u{112E3}-\\u{112EA}\\u{11300}\\u{11301}\\u{1133B}\\u{1133C}\\u{11340}\\u{11366}-\\u{1136C}\\u{11370}-\\u{11374}\\u{113BB}-\\u{113C0}\\u{113CE}\\u{113D0}\\u{113D2}\\u{113E1}\\u{113E2}\\u{11438}-\\u{1143F}\\u{11442}-\\u{11444}\\u{11446}\\u{1145E}\\u{114B3}-\\u{114B8}\\u{114BA}\\u{114BF}\\u{114C0}\\u{114C2}\\u{114C3}\\u{115B2}-\\u{115B5}\\u{115BC}\\u{115BD}\\u{115BF}\\u{115C0}\\u{115DC}\\u{115DD}\\u{11633}-\\u{1163A}\\u{1163D}\\u{1163F}\\u{11640}\\u{116AB}\\u{116AD}\\u{116B0}-\\u{116B5}\\u{116B7}\\u{1171D}\\u{1171F}\\u{11722}-\\u{11725}\\u{11727}-\\u{1172B}\\u{1182F}-\\u{11837}\\u{11839}\\u{1183A}\\u{1193B}\\u{1193C}\\u{1193E}\\u{11943}\\u{119D4}-\\u{119D7}\\u{119DA}\\u{119DB}\\u{119E0}\\u{11A01}-\\u{11A0A}\\u{11A33}-\\u{11A38}\\u{11A3B}-\\u{11A3E}\\u{11A47}\\u{11A51}-\\u{11A56}\\u{11A59}-\\u{11A5B}\\u{11A8A}-\\u{11A96}\\u{11A98}\\u{11A99}\\u{11C30}-\\u{11C36}\\u{11C38}-\\u{11C3D}\\u{11C3F}\\u{11C92}-\\u{11CA7}\\u{11CAA}-\\u{11CB0}\\u{11CB2}\\u{11CB3}\\u{11CB5}\\u{11CB6}\\u{11D31}-\\u{11D36}\\u{11D3A}\\u{11D3C}\\u{11D3D}\\u{11D3F}-\\u{11D45}\\u{11D47}\\u{11D90}\\u{11D91}\\u{11D95}\\u{11D97}\\u{11EF3}\\u{11EF4}\\u{11F00}\\u{11F01}\\u{11F36}-\\u{11F3A}\\u{11F40}\\u{11F42}\\u{11F5A}\\u{13430}-\\u{13440}\\u{13447}-\\u{13455}\\u{1611E}-\\u{16129}\\u{1612D}-\\u{1612F}\\u{16AF0}-\\u{16AF4}\\u{16B30}-\\u{16B36}\\u{16F4F}\\u{16F8F}-\\u{16F92}\\u{16FE4}\\u{1BC9D}\\u{1BC9E}\\u{1BCA0}-\\u{1BCA3}\\u{1CF00}-\\u{1CF2D}\\u{1CF30}-\\u{1CF46}\\u{1D167}-\\u{1D169}\\u{1D173}-\\u{1D182}\\u{1D185}-\\u{1D18B}\\u{1D1AA}-\\u{1D1AD}\\u{1D242}-\\u{1D244}\\u{1DA00}-\\u{1DA36}\\u{1DA3B}-\\u{1DA6C}\\u{1DA75}\\u{1DA84}\\u{1DA9B}-\\u{1DA9F}\\u{1DAA1}-\\u{1DAAF}\\u{1E000}-\\u{1E006}\\u{1E008}-\\u{1E018}\\u{1E01B}-\\u{1E021}\\u{1E023}\\u{1E024}\\u{1E026}-\\u{1E02A}\\u{1E08F}\\u{1E130}-\\u{1E136}\\u{1E2AE}\\u{1E2EC}-\\u{1E2EF}\\u{1E4EC}-\\u{1E4EF}\\u{1E5EE}\\u{1E5EF}\\u{1E8D0}-\\u{1E8D6}\\u{1E944}-\\u{1E94B}\\u{E0001}\\u{E0020}-\\u{E007F}\\u{E0100}-\\u{E01EF}]*[\\u0620\\u0622-\\u063F\\u0641-\\u064A\\u066E\\u066F\\u0671-\\u0673\\u0675-\\u06D3\\u06D5\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u077F\\u07CA-\\u07EA\\u0840-\\u0858\\u0860\\u0862-\\u0865\\u0867-\\u086A\\u0870-\\u0882\\u0886\\u0889-\\u088E\\u08A0-\\u08AC\\u08AE-\\u08C8\\u1807\\u1820-\\u1878\\u1887-\\u18A8\\u18AA\\uA840-\\uA871\\u{10AC0}-\\u{10AC5}\\u{10AC7}\\u{10AC9}\\u{10ACA}\\u{10ACE}-\\u{10AD6}\\u{10AD8}-\\u{10AE1}\\u{10AE4}\\u{10AEB}-\\u{10AEF}\\u{10B80}-\\u{10B91}\\u{10BA9}-\\u{10BAE}\\u{10D01}-\\u{10D23}\\u{10EC2}-\\u{10EC4}\\u{10F30}-\\u{10F44}\\u{10F51}-\\u{10F54}\\u{10F70}-\\u{10F81}\\u{10FB0}\\u{10FB2}-\\u{10FB6}\\u{10FB8}-\\u{10FBF}\\u{10FC1}-\\u{10FC4}\\u{10FC9}\\u{10FCA}\\u{1E900}-\\u{1E943}]/u;\nconst bidiDomain = /[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05EA\\u05EF-\\u05F4\\u0600-\\u0605\\u0608\\u060B\\u060D\\u061B-\\u064A\\u0660-\\u0669\\u066B-\\u066F\\u0671-\\u06D5\\u06DD\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u070D\\u070F\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u07FE-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u083E\\u0840-\\u0858\\u085E\\u0860-\\u086A\\u0870-\\u088E\\u0890\\u0891\\u08A0-\\u08C9\\u08E2\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBC2\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFC\\uFE70-\\uFE74\\uFE76-\\uFEFC\\u{10800}-\\u{10805}\\u{10808}\\u{1080A}-\\u{10835}\\u{10837}\\u{10838}\\u{1083C}\\u{1083F}-\\u{10855}\\u{10857}-\\u{1089E}\\u{108A7}-\\u{108AF}\\u{108E0}-\\u{108F2}\\u{108F4}\\u{108F5}\\u{108FB}-\\u{1091B}\\u{10920}-\\u{10939}\\u{1093F}\\u{10980}-\\u{109B7}\\u{109BC}-\\u{109CF}\\u{109D2}-\\u{10A00}\\u{10A10}-\\u{10A13}\\u{10A15}-\\u{10A17}\\u{10A19}-\\u{10A35}\\u{10A40}-\\u{10A48}\\u{10A50}-\\u{10A58}\\u{10A60}-\\u{10A9F}\\u{10AC0}-\\u{10AE4}\\u{10AEB}-\\u{10AF6}\\u{10B00}-\\u{10B35}\\u{10B40}-\\u{10B55}\\u{10B58}-\\u{10B72}\\u{10B78}-\\u{10B91}\\u{10B99}-\\u{10B9C}\\u{10BA9}-\\u{10BAF}\\u{10C00}-\\u{10C48}\\u{10C80}-\\u{10CB2}\\u{10CC0}-\\u{10CF2}\\u{10CFA}-\\u{10D23}\\u{10D30}-\\u{10D39}\\u{10D40}-\\u{10D65}\\u{10D6F}-\\u{10D85}\\u{10D8E}\\u{10D8F}\\u{10E60}-\\u{10E7E}\\u{10E80}-\\u{10EA9}\\u{10EAD}\\u{10EB0}\\u{10EB1}\\u{10EC2}-\\u{10EC4}\\u{10F00}-\\u{10F27}\\u{10F30}-\\u{10F45}\\u{10F51}-\\u{10F59}\\u{10F70}-\\u{10F81}\\u{10F86}-\\u{10F89}\\u{10FB0}-\\u{10FCB}\\u{10FE0}-\\u{10FF6}\\u{1E800}-\\u{1E8C4}\\u{1E8C7}-\\u{1E8CF}\\u{1E900}-\\u{1E943}\\u{1E94B}\\u{1E950}-\\u{1E959}\\u{1E95E}\\u{1E95F}\\u{1EC71}-\\u{1ECB4}\\u{1ED01}-\\u{1ED3D}\\u{1EE00}-\\u{1EE03}\\u{1EE05}-\\u{1EE1F}\\u{1EE21}\\u{1EE22}\\u{1EE24}\\u{1EE27}\\u{1EE29}-\\u{1EE32}\\u{1EE34}-\\u{1EE37}\\u{1EE39}\\u{1EE3B}\\u{1EE42}\\u{1EE47}\\u{1EE49}\\u{1EE4B}\\u{1EE4D}-\\u{1EE4F}\\u{1EE51}\\u{1EE52}\\u{1EE54}\\u{1EE57}\\u{1EE59}\\u{1EE5B}\\u{1EE5D}\\u{1EE5F}\\u{1EE61}\\u{1EE62}\\u{1EE64}\\u{1EE67}-\\u{1EE6A}\\u{1EE6C}-\\u{1EE72}\\u{1EE74}-\\u{1EE77}\\u{1EE79}-\\u{1EE7C}\\u{1EE7E}\\u{1EE80}-\\u{1EE89}\\u{1EE8B}-\\u{1EE9B}\\u{1EEA1}-\\u{1EEA3}\\u{1EEA5}-\\u{1EEA9}\\u{1EEAB}-\\u{1EEBB}]/u;\nconst bidiS1LTR = /[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02B8\\u02BB-\\u02C1\\u02D0\\u02D1\\u02E0-\\u02E4\\u02EE\\u0370-\\u0373\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0482\\u048A-\\u052F\\u0531-\\u0556\\u0559-\\u0589\\u0903-\\u0939\\u093B\\u093D-\\u0940\\u0949-\\u094C\\u094E-\\u0950\\u0958-\\u0961\\u0964-\\u0980\\u0982\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09FA\\u09FC\\u09FD\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3E-\\u0A40\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A76\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AF0\\u0AF9\\u0B02\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD0\\u0BD7\\u0BE6-\\u0BF2\\u0C01-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C41-\\u0C44\\u0C58-\\u0C5A\\u0C5D\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C77\\u0C7F\\u0C80\\u0C82-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0CDD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1-\\u0CF3\\u0D02-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D4E\\u0D4F\\u0D54-\\u0D61\\u0D66-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2-\\u0DF4\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E4F-\\u0E5B\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00-\\u0F17\\u0F1A-\\u0F34\\u0F36\\u0F38\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F7F\\u0F85\\u0F88-\\u0F8C\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE-\\u0FDA\\u1000-\\u102C\\u1031\\u1038\\u103B\\u103C\\u103F-\\u1057\\u105A-\\u105D\\u1061-\\u1070\\u1075-\\u1081\\u1083\\u1084\\u1087-\\u108C\\u108E-\\u109C\\u109E-\\u10C5\\u10C7\\u10CD\\u10D0-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1360-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u167F\\u1681-\\u169A\\u16A0-\\u16F8\\u1700-\\u1711\\u1715\\u171F-\\u1731\\u1734-\\u1736\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u17D4-\\u17DA\\u17DC\\u17E0-\\u17E9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A19\\u1A1A\\u1A1E-\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA0-\\u1AAD\\u1B04-\\u1B33\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43-\\u1B4C\\u1B4E-\\u1B6A\\u1B74-\\u1B7F\\u1B82-\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1BAE-\\u1BE5\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2\\u1BF3\\u1BFC-\\u1C2B\\u1C34\\u1C35\\u1C3B-\\u1C49\\u1C4D-\\u1C8A\\u1C90-\\u1CBA\\u1CBD-\\u1CC7\\u1CD3\\u1CE1\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5-\\u1CF7\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200E\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u214F\\u2160-\\u2188\\u2336-\\u237A\\u2395\\u249C-\\u24E9\\u26AC\\u2800-\\u28FF\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D70\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u3005-\\u3007\\u3021-\\u3029\\u302E\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3190-\\u31BF\\u31F0-\\u321C\\u3220-\\u324F\\u3260-\\u327B\\u327F-\\u32B0\\u32C0-\\u32CB\\u32D0-\\u3376\\u337B-\\u33DD\\u33E0-\\u33FE\\u3400-\\u4DBF\\u4E00-\\uA48C\\uA4D0-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA680-\\uA69D\\uA6A0-\\uA6EF\\uA6F2-\\uA6F7\\uA722-\\uA787\\uA789-\\uA7CD\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7DC\\uA7F2-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA824\\uA827\\uA830-\\uA837\\uA840-\\uA873\\uA880-\\uA8C3\\uA8CE-\\uA8D9\\uA8F2-\\uA8FE\\uA900-\\uA925\\uA92E-\\uA946\\uA952\\uA953\\uA95F-\\uA97C\\uA983-\\uA9B2\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BE-\\uA9CD\\uA9CF-\\uA9D9\\uA9DE-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA4D\\uAA50-\\uAA59\\uAA5C-\\uAA7B\\uAA7D-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAAEB\\uAAEE-\\uAAF5\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB69\\uAB70-\\uABE4\\uABE6\\uABE7\\uABE9-\\uABEC\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uD800-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\\u{10000}-\\u{1000B}\\u{1000D}-\\u{10026}\\u{10028}-\\u{1003A}\\u{1003C}\\u{1003D}\\u{1003F}-\\u{1004D}\\u{10050}-\\u{1005D}\\u{10080}-\\u{100FA}\\u{10100}\\u{10102}\\u{10107}-\\u{10133}\\u{10137}-\\u{1013F}\\u{1018D}\\u{1018E}\\u{101D0}-\\u{101FC}\\u{10280}-\\u{1029C}\\u{102A0}-\\u{102D0}\\u{10300}-\\u{10323}\\u{1032D}-\\u{1034A}\\u{10350}-\\u{10375}\\u{10380}-\\u{1039D}\\u{1039F}-\\u{103C3}\\u{103C8}-\\u{103D5}\\u{10400}-\\u{1049D}\\u{104A0}-\\u{104A9}\\u{104B0}-\\u{104D3}\\u{104D8}-\\u{104FB}\\u{10500}-\\u{10527}\\u{10530}-\\u{10563}\\u{1056F}-\\u{1057A}\\u{1057C}-\\u{1058A}\\u{1058C}-\\u{10592}\\u{10594}\\u{10595}\\u{10597}-\\u{105A1}\\u{105A3}-\\u{105B1}\\u{105B3}-\\u{105B9}\\u{105BB}\\u{105BC}\\u{105C0}-\\u{105F3}\\u{10600}-\\u{10736}\\u{10740}-\\u{10755}\\u{10760}-\\u{10767}\\u{10780}-\\u{10785}\\u{10787}-\\u{107B0}\\u{107B2}-\\u{107BA}\\u{11000}\\u{11002}-\\u{11037}\\u{11047}-\\u{1104D}\\u{11066}-\\u{1106F}\\u{11071}\\u{11072}\\u{11075}\\u{11082}-\\u{110B2}\\u{110B7}\\u{110B8}\\u{110BB}-\\u{110C1}\\u{110CD}\\u{110D0}-\\u{110E8}\\u{110F0}-\\u{110F9}\\u{11103}-\\u{11126}\\u{1112C}\\u{11136}-\\u{11147}\\u{11150}-\\u{11172}\\u{11174}-\\u{11176}\\u{11182}-\\u{111B5}\\u{111BF}-\\u{111C8}\\u{111CD}\\u{111CE}\\u{111D0}-\\u{111DF}\\u{111E1}-\\u{111F4}\\u{11200}-\\u{11211}\\u{11213}-\\u{1122E}\\u{11232}\\u{11233}\\u{11235}\\u{11238}-\\u{1123D}\\u{1123F}\\u{11240}\\u{11280}-\\u{11286}\\u{11288}\\u{1128A}-\\u{1128D}\\u{1128F}-\\u{1129D}\\u{1129F}-\\u{112A9}\\u{112B0}-\\u{112DE}\\u{112E0}-\\u{112E2}\\u{112F0}-\\u{112F9}\\u{11302}\\u{11303}\\u{11305}-\\u{1130C}\\u{1130F}\\u{11310}\\u{11313}-\\u{11328}\\u{1132A}-\\u{11330}\\u{11332}\\u{11333}\\u{11335}-\\u{11339}\\u{1133D}-\\u{1133F}\\u{11341}-\\u{11344}\\u{11347}\\u{11348}\\u{1134B}-\\u{1134D}\\u{11350}\\u{11357}\\u{1135D}-\\u{11363}\\u{11380}-\\u{11389}\\u{1138B}\\u{1138E}\\u{11390}-\\u{113B5}\\u{113B7}-\\u{113BA}\\u{113C2}\\u{113C5}\\u{113C7}-\\u{113CA}\\u{113CC}\\u{113CD}\\u{113CF}\\u{113D1}\\u{113D3}-\\u{113D5}\\u{113D7}\\u{113D8}\\u{11400}-\\u{11437}\\u{11440}\\u{11441}\\u{11445}\\u{11447}-\\u{1145B}\\u{1145D}\\u{1145F}-\\u{11461}\\u{11480}-\\u{114B2}\\u{114B9}\\u{114BB}-\\u{114BE}\\u{114C1}\\u{114C4}-\\u{114C7}\\u{114D0}-\\u{114D9}\\u{11580}-\\u{115B1}\\u{115B8}-\\u{115BB}\\u{115BE}\\u{115C1}-\\u{115DB}\\u{11600}-\\u{11632}\\u{1163B}\\u{1163C}\\u{1163E}\\u{11641}-\\u{11644}\\u{11650}-\\u{11659}\\u{11680}-\\u{116AA}\\u{116AC}\\u{116AE}\\u{116AF}\\u{116B6}\\u{116B8}\\u{116B9}\\u{116C0}-\\u{116C9}\\u{116D0}-\\u{116E3}\\u{11700}-\\u{1171A}\\u{1171E}\\u{11720}\\u{11721}\\u{11726}\\u{11730}-\\u{11746}\\u{11800}-\\u{1182E}\\u{11838}\\u{1183B}\\u{118A0}-\\u{118F2}\\u{118FF}-\\u{11906}\\u{11909}\\u{1190C}-\\u{11913}\\u{11915}\\u{11916}\\u{11918}-\\u{11935}\\u{11937}\\u{11938}\\u{1193D}\\u{1193F}-\\u{11942}\\u{11944}-\\u{11946}\\u{11950}-\\u{11959}\\u{119A0}-\\u{119A7}\\u{119AA}-\\u{119D3}\\u{119DC}-\\u{119DF}\\u{119E1}-\\u{119E4}\\u{11A00}\\u{11A07}\\u{11A08}\\u{11A0B}-\\u{11A32}\\u{11A39}\\u{11A3A}\\u{11A3F}-\\u{11A46}\\u{11A50}\\u{11A57}\\u{11A58}\\u{11A5C}-\\u{11A89}\\u{11A97}\\u{11A9A}-\\u{11AA2}\\u{11AB0}-\\u{11AF8}\\u{11B00}-\\u{11B09}\\u{11BC0}-\\u{11BE1}\\u{11BF0}-\\u{11BF9}\\u{11C00}-\\u{11C08}\\u{11C0A}-\\u{11C2F}\\u{11C3E}-\\u{11C45}\\u{11C50}-\\u{11C6C}\\u{11C70}-\\u{11C8F}\\u{11CA9}\\u{11CB1}\\u{11CB4}\\u{11D00}-\\u{11D06}\\u{11D08}\\u{11D09}\\u{11D0B}-\\u{11D30}\\u{11D46}\\u{11D50}-\\u{11D59}\\u{11D60}-\\u{11D65}\\u{11D67}\\u{11D68}\\u{11D6A}-\\u{11D8E}\\u{11D93}\\u{11D94}\\u{11D96}\\u{11D98}\\u{11DA0}-\\u{11DA9}\\u{11EE0}-\\u{11EF2}\\u{11EF5}-\\u{11EF8}\\u{11F02}-\\u{11F10}\\u{11F12}-\\u{11F35}\\u{11F3E}\\u{11F3F}\\u{11F41}\\u{11F43}-\\u{11F59}\\u{11FB0}\\u{11FC0}-\\u{11FD4}\\u{11FFF}-\\u{12399}\\u{12400}-\\u{1246E}\\u{12470}-\\u{12474}\\u{12480}-\\u{12543}\\u{12F90}-\\u{12FF2}\\u{13000}-\\u{1343F}\\u{13441}-\\u{13446}\\u{13460}-\\u{143FA}\\u{14400}-\\u{14646}\\u{16100}-\\u{1611D}\\u{1612A}-\\u{1612C}\\u{16130}-\\u{16139}\\u{16800}-\\u{16A38}\\u{16A40}-\\u{16A5E}\\u{16A60}-\\u{16A69}\\u{16A6E}-\\u{16ABE}\\u{16AC0}-\\u{16AC9}\\u{16AD0}-\\u{16AED}\\u{16AF5}\\u{16B00}-\\u{16B2F}\\u{16B37}-\\u{16B45}\\u{16B50}-\\u{16B59}\\u{16B5B}-\\u{16B61}\\u{16B63}-\\u{16B77}\\u{16B7D}-\\u{16B8F}\\u{16D40}-\\u{16D79}\\u{16E40}-\\u{16E9A}\\u{16F00}-\\u{16F4A}\\u{16F50}-\\u{16F87}\\u{16F93}-\\u{16F9F}\\u{16FE0}\\u{16FE1}\\u{16FE3}\\u{16FF0}\\u{16FF1}\\u{17000}-\\u{187F7}\\u{18800}-\\u{18CD5}\\u{18CFF}-\\u{18D08}\\u{1AFF0}-\\u{1AFF3}\\u{1AFF5}-\\u{1AFFB}\\u{1AFFD}\\u{1AFFE}\\u{1B000}-\\u{1B122}\\u{1B132}\\u{1B150}-\\u{1B152}\\u{1B155}\\u{1B164}-\\u{1B167}\\u{1B170}-\\u{1B2FB}\\u{1BC00}-\\u{1BC6A}\\u{1BC70}-\\u{1BC7C}\\u{1BC80}-\\u{1BC88}\\u{1BC90}-\\u{1BC99}\\u{1BC9C}\\u{1BC9F}\\u{1CCD6}-\\u{1CCEF}\\u{1CF50}-\\u{1CFC3}\\u{1D000}-\\u{1D0F5}\\u{1D100}-\\u{1D126}\\u{1D129}-\\u{1D166}\\u{1D16A}-\\u{1D172}\\u{1D183}\\u{1D184}\\u{1D18C}-\\u{1D1A9}\\u{1D1AE}-\\u{1D1E8}\\u{1D2C0}-\\u{1D2D3}\\u{1D2E0}-\\u{1D2F3}\\u{1D360}-\\u{1D378}\\u{1D400}-\\u{1D454}\\u{1D456}-\\u{1D49C}\\u{1D49E}\\u{1D49F}\\u{1D4A2}\\u{1D4A5}\\u{1D4A6}\\u{1D4A9}-\\u{1D4AC}\\u{1D4AE}-\\u{1D4B9}\\u{1D4BB}\\u{1D4BD}-\\u{1D4C3}\\u{1D4C5}-\\u{1D505}\\u{1D507}-\\u{1D50A}\\u{1D50D}-\\u{1D514}\\u{1D516}-\\u{1D51C}\\u{1D51E}-\\u{1D539}\\u{1D53B}-\\u{1D53E}\\u{1D540}-\\u{1D544}\\u{1D546}\\u{1D54A}-\\u{1D550}\\u{1D552}-\\u{1D6A5}\\u{1D6A8}-\\u{1D6C0}\\u{1D6C2}-\\u{1D6DA}\\u{1D6DC}-\\u{1D6FA}\\u{1D6FC}-\\u{1D714}\\u{1D716}-\\u{1D734}\\u{1D736}-\\u{1D74E}\\u{1D750}-\\u{1D76E}\\u{1D770}-\\u{1D788}\\u{1D78A}-\\u{1D7A8}\\u{1D7AA}-\\u{1D7C2}\\u{1D7C4}-\\u{1D7CB}\\u{1D800}-\\u{1D9FF}\\u{1DA37}-\\u{1DA3A}\\u{1DA6D}-\\u{1DA74}\\u{1DA76}-\\u{1DA83}\\u{1DA85}-\\u{1DA8B}\\u{1DF00}-\\u{1DF1E}\\u{1DF25}-\\u{1DF2A}\\u{1E030}-\\u{1E06D}\\u{1E100}-\\u{1E12C}\\u{1E137}-\\u{1E13D}\\u{1E140}-\\u{1E149}\\u{1E14E}\\u{1E14F}\\u{1E290}-\\u{1E2AD}\\u{1E2C0}-\\u{1E2EB}\\u{1E2F0}-\\u{1E2F9}\\u{1E4D0}-\\u{1E4EB}\\u{1E4F0}-\\u{1E4F9}\\u{1E5D0}-\\u{1E5ED}\\u{1E5F0}-\\u{1E5FA}\\u{1E5FF}\\u{1E7E0}-\\u{1E7E6}\\u{1E7E8}-\\u{1E7EB}\\u{1E7ED}\\u{1E7EE}\\u{1E7F0}-\\u{1E7FE}\\u{1F110}-\\u{1F12E}\\u{1F130}-\\u{1F169}\\u{1F170}-\\u{1F1AC}\\u{1F1E6}-\\u{1F202}\\u{1F210}-\\u{1F23B}\\u{1F240}-\\u{1F248}\\u{1F250}\\u{1F251}\\u{20000}-\\u{2A6DF}\\u{2A700}-\\u{2B739}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2EBF0}-\\u{2EE5D}\\u{2F800}-\\u{2FA1D}\\u{30000}-\\u{3134A}\\u{31350}-\\u{323AF}\\u{F0000}-\\u{FFFFD}\\u{100000}-\\u{10FFFD}]/u;\nconst bidiS1RTL = /[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05EA\\u05EF-\\u05F4\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u070D\\u070F\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u07FE-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u083E\\u0840-\\u0858\\u085E\\u0860-\\u086A\\u0870-\\u088E\\u08A0-\\u08C9\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBC2\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFC\\uFE70-\\uFE74\\uFE76-\\uFEFC\\u{10800}-\\u{10805}\\u{10808}\\u{1080A}-\\u{10835}\\u{10837}\\u{10838}\\u{1083C}\\u{1083F}-\\u{10855}\\u{10857}-\\u{1089E}\\u{108A7}-\\u{108AF}\\u{108E0}-\\u{108F2}\\u{108F4}\\u{108F5}\\u{108FB}-\\u{1091B}\\u{10920}-\\u{10939}\\u{1093F}\\u{10980}-\\u{109B7}\\u{109BC}-\\u{109CF}\\u{109D2}-\\u{10A00}\\u{10A10}-\\u{10A13}\\u{10A15}-\\u{10A17}\\u{10A19}-\\u{10A35}\\u{10A40}-\\u{10A48}\\u{10A50}-\\u{10A58}\\u{10A60}-\\u{10A9F}\\u{10AC0}-\\u{10AE4}\\u{10AEB}-\\u{10AF6}\\u{10B00}-\\u{10B35}\\u{10B40}-\\u{10B55}\\u{10B58}-\\u{10B72}\\u{10B78}-\\u{10B91}\\u{10B99}-\\u{10B9C}\\u{10BA9}-\\u{10BAF}\\u{10C00}-\\u{10C48}\\u{10C80}-\\u{10CB2}\\u{10CC0}-\\u{10CF2}\\u{10CFA}-\\u{10D23}\\u{10D4A}-\\u{10D65}\\u{10D6F}-\\u{10D85}\\u{10D8E}\\u{10D8F}\\u{10E80}-\\u{10EA9}\\u{10EAD}\\u{10EB0}\\u{10EB1}\\u{10EC2}-\\u{10EC4}\\u{10F00}-\\u{10F27}\\u{10F30}-\\u{10F45}\\u{10F51}-\\u{10F59}\\u{10F70}-\\u{10F81}\\u{10F86}-\\u{10F89}\\u{10FB0}-\\u{10FCB}\\u{10FE0}-\\u{10FF6}\\u{1E800}-\\u{1E8C4}\\u{1E8C7}-\\u{1E8CF}\\u{1E900}-\\u{1E943}\\u{1E94B}\\u{1E950}-\\u{1E959}\\u{1E95E}\\u{1E95F}\\u{1EC71}-\\u{1ECB4}\\u{1ED01}-\\u{1ED3D}\\u{1EE00}-\\u{1EE03}\\u{1EE05}-\\u{1EE1F}\\u{1EE21}\\u{1EE22}\\u{1EE24}\\u{1EE27}\\u{1EE29}-\\u{1EE32}\\u{1EE34}-\\u{1EE37}\\u{1EE39}\\u{1EE3B}\\u{1EE42}\\u{1EE47}\\u{1EE49}\\u{1EE4B}\\u{1EE4D}-\\u{1EE4F}\\u{1EE51}\\u{1EE52}\\u{1EE54}\\u{1EE57}\\u{1EE59}\\u{1EE5B}\\u{1EE5D}\\u{1EE5F}\\u{1EE61}\\u{1EE62}\\u{1EE64}\\u{1EE67}-\\u{1EE6A}\\u{1EE6C}-\\u{1EE72}\\u{1EE74}-\\u{1EE77}\\u{1EE79}-\\u{1EE7C}\\u{1EE7E}\\u{1EE80}-\\u{1EE89}\\u{1EE8B}-\\u{1EE9B}\\u{1EEA1}-\\u{1EEA3}\\u{1EEA5}-\\u{1EEA9}\\u{1EEAB}-\\u{1EEBB}]/u;\nconst bidiS2 = /^[\\0-\\x08\\x0E-\\x1B!-@\\[-`\\{-\\x84\\x86-\\xA9\\xAB-\\xB4\\xB6-\\xB9\\xBB-\\xBF\\xD7\\xF7\\u02B9\\u02BA\\u02C2-\\u02CF\\u02D2-\\u02DF\\u02E5-\\u02ED\\u02EF-\\u036F\\u0374\\u0375\\u037E\\u0384\\u0385\\u0387\\u03F6\\u0483-\\u0489\\u058A\\u058D-\\u058F\\u0591-\\u05C7\\u05D0-\\u05EA\\u05EF-\\u05F4\\u0600-\\u070D\\u070F-\\u074A\\u074D-\\u07B1\\u07C0-\\u07FA\\u07FD-\\u082D\\u0830-\\u083E\\u0840-\\u085B\\u085E\\u0860-\\u086A\\u0870-\\u088E\\u0890\\u0891\\u0897-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u09F2\\u09F3\\u09FB\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AF1\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0BF3-\\u0BFA\\u0C00\\u0C04\\u0C3C\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C78-\\u0C7E\\u0C81\\u0CBC\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E3F\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39-\\u0F3D\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1390-\\u1399\\u1400\\u169B\\u169C\\u1712-\\u1714\\u1732\\u1733\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DB\\u17DD\\u17F0-\\u17F9\\u1800-\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1940\\u1944\\u1945\\u19DE-\\u19FF\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DFF\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u200B-\\u200D\\u200F-\\u2027\\u202F-\\u205E\\u2060-\\u2064\\u206A-\\u2070\\u2074-\\u207E\\u2080-\\u208E\\u20A0-\\u20C0\\u20D0-\\u20F0\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u2150-\\u215F\\u2189-\\u218B\\u2190-\\u2335\\u237B-\\u2394\\u2396-\\u2429\\u2440-\\u244A\\u2460-\\u249B\\u24EA-\\u26AB\\u26AD-\\u27FF\\u2900-\\u2B73\\u2B76-\\u2B95\\u2B97-\\u2BFF\\u2CE5-\\u2CEA\\u2CEF-\\u2CF1\\u2CF9-\\u2CFF\\u2D7F\\u2DE0-\\u2E5D\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFF\\u3001-\\u3004\\u3008-\\u3020\\u302A-\\u302D\\u3030\\u3036\\u3037\\u303D-\\u303F\\u3099-\\u309C\\u30A0\\u30FB\\u31C0-\\u31E5\\u31EF\\u321D\\u321E\\u3250-\\u325F\\u327C-\\u327E\\u32B1-\\u32BF\\u32CC-\\u32CF\\u3377-\\u337A\\u33DE\\u33DF\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA60D-\\uA60F\\uA66F-\\uA67F\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA700-\\uA721\\uA788\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA828-\\uA82C\\uA838\\uA839\\uA874-\\uA877\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uAB6A\\uAB6B\\uABE5\\uABE8\\uABED\\uFB1D-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBC2\\uFBD3-\\uFD8F\\uFD92-\\uFDC7\\uFDCF\\uFDF0-\\uFE19\\uFE20-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFEFF\\uFF01-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF65\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFF9-\\uFFFD\\u{10101}\\u{10140}-\\u{1018C}\\u{10190}-\\u{1019C}\\u{101A0}\\u{101FD}\\u{102E0}-\\u{102FB}\\u{10376}-\\u{1037A}\\u{10800}-\\u{10805}\\u{10808}\\u{1080A}-\\u{10835}\\u{10837}\\u{10838}\\u{1083C}\\u{1083F}-\\u{10855}\\u{10857}-\\u{1089E}\\u{108A7}-\\u{108AF}\\u{108E0}-\\u{108F2}\\u{108F4}\\u{108F5}\\u{108FB}-\\u{1091B}\\u{1091F}-\\u{10939}\\u{1093F}\\u{10980}-\\u{109B7}\\u{109BC}-\\u{109CF}\\u{109D2}-\\u{10A03}\\u{10A05}\\u{10A06}\\u{10A0C}-\\u{10A13}\\u{10A15}-\\u{10A17}\\u{10A19}-\\u{10A35}\\u{10A38}-\\u{10A3A}\\u{10A3F}-\\u{10A48}\\u{10A50}-\\u{10A58}\\u{10A60}-\\u{10A9F}\\u{10AC0}-\\u{10AE6}\\u{10AEB}-\\u{10AF6}\\u{10B00}-\\u{10B35}\\u{10B39}-\\u{10B55}\\u{10B58}-\\u{10B72}\\u{10B78}-\\u{10B91}\\u{10B99}-\\u{10B9C}\\u{10BA9}-\\u{10BAF}\\u{10C00}-\\u{10C48}\\u{10C80}-\\u{10CB2}\\u{10CC0}-\\u{10CF2}\\u{10CFA}-\\u{10D27}\\u{10D30}-\\u{10D39}\\u{10D40}-\\u{10D65}\\u{10D69}-\\u{10D85}\\u{10D8E}\\u{10D8F}\\u{10E60}-\\u{10E7E}\\u{10E80}-\\u{10EA9}\\u{10EAB}-\\u{10EAD}\\u{10EB0}\\u{10EB1}\\u{10EC2}-\\u{10EC4}\\u{10EFC}-\\u{10F27}\\u{10F30}-\\u{10F59}\\u{10F70}-\\u{10F89}\\u{10FB0}-\\u{10FCB}\\u{10FE0}-\\u{10FF6}\\u{11001}\\u{11038}-\\u{11046}\\u{11052}-\\u{11065}\\u{11070}\\u{11073}\\u{11074}\\u{1107F}-\\u{11081}\\u{110B3}-\\u{110B6}\\u{110B9}\\u{110BA}\\u{110C2}\\u{11100}-\\u{11102}\\u{11127}-\\u{1112B}\\u{1112D}-\\u{11134}\\u{11173}\\u{11180}\\u{11181}\\u{111B6}-\\u{111BE}\\u{111C9}-\\u{111CC}\\u{111CF}\\u{1122F}-\\u{11231}\\u{11234}\\u{11236}\\u{11237}\\u{1123E}\\u{11241}\\u{112DF}\\u{112E3}-\\u{112EA}\\u{11300}\\u{11301}\\u{1133B}\\u{1133C}\\u{11340}\\u{11366}-\\u{1136C}\\u{11370}-\\u{11374}\\u{113BB}-\\u{113C0}\\u{113CE}\\u{113D0}\\u{113D2}\\u{113E1}\\u{113E2}\\u{11438}-\\u{1143F}\\u{11442}-\\u{11444}\\u{11446}\\u{1145E}\\u{114B3}-\\u{114B8}\\u{114BA}\\u{114BF}\\u{114C0}\\u{114C2}\\u{114C3}\\u{115B2}-\\u{115B5}\\u{115BC}\\u{115BD}\\u{115BF}\\u{115C0}\\u{115DC}\\u{115DD}\\u{11633}-\\u{1163A}\\u{1163D}\\u{1163F}\\u{11640}\\u{11660}-\\u{1166C}\\u{116AB}\\u{116AD}\\u{116B0}-\\u{116B5}\\u{116B7}\\u{1171D}\\u{1171F}\\u{11722}-\\u{11725}\\u{11727}-\\u{1172B}\\u{1182F}-\\u{11837}\\u{11839}\\u{1183A}\\u{1193B}\\u{1193C}\\u{1193E}\\u{11943}\\u{119D4}-\\u{119D7}\\u{119DA}\\u{119DB}\\u{119E0}\\u{11A01}-\\u{11A06}\\u{11A09}\\u{11A0A}\\u{11A33}-\\u{11A38}\\u{11A3B}-\\u{11A3E}\\u{11A47}\\u{11A51}-\\u{11A56}\\u{11A59}-\\u{11A5B}\\u{11A8A}-\\u{11A96}\\u{11A98}\\u{11A99}\\u{11C30}-\\u{11C36}\\u{11C38}-\\u{11C3D}\\u{11C92}-\\u{11CA7}\\u{11CAA}-\\u{11CB0}\\u{11CB2}\\u{11CB3}\\u{11CB5}\\u{11CB6}\\u{11D31}-\\u{11D36}\\u{11D3A}\\u{11D3C}\\u{11D3D}\\u{11D3F}-\\u{11D45}\\u{11D47}\\u{11D90}\\u{11D91}\\u{11D95}\\u{11D97}\\u{11EF3}\\u{11EF4}\\u{11F00}\\u{11F01}\\u{11F36}-\\u{11F3A}\\u{11F40}\\u{11F42}\\u{11F5A}\\u{11FD5}-\\u{11FF1}\\u{13440}\\u{13447}-\\u{13455}\\u{1611E}-\\u{16129}\\u{1612D}-\\u{1612F}\\u{16AF0}-\\u{16AF4}\\u{16B30}-\\u{16B36}\\u{16F4F}\\u{16F8F}-\\u{16F92}\\u{16FE2}\\u{16FE4}\\u{1BC9D}\\u{1BC9E}\\u{1BCA0}-\\u{1BCA3}\\u{1CC00}-\\u{1CCD5}\\u{1CCF0}-\\u{1CCF9}\\u{1CD00}-\\u{1CEB3}\\u{1CF00}-\\u{1CF2D}\\u{1CF30}-\\u{1CF46}\\u{1D167}-\\u{1D169}\\u{1D173}-\\u{1D182}\\u{1D185}-\\u{1D18B}\\u{1D1AA}-\\u{1D1AD}\\u{1D1E9}\\u{1D1EA}\\u{1D200}-\\u{1D245}\\u{1D300}-\\u{1D356}\\u{1D6C1}\\u{1D6DB}\\u{1D6FB}\\u{1D715}\\u{1D735}\\u{1D74F}\\u{1D76F}\\u{1D789}\\u{1D7A9}\\u{1D7C3}\\u{1D7CE}-\\u{1D7FF}\\u{1DA00}-\\u{1DA36}\\u{1DA3B}-\\u{1DA6C}\\u{1DA75}\\u{1DA84}\\u{1DA9B}-\\u{1DA9F}\\u{1DAA1}-\\u{1DAAF}\\u{1E000}-\\u{1E006}\\u{1E008}-\\u{1E018}\\u{1E01B}-\\u{1E021}\\u{1E023}\\u{1E024}\\u{1E026}-\\u{1E02A}\\u{1E08F}\\u{1E130}-\\u{1E136}\\u{1E2AE}\\u{1E2EC}-\\u{1E2EF}\\u{1E2FF}\\u{1E4EC}-\\u{1E4EF}\\u{1E5EE}\\u{1E5EF}\\u{1E800}-\\u{1E8C4}\\u{1E8C7}-\\u{1E8D6}\\u{1E900}-\\u{1E94B}\\u{1E950}-\\u{1E959}\\u{1E95E}\\u{1E95F}\\u{1EC71}-\\u{1ECB4}\\u{1ED01}-\\u{1ED3D}\\u{1EE00}-\\u{1EE03}\\u{1EE05}-\\u{1EE1F}\\u{1EE21}\\u{1EE22}\\u{1EE24}\\u{1EE27}\\u{1EE29}-\\u{1EE32}\\u{1EE34}-\\u{1EE37}\\u{1EE39}\\u{1EE3B}\\u{1EE42}\\u{1EE47}\\u{1EE49}\\u{1EE4B}\\u{1EE4D}-\\u{1EE4F}\\u{1EE51}\\u{1EE52}\\u{1EE54}\\u{1EE57}\\u{1EE59}\\u{1EE5B}\\u{1EE5D}\\u{1EE5F}\\u{1EE61}\\u{1EE62}\\u{1EE64}\\u{1EE67}-\\u{1EE6A}\\u{1EE6C}-\\u{1EE72}\\u{1EE74}-\\u{1EE77}\\u{1EE79}-\\u{1EE7C}\\u{1EE7E}\\u{1EE80}-\\u{1EE89}\\u{1EE8B}-\\u{1EE9B}\\u{1EEA1}-\\u{1EEA3}\\u{1EEA5}-\\u{1EEA9}\\u{1EEAB}-\\u{1EEBB}\\u{1EEF0}\\u{1EEF1}\\u{1F000}-\\u{1F02B}\\u{1F030}-\\u{1F093}\\u{1F0A0}-\\u{1F0AE}\\u{1F0B1}-\\u{1F0BF}\\u{1F0C1}-\\u{1F0CF}\\u{1F0D1}-\\u{1F0F5}\\u{1F100}-\\u{1F10F}\\u{1F12F}\\u{1F16A}-\\u{1F16F}\\u{1F1AD}\\u{1F260}-\\u{1F265}\\u{1F300}-\\u{1F6D7}\\u{1F6DC}-\\u{1F6EC}\\u{1F6F0}-\\u{1F6FC}\\u{1F700}-\\u{1F776}\\u{1F77B}-\\u{1F7D9}\\u{1F7E0}-\\u{1F7EB}\\u{1F7F0}\\u{1F800}-\\u{1F80B}\\u{1F810}-\\u{1F847}\\u{1F850}-\\u{1F859}\\u{1F860}-\\u{1F887}\\u{1F890}-\\u{1F8AD}\\u{1F8B0}-\\u{1F8BB}\\u{1F8C0}\\u{1F8C1}\\u{1F900}-\\u{1FA53}\\u{1FA60}-\\u{1FA6D}\\u{1FA70}-\\u{1FA7C}\\u{1FA80}-\\u{1FA89}\\u{1FA8F}-\\u{1FAC6}\\u{1FACE}-\\u{1FADC}\\u{1FADF}-\\u{1FAE9}\\u{1FAF0}-\\u{1FAF8}\\u{1FB00}-\\u{1FB92}\\u{1FB94}-\\u{1FBF9}\\u{E0001}\\u{E0020}-\\u{E007F}\\u{E0100}-\\u{E01EF}]*$/u;\nconst bidiS3 = /[0-9\\xB2\\xB3\\xB9\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05EA\\u05EF-\\u05F4\\u0600-\\u0605\\u0608\\u060B\\u060D\\u061B-\\u064A\\u0660-\\u0669\\u066B-\\u066F\\u0671-\\u06D5\\u06DD\\u06E5\\u06E6\\u06EE-\\u070D\\u070F\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u07FE-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u083E\\u0840-\\u0858\\u085E\\u0860-\\u086A\\u0870-\\u088E\\u0890\\u0891\\u08A0-\\u08C9\\u08E2\\u200F\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2488-\\u249B\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBC2\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFC\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\u{102E1}-\\u{102FB}\\u{10800}-\\u{10805}\\u{10808}\\u{1080A}-\\u{10835}\\u{10837}\\u{10838}\\u{1083C}\\u{1083F}-\\u{10855}\\u{10857}-\\u{1089E}\\u{108A7}-\\u{108AF}\\u{108E0}-\\u{108F2}\\u{108F4}\\u{108F5}\\u{108FB}-\\u{1091B}\\u{10920}-\\u{10939}\\u{1093F}\\u{10980}-\\u{109B7}\\u{109BC}-\\u{109CF}\\u{109D2}-\\u{10A00}\\u{10A10}-\\u{10A13}\\u{10A15}-\\u{10A17}\\u{10A19}-\\u{10A35}\\u{10A40}-\\u{10A48}\\u{10A50}-\\u{10A58}\\u{10A60}-\\u{10A9F}\\u{10AC0}-\\u{10AE4}\\u{10AEB}-\\u{10AF6}\\u{10B00}-\\u{10B35}\\u{10B40}-\\u{10B55}\\u{10B58}-\\u{10B72}\\u{10B78}-\\u{10B91}\\u{10B99}-\\u{10B9C}\\u{10BA9}-\\u{10BAF}\\u{10C00}-\\u{10C48}\\u{10C80}-\\u{10CB2}\\u{10CC0}-\\u{10CF2}\\u{10CFA}-\\u{10D23}\\u{10D30}-\\u{10D39}\\u{10D40}-\\u{10D65}\\u{10D6F}-\\u{10D85}\\u{10D8E}\\u{10D8F}\\u{10E60}-\\u{10E7E}\\u{10E80}-\\u{10EA9}\\u{10EAD}\\u{10EB0}\\u{10EB1}\\u{10EC2}-\\u{10EC4}\\u{10F00}-\\u{10F27}\\u{10F30}-\\u{10F45}\\u{10F51}-\\u{10F59}\\u{10F70}-\\u{10F81}\\u{10F86}-\\u{10F89}\\u{10FB0}-\\u{10FCB}\\u{10FE0}-\\u{10FF6}\\u{1CCF0}-\\u{1CCF9}\\u{1D7CE}-\\u{1D7FF}\\u{1E800}-\\u{1E8C4}\\u{1E8C7}-\\u{1E8CF}\\u{1E900}-\\u{1E943}\\u{1E94B}\\u{1E950}-\\u{1E959}\\u{1E95E}\\u{1E95F}\\u{1EC71}-\\u{1ECB4}\\u{1ED01}-\\u{1ED3D}\\u{1EE00}-\\u{1EE03}\\u{1EE05}-\\u{1EE1F}\\u{1EE21}\\u{1EE22}\\u{1EE24}\\u{1EE27}\\u{1EE29}-\\u{1EE32}\\u{1EE34}-\\u{1EE37}\\u{1EE39}\\u{1EE3B}\\u{1EE42}\\u{1EE47}\\u{1EE49}\\u{1EE4B}\\u{1EE4D}-\\u{1EE4F}\\u{1EE51}\\u{1EE52}\\u{1EE54}\\u{1EE57}\\u{1EE59}\\u{1EE5B}\\u{1EE5D}\\u{1EE5F}\\u{1EE61}\\u{1EE62}\\u{1EE64}\\u{1EE67}-\\u{1EE6A}\\u{1EE6C}-\\u{1EE72}\\u{1EE74}-\\u{1EE77}\\u{1EE79}-\\u{1EE7C}\\u{1EE7E}\\u{1EE80}-\\u{1EE89}\\u{1EE8B}-\\u{1EE9B}\\u{1EEA1}-\\u{1EEA3}\\u{1EEA5}-\\u{1EEA9}\\u{1EEAB}-\\u{1EEBB}\\u{1F100}-\\u{1F10A}\\u{1FBF0}-\\u{1FBF9}][\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0897-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C00\\u0C04\\u0C3C\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732\\u1733\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302D\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\u{101FD}\\u{102E0}\\u{10376}-\\u{1037A}\\u{10A01}-\\u{10A03}\\u{10A05}\\u{10A06}\\u{10A0C}-\\u{10A0F}\\u{10A38}-\\u{10A3A}\\u{10A3F}\\u{10AE5}\\u{10AE6}\\u{10D24}-\\u{10D27}\\u{10D69}-\\u{10D6D}\\u{10EAB}\\u{10EAC}\\u{10EFC}-\\u{10EFF}\\u{10F46}-\\u{10F50}\\u{10F82}-\\u{10F85}\\u{11001}\\u{11038}-\\u{11046}\\u{11070}\\u{11073}\\u{11074}\\u{1107F}-\\u{11081}\\u{110B3}-\\u{110B6}\\u{110B9}\\u{110BA}\\u{110C2}\\u{11100}-\\u{11102}\\u{11127}-\\u{1112B}\\u{1112D}-\\u{11134}\\u{11173}\\u{11180}\\u{11181}\\u{111B6}-\\u{111BE}\\u{111C9}-\\u{111CC}\\u{111CF}\\u{1122F}-\\u{11231}\\u{11234}\\u{11236}\\u{11237}\\u{1123E}\\u{11241}\\u{112DF}\\u{112E3}-\\u{112EA}\\u{11300}\\u{11301}\\u{1133B}\\u{1133C}\\u{11340}\\u{11366}-\\u{1136C}\\u{11370}-\\u{11374}\\u{113BB}-\\u{113C0}\\u{113CE}\\u{113D0}\\u{113D2}\\u{113E1}\\u{113E2}\\u{11438}-\\u{1143F}\\u{11442}-\\u{11444}\\u{11446}\\u{1145E}\\u{114B3}-\\u{114B8}\\u{114BA}\\u{114BF}\\u{114C0}\\u{114C2}\\u{114C3}\\u{115B2}-\\u{115B5}\\u{115BC}\\u{115BD}\\u{115BF}\\u{115C0}\\u{115DC}\\u{115DD}\\u{11633}-\\u{1163A}\\u{1163D}\\u{1163F}\\u{11640}\\u{116AB}\\u{116AD}\\u{116B0}-\\u{116B5}\\u{116B7}\\u{1171D}\\u{1171F}\\u{11722}-\\u{11725}\\u{11727}-\\u{1172B}\\u{1182F}-\\u{11837}\\u{11839}\\u{1183A}\\u{1193B}\\u{1193C}\\u{1193E}\\u{11943}\\u{119D4}-\\u{119D7}\\u{119DA}\\u{119DB}\\u{119E0}\\u{11A01}-\\u{11A06}\\u{11A09}\\u{11A0A}\\u{11A33}-\\u{11A38}\\u{11A3B}-\\u{11A3E}\\u{11A47}\\u{11A51}-\\u{11A56}\\u{11A59}-\\u{11A5B}\\u{11A8A}-\\u{11A96}\\u{11A98}\\u{11A99}\\u{11C30}-\\u{11C36}\\u{11C38}-\\u{11C3D}\\u{11C92}-\\u{11CA7}\\u{11CAA}-\\u{11CB0}\\u{11CB2}\\u{11CB3}\\u{11CB5}\\u{11CB6}\\u{11D31}-\\u{11D36}\\u{11D3A}\\u{11D3C}\\u{11D3D}\\u{11D3F}-\\u{11D45}\\u{11D47}\\u{11D90}\\u{11D91}\\u{11D95}\\u{11D97}\\u{11EF3}\\u{11EF4}\\u{11F00}\\u{11F01}\\u{11F36}-\\u{11F3A}\\u{11F40}\\u{11F42}\\u{11F5A}\\u{13440}\\u{13447}-\\u{13455}\\u{1611E}-\\u{16129}\\u{1612D}-\\u{1612F}\\u{16AF0}-\\u{16AF4}\\u{16B30}-\\u{16B36}\\u{16F4F}\\u{16F8F}-\\u{16F92}\\u{16FE4}\\u{1BC9D}\\u{1BC9E}\\u{1CF00}-\\u{1CF2D}\\u{1CF30}-\\u{1CF46}\\u{1D167}-\\u{1D169}\\u{1D17B}-\\u{1D182}\\u{1D185}-\\u{1D18B}\\u{1D1AA}-\\u{1D1AD}\\u{1D242}-\\u{1D244}\\u{1DA00}-\\u{1DA36}\\u{1DA3B}-\\u{1DA6C}\\u{1DA75}\\u{1DA84}\\u{1DA9B}-\\u{1DA9F}\\u{1DAA1}-\\u{1DAAF}\\u{1E000}-\\u{1E006}\\u{1E008}-\\u{1E018}\\u{1E01B}-\\u{1E021}\\u{1E023}\\u{1E024}\\u{1E026}-\\u{1E02A}\\u{1E08F}\\u{1E130}-\\u{1E136}\\u{1E2AE}\\u{1E2EC}-\\u{1E2EF}\\u{1E4EC}-\\u{1E4EF}\\u{1E5EE}\\u{1E5EF}\\u{1E8D0}-\\u{1E8D6}\\u{1E944}-\\u{1E94A}\\u{E0100}-\\u{E01EF}]*$/u;\nconst bidiS4EN = /[0-9\\xB2\\xB3\\xB9\\u06F0-\\u06F9\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2488-\\u249B\\uFF10-\\uFF19\\u{102E1}-\\u{102FB}\\u{1CCF0}-\\u{1CCF9}\\u{1D7CE}-\\u{1D7FF}\\u{1F100}-\\u{1F10A}\\u{1FBF0}-\\u{1FBF9}]/u;\nconst bidiS4AN = /[\\u0600-\\u0605\\u0660-\\u0669\\u066B\\u066C\\u06DD\\u0890\\u0891\\u08E2\\u{10D30}-\\u{10D39}\\u{10D40}-\\u{10D49}\\u{10E60}-\\u{10E7E}]/u;\nconst bidiS5 = /^[\\0-\\x08\\x0E-\\x1B!-\\x84\\x86-\\u0377\\u037A-\\u037F\\u0384-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u052F\\u0531-\\u0556\\u0559-\\u058A\\u058D-\\u058F\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0606\\u0607\\u0609\\u060A\\u060C\\u060E-\\u061A\\u064B-\\u065F\\u066A\\u0670\\u06D6-\\u06DC\\u06DE-\\u06E4\\u06E7-\\u06ED\\u06F0-\\u06F9\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07F6-\\u07F9\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0897-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09FE\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A76\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AF1\\u0AF9-\\u0AFF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B55-\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B77\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BFA\\u0C00-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3C-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C5D\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C77-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDD\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1-\\u0CF3\\u0D00-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4F\\u0D54-\\u0D63\\u0D66-\\u0D7F\\u0D81-\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2-\\u0DF4\\u0E01-\\u0E3A\\u0E3F-\\u0E5B\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECE\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F97\\u0F99-\\u0FBC\\u0FBE-\\u0FCC\\u0FCE-\\u0FDA\\u1000-\\u10C5\\u10C7\\u10CD\\u10D0-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u137C\\u1380-\\u1399\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1400-\\u167F\\u1681-\\u169C\\u16A0-\\u16F8\\u1700-\\u1715\\u171F-\\u1736\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17DD\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1800-\\u1819\\u1820-\\u1878\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1940\\u1944-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u19DE-\\u1A1B\\u1A1E-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA0-\\u1AAD\\u1AB0-\\u1ACE\\u1B00-\\u1B4C\\u1B4E-\\u1BF3\\u1BFC-\\u1C37\\u1C3B-\\u1C49\\u1C4D-\\u1C8A\\u1C90-\\u1CBA\\u1CBD-\\u1CC7\\u1CD0-\\u1CFA\\u1D00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FC4\\u1FC6-\\u1FD3\\u1FD6-\\u1FDB\\u1FDD-\\u1FEF\\u1FF2-\\u1FF4\\u1FF6-\\u1FFE\\u200B-\\u200E\\u2010-\\u2027\\u202F-\\u205E\\u2060-\\u2064\\u206A-\\u2071\\u2074-\\u208E\\u2090-\\u209C\\u20A0-\\u20C0\\u20D0-\\u20F0\\u2100-\\u218B\\u2190-\\u2429\\u2440-\\u244A\\u2460-\\u2B73\\u2B76-\\u2B95\\u2B97-\\u2CF3\\u2CF9-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D70\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2E5D\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFF\\u3001-\\u303F\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3190-\\u31E5\\u31EF-\\u321E\\u3220-\\uA48C\\uA490-\\uA4C6\\uA4D0-\\uA62B\\uA640-\\uA6F7\\uA700-\\uA7CD\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7DC\\uA7F2-\\uA82C\\uA830-\\uA839\\uA840-\\uA877\\uA880-\\uA8C5\\uA8CE-\\uA8D9\\uA8E0-\\uA953\\uA95F-\\uA97C\\uA980-\\uA9CD\\uA9CF-\\uA9D9\\uA9DE-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA5C-\\uAAC2\\uAADB-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB6B\\uAB70-\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uD800-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1E\\uFB29\\uFD3E-\\uFD4F\\uFDCF\\uFDFD-\\uFE19\\uFE20-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFEFF\\uFF01-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFF9-\\uFFFD\\u{10000}-\\u{1000B}\\u{1000D}-\\u{10026}\\u{10028}-\\u{1003A}\\u{1003C}\\u{1003D}\\u{1003F}-\\u{1004D}\\u{10050}-\\u{1005D}\\u{10080}-\\u{100FA}\\u{10100}-\\u{10102}\\u{10107}-\\u{10133}\\u{10137}-\\u{1018E}\\u{10190}-\\u{1019C}\\u{101A0}\\u{101D0}-\\u{101FD}\\u{10280}-\\u{1029C}\\u{102A0}-\\u{102D0}\\u{102E0}-\\u{102FB}\\u{10300}-\\u{10323}\\u{1032D}-\\u{1034A}\\u{10350}-\\u{1037A}\\u{10380}-\\u{1039D}\\u{1039F}-\\u{103C3}\\u{103C8}-\\u{103D5}\\u{10400}-\\u{1049D}\\u{104A0}-\\u{104A9}\\u{104B0}-\\u{104D3}\\u{104D8}-\\u{104FB}\\u{10500}-\\u{10527}\\u{10530}-\\u{10563}\\u{1056F}-\\u{1057A}\\u{1057C}-\\u{1058A}\\u{1058C}-\\u{10592}\\u{10594}\\u{10595}\\u{10597}-\\u{105A1}\\u{105A3}-\\u{105B1}\\u{105B3}-\\u{105B9}\\u{105BB}\\u{105BC}\\u{105C0}-\\u{105F3}\\u{10600}-\\u{10736}\\u{10740}-\\u{10755}\\u{10760}-\\u{10767}\\u{10780}-\\u{10785}\\u{10787}-\\u{107B0}\\u{107B2}-\\u{107BA}\\u{1091F}\\u{10A01}-\\u{10A03}\\u{10A05}\\u{10A06}\\u{10A0C}-\\u{10A0F}\\u{10A38}-\\u{10A3A}\\u{10A3F}\\u{10AE5}\\u{10AE6}\\u{10B39}-\\u{10B3F}\\u{10D24}-\\u{10D27}\\u{10D69}-\\u{10D6E}\\u{10EAB}\\u{10EAC}\\u{10EFC}-\\u{10EFF}\\u{10F46}-\\u{10F50}\\u{10F82}-\\u{10F85}\\u{11000}-\\u{1104D}\\u{11052}-\\u{11075}\\u{1107F}-\\u{110C2}\\u{110CD}\\u{110D0}-\\u{110E8}\\u{110F0}-\\u{110F9}\\u{11100}-\\u{11134}\\u{11136}-\\u{11147}\\u{11150}-\\u{11176}\\u{11180}-\\u{111DF}\\u{111E1}-\\u{111F4}\\u{11200}-\\u{11211}\\u{11213}-\\u{11241}\\u{11280}-\\u{11286}\\u{11288}\\u{1128A}-\\u{1128D}\\u{1128F}-\\u{1129D}\\u{1129F}-\\u{112A9}\\u{112B0}-\\u{112EA}\\u{112F0}-\\u{112F9}\\u{11300}-\\u{11303}\\u{11305}-\\u{1130C}\\u{1130F}\\u{11310}\\u{11313}-\\u{11328}\\u{1132A}-\\u{11330}\\u{11332}\\u{11333}\\u{11335}-\\u{11339}\\u{1133B}-\\u{11344}\\u{11347}\\u{11348}\\u{1134B}-\\u{1134D}\\u{11350}\\u{11357}\\u{1135D}-\\u{11363}\\u{11366}-\\u{1136C}\\u{11370}-\\u{11374}\\u{11380}-\\u{11389}\\u{1138B}\\u{1138E}\\u{11390}-\\u{113B5}\\u{113B7}-\\u{113C0}\\u{113C2}\\u{113C5}\\u{113C7}-\\u{113CA}\\u{113CC}-\\u{113D5}\\u{113D7}\\u{113D8}\\u{113E1}\\u{113E2}\\u{11400}-\\u{1145B}\\u{1145D}-\\u{11461}\\u{11480}-\\u{114C7}\\u{114D0}-\\u{114D9}\\u{11580}-\\u{115B5}\\u{115B8}-\\u{115DD}\\u{11600}-\\u{11644}\\u{11650}-\\u{11659}\\u{11660}-\\u{1166C}\\u{11680}-\\u{116B9}\\u{116C0}-\\u{116C9}\\u{116D0}-\\u{116E3}\\u{11700}-\\u{1171A}\\u{1171D}-\\u{1172B}\\u{11730}-\\u{11746}\\u{11800}-\\u{1183B}\\u{118A0}-\\u{118F2}\\u{118FF}-\\u{11906}\\u{11909}\\u{1190C}-\\u{11913}\\u{11915}\\u{11916}\\u{11918}-\\u{11935}\\u{11937}\\u{11938}\\u{1193B}-\\u{11946}\\u{11950}-\\u{11959}\\u{119A0}-\\u{119A7}\\u{119AA}-\\u{119D7}\\u{119DA}-\\u{119E4}\\u{11A00}-\\u{11A47}\\u{11A50}-\\u{11AA2}\\u{11AB0}-\\u{11AF8}\\u{11B00}-\\u{11B09}\\u{11BC0}-\\u{11BE1}\\u{11BF0}-\\u{11BF9}\\u{11C00}-\\u{11C08}\\u{11C0A}-\\u{11C36}\\u{11C38}-\\u{11C45}\\u{11C50}-\\u{11C6C}\\u{11C70}-\\u{11C8F}\\u{11C92}-\\u{11CA7}\\u{11CA9}-\\u{11CB6}\\u{11D00}-\\u{11D06}\\u{11D08}\\u{11D09}\\u{11D0B}-\\u{11D36}\\u{11D3A}\\u{11D3C}\\u{11D3D}\\u{11D3F}-\\u{11D47}\\u{11D50}-\\u{11D59}\\u{11D60}-\\u{11D65}\\u{11D67}\\u{11D68}\\u{11D6A}-\\u{11D8E}\\u{11D90}\\u{11D91}\\u{11D93}-\\u{11D98}\\u{11DA0}-\\u{11DA9}\\u{11EE0}-\\u{11EF8}\\u{11F00}-\\u{11F10}\\u{11F12}-\\u{11F3A}\\u{11F3E}-\\u{11F5A}\\u{11FB0}\\u{11FC0}-\\u{11FF1}\\u{11FFF}-\\u{12399}\\u{12400}-\\u{1246E}\\u{12470}-\\u{12474}\\u{12480}-\\u{12543}\\u{12F90}-\\u{12FF2}\\u{13000}-\\u{13455}\\u{13460}-\\u{143FA}\\u{14400}-\\u{14646}\\u{16100}-\\u{16139}\\u{16800}-\\u{16A38}\\u{16A40}-\\u{16A5E}\\u{16A60}-\\u{16A69}\\u{16A6E}-\\u{16ABE}\\u{16AC0}-\\u{16AC9}\\u{16AD0}-\\u{16AED}\\u{16AF0}-\\u{16AF5}\\u{16B00}-\\u{16B45}\\u{16B50}-\\u{16B59}\\u{16B5B}-\\u{16B61}\\u{16B63}-\\u{16B77}\\u{16B7D}-\\u{16B8F}\\u{16D40}-\\u{16D79}\\u{16E40}-\\u{16E9A}\\u{16F00}-\\u{16F4A}\\u{16F4F}-\\u{16F87}\\u{16F8F}-\\u{16F9F}\\u{16FE0}-\\u{16FE4}\\u{16FF0}\\u{16FF1}\\u{17000}-\\u{187F7}\\u{18800}-\\u{18CD5}\\u{18CFF}-\\u{18D08}\\u{1AFF0}-\\u{1AFF3}\\u{1AFF5}-\\u{1AFFB}\\u{1AFFD}\\u{1AFFE}\\u{1B000}-\\u{1B122}\\u{1B132}\\u{1B150}-\\u{1B152}\\u{1B155}\\u{1B164}-\\u{1B167}\\u{1B170}-\\u{1B2FB}\\u{1BC00}-\\u{1BC6A}\\u{1BC70}-\\u{1BC7C}\\u{1BC80}-\\u{1BC88}\\u{1BC90}-\\u{1BC99}\\u{1BC9C}-\\u{1BCA3}\\u{1CC00}-\\u{1CCF9}\\u{1CD00}-\\u{1CEB3}\\u{1CF00}-\\u{1CF2D}\\u{1CF30}-\\u{1CF46}\\u{1CF50}-\\u{1CFC3}\\u{1D000}-\\u{1D0F5}\\u{1D100}-\\u{1D126}\\u{1D129}-\\u{1D1EA}\\u{1D200}-\\u{1D245}\\u{1D2C0}-\\u{1D2D3}\\u{1D2E0}-\\u{1D2F3}\\u{1D300}-\\u{1D356}\\u{1D360}-\\u{1D378}\\u{1D400}-\\u{1D454}\\u{1D456}-\\u{1D49C}\\u{1D49E}\\u{1D49F}\\u{1D4A2}\\u{1D4A5}\\u{1D4A6}\\u{1D4A9}-\\u{1D4AC}\\u{1D4AE}-\\u{1D4B9}\\u{1D4BB}\\u{1D4BD}-\\u{1D4C3}\\u{1D4C5}-\\u{1D505}\\u{1D507}-\\u{1D50A}\\u{1D50D}-\\u{1D514}\\u{1D516}-\\u{1D51C}\\u{1D51E}-\\u{1D539}\\u{1D53B}-\\u{1D53E}\\u{1D540}-\\u{1D544}\\u{1D546}\\u{1D54A}-\\u{1D550}\\u{1D552}-\\u{1D6A5}\\u{1D6A8}-\\u{1D7CB}\\u{1D7CE}-\\u{1DA8B}\\u{1DA9B}-\\u{1DA9F}\\u{1DAA1}-\\u{1DAAF}\\u{1DF00}-\\u{1DF1E}\\u{1DF25}-\\u{1DF2A}\\u{1E000}-\\u{1E006}\\u{1E008}-\\u{1E018}\\u{1E01B}-\\u{1E021}\\u{1E023}\\u{1E024}\\u{1E026}-\\u{1E02A}\\u{1E030}-\\u{1E06D}\\u{1E08F}\\u{1E100}-\\u{1E12C}\\u{1E130}-\\u{1E13D}\\u{1E140}-\\u{1E149}\\u{1E14E}\\u{1E14F}\\u{1E290}-\\u{1E2AE}\\u{1E2C0}-\\u{1E2F9}\\u{1E2FF}\\u{1E4D0}-\\u{1E4F9}\\u{1E5D0}-\\u{1E5FA}\\u{1E5FF}\\u{1E7E0}-\\u{1E7E6}\\u{1E7E8}-\\u{1E7EB}\\u{1E7ED}\\u{1E7EE}\\u{1E7F0}-\\u{1E7FE}\\u{1E8D0}-\\u{1E8D6}\\u{1E944}-\\u{1E94A}\\u{1EEF0}\\u{1EEF1}\\u{1F000}-\\u{1F02B}\\u{1F030}-\\u{1F093}\\u{1F0A0}-\\u{1F0AE}\\u{1F0B1}-\\u{1F0BF}\\u{1F0C1}-\\u{1F0CF}\\u{1F0D1}-\\u{1F0F5}\\u{1F100}-\\u{1F1AD}\\u{1F1E6}-\\u{1F202}\\u{1F210}-\\u{1F23B}\\u{1F240}-\\u{1F248}\\u{1F250}\\u{1F251}\\u{1F260}-\\u{1F265}\\u{1F300}-\\u{1F6D7}\\u{1F6DC}-\\u{1F6EC}\\u{1F6F0}-\\u{1F6FC}\\u{1F700}-\\u{1F776}\\u{1F77B}-\\u{1F7D9}\\u{1F7E0}-\\u{1F7EB}\\u{1F7F0}\\u{1F800}-\\u{1F80B}\\u{1F810}-\\u{1F847}\\u{1F850}-\\u{1F859}\\u{1F860}-\\u{1F887}\\u{1F890}-\\u{1F8AD}\\u{1F8B0}-\\u{1F8BB}\\u{1F8C0}\\u{1F8C1}\\u{1F900}-\\u{1FA53}\\u{1FA60}-\\u{1FA6D}\\u{1FA70}-\\u{1FA7C}\\u{1FA80}-\\u{1FA89}\\u{1FA8F}-\\u{1FAC6}\\u{1FACE}-\\u{1FADC}\\u{1FADF}-\\u{1FAE9}\\u{1FAF0}-\\u{1FAF8}\\u{1FB00}-\\u{1FB92}\\u{1FB94}-\\u{1FBF9}\\u{20000}-\\u{2A6DF}\\u{2A700}-\\u{2B739}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2EBF0}-\\u{2EE5D}\\u{2F800}-\\u{2FA1D}\\u{30000}-\\u{3134A}\\u{31350}-\\u{323AF}\\u{E0001}\\u{E0020}-\\u{E007F}\\u{E0100}-\\u{E01EF}\\u{F0000}-\\u{FFFFD}\\u{100000}-\\u{10FFFD}]*$/u;\nconst bidiS6 = /[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02B8\\u02BB-\\u02C1\\u02D0\\u02D1\\u02E0-\\u02E4\\u02EE\\u0370-\\u0373\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0482\\u048A-\\u052F\\u0531-\\u0556\\u0559-\\u0589\\u06F0-\\u06F9\\u0903-\\u0939\\u093B\\u093D-\\u0940\\u0949-\\u094C\\u094E-\\u0950\\u0958-\\u0961\\u0964-\\u0980\\u0982\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09FA\\u09FC\\u09FD\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3E-\\u0A40\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A76\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AF0\\u0AF9\\u0B02\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD0\\u0BD7\\u0BE6-\\u0BF2\\u0C01-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C41-\\u0C44\\u0C58-\\u0C5A\\u0C5D\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C77\\u0C7F\\u0C80\\u0C82-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0CDD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1-\\u0CF3\\u0D02-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D4E\\u0D4F\\u0D54-\\u0D61\\u0D66-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2-\\u0DF4\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E4F-\\u0E5B\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00-\\u0F17\\u0F1A-\\u0F34\\u0F36\\u0F38\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F7F\\u0F85\\u0F88-\\u0F8C\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE-\\u0FDA\\u1000-\\u102C\\u1031\\u1038\\u103B\\u103C\\u103F-\\u1057\\u105A-\\u105D\\u1061-\\u1070\\u1075-\\u1081\\u1083\\u1084\\u1087-\\u108C\\u108E-\\u109C\\u109E-\\u10C5\\u10C7\\u10CD\\u10D0-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1360-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u167F\\u1681-\\u169A\\u16A0-\\u16F8\\u1700-\\u1711\\u1715\\u171F-\\u1731\\u1734-\\u1736\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u17D4-\\u17DA\\u17DC\\u17E0-\\u17E9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A19\\u1A1A\\u1A1E-\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA0-\\u1AAD\\u1B04-\\u1B33\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43-\\u1B4C\\u1B4E-\\u1B6A\\u1B74-\\u1B7F\\u1B82-\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1BAE-\\u1BE5\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2\\u1BF3\\u1BFC-\\u1C2B\\u1C34\\u1C35\\u1C3B-\\u1C49\\u1C4D-\\u1C8A\\u1C90-\\u1CBA\\u1CBD-\\u1CC7\\u1CD3\\u1CE1\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5-\\u1CF7\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200E\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u214F\\u2160-\\u2188\\u2336-\\u237A\\u2395\\u2488-\\u24E9\\u26AC\\u2800-\\u28FF\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D70\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u3005-\\u3007\\u3021-\\u3029\\u302E\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3190-\\u31BF\\u31F0-\\u321C\\u3220-\\u324F\\u3260-\\u327B\\u327F-\\u32B0\\u32C0-\\u32CB\\u32D0-\\u3376\\u337B-\\u33DD\\u33E0-\\u33FE\\u3400-\\u4DBF\\u4E00-\\uA48C\\uA4D0-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA680-\\uA69D\\uA6A0-\\uA6EF\\uA6F2-\\uA6F7\\uA722-\\uA787\\uA789-\\uA7CD\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7DC\\uA7F2-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA824\\uA827\\uA830-\\uA837\\uA840-\\uA873\\uA880-\\uA8C3\\uA8CE-\\uA8D9\\uA8F2-\\uA8FE\\uA900-\\uA925\\uA92E-\\uA946\\uA952\\uA953\\uA95F-\\uA97C\\uA983-\\uA9B2\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BE-\\uA9CD\\uA9CF-\\uA9D9\\uA9DE-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA4D\\uAA50-\\uAA59\\uAA5C-\\uAA7B\\uAA7D-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAAEB\\uAAEE-\\uAAF5\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB69\\uAB70-\\uABE4\\uABE6\\uABE7\\uABE9-\\uABEC\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uD800-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\\u{10000}-\\u{1000B}\\u{1000D}-\\u{10026}\\u{10028}-\\u{1003A}\\u{1003C}\\u{1003D}\\u{1003F}-\\u{1004D}\\u{10050}-\\u{1005D}\\u{10080}-\\u{100FA}\\u{10100}\\u{10102}\\u{10107}-\\u{10133}\\u{10137}-\\u{1013F}\\u{1018D}\\u{1018E}\\u{101D0}-\\u{101FC}\\u{10280}-\\u{1029C}\\u{102A0}-\\u{102D0}\\u{102E1}-\\u{102FB}\\u{10300}-\\u{10323}\\u{1032D}-\\u{1034A}\\u{10350}-\\u{10375}\\u{10380}-\\u{1039D}\\u{1039F}-\\u{103C3}\\u{103C8}-\\u{103D5}\\u{10400}-\\u{1049D}\\u{104A0}-\\u{104A9}\\u{104B0}-\\u{104D3}\\u{104D8}-\\u{104FB}\\u{10500}-\\u{10527}\\u{10530}-\\u{10563}\\u{1056F}-\\u{1057A}\\u{1057C}-\\u{1058A}\\u{1058C}-\\u{10592}\\u{10594}\\u{10595}\\u{10597}-\\u{105A1}\\u{105A3}-\\u{105B1}\\u{105B3}-\\u{105B9}\\u{105BB}\\u{105BC}\\u{105C0}-\\u{105F3}\\u{10600}-\\u{10736}\\u{10740}-\\u{10755}\\u{10760}-\\u{10767}\\u{10780}-\\u{10785}\\u{10787}-\\u{107B0}\\u{107B2}-\\u{107BA}\\u{11000}\\u{11002}-\\u{11037}\\u{11047}-\\u{1104D}\\u{11066}-\\u{1106F}\\u{11071}\\u{11072}\\u{11075}\\u{11082}-\\u{110B2}\\u{110B7}\\u{110B8}\\u{110BB}-\\u{110C1}\\u{110CD}\\u{110D0}-\\u{110E8}\\u{110F0}-\\u{110F9}\\u{11103}-\\u{11126}\\u{1112C}\\u{11136}-\\u{11147}\\u{11150}-\\u{11172}\\u{11174}-\\u{11176}\\u{11182}-\\u{111B5}\\u{111BF}-\\u{111C8}\\u{111CD}\\u{111CE}\\u{111D0}-\\u{111DF}\\u{111E1}-\\u{111F4}\\u{11200}-\\u{11211}\\u{11213}-\\u{1122E}\\u{11232}\\u{11233}\\u{11235}\\u{11238}-\\u{1123D}\\u{1123F}\\u{11240}\\u{11280}-\\u{11286}\\u{11288}\\u{1128A}-\\u{1128D}\\u{1128F}-\\u{1129D}\\u{1129F}-\\u{112A9}\\u{112B0}-\\u{112DE}\\u{112E0}-\\u{112E2}\\u{112F0}-\\u{112F9}\\u{11302}\\u{11303}\\u{11305}-\\u{1130C}\\u{1130F}\\u{11310}\\u{11313}-\\u{11328}\\u{1132A}-\\u{11330}\\u{11332}\\u{11333}\\u{11335}-\\u{11339}\\u{1133D}-\\u{1133F}\\u{11341}-\\u{11344}\\u{11347}\\u{11348}\\u{1134B}-\\u{1134D}\\u{11350}\\u{11357}\\u{1135D}-\\u{11363}\\u{11380}-\\u{11389}\\u{1138B}\\u{1138E}\\u{11390}-\\u{113B5}\\u{113B7}-\\u{113BA}\\u{113C2}\\u{113C5}\\u{113C7}-\\u{113CA}\\u{113CC}\\u{113CD}\\u{113CF}\\u{113D1}\\u{113D3}-\\u{113D5}\\u{113D7}\\u{113D8}\\u{11400}-\\u{11437}\\u{11440}\\u{11441}\\u{11445}\\u{11447}-\\u{1145B}\\u{1145D}\\u{1145F}-\\u{11461}\\u{11480}-\\u{114B2}\\u{114B9}\\u{114BB}-\\u{114BE}\\u{114C1}\\u{114C4}-\\u{114C7}\\u{114D0}-\\u{114D9}\\u{11580}-\\u{115B1}\\u{115B8}-\\u{115BB}\\u{115BE}\\u{115C1}-\\u{115DB}\\u{11600}-\\u{11632}\\u{1163B}\\u{1163C}\\u{1163E}\\u{11641}-\\u{11644}\\u{11650}-\\u{11659}\\u{11680}-\\u{116AA}\\u{116AC}\\u{116AE}\\u{116AF}\\u{116B6}\\u{116B8}\\u{116B9}\\u{116C0}-\\u{116C9}\\u{116D0}-\\u{116E3}\\u{11700}-\\u{1171A}\\u{1171E}\\u{11720}\\u{11721}\\u{11726}\\u{11730}-\\u{11746}\\u{11800}-\\u{1182E}\\u{11838}\\u{1183B}\\u{118A0}-\\u{118F2}\\u{118FF}-\\u{11906}\\u{11909}\\u{1190C}-\\u{11913}\\u{11915}\\u{11916}\\u{11918}-\\u{11935}\\u{11937}\\u{11938}\\u{1193D}\\u{1193F}-\\u{11942}\\u{11944}-\\u{11946}\\u{11950}-\\u{11959}\\u{119A0}-\\u{119A7}\\u{119AA}-\\u{119D3}\\u{119DC}-\\u{119DF}\\u{119E1}-\\u{119E4}\\u{11A00}\\u{11A07}\\u{11A08}\\u{11A0B}-\\u{11A32}\\u{11A39}\\u{11A3A}\\u{11A3F}-\\u{11A46}\\u{11A50}\\u{11A57}\\u{11A58}\\u{11A5C}-\\u{11A89}\\u{11A97}\\u{11A9A}-\\u{11AA2}\\u{11AB0}-\\u{11AF8}\\u{11B00}-\\u{11B09}\\u{11BC0}-\\u{11BE1}\\u{11BF0}-\\u{11BF9}\\u{11C00}-\\u{11C08}\\u{11C0A}-\\u{11C2F}\\u{11C3E}-\\u{11C45}\\u{11C50}-\\u{11C6C}\\u{11C70}-\\u{11C8F}\\u{11CA9}\\u{11CB1}\\u{11CB4}\\u{11D00}-\\u{11D06}\\u{11D08}\\u{11D09}\\u{11D0B}-\\u{11D30}\\u{11D46}\\u{11D50}-\\u{11D59}\\u{11D60}-\\u{11D65}\\u{11D67}\\u{11D68}\\u{11D6A}-\\u{11D8E}\\u{11D93}\\u{11D94}\\u{11D96}\\u{11D98}\\u{11DA0}-\\u{11DA9}\\u{11EE0}-\\u{11EF2}\\u{11EF5}-\\u{11EF8}\\u{11F02}-\\u{11F10}\\u{11F12}-\\u{11F35}\\u{11F3E}\\u{11F3F}\\u{11F41}\\u{11F43}-\\u{11F59}\\u{11FB0}\\u{11FC0}-\\u{11FD4}\\u{11FFF}-\\u{12399}\\u{12400}-\\u{1246E}\\u{12470}-\\u{12474}\\u{12480}-\\u{12543}\\u{12F90}-\\u{12FF2}\\u{13000}-\\u{1343F}\\u{13441}-\\u{13446}\\u{13460}-\\u{143FA}\\u{14400}-\\u{14646}\\u{16100}-\\u{1611D}\\u{1612A}-\\u{1612C}\\u{16130}-\\u{16139}\\u{16800}-\\u{16A38}\\u{16A40}-\\u{16A5E}\\u{16A60}-\\u{16A69}\\u{16A6E}-\\u{16ABE}\\u{16AC0}-\\u{16AC9}\\u{16AD0}-\\u{16AED}\\u{16AF5}\\u{16B00}-\\u{16B2F}\\u{16B37}-\\u{16B45}\\u{16B50}-\\u{16B59}\\u{16B5B}-\\u{16B61}\\u{16B63}-\\u{16B77}\\u{16B7D}-\\u{16B8F}\\u{16D40}-\\u{16D79}\\u{16E40}-\\u{16E9A}\\u{16F00}-\\u{16F4A}\\u{16F50}-\\u{16F87}\\u{16F93}-\\u{16F9F}\\u{16FE0}\\u{16FE1}\\u{16FE3}\\u{16FF0}\\u{16FF1}\\u{17000}-\\u{187F7}\\u{18800}-\\u{18CD5}\\u{18CFF}-\\u{18D08}\\u{1AFF0}-\\u{1AFF3}\\u{1AFF5}-\\u{1AFFB}\\u{1AFFD}\\u{1AFFE}\\u{1B000}-\\u{1B122}\\u{1B132}\\u{1B150}-\\u{1B152}\\u{1B155}\\u{1B164}-\\u{1B167}\\u{1B170}-\\u{1B2FB}\\u{1BC00}-\\u{1BC6A}\\u{1BC70}-\\u{1BC7C}\\u{1BC80}-\\u{1BC88}\\u{1BC90}-\\u{1BC99}\\u{1BC9C}\\u{1BC9F}\\u{1CCD6}-\\u{1CCF9}\\u{1CF50}-\\u{1CFC3}\\u{1D000}-\\u{1D0F5}\\u{1D100}-\\u{1D126}\\u{1D129}-\\u{1D166}\\u{1D16A}-\\u{1D172}\\u{1D183}\\u{1D184}\\u{1D18C}-\\u{1D1A9}\\u{1D1AE}-\\u{1D1E8}\\u{1D2C0}-\\u{1D2D3}\\u{1D2E0}-\\u{1D2F3}\\u{1D360}-\\u{1D378}\\u{1D400}-\\u{1D454}\\u{1D456}-\\u{1D49C}\\u{1D49E}\\u{1D49F}\\u{1D4A2}\\u{1D4A5}\\u{1D4A6}\\u{1D4A9}-\\u{1D4AC}\\u{1D4AE}-\\u{1D4B9}\\u{1D4BB}\\u{1D4BD}-\\u{1D4C3}\\u{1D4C5}-\\u{1D505}\\u{1D507}-\\u{1D50A}\\u{1D50D}-\\u{1D514}\\u{1D516}-\\u{1D51C}\\u{1D51E}-\\u{1D539}\\u{1D53B}-\\u{1D53E}\\u{1D540}-\\u{1D544}\\u{1D546}\\u{1D54A}-\\u{1D550}\\u{1D552}-\\u{1D6A5}\\u{1D6A8}-\\u{1D6C0}\\u{1D6C2}-\\u{1D6DA}\\u{1D6DC}-\\u{1D6FA}\\u{1D6FC}-\\u{1D714}\\u{1D716}-\\u{1D734}\\u{1D736}-\\u{1D74E}\\u{1D750}-\\u{1D76E}\\u{1D770}-\\u{1D788}\\u{1D78A}-\\u{1D7A8}\\u{1D7AA}-\\u{1D7C2}\\u{1D7C4}-\\u{1D7CB}\\u{1D7CE}-\\u{1D9FF}\\u{1DA37}-\\u{1DA3A}\\u{1DA6D}-\\u{1DA74}\\u{1DA76}-\\u{1DA83}\\u{1DA85}-\\u{1DA8B}\\u{1DF00}-\\u{1DF1E}\\u{1DF25}-\\u{1DF2A}\\u{1E030}-\\u{1E06D}\\u{1E100}-\\u{1E12C}\\u{1E137}-\\u{1E13D}\\u{1E140}-\\u{1E149}\\u{1E14E}\\u{1E14F}\\u{1E290}-\\u{1E2AD}\\u{1E2C0}-\\u{1E2EB}\\u{1E2F0}-\\u{1E2F9}\\u{1E4D0}-\\u{1E4EB}\\u{1E4F0}-\\u{1E4F9}\\u{1E5D0}-\\u{1E5ED}\\u{1E5F0}-\\u{1E5FA}\\u{1E5FF}\\u{1E7E0}-\\u{1E7E6}\\u{1E7E8}-\\u{1E7EB}\\u{1E7ED}\\u{1E7EE}\\u{1E7F0}-\\u{1E7FE}\\u{1F100}-\\u{1F10A}\\u{1F110}-\\u{1F12E}\\u{1F130}-\\u{1F169}\\u{1F170}-\\u{1F1AC}\\u{1F1E6}-\\u{1F202}\\u{1F210}-\\u{1F23B}\\u{1F240}-\\u{1F248}\\u{1F250}\\u{1F251}\\u{1FBF0}-\\u{1FBF9}\\u{20000}-\\u{2A6DF}\\u{2A700}-\\u{2B739}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2EBF0}-\\u{2EE5D}\\u{2F800}-\\u{2FA1D}\\u{30000}-\\u{3134A}\\u{31350}-\\u{323AF}\\u{F0000}-\\u{FFFFD}\\u{100000}-\\u{10FFFD}][\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0897-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C00\\u0C04\\u0C3C\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732\\u1733\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302D\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\u{101FD}\\u{102E0}\\u{10376}-\\u{1037A}\\u{10A01}-\\u{10A03}\\u{10A05}\\u{10A06}\\u{10A0C}-\\u{10A0F}\\u{10A38}-\\u{10A3A}\\u{10A3F}\\u{10AE5}\\u{10AE6}\\u{10D24}-\\u{10D27}\\u{10D69}-\\u{10D6D}\\u{10EAB}\\u{10EAC}\\u{10EFC}-\\u{10EFF}\\u{10F46}-\\u{10F50}\\u{10F82}-\\u{10F85}\\u{11001}\\u{11038}-\\u{11046}\\u{11070}\\u{11073}\\u{11074}\\u{1107F}-\\u{11081}\\u{110B3}-\\u{110B6}\\u{110B9}\\u{110BA}\\u{110C2}\\u{11100}-\\u{11102}\\u{11127}-\\u{1112B}\\u{1112D}-\\u{11134}\\u{11173}\\u{11180}\\u{11181}\\u{111B6}-\\u{111BE}\\u{111C9}-\\u{111CC}\\u{111CF}\\u{1122F}-\\u{11231}\\u{11234}\\u{11236}\\u{11237}\\u{1123E}\\u{11241}\\u{112DF}\\u{112E3}-\\u{112EA}\\u{11300}\\u{11301}\\u{1133B}\\u{1133C}\\u{11340}\\u{11366}-\\u{1136C}\\u{11370}-\\u{11374}\\u{113BB}-\\u{113C0}\\u{113CE}\\u{113D0}\\u{113D2}\\u{113E1}\\u{113E2}\\u{11438}-\\u{1143F}\\u{11442}-\\u{11444}\\u{11446}\\u{1145E}\\u{114B3}-\\u{114B8}\\u{114BA}\\u{114BF}\\u{114C0}\\u{114C2}\\u{114C3}\\u{115B2}-\\u{115B5}\\u{115BC}\\u{115BD}\\u{115BF}\\u{115C0}\\u{115DC}\\u{115DD}\\u{11633}-\\u{1163A}\\u{1163D}\\u{1163F}\\u{11640}\\u{116AB}\\u{116AD}\\u{116B0}-\\u{116B5}\\u{116B7}\\u{1171D}\\u{1171F}\\u{11722}-\\u{11725}\\u{11727}-\\u{1172B}\\u{1182F}-\\u{11837}\\u{11839}\\u{1183A}\\u{1193B}\\u{1193C}\\u{1193E}\\u{11943}\\u{119D4}-\\u{119D7}\\u{119DA}\\u{119DB}\\u{119E0}\\u{11A01}-\\u{11A06}\\u{11A09}\\u{11A0A}\\u{11A33}-\\u{11A38}\\u{11A3B}-\\u{11A3E}\\u{11A47}\\u{11A51}-\\u{11A56}\\u{11A59}-\\u{11A5B}\\u{11A8A}-\\u{11A96}\\u{11A98}\\u{11A99}\\u{11C30}-\\u{11C36}\\u{11C38}-\\u{11C3D}\\u{11C92}-\\u{11CA7}\\u{11CAA}-\\u{11CB0}\\u{11CB2}\\u{11CB3}\\u{11CB5}\\u{11CB6}\\u{11D31}-\\u{11D36}\\u{11D3A}\\u{11D3C}\\u{11D3D}\\u{11D3F}-\\u{11D45}\\u{11D47}\\u{11D90}\\u{11D91}\\u{11D95}\\u{11D97}\\u{11EF3}\\u{11EF4}\\u{11F00}\\u{11F01}\\u{11F36}-\\u{11F3A}\\u{11F40}\\u{11F42}\\u{11F5A}\\u{13440}\\u{13447}-\\u{13455}\\u{1611E}-\\u{16129}\\u{1612D}-\\u{1612F}\\u{16AF0}-\\u{16AF4}\\u{16B30}-\\u{16B36}\\u{16F4F}\\u{16F8F}-\\u{16F92}\\u{16FE4}\\u{1BC9D}\\u{1BC9E}\\u{1CF00}-\\u{1CF2D}\\u{1CF30}-\\u{1CF46}\\u{1D167}-\\u{1D169}\\u{1D17B}-\\u{1D182}\\u{1D185}-\\u{1D18B}\\u{1D1AA}-\\u{1D1AD}\\u{1D242}-\\u{1D244}\\u{1DA00}-\\u{1DA36}\\u{1DA3B}-\\u{1DA6C}\\u{1DA75}\\u{1DA84}\\u{1DA9B}-\\u{1DA9F}\\u{1DAA1}-\\u{1DAAF}\\u{1E000}-\\u{1E006}\\u{1E008}-\\u{1E018}\\u{1E01B}-\\u{1E021}\\u{1E023}\\u{1E024}\\u{1E026}-\\u{1E02A}\\u{1E08F}\\u{1E130}-\\u{1E136}\\u{1E2AE}\\u{1E2EC}-\\u{1E2EF}\\u{1E4EC}-\\u{1E4EF}\\u{1E5EE}\\u{1E5EF}\\u{1E8D0}-\\u{1E8D6}\\u{1E944}-\\u{1E94A}\\u{E0100}-\\u{E01EF}]*$/u;\n\nmodule.exports = {\n    combiningMarks,\n  combiningClassVirama,\n  validZWNJ,\n  bidiDomain,\n  bidiS1LTR,\n  bidiS1RTL,\n  bidiS2,\n  bidiS3,\n  bidiS4EN,\n  bidiS4AN,\n  bidiS5,\n  bidiS6\n  };\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\n\nconst implSymbol = utils.implSymbol;\nconst ctorRegistrySymbol = utils.ctorRegistrySymbol;\n\nconst interfaceName = \"URL\";\n\nexports.is = value => {\n  return utils.isObject(value) && utils.hasOwn(value, implSymbol) && value[implSymbol] instanceof Impl.implementation;\n};\nexports.isImpl = value => {\n  return utils.isObject(value) && value instanceof Impl.implementation;\n};\nexports.convert = (globalObject, value, { context = \"The provided value\" } = {}) => {\n  if (exports.is(value)) {\n    return utils.implForWrapper(value);\n  }\n  throw new globalObject.TypeError(`${context} is not of type 'URL'.`);\n};\n\nfunction makeWrapper(globalObject, newTarget) {\n  let proto;\n  if (newTarget !== undefined) {\n    proto = newTarget.prototype;\n  }\n\n  if (!utils.isObject(proto)) {\n    proto = globalObject[ctorRegistrySymbol][\"URL\"].prototype;\n  }\n\n  return Object.create(proto);\n}\n\nexports.create = (globalObject, constructorArgs, privateData) => {\n  const wrapper = makeWrapper(globalObject);\n  return exports.setup(wrapper, globalObject, constructorArgs, privateData);\n};\n\nexports.createImpl = (globalObject, constructorArgs, privateData) => {\n  const wrapper = exports.create(globalObject, constructorArgs, privateData);\n  return utils.implForWrapper(wrapper);\n};\n\nexports._internalSetup = (wrapper, globalObject) => {};\n\nexports.setup = (wrapper, globalObject, constructorArgs = [], privateData = {}) => {\n  privateData.wrapper = wrapper;\n\n  exports._internalSetup(wrapper, globalObject);\n  Object.defineProperty(wrapper, implSymbol, {\n    value: new Impl.implementation(globalObject, constructorArgs, privateData),\n    configurable: true\n  });\n\n  wrapper[implSymbol][utils.wrapperSymbol] = wrapper;\n  if (Impl.init) {\n    Impl.init(wrapper[implSymbol]);\n  }\n  return wrapper;\n};\n\nexports.new = (globalObject, newTarget) => {\n  const wrapper = makeWrapper(globalObject, newTarget);\n\n  exports._internalSetup(wrapper, globalObject);\n  Object.defineProperty(wrapper, implSymbol, {\n    value: Object.create(Impl.implementation.prototype),\n    configurable: true\n  });\n\n  wrapper[implSymbol][utils.wrapperSymbol] = wrapper;\n  if (Impl.init) {\n    Impl.init(wrapper[implSymbol]);\n  }\n  return wrapper[implSymbol];\n};\n\nconst exposed = new Set([\"Window\", \"Worker\"]);\n\nexports.install = (globalObject, globalNames) => {\n  if (!globalNames.some(globalName => exposed.has(globalName))) {\n    return;\n  }\n\n  const ctorRegistry = utils.initCtorRegistry(globalObject);\n  class URL {\n    constructor(url) {\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          `Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to construct 'URL': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      {\n        let curArg = arguments[1];\n        if (curArg !== undefined) {\n          curArg = conversions[\"USVString\"](curArg, {\n            context: \"Failed to construct 'URL': parameter 2\",\n            globals: globalObject\n          });\n        }\n        args.push(curArg);\n      }\n      return exports.setup(Object.create(new.target.prototype), globalObject, args);\n    }\n\n    toJSON() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'toJSON' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol].toJSON();\n    }\n\n    get href() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get href' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"href\"];\n    }\n\n    set href(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set href' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'href' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"href\"] = V;\n    }\n\n    toString() {\n      const esValue = this;\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'toString' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"href\"];\n    }\n\n    get origin() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get origin' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"origin\"];\n    }\n\n    get protocol() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get protocol' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"protocol\"];\n    }\n\n    set protocol(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set protocol' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'protocol' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"protocol\"] = V;\n    }\n\n    get username() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get username' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"username\"];\n    }\n\n    set username(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set username' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'username' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"username\"] = V;\n    }\n\n    get password() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get password' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"password\"];\n    }\n\n    set password(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set password' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'password' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"password\"] = V;\n    }\n\n    get host() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get host' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"host\"];\n    }\n\n    set host(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set host' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'host' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"host\"] = V;\n    }\n\n    get hostname() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get hostname' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"hostname\"];\n    }\n\n    set hostname(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set hostname' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'hostname' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"hostname\"] = V;\n    }\n\n    get port() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get port' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"port\"];\n    }\n\n    set port(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set port' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'port' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"port\"] = V;\n    }\n\n    get pathname() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get pathname' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"pathname\"];\n    }\n\n    set pathname(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set pathname' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'pathname' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"pathname\"] = V;\n    }\n\n    get search() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get search' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"search\"];\n    }\n\n    set search(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set search' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'search' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"search\"] = V;\n    }\n\n    get searchParams() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get searchParams' called on an object that is not a valid instance of URL.\");\n      }\n\n      return utils.getSameObject(this, \"searchParams\", () => {\n        return utils.tryWrapperForImpl(esValue[implSymbol][\"searchParams\"]);\n      });\n    }\n\n    get hash() {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'get hash' called on an object that is not a valid instance of URL.\");\n      }\n\n      return esValue[implSymbol][\"hash\"];\n    }\n\n    set hash(V) {\n      const esValue = this !== null && this !== undefined ? this : globalObject;\n\n      if (!exports.is(esValue)) {\n        throw new globalObject.TypeError(\"'set hash' called on an object that is not a valid instance of URL.\");\n      }\n\n      V = conversions[\"USVString\"](V, {\n        context: \"Failed to set the 'hash' property on 'URL': The provided value\",\n        globals: globalObject\n      });\n\n      esValue[implSymbol][\"hash\"] = V;\n    }\n\n    static parse(url) {\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'parse' on 'URL': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      {\n        let curArg = arguments[1];\n        if (curArg !== undefined) {\n          curArg = conversions[\"USVString\"](curArg, {\n            context: \"Failed to execute 'parse' on 'URL': parameter 2\",\n            globals: globalObject\n          });\n        }\n        args.push(curArg);\n      }\n      return utils.tryWrapperForImpl(Impl.implementation.parse(globalObject, ...args));\n    }\n\n    static canParse(url) {\n      if (arguments.length < 1) {\n        throw new globalObject.TypeError(\n          `Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`\n        );\n      }\n      const args = [];\n      {\n        let curArg = arguments[0];\n        curArg = conversions[\"USVString\"](curArg, {\n          context: \"Failed to execute 'canParse' on 'URL': parameter 1\",\n          globals: globalObject\n        });\n        args.push(curArg);\n      }\n      {\n        let curArg = arguments[1];\n        if (curArg !== undefined) {\n          curArg = conversions[\"USVString\"](curArg, {\n            context: \"Failed to execute 'canParse' on 'URL': parameter 2\",\n            globals: globalObject\n          });\n        }\n        args.push(curArg);\n      }\n      return Impl.implementation.canParse(...args);\n    }\n  }\n  Object.defineProperties(URL.prototype, {\n    toJSON: { enumerable: true },\n    href: { enumerable: true },\n    toString: { enumerable: true },\n    origin: { enumerable: true },\n    protocol: { enumerable: true },\n    username: { enumerable: true },\n    password: { enumerable: true },\n    host: { enumerable: true },\n    hostname: { enumerable: true },\n    port: { enumerable: true },\n    pathname: { enumerable: true },\n    search: { enumerable: true },\n    searchParams: { enumerable: true },\n    hash: { enumerable: true },\n    [Symbol.toStringTag]: { value: \"URL\", configurable: true }\n  });\n  Object.defineProperties(URL, { parse: { enumerable: true }, canParse: { enumerable: true } });\n  ctorRegistry[interfaceName] = URL;\n\n  Object.defineProperty(globalObject, interfaceName, {\n    configurable: true,\n    writable: true,\n    value: URL\n  });\n\n  if (globalNames.includes(\"Window\")) {\n    Object.defineProperty(globalObject, \"webkitURL\", {\n      configurable: true,\n      writable: true,\n      value: URL\n    });\n  }\n};\n\nconst Impl = require(\"./URL-impl.js\");\n","const SEA_CREATURES = module.exports.SEA_CREATURES = Object.freeze([\n    'walrus', 'seal', 'fish', 'shark', 'clam', 'coral', 'whale', 'crab',\n    'lobster', 'starfish', 'eel', 'dolphin', 'squid', 'jellyfish', 'ray',\n    'shrimp', 'mantaRay', 'angler', 'snorkler', 'scubaDiver', 'urchin',\n    'anemone', 'morel', 'axolotl',\n]);\n\nconst SEA_OBJECTS = module.exports.SEA_OBJECTS = Object.freeze([\n    'boat', 'ship', 'submarine', 'yacht', 'dinghy', 'raft', 'kelp',\n    'seaweed', 'anchor',\n]);\n\nconst ADJECTIVE_DESCRIPTORS = module.exports.ADJECTIVE_DESCRIPTORS = Object.freeze([\n    'cute', 'adorable', 'lovable', 'happy', 'sandy', 'bubbly', 'friendly',\n    'floating', 'drifting',\n]);\n\nconst SIZE_DESCRIPTORS = module.exports.SIZE_DESCRIPTORS = Object.freeze([\n    'large', 'big', 'small', 'giant', 'massive', 'tiny', 'little',\n]);\n\nmodule.exports.CREATURE_DESCRIPTORS = Object.freeze([\n    'swimming', 'sleeping', 'eating', 'hiding',\n]);\n\nmodule.exports.SEA_LIST = Object.freeze(\n    SEA_OBJECTS.concat(SEA_CREATURES),\n);\n\nmodule.exports.DESCRIPTORS = Object.freeze(\n    ADJECTIVE_DESCRIPTORS.concat(SIZE_DESCRIPTORS),\n);\n\nmodule.exports.COLORS = Object.freeze([\n    'blue', 'blueGreen', 'darkCyan', 'electricBlue', 'greenBlue',\n    'lightCyan', 'lightSeaGreen', 'seaGreen', 'turquoise', 'aqua',\n    'aquamarine', 'teal', 'cyan', 'gray', 'darkBlue', 'cerulean', 'azure',\n    'lapis', 'navy',\n]);\n","\"use strict\";\n\nconst { URL, URLSearchParams } = require(\"./webidl2js-wrapper\");\nconst urlStateMachine = require(\"./lib/url-state-machine\");\nconst percentEncoding = require(\"./lib/percent-encoding\");\n\nconst sharedGlobalObject = { Array, Object, Promise, String, TypeError };\nURL.install(sharedGlobalObject, [\"Window\"]);\nURLSearchParams.install(sharedGlobalObject, [\"Window\"]);\n\nexports.URL = sharedGlobalObject.URL;\nexports.URLSearchParams = sharedGlobalObject.URLSearchParams;\n\nexports.parseURL = urlStateMachine.parseURL;\nexports.basicURLParse = urlStateMachine.basicURLParse;\nexports.serializeURL = urlStateMachine.serializeURL;\nexports.serializePath = urlStateMachine.serializePath;\nexports.serializeHost = urlStateMachine.serializeHost;\nexports.serializeInteger = urlStateMachine.serializeInteger;\nexports.serializeURLOrigin = urlStateMachine.serializeURLOrigin;\nexports.setTheUsername = urlStateMachine.setTheUsername;\nexports.setThePassword = urlStateMachine.setThePassword;\nexports.cannotHaveAUsernamePasswordPort = urlStateMachine.cannotHaveAUsernamePasswordPort;\nexports.hasAnOpaquePath = urlStateMachine.hasAnOpaquePath;\n\nexports.percentDecodeString = percentEncoding.percentDecodeString;\nexports.percentDecodeBytes = percentEncoding.percentDecodeBytes;\n"],"names":["URL","require","URLSearchParams","exports","usm","urlencoded","implementation","URLImpl","constructor","globalObject","url","base","parsedBase","undefined","basicURLParse","TypeError","parsedURL","baseURL","query","this","_url","_query","createImpl","doNotStripQMark","parse","input","canParse","href","serializeURL","v","_list","splice","parseUrlencodedString","origin","serializeURLOrigin","protocol","scheme","stateOverride","username","cannotHaveAUsernamePasswordPort","setTheUsername","password","setThePassword","host","port","serializeHost","serializeInteger","hasAnOpaquePath","hostname","pathname","serializePath","path","search","substring","searchParams","hash","fragment","toJSON","utf8Encoder","TextEncoder","utf8Decoder","TextDecoder","ignoreBOM","module","utf8Encode","string","encode","utf8DecodeWithoutBOM","bytes","decode","asciiLowercase","solelyContainsHTTPTokenCodePoints","soleyContainsHTTPQuotedStringTokenCodePoints","map","_map","size","get","name","String","has","set","value","Error","clear","delete","forEach","callbackFn","thisArg","keys","values","entries","Symbol","iterator","hasOwn","Function","prototype","call","bind","Object","hasOwnProperty","wrapperSymbol","implSymbol","sameObjectCaches","ctorRegistrySymbol","for","AsyncIteratorPrototype","getPrototypeOf","async","initCtorRegistry","ctorRegistry","create","Array","eval","wrapperForImpl","impl","implForWrapper","wrapper","iterInternalSymbol","byteLengthGetter","getOwnPropertyDescriptor","ArrayBuffer","supportsPropertyIndex","supportedPropertyIndices","supportsPropertyName","supportedPropertyNames","indexedGet","indexedSetNew","indexedSetExisting","namedGet","namedSetNew","namedSetExisting","namedDelete","asyncIteratorNext","asyncIteratorReturn","asyncIteratorInit","asyncIteratorEOI","isObject","define","target","source","key","Reflect","ownKeys","descriptor","defineProperty","newObjectInRealm","object","defineProperties","getOwnPropertyDescriptors","getSameObject","prop","creator","tryWrapperForImpl","tryImplForWrapper","isArrayBuffer","e","isArrayIndexPropName","P","i","iteratorResult","kind","result","done","constructorArgs","init","slice","isArray","pair","length","push","_updateSteps","serializedQuery","serializeUrlencoded","append","tuple","getAll","output","found","sort","a","b","toString","stripLeadingAndTrailingASCIIWhitespace","replace","isomorphicDecode","from","byte","fromCodePoint","join","forgivingBase64Decode","data","asString","atob","Uint8Array","c","codePointAt","removeLeadingAndTrailingHTTPWhitespace","removeTrailingHTTPWhitespace","isHTTPWhitespaceChar","collectAnHTTPQuotedString","position","type","subtype","mimeType","parameters","Map","parameterName","parameterValue","STATUS_MAPPING","mapped","valid","disallowed","deviation","ignored","punycode","regexes","mappingTable","containsNonASCII","str","test","findStatus","val","start","end","mid","Math","floor","min","max","validateLabel","label","checkHyphens","checkBidi","checkJoiners","transitionalProcessing","useSTD3ASCIIRules","isBidi","normalize","codePoints","startsWith","endsWith","includes","combiningMarks","ch","codePoint","status","last","combiningClassVirama","next","indexOf","validZWNJ","rtl","bidiS1LTR","bidiS1RTL","bidiS2","bidiS3","bidiS4EN","bidiS4AN","bidiS5","bidiS6","processing","domainName","options","processed","mapping","mapChars","labels","split","domain","bidiDomain","isBidiDomain","error","origLabel","transitionalProcessingForThisLabel","ignoreInvalidPunycode","toASCII","verifyDNSLength","l","total","toUnicode","isASCIIHex","p","char","percentEncode","hex","toUpperCase","percentDecodeBytes","byteLength","outputIndex","bytePoint","parseInt","isC0ControlPercentEncode","extraFragmentPercentEncodeSet","Set","extraQueryPercentEncodeSet","isQueryPercentEncode","extraPathPercentEncodeSet","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","extraComponentPercentEncodeSet","extraURLEncodedPercentEncodeSet","utf8PercentEncodeCodePointInternal","percentEncodePredicate","fromCharCode","isFragmentPercentEncode","isSpecialQueryPercentEncode","isURLEncodedPercentEncode","isComponentPercentEncode","percentDecodeString","utf8PercentEncodeString","spaceAsPlus","utf8PercentEncodeCodePoint","SEA_LIST","SEA_CREATURES","DESCRIPTORS","COLORS","CREATURE_DESCRIPTORS","random","items","randomNoun","randomDescriptor","noun","concat","format","randomColor","combineUsername","maxSize","color","isASCIIDigit","isASCIIAlpha","isASCIIAlphanumeric","PRIMARY_IDENTITY_ID","PRIMARY_SETTINGS_ID","SecretDexie","Dexie","super","accounts","sessions","identity","picture","channel","signingKeys","webApp","pendingRequests","settings","version","stores","webAppKey","on","db","dexieDb","count","add","id","seamless","signup","login","getSettings","updateSettings","change","update","getIdentity","savePicture","f","btoa","apply","arrayBuffer","put","filename","findCorrespondingAccounts","givenActor","category","filter","webAppActor","metadata","actorB","actorA","ed25519Key","originalUri","matchActors","pictureToDataUrl","PAGECONTEXT_POPUP","indexUrl","_browser","browser","_browser$runtime","runtime","getURL","relativePath","appPageContext","getSessionRecord","record","sessionId","EOperationType","ERejectionCode","EMetadataStatus","ab2base64","buffer","ab2str","userAttributesLabels","_classPrivateFieldBase","t","_classPrivateFieldKey","AbstractCipherBox","opts","_decryptDictionary","_decryptDictionary2","_encryptDictionary","_encryptDictionary2","_options","writable","_classPrivateFieldLooseBase","encryptDictionary","obj","decryptDictionary","decrypt","datum","ignoreValue","isCiphertextType","isView","encrypt","console","warn","promises","ignoreProp","then","encrypted","Promise","all","_","resolve","decrypted","encoder","decoder","MAX_INT32","buffers","reduce","acc","buf","writeUInt32BE","offset","RangeError","uint64be","high","low","uint32be","fromBase64","alphabet","encoded","binary","charCodeAt","decodeBase64","unencoded","toBase64","omitPadding","arr","subarray","encodeBase64","unprotected","JOSEError","static","code","message","captureStackTrace","JOSEAlgNotAllowed","JOSENotSupported","JWEDecryptionFailed","JWEInvalid","bitLength","alg","asyncIterator","enc","iv","cek","expected","actual","unusable","isAlgorithm","algorithm","checkEncCryptoKey","usage","usages","checkUsage","msg","types","Boolean","pop","withAlg","assertCryptoKey","isCryptoKey","toStringTag","isKeyObject","plaintext","aad","invalidKeyInput","checkIvLength","crypto","getRandomValues","checkCekLength","keySize","encKey","subtle","importKey","macKey","ciphertext","macData","tag","sign","cbcEncrypt","additionalData","tagLength","gcmEncrypt","checkKeySize","getCryptoKey","wrap","cryptoKey","cryptoKeyCek","wrapKey","unwrap","encryptedKey","unwrapKey","exportKey","subtleDigest","digest","lengthAndInput","deriveKey","publicKey","privateKey","keyLength","apu","apv","ceil","namedCurve","secret","bits","iterations","res","iter","concatKdf","deriveBits","public","allowed","p2s","p2c","salt","concatSalt","p2sInput","keylen","subtleAlg","modulusLength","subtleAlgorithm","proto","isJWK","kty","jwk","keyUsages","d","crv","subtleMapping","keyData","use","ext","key_ops","cache","handleJWK","freeze","WeakMap","cached","importJWK","export","toCryptoKey","handleKeyObject","keyObject","isPublic","extractable","asymmetricKeyType","asymmetricKeyDetails","err","k","expectedTag","macCheckPassed","generateKey","aHmac","bHmac","out","timingSafeEqual","cbcDecrypt","gcmDecrypt","providedCek","providedParameters","ecdhes","ephemeralKey","epk","normalizeKey","x","y","b64u","keyToJWK","exportJWK","sharedSecret","cekLength","generateCek","kwAlg","aeskw","checkKeyLength","rsaes","derived","pbes2kw","jweAlgorithm","wrapped","aesGcmKw","headers","sources","header","parameter","Err","recognizedDefault","recognizedOption","protectedHeader","joseHeader","crit","some","recognized","jwkMatchesOp","expectedKeyOp","symmetricTypeCheck","isKeyLike","asymmetricTypeCheck","FlattenedEncrypt","setKeyManagementParameters","setProtectedHeader","setSharedUnprotectedHeader","sharedUnprotectedHeader","setUnprotectedHeader","unprotectedHeader","setAdditionalAuthenticatedData","setContentEncryptionKey","setInitializationVector","isDisjoint","validateCrit","zip","aadMember","checkKeyType","encryptKeyManagement","JSON","stringify","jwe","encrypted_key","protected","CompactEncrypt","option","algorithms","s","compactDecrypt","parsedProt","keyManagementAlgorithms","validateAlgorithms","contentEncryptionAlgorithms","resolvedKey","decodeBase64URL","oth","partyUInfo","partyVInfo","p2cLimit","maxPBES2Count","decryptKeyManagement","additionalAuthenticatedData","flattenedDecrypt","_opts","_classPrivateFieldLooseKey","_encrypt","_decrypt","JWEPacketCipherBox","_decrypt2","_encrypt2","avoidReEncryption","ciph","content","dataURL","parseDataURL","charset","body","SharedArrayBuffer","op","cty","typ","createJWEPacketCipherBox","channelOrId","e2eeKey","toClearFieldValue","fieldValue","packet","box","decr","decryptPacket","openPageActionPopupIfNecessary","requestId","tabId","absolutePath","pageAction","show","prom0","associateTabIdWithRequest","prom1","tabIdWherePageActionIs","relative","setPopup","popup","setPageActionUrlInTab","prom2","openPopup","tabDictKey","storage","session","onMessage","addListener","request","sender","sendResponse","log","hide","getAssociatedTabId","remove","deleteTabIdAssociation","send","berytus","resolveRequest","rejectRequest","debug","plainContext","context","response","printSessionForSimiluationPrep","phase","showUi","sessionRecordPromise","document","registerRequestHandler","manager","getSigningKey","args","toArray","keyPair","window","private","getCredentialsMetadata","accountConstraints","schemaVersion","createChannel","scmActor","scmEd25519","webAppEd25519Pub","e2eeActvie","generateX25519Key","scmX25519","scmX25519Key","b64Spki","verifySignedKeyExchangeParameters","keyAgreement","canonicalJson","fingerprint","derivation","info","authentication","scm","exchange","base64","binaryString","base64ToArrayBuffer","verify","webAppSignature","reject","GeneralError","signatures","signKeyExchangeParameters","scmSignature","enableEndToEndEncryption","isChannelE2EReady","scmKey","sharedKey","generation","closeChannel","approveOperation","_context$channel$cons","_context$channel$cons2","operation","requests","constraints","account","Pending","changePassUrl","closeOperation","accountId","randomPassword","blocks","lang","num","Registration","sessionRecord","createdAccountId","date","Date","toISOString","registrationUri","uri","fields","userAttributes","closed","getRecordMetadata","selectedAccountId","updateMetadata","accountCreation","approveTransitionToAuthOp","currSessionId","nextSessionId","newAuthOp","currSessionRecordPromise","currSession","transitionedFromSessionId","getUserAttributes","requiredUserAttributes","requestedUserAttributes","required","updateUserAttributes","addField","_sessionRecord$putFie","field","createFieldOptions","find","o","putFields","clearValue","rejectFieldValue","_sessionRecord$fields","_sessionRecord$reject","_sessionRecord$create","fieldId","rejectedFieldValueIndex","rejectedFieldValues","findIndex","optionalNewValue","sameValue","newValue","reason","webAppDictatedValue","previousValues","accountAuthentication","approveChallengeRequest","challengeId","challenge","challenges","messages","abortChallenge","closeChallenge","respondToChallengeMessage","messageId","payload","ADJECTIVE_DESCRIPTORS","SEA_OBJECTS","SIZE_DESCRIPTORS","generate","conversions","utils","interfaceName","makeWrapper","newTarget","is","Impl","isImpl","convert","createDefaultIterator","iteratorPrototype","index","configurable","privateData","setup","_internalSetup","exposed","install","globalNames","globalName","curArg","arguments","V","tmp","nextItem","globals","desc","enumerable","typedKey","typedValue","esValue","callback","pairs","internal","tr46","infra","specialSchemes","ftp","file","http","https","ws","wss","failure","countSymbols","at","idx","isNaN","isSingleDot","toLowerCase","isWindowsDriveLetterString","containsForbiddenHostCodePoint","isSpecialScheme","isSpecial","isNotSpecial","defaultPort","parseIPv4Number","R","charAt","regex","parseHost","isOpaque","address","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","number","swaps","temp","parseIPv6","parseOpaqueHost","asciiDomain","beStrict","domainToASCII","parts","endsInANumber","numbers","part","n","ipv4","counter","parseIPv4","serializeIPv4","longestIndex","longestSize","foundIndex","foundSize","findTheIPv6AddressCompressedPieceIndex","ignore0","serializeIPv6","shortenPath","includesCredentials","URLStateMachine","encodingOverride","parseError","trimControlChars","trimTabAndNewline","state","atFlag","arrFlag","passwordTokenSeenFlag","cStr","ret","len","encodedCodePoints","fileOtherwiseCodePoints","startsWithWindowsDriveLetter","cp1","cp2","segment","remaining","queryPercentEncodePredicate","excludeFragment","pathURL","parseURL","serializeOrigin","integer","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","stringFromCharCode","mapDomain","array","ucs2decode","extra","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","inputLength","bias","basic","lastIndexOf","j","oldi","w","baseMinusT","currentValue","basicLength","handledCPCount","m","handledCPCountPlusOne","q","qMinusT","invokeTheCallbackFunction","callResult","construct","objectReference","MIMETypeParameters","serialize","_type","_subtype","_parameters","essence","isJavaScript","prohibitParameters","isXML","isHTML","makeException","ErrorType","toNumber","Number","evenRound","censorNegativeZero","round","integerPart","trunc","createIntegerConversion","unsigned","lowerBound","upperBound","twoToTheBitLength","twoToOneLessThanTheBitLength","enforceRange","isFinite","clamp","signMightNotMatch","modulo","createLongLongConversion","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","asBigIntN","BigInt","asUintN","asIntN","xBigInt","any","boolean","octet","short","long","double","float","fround","DOMString","treatNullAsEmptyString","ByteString","USVString","S","U","abByteLengthGetter","sabByteLengthGetter","isNonSharedArrayBuffer","isSharedArrayBuffer","isArrayBufferDetached","allowShared","dvByteLengthGetter","DataView","typedArrayNameGetter","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Uint8ClampedArray","Float32Array","Float64Array","func","article","ArrayBufferView","BufferSource","DOMTimeStamp","quoteOrBackslash","serialization","MIMEType","stringInput","urlRecord","fromURLRecord","encodedBody","mimeTypeBase64MatchResult","exec","stringBody","mimeTypeRecord","replaceByteInByteSequence","to","sequences","cp","list","strictlySplitByteSequence","indexOfEqual","nameString","valueString","parseUrlencoded","tuples","urlStateMachine","percentEncoding","sharedGlobalObject"],"sourceRoot":""}